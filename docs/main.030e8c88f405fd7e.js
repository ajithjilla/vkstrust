"use strict";var VU=Object.defineProperty,UU=Object.defineProperties,BU=Object.getOwnPropertyDescriptors,AO=Object.getOwnPropertySymbols,jU=Object.prototype.hasOwnProperty,$U=Object.prototype.propertyIsEnumerable,MO=(Je,we,P)=>we in Je?VU(Je,we,{enumerable:!0,configurable:!0,writable:!0,value:P}):Je[we]=P,xO=(Je,we)=>{for(var P in we||(we={}))jU.call(we,P)&&MO(Je,P,we[P]);if(AO)for(var P of AO(we))$U.call(we,P)&&MO(Je,P,we[P]);return Je},RO=(Je,we)=>UU(Je,BU(we));(self.webpackChunkangular_tour_of_heroes=self.webpackChunkangular_tour_of_heroes||[]).push([[179],{2011:(Je,we,P)=>{P.d(we,{hO:()=>He,xv:()=>de,Dh:()=>se,GT:()=>pe,cc:()=>Me,on:()=>H,pX:()=>re});var g=P(5e3),X=P(127),k=P(5813);Je=P.hmd(Je);const ae=["ngOnDestroy"],re=(Ce,Ge,Ze,De={})=>new Proxy(Ce,{get:(Ee,be)=>Ze.runOutsideAngular(()=>{var je;if(Ce[be])return(null===(je=null==De?void 0:De.spy)||void 0===je?void 0:je.get)&&De.spy.get(be,Ce[be]),Ce[be];if(ae.indexOf(be)>-1)return()=>{};const Be=Ge.toPromise().then($=>{const ve=$&&$[be];return"function"==typeof ve?ve.bind($):ve&&ve.then?ve.then(Z=>Ze.run(()=>Z)):Ze.run(()=>ve)});return new Proxy(()=>{},{get:($,ve)=>Be[ve],apply:($,ve,Z)=>Be.then(ie=>{var ee;const ye=ie&&ie(...Z);return(null===(ee=null==De?void 0:De.spy)||void 0===ee?void 0:ee.apply)&&De.spy.apply(be,Z,ye),ye})})})}),pe=(Ce,Ge)=>{Ge.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(De=>{Object.defineProperty(Ce.prototype,De,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,De))})})};class ue{constructor(Ge){return Ge}}const se=new g.OlP("angularfire2.app.options"),de=new g.OlP("angularfire2.app.name");function H(Ce,Ge,Ze){const Ee="object"==typeof Ze&&Ze||{};Ee.name=Ee.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const je=X.Z.apps.filter(Be=>Be&&Be.name===Ee.name)[0]||Ge.runOutsideAngular(()=>X.Z.initializeApp(Ce,Ee));try{JSON.stringify(Ce)!==JSON.stringify(je.options)&&j("error",`${je.name} Firebase App already initialized with different options${Je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Be){}return new ue(je)}const j=(Ce,...Ge)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Ce](...Ge)},te={provide:ue,useFactory:H,deps:[se,g.R0b,[new g.FiY,de]]};let He=(()=>{class Ce{constructor(Ze){X.Z.registerVersion("angularfire",k.q4.full,"core"),X.Z.registerVersion("angularfire",k.q4.full,"app-compat"),X.Z.registerVersion("angular",g.q4F.full,Ze.toString())}static initializeApp(Ze,De){return{ngModule:Ce,providers:[{provide:se,useValue:Ze},{provide:de,useValue:De}]}}}return Ce.\u0275fac=function(Ze){return new(Ze||Ce)(g.LFG(g.Lbi))},Ce.\u0275mod=g.oAB({type:Ce}),Ce.\u0275inj=g.cJS({providers:[te]}),Ce})();function Me(Ce,Ge,Ze,De,Ee){const[,be,je]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===Ce)||[];if(be)return function Ne(Ce,Ge){try{return Ce.toString()===Ge.toString()}catch(Ze){return Ce===Ge}}(Ee,je)||(he("error",`${Ge} was already initialized on the ${Ze} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:Ee,was:je})),be;{const Be=De();return globalThis.\u0275AngularfireInstanceCache.push([Ce,Be,Ee]),Be}}const Ue=!!Je.hot,he=(Ce,...Ge)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Ce](...Ge)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Je,we,P)=>{P.d(we,{q4:()=>po,iC:()=>ra,fc:()=>Jn,HU:()=>dd,vb:()=>cd,JM:()=>qp});var g=P(5e3),X=P(5867),k=P(5861),ae=P(9681),re=P(2090),pe=P(4859),ue=P(1877),se=P(8766);const de="@firebase/installations",H="0.5.9",te=`w:${H}`,He="FIS_v2",Ge=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ze(D){return D instanceof re.ZR&&D.code.includes("request-failed")}function De({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Ee(D){return{token:D.token,requestStatus:2,expiresIn:ie(D.expiresIn),creationTime:Date.now()}}function be(D,T){return je.apply(this,arguments)}function je(){return(je=(0,k.Z)(function*(D,T){const L=(yield T.json()).error;return Ge.create("request-failed",{requestName:D,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Be({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function $(D,{refreshToken:T}){const R=Be(D);return R.append("Authorization",function ee(D){return`${He} ${D}`}(T)),R}function ve(D){return Z.apply(this,arguments)}function Z(){return(Z=(0,k.Z)(function*(D){const T=yield D();return T.status>=500&&T.status<600?D():T})).apply(this,arguments)}function ie(D){return Number(D.replace("s","000"))}function ye(D,T){return oe.apply(this,arguments)}function oe(){return(oe=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:T},{fid:R}){const L=De(D),Y=Be(D),ne=T.getImmediate({optional:!0});if(ne){const dt=yield ne.getHeartbeatsHeader();dt&&Y.append("x-firebase-client",dt)}const Le={method:"POST",headers:Y,body:JSON.stringify({fid:R,authVersion:He,appId:D.appId,sdkVersion:te})},Ct=yield ve(()=>fetch(L,Le));if(Ct.ok){const dt=yield Ct.json();return{fid:dt.fid||R,registrationStatus:2,refreshToken:dt.refreshToken,authToken:Ee(dt.authToken)}}throw yield be("Create Installation",Ct)})).apply(this,arguments)}function Pe(D){return new Promise(T=>{setTimeout(T,D)})}const $t=/^[cdef][\w-]{21}$/;function Ye(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const R=function Xt(D){return function lt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return $t.test(R)?R:""}catch(D){return""}}function Sn(D){return`${D.appName}!${D.appId}`}const sn=new Map;function Yt(D,T){const R=Sn(D);Vt(R,T),function ss(D,T){const R=function mr(){return!Zr&&"BroadcastChannel"in self&&(Zr=new BroadcastChannel("[Firebase] FID Change"),Zr.onmessage=D=>{Vt(D.data.key,D.data.fid)}),Zr}();R&&R.postMessage({key:D,fid:T}),function Dr(){0===sn.size&&Zr&&(Zr.close(),Zr=null)}()}(R,T)}function Vt(D,T){const R=sn.get(D);if(R)for(const L of R)L(T)}let Zr=null;const Yr="firebase-installations-store";let Ci=null;function gt(){return Ci||(Ci=(0,se.X3)("firebase-installations-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(Yr)}})),Ci}function Qr(D,T){return En.apply(this,arguments)}function En(){return(En=(0,k.Z)(function*(D,T){const R=Sn(D),Y=(yield gt()).transaction(Yr,"readwrite"),ne=Y.objectStore(Yr),ge=yield ne.get(R);return yield ne.put(T,R),yield Y.done,(!ge||ge.fid!==T.fid)&&Yt(D,T.fid),T})).apply(this,arguments)}function An(D){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,k.Z)(function*(D){const T=Sn(D),L=(yield gt()).transaction(Yr,"readwrite");yield L.objectStore(Yr).delete(T),yield L.done})).apply(this,arguments)}function Jr(D,T){return zn.apply(this,arguments)}function zn(){return(zn=(0,k.Z)(function*(D,T){const R=Sn(D),Y=(yield gt()).transaction(Yr,"readwrite"),ne=Y.objectStore(Yr),ge=yield ne.get(R),Le=T(ge);return void 0===Le?yield ne.delete(R):yield ne.put(Le,R),yield Y.done,Le&&(!ge||ge.fid!==Le.fid)&&Yt(D,Le.fid),Le})).apply(this,arguments)}function On(D){return Di.apply(this,arguments)}function Di(){return(Di=(0,k.Z)(function*(D){let T;const R=yield Jr(D.appConfig,L=>{const Y=No(L),ne=Ht(D,Y);return T=ne.registrationPromise,ne.installationEntry});return""===R.fid?{installationEntry:yield T}:{installationEntry:R,registrationPromise:T}})).apply(this,arguments)}function No(D){return Js(D||{fid:Ye(),registrationStatus:0})}function Ht(D,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Ge.create("app-offline"))};const R={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},L=function ot(D,T){return vt.apply(this,arguments)}(D,R);return{installationEntry:R,registrationPromise:L}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:yr(D)}:{installationEntry:T}}function vt(){return(vt=(0,k.Z)(function*(D,T){try{const R=yield ye(D,T);return Qr(D.appConfig,R)}catch(R){throw Ze(R)&&409===R.customData.serverCode?yield An(D.appConfig):yield Qr(D.appConfig,{fid:T.fid,registrationStatus:0}),R}})).apply(this,arguments)}function yr(D){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,k.Z)(function*(D){let T=yield Bt(D.appConfig);for(;1===T.registrationStatus;)yield Pe(100),T=yield Bt(D.appConfig);if(0===T.registrationStatus){const{installationEntry:R,registrationPromise:L}=yield On(D);return L||R}return T})).apply(this,arguments)}function Bt(D){return Jr(D,T=>{if(!T)throw Ge.create("installation-not-found");return Js(T)})}function Js(D){return function _r(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function vr(D,T){return V.apply(this,arguments)}function V(){return(V=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:T},R){const L=q(D,R),Y=$(D,R),ne=T.getImmediate({optional:!0});if(ne){const dt=yield ne.getHeartbeatsHeader();dt&&Y.append("x-firebase-client",dt)}const Le={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:te,appId:D.appId}})},Ct=yield ve(()=>fetch(L,Le));if(Ct.ok)return Ee(yield Ct.json());throw yield be("Generate Auth Token",Ct)})).apply(this,arguments)}function q(D,{fid:T}){return`${De(D)}/${T}/authTokens:generate`}function W(D){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,k.Z)(function*(D,T=!1){let R;const L=yield Jr(D.appConfig,ne=>{if(!It(ne))throw Ge.create("not-registered");const ge=ne.authToken;if(!T&&hn(ge))return ne;if(1===ge.requestStatus)return R=G(D,T),ne;{if(!navigator.onLine)throw Ge.create("app-offline");const Le=Vn(ne);return R=Qe(D,Le),Le}});return R?yield R:L.authToken})).apply(this,arguments)}function G(D,T){return J.apply(this,arguments)}function J(){return(J=(0,k.Z)(function*(D,T){let R=yield xe(D.appConfig);for(;1===R.authToken.requestStatus;)yield Pe(100),R=yield xe(D.appConfig);const L=R.authToken;return 0===L.requestStatus?W(D,T):L})).apply(this,arguments)}function xe(D){return Jr(D,T=>{if(!It(T))throw Ge.create("not-registered");return function Tr(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Qe(D,T){return ht.apply(this,arguments)}function ht(){return(ht=(0,k.Z)(function*(D,T){try{const R=yield vr(D,T),L=Object.assign(Object.assign({},T),{authToken:R});return yield Qr(D.appConfig,L),R}catch(R){if(!Ze(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const L=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Qr(D.appConfig,L)}else yield An(D.appConfig);throw R}})).apply(this,arguments)}function It(D){return void 0!==D&&2===D.registrationStatus}function hn(D){return 2===D.requestStatus&&!function Et(D){const T=Date.now();return T<D.creationTime||D.creationTime+D.expiresIn<T+36e5}(D)}function Vn(D){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:T})}function Sa(){return(Sa=(0,k.Z)(function*(D){const T=D,{installationEntry:R,registrationPromise:L}=yield On(T);return L?L.catch(console.error):W(T).catch(console.error),R.fid})).apply(this,arguments)}function Aa(){return(Aa=(0,k.Z)(function*(D,T=!1){const R=D;return yield Un(R),(yield W(R,T)).token})).apply(this,arguments)}function Un(D){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,k.Z)(function*(D){const{registrationPromise:T}=yield On(D);T&&(yield T)})).apply(this,arguments)}function Po(D){return Ge.create("missing-app-config-values",{valueName:D})}const Vr="installations",ut=D=>{const T=D.getProvider("app").getImmediate(),R=function rr(D){if(!D||!D.options)throw Po("App Configuration");if(!D.name)throw Po("App Name");const T=["projectId","apiKey","appId"];for(const R of T)if(!D.options[R])throw Po(R);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(T);return{app:T,appConfig:R,heartbeatServiceProvider:(0,ae._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},tn=D=>{const T=D.getProvider("app").getImmediate(),R=(0,ae._getProvider)(T,Vr).getImmediate();return{getId:()=>function yu(D){return Sa.apply(this,arguments)}(R),getToken:Y=>function _u(D){return Aa.apply(this,arguments)}(R,Y)}};(function Ur(){(0,ae._registerComponent)(new pe.wA(Vr,ut,"PUBLIC")),(0,ae._registerComponent)(new pe.wA("installations-internal",tn,"PRIVATE"))})(),(0,ae.registerVersion)(de,H),(0,ae.registerVersion)(de,H,"esm2017");const Vi="@firebase/remote-config",Mn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Pp{constructor(T,R,L,Y){this.client=T,this.storage=R,this.storageCache=L,this.logger=Y}isCachedDataFresh(T,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-R,Y=L<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Y}.`),Y}fetch(T){var R=this;return(0,k.Z)(function*(){const[L,Y]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Y&&R.isCachedDataFresh(T.cacheMaxAgeMillis,L))return Y;T.eTag=Y&&Y.eTag;const ne=yield R.client.fetch(T),ge=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&ge.push(R.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(ge),ne})()}}function Hc(D=navigator){return D.languages&&D.languages[0]||D.language}class Er{constructor(T,R,L,Y,ne,ge){this.firebaseInstallations=T,this.sdkVersion=R,this.namespace=L,this.projectId=Y,this.apiKey=ne,this.appId=ge}fetch(T){var R=this;return(0,k.Z)(function*(){const[L,Y]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),ge=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Le={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Ct={sdk_version:R.sdkVersion,app_instance_id:L,app_instance_id_token:Y,app_id:R.appId,language_code:Hc()},dt={method:"POST",headers:Le,body:JSON.stringify(Ct)},jt=fetch(ge,dt),wt=new Promise((ui,li)=>{T.signal.addEventListener(()=>{const Uu=new Error("The operation was aborted.");Uu.name="AbortError",li(Uu)})});let br;try{yield Promise.race([jt,wt]),br=yield jt}catch(ui){let li="fetch-client-network";throw"AbortError"===ui.name&&(li="fetch-timeout"),Mn.create(li,{originalErrorMessage:ui.message})}let Xn=br.status;const fs=br.headers.get("ETag")||void 0;let Hr,ai;if(200===br.status){let ui;try{ui=yield br.json()}catch(li){throw Mn.create("fetch-client-parse",{originalErrorMessage:li.message})}Hr=ui.entries,ai=ui.state}if("INSTANCE_STATE_UNSPECIFIED"===ai?Xn=500:"NO_CHANGE"===ai?Xn=304:("NO_TEMPLATE"===ai||"EMPTY_CONFIG"===ai)&&(Hr={}),304!==Xn&&200!==Xn)throw Mn.create("fetch-status",{httpStatus:Xn});return{status:Xn,eTag:fs,config:Hr}})()}}class Op{constructor(T,R){this.client=T,this.storage=R}fetch(T){var R=this;return(0,k.Z)(function*(){const L=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(T,L)})()}attemptFetch(T,{throttleEndTimeMillis:R,backoffCount:L}){var Y=this;return(0,k.Z)(function*(){yield function xs(D,T){return new Promise((R,L)=>{const Y=Math.max(T-Date.now(),0),ne=setTimeout(R,Y);D.addEventListener(()=>{clearTimeout(ne),L(Mn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,R);try{const ne=yield Y.client.fetch(T);return yield Y.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function Gc(D){if(!(D instanceof re.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ne))throw ne;const ge={throttleEndTimeMillis:Date.now()+(0,re.$s)(L),backoffCount:L+1};return yield Y.storage.setThrottleMetadata(ge),Y.attemptFetch(T,ge)}})()}}class qc{constructor(T,R,L,Y,ne){this.app=T,this._client=R,this._storageCache=L,this._storage=Y,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function xl(D,T){const R=D.target.error||void 0;return Mn.create(T,{originalErrorMessage:R&&R.message})}const Rs="app_namespace_store";class Vp{constructor(T,R,L,Y=function Lp(){return new Promise((D,T)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=L=>{T(xl(L,"storage-open"))},R.onsuccess=L=>{D(L.target.result)},R.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(Rs,{keyPath:"compositeKey"})}}catch(R){T(Mn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=T,this.appName=R,this.namespace=L,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var R=this;return(0,k.Z)(function*(){const L=yield R.openDbPromise;return new Promise((Y,ne)=>{const Le=L.transaction([Rs],"readonly").objectStore(Rs),Ct=R.createCompositeKey(T);try{const dt=Le.get(Ct);dt.onerror=jt=>{ne(xl(jt,"storage-get"))},dt.onsuccess=jt=>{const wt=jt.target.result;Y(wt?wt.value:void 0)}}catch(dt){ne(Mn.create("storage-get",{originalErrorMessage:dt&&dt.message}))}})})()}set(T,R){var L=this;return(0,k.Z)(function*(){const Y=yield L.openDbPromise;return new Promise((ne,ge)=>{const Ct=Y.transaction([Rs],"readwrite").objectStore(Rs),dt=L.createCompositeKey(T);try{const jt=Ct.put({compositeKey:dt,value:R});jt.onerror=wt=>{ge(xl(wt,"storage-set"))},jt.onsuccess=()=>{ne()}}catch(jt){ge(Mn.create("storage-set",{originalErrorMessage:jt&&jt.message}))}})})()}delete(T){var R=this;return(0,k.Z)(function*(){const L=yield R.openDbPromise;return new Promise((Y,ne)=>{const Le=L.transaction([Rs],"readwrite").objectStore(Rs),Ct=R.createCompositeKey(T);try{const dt=Le.delete(Ct);dt.onerror=jt=>{ne(xl(jt,"storage-delete"))},dt.onsuccess=()=>{Y()}}catch(dt){ne(Mn.create("storage-delete",{originalErrorMessage:dt&&dt.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Wc{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,k.Z)(function*(){const R=T.storage.getLastFetchStatus(),L=T.storage.getLastSuccessfulFetchTimestampMillis(),Y=T.storage.getActiveConfig(),ne=yield R;ne&&(T.lastFetchStatus=ne);const ge=yield L;ge&&(T.lastSuccessfulFetchTimestampMillis=ge);const Le=yield Y;Le&&(T.activeConfig=Le)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function bu(){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,k.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(D){return!1}})).apply(this,arguments)}!function Oo(){(0,ae._registerComponent)(new pe.wA("remote-config",function D(T,{instanceIdentifier:R}){const L=T.getProvider("app").getImmediate(),Y=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Mn.create("registration-window");if(!(0,re.hl)())throw Mn.create("indexed-db-unavailable");const{projectId:ne,apiKey:ge,appId:Le}=L.options;if(!ne)throw Mn.create("registration-project-id");if(!ge)throw Mn.create("registration-api-key");if(!Le)throw Mn.create("registration-app-id");const Ct=new Vp(Le,L.name,R=R||"firebase"),dt=new Wc(Ct),jt=new ue.Yd(Vi);jt.logLevel=ue.in.ERROR;const wt=new Er(Y,ae.SDK_VERSION,R,ne,ge,Le),br=new Op(wt,Ct),Xn=new Pp(br,Ct,dt,jt),fs=new qc(L,Xn,dt,Ct,jt);return function on(D){const T=(0,re.m9)(D);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(fs),fs},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Vi,"0.3.8"),(0,ae.registerVersion)(Vi,"0.3.8","esm2017")}();const Zc="/firebase-messaging-sw.js",wr="/firebase-cloud-messaging-push-scope",to="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ko="google.c.a.c_id",Yc="google.c.a.c_l",Oh="google.c.a.ts",Qc="google.c.a.e";var Fo=(()=>{return(D=Fo||(Fo={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Fo;var D})();function Ar(D){const T=new Uint8Array(D);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Jc(D){const R=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(R),Y=new Uint8Array(L.length);for(let ne=0;ne<L.length;++ne)Y[ne]=L.charCodeAt(ne);return Y}const Mr="fcm_token_details_db",ei="fcm_token_object_Store";function Rl(D){return Xc.apply(this,arguments)}function Xc(){return Xc=(0,k.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(Mr))return null;let T=null;return(yield(0,se.X3)(Mr,5,{upgrade:(L=(0,k.Z)(function*(Y,ne,ge,Le){var Ct;if(ne<2||!Y.objectStoreNames.contains(ei))return;const dt=Le.objectStore(ei),jt=yield dt.index("fcmSenderId").get(D);if(yield dt.clear(),jt)if(2===ne){const wt=jt;if(!wt.auth||!wt.p256dh||!wt.endpoint)return;T={token:wt.fcmToken,createTime:null!==(Ct=wt.createTime)&&void 0!==Ct?Ct:Date.now(),subscriptionOptions:{auth:wt.auth,p256dh:wt.p256dh,endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:"string"==typeof wt.vapidKey?wt.vapidKey:Ar(wt.vapidKey)}}}else if(3===ne){const wt=jt;T={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:Ar(wt.auth),p256dh:Ar(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:Ar(wt.vapidKey)}}}else if(4===ne){const wt=jt;T={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:Ar(wt.auth),p256dh:Ar(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:Ar(wt.vapidKey)}}}}),function(ne,ge,Le,Ct){return L.apply(this,arguments)})})).close(),yield(0,se.Lj)(Mr),yield(0,se.Lj)("fcm_vapid_details_db"),yield(0,se.Lj)("undefined"),Nl(T)?T:null;var L}),Xc.apply(this,arguments)}function Nl(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:T}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const qi="firebase-messaging-store";let kh=null;function an(){return kh||(kh=(0,se.X3)("firebase-messaging-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(qi)}})),kh}function Pa(D){return ro.apply(this,arguments)}function ro(){return(ro=(0,k.Z)(function*(D){const T=sr(D),L=yield(yield an()).transaction(qi).objectStore(qi).get(T);if(L)return L;{const Y=yield Rl(D.appConfig.senderId);if(Y)return yield Qt(D,Y),Y}})).apply(this,arguments)}function Qt(D,T){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,k.Z)(function*(D,T){const R=sr(D),Y=(yield an()).transaction(qi,"readwrite");return yield Y.objectStore(qi).put(T,R),yield Y.done,T})).apply(this,arguments)}function Iu(D){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,k.Z)(function*(D){const T=sr(D),L=(yield an()).transaction(qi,"readwrite");yield L.objectStore(qi).delete(T),yield L.done})).apply(this,arguments)}function sr({appConfig:D}){return D.appId}const yn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function zi(D,T){return or.apply(this,arguments)}function or(){return(or=(0,k.Z)(function*(D,T){const R=yield Uo(D),L=Bo(T),Y={method:"POST",headers:R,body:JSON.stringify(L)};let ne;try{ne=yield(yield fetch(Wi(D.appConfig),Y)).json()}catch(ge){throw yn.create("token-subscribe-failed",{errorInfo:ge})}if(ne.error)throw yn.create("token-subscribe-failed",{errorInfo:ne.error.message});if(!ne.token)throw yn.create("token-subscribe-no-token");return ne.token})).apply(this,arguments)}function io(D,T){return us.apply(this,arguments)}function us(){return(us=(0,k.Z)(function*(D,T){const R=yield Uo(D),L=Bo(T.subscriptionOptions),Y={method:"PATCH",headers:R,body:JSON.stringify(L)};let ne;try{ne=yield(yield fetch(`${Wi(D.appConfig)}/${T.token}`,Y)).json()}catch(ge){throw yn.create("token-update-failed",{errorInfo:ge})}if(ne.error)throw yn.create("token-update-failed",{errorInfo:ne.error.message});if(!ne.token)throw yn.create("token-update-no-token");return ne.token})).apply(this,arguments)}function ka(D,T){return Si.apply(this,arguments)}function Si(){return(Si=(0,k.Z)(function*(D,T){const L={method:"DELETE",headers:yield Uo(D)};try{const ne=yield(yield fetch(`${Wi(D.appConfig)}/${T}`,L)).json();if(ne.error)throw yn.create("token-unsubscribe-failed",{errorInfo:ne.error.message})}catch(Y){throw yn.create("token-unsubscribe-failed",{errorInfo:Y})}})).apply(this,arguments)}function Wi({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Uo(D){return ft.apply(this,arguments)}function ft(){return(ft=(0,k.Z)(function*({appConfig:D,installations:T}){const R=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Bo({p256dh:D,auth:T,endpoint:R,vapidKey:L}){const Y={web:{endpoint:R,auth:T,p256dh:D}};return L!==to&&(Y.web.applicationPubKey=L),Y}const Cu=6048e5;function Fa(D){return kl.apply(this,arguments)}function kl(){return(kl=(0,k.Z)(function*(D){const T=yield pn(D.swRegistration,D.vapidKey),R={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:T.endpoint,auth:Ar(T.getKey("auth")),p256dh:Ar(T.getKey("p256dh"))},L=yield Pa(D.firebaseDependencies);if(L){if(so(L.subscriptionOptions,R))return Date.now()>=L.createTime+Cu?Ll(D,{token:L.token,createTime:Date.now(),subscriptionOptions:R}):L.token;try{yield ka(D.firebaseDependencies,L.token)}catch(Y){console.warn(Y)}return Lt(D.firebaseDependencies,R)}return Lt(D.firebaseDependencies,R)})).apply(this,arguments)}function La(D){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,k.Z)(function*(D){const T=yield Pa(D.firebaseDependencies);T&&(yield ka(D.firebaseDependencies,T.token),yield Iu(D.firebaseDependencies));const R=yield D.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Ll(D,T){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,k.Z)(function*(D,T){try{const R=yield io(D.firebaseDependencies,T),L=Object.assign(Object.assign({},T),{token:R,createTime:Date.now()});return yield Qt(D.firebaseDependencies,L),R}catch(R){throw yield La(D),R}})).apply(this,arguments)}function Lt(D,T){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,k.Z)(function*(D,T){const L={token:yield zi(D,T),createTime:Date.now(),subscriptionOptions:T};return yield Qt(D,L),L.token})).apply(this,arguments)}function pn(D,T){return jo.apply(this,arguments)}function jo(){return(jo=(0,k.Z)(function*(D,T){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Jc(T)})})).apply(this,arguments)}function so(D,T){return T.vapidKey===D.vapidKey&&T.endpoint===D.endpoint&&T.auth===D.auth&&T.p256dh===D.p256dh}function ti(D){const T={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Va(D,T){if(!T.notification)return;D.notification={};const R=T.notification.title;R&&(D.notification.title=R);const L=T.notification.body;L&&(D.notification.body=L);const Y=T.notification.image;Y&&(D.notification.image=Y)}(T,D),function Ul(D,T){!T.data||(D.data=T.data)}(T,D),function Up(D,T){if(!T.fcmOptions)return;D.fcmOptions={};const R=T.fcmOptions.link;R&&(D.fcmOptions.link=R);const L=T.fcmOptions.analytics_label;L&&(D.fcmOptions.analyticsLabel=L)}(T,D),T}function Du(D){return"object"==typeof D&&!!D&&ko in D}function Ua(D,T){const R=[];for(let L=0;L<D.length;L++)R.push(D.charAt(L)),L<T.length&&R.push(T.charAt(L));return R.join("")}function xn(D){return yn.create("missing-app-config-values",{valueName:D})}Ua("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ua("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ls{constructor(T,R,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Tu(D){if(!D||!D.options)throw xn("App Configuration Object");if(!D.name)throw xn("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:R}=D;for(const L of T)if(!R[L])throw xn(L);return{appName:D.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Y,installations:R,analyticsProvider:L}}_delete(){return Promise.resolve()}}function Ba(D){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,k.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Zc,{scope:wr}),D.swRegistration.update().catch(()=>{})}catch(T){throw yn.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function Ai(D,T){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,k.Z)(function*(D,T){if(!T&&!D.swRegistration&&(yield Ba(D)),T||!D.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw yn.create("invalid-sw-registration");D.swRegistration=T}})).apply(this,arguments)}function Su(D,T){return jl.apply(this,arguments)}function jl(){return(jl=(0,k.Z)(function*(D,T){T?D.vapidKey=T:D.vapidKey||(D.vapidKey=to)})).apply(this,arguments)}function ja(){return(ja=(0,k.Z)(function*(D,T){if(!navigator)throw yn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw yn.create("permission-blocked");return yield Su(D,null==T?void 0:T.vapidKey),yield Ai(D,null==T?void 0:T.serviceWorkerRegistration),Fa(D)})).apply(this,arguments)}function $o(D,T,R){return $l.apply(this,arguments)}function $l(){return($l=(0,k.Z)(function*(D,T,R){const L=$a(T);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:R[ko],message_name:R[Yc],message_time:R[Oh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function $a(D){switch(D){case Fo.NOTIFICATION_CLICKED:return"notification_open";case Fo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Hl(){return(Hl=(0,k.Z)(function*(D,T){const R=T.data;if(!R.isFirebaseMessaging)return;D.onMessageHandler&&R.messageType===Fo.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(ti(R)):D.onMessageHandler.next(ti(R)));const L=R.data;Du(L)&&"1"===L[Qc]&&(yield $o(D,R.messageType,L))})).apply(this,arguments)}const Ho="@firebase/messaging",ed=D=>{const T=new ls(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Bp(D,T){return Hl.apply(this,arguments)}(T,R)),T},Go=D=>{const T=D.getProvider("messaging").getImmediate();return{getToken:L=>function Au(D,T){return ja.apply(this,arguments)}(T,L)}};function qo(){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,k.Z)(function*(){try{yield(0,re.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function td(){(0,ae._registerComponent)(new pe.wA("messaging",ed,"PUBLIC")),(0,ae._registerComponent)(new pe.wA("messaging-internal",Go,"PRIVATE")),(0,ae.registerVersion)(Ho,"0.9.13"),(0,ae.registerVersion)(Ho,"0.9.13","esm2017")}();const nd="analytics",jp="firebase_id",cs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zo="https://www.googletagmanager.com/gtag/js",Zn=new ue.Yd("@firebase/analytics");function Vh(D){return Promise.all(D.map(T=>T.catch(R=>R)))}function oo(D,T){const R=document.createElement("script");R.src=`${zo}?l=${D}&id=${T}`,R.async=!0,document.head.appendChild(R)}function id(D,T,R,L,Y,ne){return xu.apply(this,arguments)}function xu(){return(xu=(0,k.Z)(function*(D,T,R,L,Y,ne){const ge=L[Y];try{if(ge)yield T[ge];else{const Ct=(yield Vh(R)).find(dt=>dt.measurementId===Y);Ct&&(yield T[Ct.appId])}}catch(Le){Zn.error(Le)}D("config",Y,ne)})).apply(this,arguments)}function Ru(D,T,R,L,Y){return ao.apply(this,arguments)}function ao(){return(ao=(0,k.Z)(function*(D,T,R,L,Y){try{let ne=[];if(Y&&Y.send_to){let ge=Y.send_to;Array.isArray(ge)||(ge=[ge]);const Le=yield Vh(R);for(const Ct of ge){const dt=Le.find(wt=>wt.measurementId===Ct),jt=dt&&T[dt.appId];if(!jt){ne=[];break}ne.push(jt)}}0===ne.length&&(ne=Object.values(T)),yield Promise.all(ne),D("event",L,Y||{})}catch(ne){Zn.error(ne)}})).apply(this,arguments)}function ln(){const D=window.document.getElementsByTagName("script");for(const T of Object.values(D))if(T.src&&T.src.includes(zo))return T;return null}const et=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Gl=new class Rn{constructor(T={},R=1e3){this.throttleMetadata=T,this.intervalMillis=R}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,R){this.throttleMetadata[T]=R}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function od(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Yi(D){return ql.apply(this,arguments)}function ql(){return(ql=(0,k.Z)(function*(D){var T;const{appId:R,apiKey:L}=D,Y={method:"GET",headers:od(L)},ne=cs.replace("{app-id}",R),ge=yield fetch(ne,Y);if(200!==ge.status&&304!==ge.status){let Le="";try{const Ct=yield ge.json();(null===(T=Ct.error)||void 0===T?void 0:T.message)&&(Le=Ct.error.message)}catch(Ct){}throw et.create("config-fetch-failed",{httpStatus:ge.status,responseMessage:Le})}return ge.json()})).apply(this,arguments)}function cn(D){return za.apply(this,arguments)}function za(){return(za=(0,k.Z)(function*(D,T=Gl,R){const{appId:L,apiKey:Y,measurementId:ne}=D.options;if(!L)throw et.create("no-app-id");if(!Y){if(ne)return{measurementId:ne,appId:L};throw et.create("no-api-key")}const ge=T.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Le=new ud;return setTimeout((0,k.Z)(function*(){Le.abort()}),void 0!==R?R:6e4),Mi({appId:L,apiKey:Y,measurementId:ne},ge,Le,T)})).apply(this,arguments)}function Mi(D,T,R){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,k.Z)(function*(D,{throttleEndTimeMillis:T,backoffCount:R},L,Y=Gl){const{appId:ne,measurementId:ge}=D;try{yield Nu(L,T)}catch(Le){if(ge)return Zn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ge} provided in the "measurementId" field in the local Firebase config. [${Le.message}]`),{appId:ne,measurementId:ge};throw Le}try{const Le=yield Yi(D);return Y.deleteThrottleMetadata(ne),Le}catch(Le){if(!ad(Le)){if(Y.deleteThrottleMetadata(ne),ge)return Zn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ge} provided in the "measurementId" field in the local Firebase config. [${Le.message}]`),{appId:ne,measurementId:ge};throw Le}const Ct=503===Number(Le.customData.httpStatus)?(0,re.$s)(R,Y.intervalMillis,30):(0,re.$s)(R,Y.intervalMillis),dt={throttleEndTimeMillis:Date.now()+Ct,backoffCount:R+1};return Y.setThrottleMetadata(ne,dt),Zn.debug(`Calling attemptFetch again in ${Ct} millis`),Mi(D,dt,L,Y)}})).apply(this,arguments)}function Nu(D,T){return new Promise((R,L)=>{const Y=Math.max(T-Date.now(),0),ne=setTimeout(R,Y);D.addEventListener(()=>{clearTimeout(ne),L(et.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function ad(D){if(!(D instanceof re.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}class ud{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function zl(){return bn.apply(this,arguments)}function bn(){return(bn=(0,k.Z)(function*(){if(!(0,re.hl)())return Zn.warn(et.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(D){return Zn.warn(et.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function Ko(){return(Ko=(0,k.Z)(function*(D,T,R,L,Y,ne,ge){var Le;const Ct=cn(D);Ct.then(Xn=>{R[Xn.measurementId]=Xn.appId,D.options.measurementId&&Xn.measurementId!==D.options.measurementId&&Zn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Xn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Xn=>Zn.error(Xn)),T.push(Ct);const dt=zl().then(Xn=>{if(Xn)return L.getId()}),[jt,wt]=yield Promise.all([Ct,dt]);ln()||oo(ne,jt.measurementId),Y("js",new Date);const br=null!==(Le=null==ge?void 0:ge.config)&&void 0!==Le?Le:{};return br.origin="firebase",br.update=!0,null!=wt&&(br[jp]=wt),Y("config",jt.measurementId,br),jt.measurementId})).apply(this,arguments)}class Os{constructor(T){this.app=T}_delete(){return delete ar[this.app.options.appId],Promise.resolve()}}let ar={},Pu=[];const ks={};let Yo,uo,Zo="dataLayer",Qo=!1;function Wa(D,T,R){!function Xo(){const D=[];if((0,re.ru)()&&D.push("This is a browser extension environment."),(0,re.zI)()||D.push("Cookies are not available."),D.length>0){const T=D.map((L,Y)=>`(${Y+1}) ${L}`).join(" "),R=et.create("invalid-analytics-context",{errorInfo:T});Zn.warn(R.message)}}();const L=D.options.appId;if(!L)throw et.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw et.create("no-api-key");Zn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ar[L])throw et.create("already-exists",{id:L});if(!Qo){!function Mu(D){let T=[];Array.isArray(window[D])?T=window[D]:window[D]=T}(Zo);const{wrappedGtag:ne,gtagCore:ge}=function $p(D,T,R,L,Y){let ne=function(...ge){window[L].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ne=window[Y]),window[Y]=function sd(D,T,R,L){function ne(){return(ne=(0,k.Z)(function*(ge,Le,Ct){try{"event"===ge?yield Ru(D,T,R,Le,Ct):"config"===ge?yield id(D,T,R,L,Le,Ct):D("set",Le)}catch(dt){Zn.error(dt)}})).apply(this,arguments)}return function Y(ge,Le,Ct){return ne.apply(this,arguments)}}(ne,D,T,R),{gtagCore:ne,wrappedGtag:window[Y]}}(ar,Pu,ks,Zo,"gtag");uo=ne,Yo=ge,Qo=!0}return ar[L]=function Wo(D,T,R,L,Y,ne,ge){return Ko.apply(this,arguments)}(D,Pu,ks,T,Yo,Zo,R),new Os(D)}function Yn(){return(Yn=(0,k.Z)(function*(D,T,R,L,Y){if(Y&&Y.global)D("event",R,L);else{const ne=yield T;D("event",R,Object.assign(Object.assign({},L),{send_to:ne}))}})).apply(this,arguments)}function ku(){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,k.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(D){return!1}})).apply(this,arguments)}const jr="@firebase/analytics";!function Vs(){(0,ae._registerComponent)(new pe.wA(nd,(T,{options:R})=>Wa(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ae._registerComponent)(new pe.wA("analytics-internal",function D(T){try{const R=T.getProvider(nd).getImmediate();return{logEvent:(L,Y,ne)=>function ea(D,T,R,L){D=(0,re.m9)(D),function Ls(D,T,R,L,Y){return Yn.apply(this,arguments)}(uo,ar[D.app.options.appId],T,R,L).catch(Y=>Zn.error(Y))}(R,L,Y,ne)}}catch(R){throw et.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ae.registerVersion)(jr,"0.7.9"),(0,ae.registerVersion)(jr,"0.7.9","esm2017")}();var ho=P(4408),_n=P(7565);const fo=new class Wl extends _n.v{}(class Fu extends ho.o{constructor(T,R){super(T,R),this.scheduler=T,this.work=R}schedule(T,R=0){return R>0?super.schedule(T,R):(this.delay=R,this.state=T,this.scheduler.flush(this),this)}execute(T,R){return R>0||this.closed?super.execute(T,R):this._execute(T,R)}requestAsyncId(T,R,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(T,R,L):T.flush(this)}});var Kl=P(4986),oi=P(8505),$r=P(5363),ta=P(9468);const po=new g.GfV("7.3.0"),go="__angularfire_symbol__analyticsIsSupportedValue",na="__angularfire_symbol__analyticsIsSupported",mo="__angularfire_symbol__remoteConfigIsSupportedValue",hs="__angularfire_symbol__remoteConfigIsSupported",Za="__angularfire_symbol__messagingIsSupportedValue",Ft="__angularfire_symbol__messagingIsSupported";function qp(D,T,R){if(T){if(1===T.length)return T[0];const ne=T.filter(ge=>ge.app===R);if(1===ne.length)return ne[0]}return R.container.getProvider(D).getImmediate({optional:!0})}globalThis[na]||(globalThis[na]=ku().then(D=>globalThis[go]=D).catch(()=>globalThis[go]=!1)),globalThis[Ft]||(globalThis[Ft]=qo().then(D=>globalThis[Za]=D).catch(()=>globalThis[Za]=!1)),globalThis[hs]||(globalThis[hs]=bu().then(D=>globalThis[mo]=D).catch(()=>globalThis[mo]=!1));const cd=(D,T)=>{const R=T?[T]:(0,X.C6)(),L=[];return R.forEach(Y=>{Y.container.getProvider(D).instances.forEach(ge=>{L.includes(ge)||L.push(ge)})}),L};function Bs(){}class xi{constructor(T,R=fo){this.zone=T,this.delegate=R}now(){return this.delegate.now()}schedule(T,R,L){const Y=this.zone;return this.delegate.schedule(function(ge){Y.runGuarded(()=>{T.apply(this,[ge])})},R,L)}}class Vu{constructor(T){this.zone=T,this.task=null}call(T,R){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Bs,{},Bs,Bs)),R.pipe((0,oi.b)({next:L,complete:L,error:L})).subscribe(T).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let dd=(()=>{class D{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new xi(Zone.current)),this.insideAngular=R.run(()=>new xi(Zone.current,Kl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(R){return new(R||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Xi(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Jn(D){return D.pipe((0,$r.Q)(Xi().outsideAngular))}function ra(D){return Xi(),function ia(D){return function(R){return(R=R.lift(new Vu(D.ngZone))).pipe((0,ta.R)(D.outsideAngular),(0,$r.Q)(D.insideAngular))}}(Xi())(D)}},2090:(Je,we,P)=>{P.d(we,{BH:()=>He,LL:()=>oe,ZR:()=>ye,zI:()=>Z,US:()=>pe,tV:()=>de,L:()=>se,$s:()=>Bt,r3:()=>Cr,Sg:()=>Me,ne:()=>Ci,vZ:()=>Zr,ZB:()=>j,pd:()=>Ts,m9:()=>vr,z$:()=>Ne,jU:()=>Ce,ru:()=>Ge,d:()=>De,xb:()=>Vt,w1:()=>Ee,hl:()=>$,uI:()=>Ue,UG:()=>he,b$:()=>Ze,G6:()=>Be,Mn:()=>be,xO:()=>Dr,zd:()=>Li,eu:()=>ve});const ae=function(V){const q=[];let W=0;for(let Ie=0;Ie<V.length;Ie++){let G=V.charCodeAt(Ie);G<128?q[W++]=G:G<2048?(q[W++]=G>>6|192,q[W++]=63&G|128):55296==(64512&G)&&Ie+1<V.length&&56320==(64512&V.charCodeAt(Ie+1))?(G=65536+((1023&G)<<10)+(1023&V.charCodeAt(++Ie)),q[W++]=G>>18|240,q[W++]=G>>12&63|128,q[W++]=G>>6&63|128,q[W++]=63&G|128):(q[W++]=G>>12|224,q[W++]=G>>6&63|128,q[W++]=63&G|128)}return q},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,q){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let G=0;G<V.length;G+=3){const J=V[G],xe=G+1<V.length,Qe=xe?V[G+1]:0,ht=G+2<V.length,It=ht?V[G+2]:0;let Vn=(15&Qe)<<2|It>>6,Tr=63&It;ht||(Tr=64,xe||(Vn=64)),Ie.push(W[J>>2],W[(3&J)<<4|Qe>>4],W[Vn],W[Tr])}return Ie.join("")},encodeString(V,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(V):this.encodeByteArray(ae(V),q)},decodeString(V,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(V):function(V){const q=[];let W=0,Ie=0;for(;W<V.length;){const G=V[W++];if(G<128)q[Ie++]=String.fromCharCode(G);else if(G>191&&G<224){const J=V[W++];q[Ie++]=String.fromCharCode((31&G)<<6|63&J)}else if(G>239&&G<365){const ht=((7&G)<<18|(63&V[W++])<<12|(63&V[W++])<<6|63&V[W++])-65536;q[Ie++]=String.fromCharCode(55296+(ht>>10)),q[Ie++]=String.fromCharCode(56320+(1023&ht))}else{const J=V[W++],xe=V[W++];q[Ie++]=String.fromCharCode((15&G)<<12|(63&J)<<6|63&xe)}}return q.join("")}(this.decodeStringToByteArray(V,q))},decodeStringToByteArray(V,q){this.init_();const W=q?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let G=0;G<V.length;){const J=W[V.charAt(G++)],Qe=G<V.length?W[V.charAt(G)]:0;++G;const It=G<V.length?W[V.charAt(G)]:64;++G;const Et=G<V.length?W[V.charAt(G)]:64;if(++G,null==J||null==Qe||null==It||null==Et)throw Error();Ie.push(J<<2|Qe>>4),64!==It&&(Ie.push(Qe<<4&240|It>>2),64!==Et&&Ie.push(It<<6&192|Et))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}},se=function(V){return function(V){const q=ae(V);return pe.encodeByteArray(q,!0)}(V).replace(/\./g,"")},de=function(V){try{return pe.decodeString(V,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function j(V,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return q}for(const W in q)!q.hasOwnProperty(W)||!te(W)||(V[W]=j(V[W],q[W]));return V}function te(V){return"__proto__"!==V}class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,W)=>{this.resolve=q,this.reject=W})}wrapCallback(q){return(W,Ie)=>{W?this.reject(W):this.resolve(Ie),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(W):q(W,Ie))}}}function Me(V,q){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=q||"demo-project",G=V.iat||0,J=V.sub||V.user_id;if(!J)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xe=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:G,exp:G+3600,auth_time:G,sub:J,user_id:J,firebase:{sign_in_provider:"custom",identities:{}}},V);return[se(JSON.stringify({alg:"none",type:"JWT"})),se(JSON.stringify(xe)),""].join(".")}function Ne(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function he(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(V){return!1}}function Ce(){return"object"==typeof self&&self.self===self}function Ge(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function Ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function De(){return Ne().indexOf("Electron/")>=0}function Ee(){const V=Ne();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function be(){return Ne().indexOf("MSAppHost/")>=0}function Be(){return!he()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $(){return"object"==typeof indexedDB}function ve(){return new Promise((V,q)=>{try{let W=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",G=self.indexedDB.open(Ie);G.onsuccess=()=>{G.result.close(),W||self.indexedDB.deleteDatabase(Ie),V(!0)},G.onupgradeneeded=()=>{W=!1},G.onerror=()=>{var J;q((null===(J=G.error)||void 0===J?void 0:J.message)||"")}}catch(W){q(W)}})}function Z(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ye extends Error{constructor(q,W,Ie){super(W),this.code=q,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oe.prototype.create)}}class oe{constructor(q,W,Ie){this.service=q,this.serviceName=W,this.errors=Ie}create(q,...W){const Ie=W[0]||{},G=`${this.service}/${q}`,J=this.errors[q],xe=J?function Pe(V,q){return V.replace(lt,(W,Ie)=>{const G=q[Ie];return null!=G?String(G):`<${Ie}?>`})}(J,Ie):"Error";return new ye(G,`${this.serviceName}: ${xe} (${G}).`,Ie)}}const lt=/\{\$([^}]+)}/g;function Cr(V,q){return Object.prototype.hasOwnProperty.call(V,q)}function Vt(V){for(const q in V)if(Object.prototype.hasOwnProperty.call(V,q))return!1;return!0}function Zr(V,q){if(V===q)return!0;const W=Object.keys(V),Ie=Object.keys(q);for(const G of W){if(!Ie.includes(G))return!1;const J=V[G],xe=q[G];if(mr(J)&&mr(xe)){if(!Zr(J,xe))return!1}else if(J!==xe)return!1}for(const G of Ie)if(!W.includes(G))return!1;return!0}function mr(V){return null!==V&&"object"==typeof V}function Dr(V){const q=[];for(const[W,Ie]of Object.entries(V))Array.isArray(Ie)?Ie.forEach(G=>{q.push(encodeURIComponent(W)+"="+encodeURIComponent(G))}):q.push(encodeURIComponent(W)+"="+encodeURIComponent(Ie));return q.length?"&"+q.join("&"):""}function Li(V){const q={};return V.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[G,J]=Ie.split("=");q[decodeURIComponent(G)]=decodeURIComponent(J)}}),q}function Ts(V){const q=V.indexOf("?");if(!q)return"";const W=V.indexOf("#",q);return V.substring(q,W>0?W:void 0)}function Ci(V,q){const W=new gt(V,q);return W.subscribe.bind(W)}class gt{constructor(q,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{q(this)}).catch(Ie=>{this.error(Ie)})}next(q){this.forEachObserver(W=>{W.next(q)})}error(q){this.forEachObserver(W=>{W.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,W,Ie){let G;if(void 0===q&&void 0===W&&void 0===Ie)throw new Error("Missing Observer.");G=function En(V,q){if("object"!=typeof V||null===V)return!1;for(const W of q)if(W in V&&"function"==typeof V[W])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:W,complete:Ie},void 0===G.next&&(G.next=An),void 0===G.error&&(G.error=An),void 0===G.complete&&(G.complete=An);const J=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?G.error(this.finalError):G.complete()}catch(xe){}}),this.observers.push(G),J}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,q)}sendOne(q,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{W(this.observers[q])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function An(){}function Bt(V,q=1e3,W=2){const Ie=q*Math.pow(W,V),G=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+G)}function vr(V){return V&&V._delegate?V._delegate:V}},412:(Je,we,P)=>{var g=P(5e3);let X=null;function k(){return X}const ue=new g.OlP("DocumentToken");let se=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function de(){return(0,g.LFG)(j)}()},providedIn:"platform"}),n})();const H=new g.OlP("Location Initialized");let j=(()=>{class n extends se{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){te()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){te()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function He(){return new j((0,g.LFG)(ue))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ne(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ce(n){const e=(0,g.LFG)(ue).location;return new Ze((0,g.LFG)(se),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ge=new g.OlP("appBaseHref");let Ze=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+Ue(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+Ue(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(se),g.LFG(Ge,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+Ue(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+Ue(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(se),g.LFG(Ge,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ee=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ne(Be(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=Me,n.stripTrailingSlash=Ne,n.\u0275fac=function(t){return new(t||n)(g.LFG(he),g.LFG(se))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function be(){return new Ee((0,g.LFG)(he),(0,g.LFG)(se))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}let Bi=(()=>{class n{constructor(t,r,i,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})(),Wn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new on,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Eu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Eu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class on{constructor(){this.$implicit=null,this.ngIf=null}}function Eu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let Qc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function Lo(n){return"server"===n}let Nl=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new Vo((0,g.LFG)(ue),window)}),n})();class Vo{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function qi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Pl(this.window.history)||Pl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Pl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ro extends class Pa extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){X||(X=n)}(new ro)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Oa(){return Qt=Qt||document.querySelector("base"),Qt?Qt.getAttribute("href"):null}();return null==t?null:function Ns(n){Iu=Iu||document.createElement("a"),Iu.setAttribute("href",n);const e=Iu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Qt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function xa(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Iu,Qt=null;const sr=new g.OlP("TRANSITION_ID"),yn=[{provide:g.ip1,useFactory:function Ol(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[sr,ue,g.zs3],multi:!0}];class zi{static init(){(0,g.VLi)(new zi)}addToWindow(e){g.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const i=g.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const f=function(_){c=c||_,u--,0==u&&r(c)};i.forEach(function(_){_.whenStable(f)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let or=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const io=new g.OlP("EventManagerPlugins");let us=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(io),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class ka{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Si=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Wi=(()=>{class n extends Si{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Uo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Uo))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Uo(n){k().remove(n)}const ft={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Bo=/%COMP%/g;function Ae(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ae(n,i,t):(i=i.replace(Bo,n),t.push(i))}return t}function Lt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let pn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new jo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Va(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case g.ifc.ShadowDom:return new Ul(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ae(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(us),g.LFG(Wi),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class jo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ft[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=ft[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ft[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,i&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Lt(r)):this.eventManager.addEventListener(e,t,Lt(r))}}class Va extends jo{constructor(e,t,r,i){super(e),this.component=r;const u=Ae(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Fl(n){return"_ngcontent-%COMP%".replace(Bo,n)}(i+"-"+r.id),this.hostAttr=function Ll(n){return"_nghost-%COMP%".replace(Bo,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ul extends jo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ae(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const f=document.createElement("style");f.textContent=u[c],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Up=(()=>{class n extends ka{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Du=["alt","control","meta","shift"],Tu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ls={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ba=(()=>{class n extends ka{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="";if(Du.forEach(_=>{const b=r.indexOf(_);b>-1&&(r.splice(b,1),c+=_+".")}),c+=u,0!=r.length||0===u.length)return null;const f={};return f.domEventName=i,f.fullKey=c,f}static getEventFullKey(t){let r="",i=function Ps(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&xn.hasOwnProperty(e)&&(e=xn[e]))}return Tu[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Du.forEach(u=>{u!=i&&ls[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Au=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function Ai(){ro.makeCurrent(),zi.init()},multi:!0},{provide:ue,useFactory:function Su(){return(0,g.RDi)(document),document},deps:[]}]),ja=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Bl(){return new g.qLn},deps:[]},{provide:io,useClass:Up,multi:!0,deps:[ue,g.R0b,g.Lbi]},{provide:io,useClass:Ba,multi:!0,deps:[ue]},{provide:pn,useClass:pn,deps:[us,Wi,g.AFp]},{provide:g.FYo,useExisting:pn},{provide:Si,useExisting:Wi},{provide:Wi,useClass:Wi,deps:[ue]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:us,useClass:us,deps:[io,g.R0b]},{provide:class an{},useClass:or,deps:[]}];let $o=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:sr,useExisting:g.AFp},yn]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:ja,imports:[Qc,g.hGG]}),n})();"undefined"!=typeof window&&window;var ln=P(8996),qa=P(7669);function et(...n){const e=(0,qa.yG)(n);return(0,ln.D)(n,e)}var ni=P(7579);class ri extends ni.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Rn=P(8306);const{isArray:Gl}=Array,{getPrototypeOf:od,prototype:Yi,keys:ql}=Object;function cn(n){if(1===n.length){const e=n[0];if(Gl(e))return{args:e,keys:null};if(function za(n){return n&&"object"==typeof n&&od(n)===Yi}(e)){const t=ql(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Mi=P(4671),Ot=P(4004);const{isArray:Nu}=Array;function ud(n){return(0,Ot.U)(e=>function ad(n,e){return Nu(e)?n(...e):n(e)}(n,e))}function zl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var bn=P(5403),Wo=P(9672);function ar(n,e,t){n?(0,Wo.f)(t,n,e):e()}var Pu=P(576);function ks(n,e){const t=(0,Pu.m)(n)?n:()=>n,r=i=>i.error(t());return new Rn.y(e?i=>e.schedule(r,0,i):r)}const Fs=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Yo=P(8189);function Qo(...n){return function uo(){return(0,Yo.J)(1)}()((0,ln.D)(n,(0,qa.yG)(n)))}var Jo=P(8421);function Xo(n){return new Rn.y(e=>{(0,Jo.Xf)(n()).subscribe(e)})}var Wa=P(515),Ls=P(727),Yn=P(4482);function lo(){return(0,Yn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,bn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ou extends Rn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Yn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ls.w0;const t=this.getSubject();e.add(this.source.subscribe((0,bn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ls.w0.EMPTY)}return e}refCount(){return lo()(this)}}function In(n,e){return(0,Yn.e)((t,r)=>{let i=null,u=0,c=!1;const f=()=>c&&!i&&r.complete();t.subscribe((0,bn.x)(r,_=>{null==i||i.unsubscribe();let b=0;const A=u++;(0,Jo.Xf)(n(_,A)).subscribe(i=(0,bn.x)(r,M=>r.next(e?e(_,M,A,b++):M),()=>{i=null,f()}))},()=>{c=!0,f()}))})}var co=P(5698);function Qi(...n){const e=(0,qa.yG)(n);return(0,Yn.e)((t,r)=>{(e?Qo(n,t,e):Qo(n,t)).subscribe(r)})}function ds(n,e,t,r,i){return(u,c)=>{let f=t,_=e,b=0;u.subscribe((0,bn.x)(c,A=>{const M=b++;_=f?n(_,A,M):(f=!0,A),r&&c.next(_)},i&&(()=>{f&&c.next(_),c.complete()})))}}function Ji(n,e){return(0,Yn.e)(ds(n,e,arguments.length>=2,!0))}function ii(n,e){return(0,Yn.e)((t,r)=>{let i=0;t.subscribe((0,bn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}function si(n){return(0,Yn.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,bn.x)(t,void 0,void 0,c=>{u=(0,Jo.Xf)(n(c,si(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Cn=P(5577);function ku(n,e){return(0,Pu.m)(e)?(0,Cn.z)(n,e,1):(0,Cn.z)(n,1)}function Ka(n){return n<=0?()=>Wa.E:(0,Yn.e)((e,t)=>{let r=[];e.subscribe((0,bn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function gn(n=Hp){return(0,Yn.e)((e,t)=>{let r=!1;e.subscribe((0,bn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Hp(){return new Fs}function Gp(n){return(0,Yn.e)((e,t)=>{let r=!1;e.subscribe((0,bn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ea(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ii((i,u)=>n(i,u,r)):Mi.y,(0,co.q)(1),t?Gp(e):gn(()=>new Fs))}var jr=P(8505);class Vs{constructor(e,t){this.id=e,this.url=t}}class ho extends Vs{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Fu extends Vs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _n extends Vs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Wl extends Vs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class fo extends Vs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Iy extends Vs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kl extends Vs{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class oi extends Vs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $r extends Vs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ta{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class po{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class go{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class na{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mo{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hs{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Za{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ft="primary";class Lu{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Qn(n){return new Lu(n)}const Ya="ngNavigationCancelingError";function Us(n){const e=Error("NavigationCancelingError: "+n);return e[Ya]=!0,e}function cd(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],f=n[u];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function xi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!Vu(n[i],e[i]))return!1;return!0}function Vu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function dd(n){return Array.prototype.concat.apply([],n)}function Xi(n){return n.length>0?n[n.length-1]:null}function dn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Jn(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,ln.D)(Promise.resolve(n)):et(n)}const ra={exact:function D(n,e,t){if(!dt(n.segments,e.segments)||!Y(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!D(n.children[r],e.children[r],t))return!1;return!0},subset:R},ia={exact:function hd(n,e){return xi(n,e)},subset:function T(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Vu(n[t],e[t]))},ignored:()=>!0};function yo(n,e,t){return ra[t.paths](n.root,e.root,t.matrixParams)&&ia[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function R(n,e,t){return L(n,e,e.segments,t)}function L(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!dt(i,t)||e.hasChildren()||!Y(i,t,r))}if(n.segments.length===t.length){if(!dt(n.segments,t)||!Y(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!R(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(dt(n.segments,i)&&Y(n.segments,i,r)&&n.children[Ft])&&L(n.children[Ft],e,u,r)}}function Y(n,e,t){return e.every((r,i)=>ia[t](n[i].parameters,r.parameters))}class ne{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qn(this.queryParams)),this._queryParamMap}toString(){return Xn.serialize(this)}}class ge{constructor(e,t){this.segments=e,this.children=t,this.parent=null,dn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fs(this)}}class Le{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Qn(this.parameters)),this._parameterMap}toString(){return ju(this)}}function dt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class wt{}class br{parse(e){const t=new Ty(e);return new ne(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Hr(e.root,!0)}`,r=function Wp(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ui(t)}=${ui(i)}`).join("&"):`${ui(t)}=${ui(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function li(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Xn=new br;function fs(n){return n.segments.map(e=>ju(e)).join("/")}function Hr(n,e){if(!n.hasChildren())return fs(n);if(e){const t=n.children[Ft]?Hr(n.children[Ft],!1):"",r=[];return dn(n.children,(i,u)=>{u!==Ft&&r.push(`${u}:${Hr(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function jt(n,e){let t=[];return dn(n.children,(r,i)=>{i===Ft&&(t=t.concat(e(r,i)))}),dn(n.children,(r,i)=>{i!==Ft&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Ft?[Hr(n.children[Ft],!1)]:[`${i}:${Hr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ft]?`${fs(n)}/${t[0]}`:`${fs(n)}/(${t.join("//")})`}}function ai(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ui(n){return ai(n).replace(/%3B/gi,";")}function Uu(n){return ai(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bu(n){return decodeURIComponent(n)}function Yl(n){return Bu(n.replace(/\+/g,"%20"))}function ju(n){return`${Uu(n.path)}${function zp(n){return Object.keys(n).map(e=>`;${Uu(e)}=${Uu(n[e])}`).join("")}(n.parameters)}`}const Uh=/^[^\/()?;=#]+/;function _o(n){const e=n.match(Uh);return e?e[0]:""}const Ql=/^[^=?&#]+/,Kp=/^[^&#]+/;class Ty{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ft]=new ge(e,t)),r}parseSegment(){const e=_o(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Le(Bu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=_o(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=_o(this.remaining);i&&(r=i,this.capture(r))}e[Bu(t)]=Bu(r)}parseQueryParam(e){const t=function Dy(n){const e=n.match(Ql);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Zp(n){const e=n.match(Kp);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Yl(t),u=Yl(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=_o(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Ft);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Ft]:new ge([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Yp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Bh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Bh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=$u(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return $u(e,this._root).map(t=>t.value)}}function Bh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Bh(n,t);if(r)return r}return null}function $u(n,e){if(n===e.value)return[e];for(const t of e.children){const r=$u(n,t);if(r.length)return r.unshift(e),r}return[]}class vo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Eo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class fd extends Yp{constructor(e,t){super(e),this.snapshot=t,gd(this,e)}toString(){return this.snapshot.toString()}}function Qa(n,e){const t=function Sy(n,e){const c=new sa([],{},{},"",{},Ft,e,null,n.root,-1,{});return new jh("",new vo(c,[]))}(n,e),r=new ri([new Le("",{})]),i=new ri({}),u=new ri({}),c=new ri({}),f=new ri(""),_=new Hu(r,i,c,f,u,Ft,e,t.root);return _.snapshot=t.root,new fd(new vo(_,[]),t)}class Hu{constructor(e,t,r,i,u,c,f,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ot.U)(e=>Qn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ot.U)(e=>Qn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ay(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function pd(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class sa{constructor(e,t,r,i,u,c,f,_,b,A,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this.routeConfig=_,this._urlSegment=b,this._lastPathIndex=A,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class jh extends Yp{constructor(e,t){super(t),this.url=e,gd(this,t)}toString(){return $h(this._root)}}function gd(n,e){e.value._routerState=n,e.children.forEach(t=>gd(n,t))}function $h(n){const e=n.children.length>0?` { ${n.children.map($h).join(", ")} } `:"";return`${n.value}${e}`}function md(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,xi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),xi(e.params,t.params)||n.params.next(t.params),function Bs(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!xi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),xi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Hh(n,e){const t=xi(n.params,e.params)&&function Ct(n,e){return dt(n,e)&&n.every((t,r)=>xi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Hh(n.parent,e.parent))}function Jl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function My(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Jl(n,r,i);return Jl(n,r)})}(n,e,t);return new vo(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>Jl(n,f)),c}}const r=function xy(n){return new Hu(new ri(n.url),new ri(n.params),new ri(n.queryParams),new ri(n.fragment),new ri(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Jl(n,u));return new vo(r,i)}}function js(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Xl(n){return"object"==typeof n&&null!=n&&n.outlets}function yd(n,e,t,r,i){let u={};if(r&&dn(r,(f,_)=>{u[_]=Array.isArray(f)?f.map(b=>`${b}`):`${f}`}),n===e)return new ne(t,u,i);const c=Ry(n,e,t);return new ne(c,u,i)}function Ry(n,e,t){const r={};return dn(n.children,(i,u)=>{r[u]=i===e?t:Ry(i,e,t)}),new ge(n.segments,r)}class Jp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&js(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Xl);if(i&&i!==Xi(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class _d{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ng(n,e,t){if(n||(n=new ge([],{})),0===n.segments.length&&n.hasChildren())return vd(n,e,t);const r=function Z0(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],f=t[r];if(Xl(f))break;const _=`${f}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&b&&"object"==typeof b&&void 0===b.outlets){if(!ps(_,b,c))return u;r+=2}else{if(!ps(_,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new ge(n.segments.slice(0,r.pathIndex),{});return u.children[Ft]=new ge(n.segments.slice(r.pathIndex),n.children),vd(u,0,i)}return r.match&&0===i.length?new ge(n.segments,{}):r.match&&!n.hasChildren()?rg(n,e,t):r.match?vd(n,0,i):rg(n,e,t)}function vd(n,e,t){if(0===t.length)return new ge(n.segments,{});{const r=function tg(n){return Xl(n[0])?n[0].outlets:{[Ft]:n}}(t),i={};return dn(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=ng(n.children[c],e,u))}),dn(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new ge(n.segments,i)}}function rg(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Xl(u)){const _=$s(u.outlets);return new ge(r,_)}if(0===i&&js(t[0])){r.push(new Le(n.segments[e].path,Gh(t[0]))),i++;continue}const c=Xl(u)?u.outlets[Ft]:`${u}`,f=i<t.length-1?t[i+1]:null;c&&f&&js(f)?(r.push(new Le(c,Gh(f))),i+=2):(r.push(new Le(c,{})),i++)}return new ge(r,{})}function $s(n){const e={};return dn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=rg(new ge([],{}),0,t))}),e}function Gh(n){const e={};return dn(n,(t,r)=>e[r]=`${t}`),e}function ps(n,e,t){return n==t.path&&xi(e,t.parameters)}class ig{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),md(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Eo(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),dn(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Eo(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Eo(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Eo(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new hs(u.value.snapshot))}),e.children.length&&this.forwardEvent(new na(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(md(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),md(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=function Ed(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=f?f.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=_,c.outlet&&c.outlet.activateWith(i,_),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class wd{constructor(e,t){this.routes=e,this.module=t}}function Xa(n){return"function"==typeof n}function Gu(n){return n instanceof ne}const bd=Symbol("INITIAL_VALUE");function qu(){return In(n=>function Ko(...n){const e=(0,qa.yG)(n),t=(0,qa.jO)(n),{args:r,keys:i}=cn(n);if(0===r.length)return(0,ln.D)([],e);const u=new Rn.y(function Os(n,e,t=Mi.y){return r=>{ar(e,()=>{const{length:i}=n,u=new Array(i);let c=i,f=i;for(let _=0;_<i;_++)ar(e,()=>{const b=(0,ln.D)(n[_],e);let A=!1;b.subscribe((0,bn.x)(r,M=>{u[_]=M,A||(A=!0,f--),f||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>zl(i,c):Mi.y));return t?u.pipe(ud(t)):u}(n.map(e=>e.pipe((0,co.q)(1),Qi(bd)))).pipe(Ji((e,t)=>{let r=!1;return t.reduce((i,u,c)=>i!==bd?i:(u===bd&&(r=!0),r||!1!==u&&c!==t.length-1&&!Gu(u)?i:u),e)},bd),ii(e=>e!==bd),(0,Ot.U)(e=>Gu(e)?e:!0===e),(0,co.q)(1)))}class Ny{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new zu,this.attachRef=null}}class zu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Ny,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let tc=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=u||Ft,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,_=new Py(t,f,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(zu),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Py{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Hu?this.route:e===zu?this.childContexts:this.parent.get(e,t)}}let Wh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[tc],encapsulation:2}),n})();function eu(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Kh(r,Zh(e,r))}}function Kh(n,e){n.children&&eu(n.children,e)}function Zh(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Yh(n){const e=n.children&&n.children.map(Yh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ft&&(t.component=Wh),t}function Gt(n){return n.outlet||Ft}function og(n,e){const t=n.filter(r=>Gt(r)===e);return t.push(...n.filter(r=>Gt(r)!==e)),t}const ag={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Wu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},ag):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||cd)(t,n,e);if(!u)return Object.assign({},ag);const c={};dn(u.posParams,(_,b)=>{c[b]=_.path});const f=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:f,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Ku(n,e,t,r,i="corrected"){if(t.length>0&&function Fy(n,e,t){return t.some(r=>aa(n,e,r)&&Gt(r)!==Ft)}(n,t,r)){const c=new ge(e,function ky(n,e,t,r){const i={};i[Ft]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Gt(u)!==Ft){const c=new ge([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Gt(u)]=c}return i}(n,e,r,new ge(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function Ly(n,e,t){return t.some(r=>aa(n,e,r))}(n,t,r)){const c=new ge(n.segments,function Oy(n,e,t,r,i,u){const c={};for(const f of r)if(aa(n,t,f)&&!i[Gt(f)]){const _=new ge([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[Gt(f)]=_}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new ge(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function aa(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Vy(n,e,t,r){return!!(Gt(n)===r||r!==Ft&&aa(e,t,n))&&("**"===n.path||Wu(e,n,t).matched)}function ug(n,e,t){return 0===e.length&&!n.children[t]}class ua{constructor(e){this.segmentGroup=e||null}}class xr{constructor(e){this.urlTree=e}}function tu(n){return ks(new ua(n))}function Qh(n){return ks(new xr(n))}class Id{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=Ku(this.urlTree.root,[],[],this.config).segmentGroup,t=new ge(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ft).pipe((0,Ot.U)(u=>this.createUrlTree(nc(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(si(u=>{if(u instanceof xr)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ua?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ft).pipe((0,Ot.U)(i=>this.createUrlTree(nc(i),e.queryParams,e.fragment))).pipe(si(i=>{throw i instanceof ua?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new ge([],{[Ft]:e}):e;return new ne(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ot.U)(u=>new ge([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,ln.D)(i).pipe(ku(u=>{const c=r.children[u],f=og(t,u);return this.expandSegmentGroup(e,f,c,u).pipe((0,Ot.U)(_=>({segment:_,outlet:u})))}),Ji((u,c)=>(u[c.outlet]=c.segment,u),{}),function by(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ii((i,u)=>n(i,u,r)):Mi.y,Ka(1),t?Gp(e):gn(()=>new Fs))}())}expandSegment(e,t,r,i,u,c){return(0,ln.D)(r).pipe(ku(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,u,c).pipe(si(b=>{if(b instanceof ua)return et(null);throw b}))),ea(f=>!!f),si((f,_)=>{if(f instanceof Fs||"EmptyError"===f.name)return ug(t,i,u)?et(new ge([],{})):tu(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,u,c,f){return Vy(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):tu(t):tu(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Qh(u):this.lineralizeSegments(r,u).pipe((0,Cn.z)(c=>{const f=new ge(c,{});return this.expandSegment(e,f,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:f,consumedSegments:_,remainingSegments:b,positionalParamSegments:A}=Wu(t,i,u);if(!f)return tu(t);const M=this.applyRedirectCommands(_,i.redirectTo,A);return i.redirectTo.startsWith("/")?Qh(M):this.lineralizeSegments(i,M).pipe((0,Cn.z)(F=>this.expandSegment(e,t,r,F.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?et(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Ot.U)(M=>(r._loadedConfig=M,new ge(i,{})))):et(new ge(i,{}));const{matched:c,consumedSegments:f,remainingSegments:_}=Wu(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,Cn.z)(A=>{const M=A.module,F=A.routes,{segmentGroup:U,slicedSegments:z}=Ku(t,f,_,F),le=new ge(U.segments,U.children);if(0===z.length&&le.hasChildren())return this.expandChildren(M,F,le).pipe((0,Ot.U)(Xe=>new ge(f,Xe)));if(0===F.length&&0===z.length)return et(new ge(f,{}));const Se=Gt(r)===u;return this.expandSegment(M,le,F,z,Se?Ft:u,!0).pipe((0,Ot.U)(it=>new ge(f.concat(it.segments),it.children)))})):tu(t)}getChildConfig(e,t,r){return t.children?et(new wd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?et(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Cn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Ot.U)(u=>(t._loadedConfig=u,u))):function ur(n){return ks(Us(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):et(new wd([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?et(i.map(c=>{const f=e.get(c);let _;if(function qh(n){return n&&Xa(n.canLoad)}(f))_=f.canLoad(t,r);else{if(!Xa(f))throw new Error("Invalid CanLoad guard");_=f(t,r)}return Jn(_)})).pipe(qu(),(0,jr.b)(c=>{if(!Gu(c))return;const f=Us(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw f.url=c,f}),(0,Ot.U)(c=>!0===c)):et(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return et(r);if(i.numberOfChildren>1||!i.children[Ft])return ks(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Ft]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new ne(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return dn(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[u]=t[f]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return dn(t.children,(f,_)=>{c[_]=this.createSegmentGroup(e,f,r,i)}),new ge(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function nc(n){const e={};for(const r of Object.keys(n.children)){const u=nc(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Uy(n){if(1===n.numberOfChildren&&n.children[Ft]){const e=n.children[Ft];return new ge(n.segments.concat(e.segments),e.children)}return n}(new ge(n.segments,e))}class ci{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class wo{constructor(e,t){this.component=e,this.route=t}}function cg(n,e,t){const r=n._root;return ru(r,e?e._root:null,t,[r.value])}function Zu(n,e,t){const r=function Xh(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function ru(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Eo(e);return n.children.forEach(c=>{(function hg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const _=function By(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!dt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!dt(n.url,e.url)||!xi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Hh(n,e)||!xi(n.queryParams,e.queryParams);default:return!Hh(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new ci(r)):(u.data=c.data,u._resolvedData=c._resolvedData),ru(n,e,u.component?f?f.children:null:t,r,i),_&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new wo(f.outlet.component,c))}else c&&di(e,f,i),i.canActivateChecks.push(new ci(r)),ru(n,null,u.component?f?f.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),dn(u,(c,f)=>di(c,t.getContext(f),i)),i}function di(n,e,t){const r=Eo(n),i=n.value;dn(r,(u,c)=>{di(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new wo(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class gg{}function Hs(n){return new Rn.y(e=>e.error(n))}class mg{constructor(e,t,r,i,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=Ku(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ft);if(null===t)return null;const r=new sa([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ft,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new vo(r,t),u=new jh(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=Ay(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],f=og(e,u),_=this.processSegmentGroup(f,c,u);if(null===_)return null;r.push(..._)}const i=_g(r);return function yg(n){n.sort((e,t)=>e.value.outlet===Ft?-1:t.value.outlet===Ft?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,i);if(null!==c)return c}return ug(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Vy(e,t,r,i))return null;let u,c=[],f=[];if("**"===e.path){const U=r.length>0?Xi(r).parameters:{};u=new sa(r,U,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),Gt(e),e.component,e,iu(t),gs(t)+r.length,h(e))}else{const U=Wu(t,e,r);if(!U.matched)return null;c=U.consumedSegments,f=U.remainingSegments,u=new sa(c,U.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),Gt(e),e.component,e,iu(t),gs(t)+c.length,h(e))}const _=function Hy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:A}=Ku(t,c,f,_.filter(U=>void 0===U.redirectTo),this.relativeLinkResolution);if(0===A.length&&b.hasChildren()){const U=this.processChildren(_,b);return null===U?null:[new vo(u,U)]}if(0===_.length&&0===A.length)return[new vo(u,[])];const M=Gt(e)===i,F=this.processSegment(_,b,A,M?Ft:i);return null===F?null:[new vo(u,F)]}}function nf(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function _g(n){const e=[],t=new Set;for(const r of n){if(!nf(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=_g(r.children);e.push(new vo(r.value,i))}return e.filter(r=>!t.has(r))}function iu(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function gs(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function y(n){return n.data||{}}function h(n){return n.resolve||{}}function K(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ke(n){return In(e=>{const t=n(e);return t?(0,ln.D)(t).pipe((0,Ot.U)(()=>e)):et(e)})}class ct extends class mt{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Dn=new g.OlP("ROUTES");class fi{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Ot.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new wd(dd(c.injector.get(Dn,void 0,g.XFs.Self|g.XFs.Optional)).map(Yh),c)}),si(u=>{throw t._loader$=void 0,u}));return t._loader$=new Ou(i,()=>new ni.x).pipe(lo()),t._loader$}loadModuleFactory(e){return Jn(e()).pipe((0,Cn.z)(t=>t instanceof g.YKP?et(t):(0,ln.D)(this.compiler.compileModuleAsync(t))))}}class Gy{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function la(n){throw n}function Dd(n,e,t){return e.parse("/")}function Td(n,e){return et(null)}const rf={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Sd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let pi=(()=>{class n{constructor(t,r,i,u,c,f,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ni.x,this.errorHandler=la,this.malformedUriErrorHandler=Dd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Td,afterPreactivation:Td},this.urlHandlingStrategy=new Gy,this.routeReuseStrategy=new ct,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(g.h0i),this.console=c.get(g.c2e);const M=c.get(g.R0b);this.isNgZoneEnabled=M instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function Cy(){return new ne(new ge([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new fi(c,f,F=>this.triggerEvent(new ta(F)),F=>this.triggerEvent(new po(F))),this.routerState=Qa(this.currentUrlTree,this.rootComponentType),this.transitions=new ri({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ii(i=>0!==i.id),(0,Ot.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),In(i=>{let u=!1,c=!1;return et(i).pipe((0,jr.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),In(f=>{const _=this.browserUrlTree.toString(),b=!this.navigated||f.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return af(f.source)&&(this.browserUrlTree=f.extractedUrl),et(f).pipe(In(M=>{const F=this.transitions.getValue();return r.next(new ho(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),F!==this.transitions.getValue()?Wa.E:Promise.resolve(M)}),function lg(n,e,t,r){return In(i=>function nu(n,e,t,r,i){return new Id(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Ot.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,jr.b)(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function m(n,e,t,r,i){return(0,Cn.z)(u=>function rc(n,e,t,r,i="emptyOnly",u="legacy"){try{const c=new mg(n,e,t,r,i,u).recognize();return null===c?Hs(new gg):et(c)}catch(c){return Hs(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,Ot.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,jr.b)(M=>{if("eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(U,M)}this.browserUrlTree=M.urlAfterRedirects}const F=new fo(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(F)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:U,source:z,restoredState:le,extras:Se}=f,rt=new ho(F,this.serializeUrl(U),z,le);r.next(rt);const it=Qa(U,this.rootComponentType).snapshot;return et(Object.assign(Object.assign({},f),{targetSnapshot:it,urlAfterRedirects:U,extras:Object.assign(Object.assign({},Se),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,f.resolve(null),Wa.E}),ke(f=>{const{targetSnapshot:_,id:b,extractedUrl:A,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:U}}=f;return this.hooks.beforePreactivation(_,{navigationId:b,appliedUrlTree:A,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!U})}),(0,jr.b)(f=>{const _=new Iy(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(_)}),(0,Ot.U)(f=>Object.assign(Object.assign({},f),{guards:cg(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function fg(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?et(Object.assign(Object.assign({},t),{guardsResult:!0})):function jy(n,e,t,r){return(0,ln.D)(n).pipe((0,Cn.z)(i=>function tf(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?et(u.map(f=>{const _=Zu(f,e,i);let b;if(function Y0(n){return n&&Xa(n.canDeactivate)}(_))b=Jn(_.canDeactivate(n,e,t,r));else{if(!Xa(_))throw new Error("Invalid CanDeactivate guard");b=Jn(_(n,e,t,r))}return b.pipe(ea())})).pipe(qu()):et(!0)}(i.component,i.route,t,e,r)),ea(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Cn.z)(f=>f&&function sg(n){return"boolean"==typeof n}(f)?function Cd(n,e,t,r){return(0,ln.D)(e).pipe(ku(i=>Qo(function pg(n,e){return null!==n&&e&&e(new go(n)),et(!0)}(i.route.parent,r),function $y(n,e){return null!==n&&e&&e(new mo(n)),et(!0)}(i.route,r),function ef(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function dg(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Xo(()=>et(c.guards.map(_=>{const b=Zu(_,c.node,t);let A;if(function zh(n){return n&&Xa(n.canActivateChild)}(b))A=Jn(b.canActivateChild(r,n));else{if(!Xa(b))throw new Error("Invalid CanActivateChild guard");A=Jn(b(r,n))}return A.pipe(ea())})).pipe(qu())));return et(u).pipe(qu())}(n,i.path,t),function hi(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return et(!0);const i=r.map(u=>Xo(()=>{const c=Zu(u,e,t);let f;if(function ec(n){return n&&Xa(n.canActivate)}(c))f=Jn(c.canActivate(e,n));else{if(!Xa(c))throw new Error("Invalid CanActivate guard");f=Jn(c(e,n))}return f.pipe(ea())}));return et(i).pipe(qu())}(n,i.route,t))),ea(i=>!0!==i,!0))}(r,u,n,e):et(f)),(0,Ot.U)(f=>Object.assign(Object.assign({},t),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,jr.b)(f=>{if(Gu(f.guardsResult)){const b=Us(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw b.url=f.guardsResult,b}const _=new Kl(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(_)}),ii(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),ke(f=>{if(f.guards.canActivateChecks.length)return et(f).pipe((0,jr.b)(_=>{const b=new oi(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}),In(_=>{let b=!1;return et(_).pipe(function E(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return et(t);let u=0;return(0,ln.D)(i).pipe(ku(c=>function S(n,e,t,r){return function N(n,e,t,r){const i=K(n);if(0===i.length)return et({});const u={};return(0,ln.D)(i).pipe((0,Cn.z)(c=>function fe(n,e,t,r){const i=Zu(n,e,r);return Jn(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,jr.b)(f=>{u[c]=f}))),Ka(1),(0,Cn.z)(()=>K(u).length===i.length?et(u):Wa.E))}(n._resolve,n,e,r).pipe((0,Ot.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),Ay(n,t).resolve),null)))}(c.route,r,n,e)),(0,jr.b)(()=>u++),Ka(1),(0,Cn.z)(c=>u===i.length?et(t):Wa.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,jr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,jr.b)(_=>{const b=new $r(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}))}),ke(f=>{const{targetSnapshot:_,id:b,extractedUrl:A,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:U}}=f;return this.hooks.afterPreactivation(_,{navigationId:b,appliedUrlTree:A,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!U})}),(0,Ot.U)(f=>{const _=function Qp(n,e,t){const r=Jl(n,e._root,t?t._root:void 0);return new fd(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:_})}),(0,jr.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,Ot.U)(r=>(new ig(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,jr.b)({next(){u=!0},complete(){u=!0}}),function ld(n){return(0,Yn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var f;u||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),si(f=>{if(c=!0,function qp(n){return n&&n[Ya]}(f)){const _=Gu(f.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const b=new _n(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(b),_?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),M={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||af(i.source)};this.scheduleNavigation(A,"imperative",null,M,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new Wl(i.id,this.serializeUrl(i.extractedUrl),f);r.next(_);try{i.resolve(this.errorHandler(f))}catch(b){i.reject(b)}}return Wa.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const _=Object.assign({},c);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const f=this.parseUrl(t.url);this.scheduleNavigation(f,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){eu(t),this.config=t.map(Yh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:f,preserveFragment:_}=r,b=i||this.routerState.root,A=_?this.currentUrlTree.fragment:c;let M=null;switch(f){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),function oa(n,e,t,r,i){if(0===t.length)return yd(e.root,e.root,e.root,r,i);const u=function K0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Jp(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const f={};return dn(u.outlets,(_,b)=>{f[b]="string"==typeof _?_.split("/"):_}),[...i,{outlets:f}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((f,_)=>{0==_&&"."===f||(0==_&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,u]},[]);return new Jp(t,e,r)}(t);if(u.toRoot())return yd(e.root,e.root,new ge([],{}),r,i);const c=function Xp(n,e,t){if(n.isAbsolute)return new _d(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new _d(u,u===e.root,0)}const r=js(n.commands[0])?0:1;return function eg(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new _d(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),f=c.processChildren?vd(c.segmentGroup,c.index,u.commands):ng(c.segmentGroup,c.index,u.commands);return yd(e.root,c.segmentGroup,f,r,i)}(b,this.currentUrlTree,t,M,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Gu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function sf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},rf):!1===r?Object.assign({},Sd):r,Gu(t))return yo(this.currentUrlTree,t,i);const u=this.parseUrl(t);return yo(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Fu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){var f,_;if(this.disposed)return Promise.resolve(!1);let b,A,M;c?(b=c.resolve,A=c.reject,M=c.promise):M=new Promise((z,le)=>{b=z,A=le});const F=++this.navigationId;let U;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),U=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):U=0,this.setTransition({id:F,targetPageId:U,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:A,promise:M,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),M.catch(z=>Promise.reject(z))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new _n(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function af(n){return"imperative"!==n}class zy{}class X0{preload(e,t){return et(null)}}let eE=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new fi(i,r,_=>t.triggerEvent(new ta(_)),_=>t.triggerEvent(new po(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(ii(t=>t instanceof Fu),ku(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,ln.D)(i).pipe((0,Yo.J)(),(0,Ot.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?et(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Cn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(pi),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(zy))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),vg=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ho?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Fu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Za&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Za(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const ms=new g.OlP("ROUTER_CONFIGURATION"),Ky=new g.OlP("ROUTER_FORROOT_GUARD"),tE=[Ee,{provide:wt,useClass:br},{provide:pi,useFactory:function Yy(n,e,t,r,i,u,c={},f,_){const b=new pi(null,n,e,t,r,i,dd(u));return f&&(b.urlHandlingStrategy=f),_&&(b.routeReuseStrategy=_),function iE(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,b),c.enableTracing&&b.events.subscribe(A=>{var M,F;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(F=console.groupEnd)||void 0===F||F.call(console)}),b},deps:[wt,zu,Ee,g.zs3,g.Sil,Dn,ms,[class ic{},new g.FiY],[class Ke{},new g.FiY]]},zu,{provide:Hu,useFactory:function Eg(n){return n.routerState.root},deps:[pi]},eE,X0,class Wy{preload(e,t){return t().pipe(si(()=>et(null)))}},{provide:ms,useValue:{enableTracing:!1}}];function lC(){return new g.PXZ("Router",pi)}let lf=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[tE,Zy(t),{provide:Ky,useFactory:rE,deps:[[pi,new g.FiY,new g.tp0]]},{provide:ms,useValue:r||{}},{provide:he,useFactory:nE,deps:[se,[new g.tBr(Ge),new g.FiY],ms]},{provide:vg,useFactory:cC,deps:[pi,Nl,ms]},{provide:zy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:X0},{provide:g.PXZ,multi:!0,useFactory:lC},[Ad,{provide:g.ip1,multi:!0,useFactory:sE,deps:[Ad]},{provide:Jy,useFactory:Qy,deps:[Ad]},{provide:g.tb,multi:!0,useExisting:Jy}]]}}static forChild(t){return{ngModule:n,providers:[Zy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ky,8),g.LFG(pi,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function cC(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new vg(n,e,t)}function nE(n,e,t={}){return t.useHash?new De(n,e):new Ze(n,e)}function rE(n){return"guarded"}function Zy(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:Dn,multi:!0,useValue:n}]}let Ad=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ni.x}appInitializer(){return this.injector.get(H,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),u=this.injector.get(pi),c=this.injector.get(ms);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?et(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(ms),i=this.injector.get(eE),u=this.injector.get(vg),c=this.injector.get(pi),f=this.injector.get(g.z2F);t===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),u.init(),c.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function sE(n){return n.appInitializer.bind(n)}function Qy(n){return n.bootstrapListener.bind(n)}const Jy=new g.OlP("Router Initializer");let dC=(()=>{class n{constructor(){this.title="angular-tour-of-heroes"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:27,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-static"],[1,"container","sub-logo"],[1,"fw-300","white","justify-content-between","align-items-center","mb-display"],[1,"flex"],["href","#home","title","Logo",1,"logo","scroll"],["src","assets/img/logo.jpeg","alt","logo","width","100px",1,"logo-dark","default"],[1,"text-center","ml-10"],[1,"vks"],["src","assets/img/profile-img.png",1,"logo-dark","ml-10"],[1,"font-14","text-center"],["id","ntg",1,"row","fw-500","white","justify-content-between","align-items-center","lg-display"],[1,"col-2","text-center"],[1,"col-8","font-30","text-center"],[1,"ml-20"],[1,"font-16"],["src","assets/img/profile-img.png",1,"logo-dark"]],template:function(t,r){1&t&&(g.TgZ(0,"header")(1,"nav",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"a",4),g._UZ(6,"img",5),g.qZA(),g.TgZ(7,"div",6)(8,"span",7),g._uU(9,"V.K.S"),g.qZA()(),g._UZ(10,"img",8),g.qZA(),g.TgZ(11,"div",9)(12,"div"),g._uU(13," SILAMBAM & YOGA MARTIALARTS TRUST"),g.qZA(),g._uU(14," SOUTH INDIAN TRADITIONAL SILIMBAM SPORTS ASSOCIATION "),g.qZA()(),g.TgZ(15,"div",10)(16,"div",11)(17,"a",4),g._UZ(18,"img",5),g.qZA()(),g.TgZ(19,"div",12)(20,"div",13),g._uU(21," V.K.S.SILAMBAM & YOGA MARTIALARTS TRUST "),g.TgZ(22,"div",14),g._uU(23," SOUTH INDIAN TRADITIONAL SILIMBAM SPORTS ASSOCIATION"),g.qZA()()(),g.TgZ(24,"div",11),g._UZ(25,"img",15),g.qZA()()()()(),g._UZ(26,"router-outlet"))},directives:[tc],styles:[".vks[_ngcontent-%COMP%]{font-size:3rem;font-weight:300}.sub-logo[_ngcontent-%COMP%]{position:relative;top:-18px}.ml-10[_ngcontent-%COMP%]{margin-left:10px}"]}),n})();var gi=P(2011),oE=P(4986),Nn=P(5813),bg=P(3942),_e=P(5861),ca=P(9681),St=P(2090),Md=P(4859);const e_="firebasestorage.googleapis.com",aE="storageBucket";class jn extends St.ZR{constructor(e,t){super(Ig(e),`Firebase Storage: ${t} (${Ig(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,jn.prototype)}_codeEquals(e){return Ig(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Ig(n){return"storage/"+n}function t_(){return new jn("unknown","An unknown error occurred, please check the error payload for server response.")}function lE(){return new jn("canceled","User canceled the upload/download.")}function n_(){return new jn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function oc(n){return new jn("invalid-argument",n)}function hE(){return new jn("app-deleted","The Firebase app was deleted.")}function Dg(n){return new jn("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ys(n,e){return new jn("invalid-format","String does not match format '"+n+"': "+e)}function ac(n){throw new jn("internal-error","Internal error: "+n)}class Gr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Gr.makeFromUrl(e,t)}catch(i){return new Gr(e,"")}if(""===r.path)return r;throw function cE(n){return new jn("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function b(ze){ze.path_=decodeURIComponent(ze.path)}const M=t.replace(/[.]/g,"\\."),Xe=[{regex:f,indices:{bucket:1,path:3},postModify:function u(ze){"/"===ze.path.charAt(ze.path.length-1)&&(ze.path_=ze.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${M}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===e_?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let ze=0;ze<Xe.length;ze++){const Tt=Xe[ze],Mt=Tt.regex.exec(e);if(Mt){let Ir=Mt[Tt.indices.path];Ir||(Ir=""),r=new Gr(Mt[Tt.indices.bucket],Ir),Tt.postModify(r);break}}if(null==r)throw function kt(n){return new jn("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class r_{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function xd(n){return"string"==typeof n||n instanceof String}function Ag(n){return cf()&&n instanceof Blob}function cf(){return"undefined"!=typeof Blob}function pE(n,e,t,r){if(r<e)throw oc(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw oc(`Invalid value for '${n}'. Expected ${t} or less.`)}function su(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function gE(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Qu=(()=>{return(n=Qu||(Qu={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Qu;var n})();class vC{constructor(e,t,r,i,u,c,f,_,b,A,M){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=_,this.timeout_=b,this.progressCallback_=A,this.connectionFactory_=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,U)=>{this.resolve_=F,this.reject_=U,this.start_()})}start_(){const t=(r,i)=>{const u=this.resolve_,c=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(f,f.getResponse());!function DM(n){return void 0!==n}(_)?u():u(_)}catch(_){c(_)}else if(null!==f){const _=t_();_.serverResponse=f.getErrorText(),c(this.errorCallback_?this.errorCallback_(f,_):_)}else c(i.canceled?this.appDelete_?hE():lE():function _C(){return new jn("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new df(!1,null,!0)):this.backoffId_=function CM(n,e,t){let r=1,i=null,u=null,c=!1,f=0;function _(){return 2===f}let b=!1;function A(...Se){b||(b=!0,e.apply(null,Se))}function M(Se){i=setTimeout(()=>{i=null,n(U,_())},Se)}function F(){u&&clearTimeout(u)}function U(Se,...rt){if(b)return void F();if(Se)return F(),void A.call(null,Se,...rt);if(_()||c)return F(),void A.call(null,Se,...rt);let Xe;r<64&&(r*=2),1===f?(f=2,Xe=0):Xe=1e3*(r+Math.random()),M(Xe)}let z=!1;function le(Se){z||(z=!0,F(),!b&&(null!==i?(Se||(f=2),clearTimeout(i),M(0)):Se||(f=1)))}return M(0),u=setTimeout(()=>{c=!0,le(!0)},t),le}((r,i)=>{if(i)return void r(!1,new df(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const f=u.getErrorCode()===Qu.NO_ERROR,_=u.getStatus();if(!f||this.isRetryStatusCode_(_)){const A=u.getErrorCode()===Qu.ABORT;return void r(!1,new df(!1,null,A))}const b=-1!==this.successCodes_.indexOf(_);r(!0,new df(b,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function fE(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||u}}class df{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function i_(...n){const e=function wC(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(cf())return new Blob(n);throw new jn("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Gs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _E{constructor(e,t){this.data=e,this.contentType=t||null}}function vE(n,e){switch(n){case Gs.RAW:return new _E(bC(e));case Gs.BASE64:case Gs.BASE64URL:return new _E(IC(n,e));case Gs.DATA_URL:return new _E(function RM(n){const e=new CC(n);return e.base64?IC(Gs.BASE64,e.rest):function xM(n){let e;try{e=decodeURIComponent(n)}catch(t){throw ys(Gs.DATA_URL,"Malformed data URL.")}return bC(e)}(e.rest)}(e),function Ju(n){return new CC(n).contentType}(e))}throw t_()}function bC(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function IC(n,e){switch(n){case Gs.BASE64:{const i=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(i||u)throw ys(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Gs.BASE64URL:{const i=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(i||u)throw ys(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function MM(n){return atob(n)}(e)}catch(i){throw ys(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class CC{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ys(Gs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function s_(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class da{constructor(e,t){let r=0,i="";Ag(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Ag(this.data_)){const i=function AM(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new da(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new da(r,!0)}}static getBlob(...e){if(cf()){const t=e.map(r=>r instanceof da?r.data_:r);return new da(i_.apply(null,t))}{const t=e.map(c=>xd(c)?vE(Gs.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let f=0;f<c.length;f++)i[u++]=c[f]}),new da(i,!0)}}uploadData(){return this.data_}}function Mg(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function Sg(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function xg(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function DC(n,e){return e}class $n{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||DC}}let hf=null;function uc(){if(hf)return hf;const n=[];n.push(new $n("bucket")),n.push(new $n("generation")),n.push(new $n("metageneration")),n.push(new $n("name","fullPath",!0));const t=new $n("name");t.xform=function e(u,c){return function TC(n){return!xd(n)||n.length<2?n:xg(n)}(c)},n.push(t);const i=new $n("size");return i.xform=function r(u,c){return void 0!==c?Number(c):c},n.push(i),n.push(new $n("timeCreated")),n.push(new $n("updated")),n.push(new $n("md5Hash",null,!0)),n.push(new $n("cacheControl",null,!0)),n.push(new $n("contentDisposition",null,!0)),n.push(new $n("contentEncoding",null,!0)),n.push(new $n("contentLanguage",null,!0)),n.push(new $n("contentType",null,!0)),n.push(new $n("metadata","customMetadata",!0)),hf=n,hf}function bE(n,e,t){const r=Mg(e);return null===r?null:function wE(n,e,t){const r={type:"file"},i=t.length;for(let u=0;u<i;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function SC(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new Gr(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function lc(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const u=e[i];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const cc="prefixes";class Ri{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ha(n){if(!n)throw t_()}function pf(n,e){return function t(r,i){const u=bE(n,i,e);return ha(null!==u),u}}function Xu(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function uE(){return new jn("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function mC(){return new jn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function gC(n){return new jn("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function yC(n){return new jn("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function Nd(n){const e=Xu(n);return function t(r,i){let u=e(r,i);return 404===r.getStatus()&&(u=function pC(n){return new jn("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=i.serverResponse,u}}function gf(n,e,t){const i=su(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new Ri(i,"GET",pf(n,t),c);return f.errorHandler=Nd(e),f}function MC(n,e,t,r,i){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),i&&(u.maxResults=i);const f=su(e.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,A=new Ri(f,"GET",function IE(n,e){return function t(r,i){const u=function ff(n,e,t){const r=Mg(t);return null===r?null:function Rd(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[cc])for(const i of t[cc]){const u=i.replace(/\/$/,""),c=n._makeStorageReference(new Gr(e,u));r.prefixes.push(c)}if(t.items)for(const i of t.items){const u=n._makeStorageReference(new Gr(e,i.name));r.items.push(u)}return r}(n,e,r)}(n,e,i);return ha(null!==u),u}}(n,e.bucket),b);return A.urlParams=u,A.errorHandler=Xu(e),A}function l_(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function xC(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Ng{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Ni(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){ha(!1)}return ha(!!t&&-1!==(e||["active"]).indexOf(t)),t}const SE={STATE_CHANGED:"state_changed"},es={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function c_(n){switch(n){case"running":case"pausing":case"canceling":return es.RUNNING;case"paused":return es.PAUSED;case"success":return es.SUCCESS;case"canceled":return es.CANCELED;default:return es.ERROR}}class d_{constructor(e,t,r){if(function Tg(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function dc(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class kC extends class OC{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Qu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Qu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Qu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw ac("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const u in i)i.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,i[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ac("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ac("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw ac("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ac("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function qs(){return new kC}class h_{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=uc(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,u)=>{this._resolve=i,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function RC(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c=l_(e,r,i),f={name:c.fullPath},_=su(u,n.host,n._protocol),A={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},M=lc(c,t),z=new Ri(_,"POST",function U(le){let Se;Ni(le);try{Se=le.getResponseHeader("X-Goog-Upload-URL")}catch(rt){ha(!1)}return ha(xd(Se)),Se},n.maxUploadRetryTime);return z.urlParams=f,z.headers=A,z.body=M,z.errorHandler=Xu(e),z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,qs,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function NC(n,e,t,r){const _=new Ri(t,"POST",function u(b){const A=Ni(b,["active","final"]);let M=null;try{M=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch(U){ha(!1)}M||ha(!1);const F=Number(M);return ha(!isNaN(F)),new Ng(F,r.size(),"final"===A)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=Xu(e),_}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(i,qs,t,r);this._request=u,u.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Ng(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,u)=>{let c;try{c=function PM(n,e,t,r,i,u,c,f){const _=new Ng(0,0);if(c?(_.current=c.current,_.total=c.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function Cg(){return new jn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const b=_.total-_.current;let A=b;i>0&&(A=Math.min(A,i));const M=_.current,z={"X-Goog-Upload-Command":A===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},le=r.slice(M,M+A);if(null===le)throw n_();const Xe=new Ri(t,"POST",function Se(ze,Tt){const Mt=Ni(ze,["active","final"]),Zt=_.current+A,Ir=r.size();let xo;return xo="final"===Mt?pf(e,u)(ze,Tt):null,new Ng(Zt,Ir,"final"===Mt,xo)},e.maxUploadRetryTime);return Xe.headers=z,Xe.body=le.uploadData(),Xe.progressCallback=f||null,Xe.errorHandler=Xu(n),Xe}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const f=this._ref.storage._makeRequest(c,qs,i,u);this._request=f,f.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=gf(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,qs,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function TE(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},_=function f(){let Xe="";for(let ze=0;ze<2;ze++)Xe+=Math.random().toString().slice(2);return Xe}();c["Content-Type"]="multipart/related; boundary="+_;const b=l_(e,r,i),A=lc(b,t),U=da.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+A+"\r\n--"+_+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===U)throw n_();const z={name:b.fullPath},le=su(u,n.host,n._protocol),rt=n.maxUploadRetryTime,it=new Ri(le,"POST",pf(n,t),rt);return it.urlParams=z,it.headers=c,it.body=U.uploadData(),it.errorHandler=Xu(e),it}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,qs,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=lE(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=c_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const u=new d_(t||void 0,r||void 0,i||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(c_(this._state)){case es.SUCCESS:dc(this._resolve.bind(null,this.snapshot))();break;case es.CANCELED:case es.ERROR:dc(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(c_(this._state)){case es.RUNNING:case es.PAUSED:e.next&&dc(e.next.bind(e,this.snapshot))();break;case es.SUCCESS:e.complete&&dc(e.complete.bind(e))();break;default:e.error&&dc(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class el{constructor(e,t){this._service=e,this._location=t instanceof Gr?t:Gr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new el(e,t)}get root(){const e=new Gr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xg(this._location.path)}get storage(){return this._service}get parent(){const e=function o_(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Gr(this._location.bucket,e);return new el(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Dg(e)}}function f_(n,e,t){return p_.apply(this,arguments)}function p_(){return(p_=(0,_e.Z)(function*(n,e,t){const i=yield xE(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield f_(n,e,i.nextPageToken))})).apply(this,arguments)}function xE(n,e){null!=e&&"number"==typeof e.maxResults&&pE("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=MC(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,qs)}function HC(n){n._throwIfRoot("getDownloadURL");const e=function NM(n,e,t){const i=su(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new Ri(i,"GET",function a_(n,e){return function t(r,i){const u=bE(n,i,e);return ha(null!==u),function AC(n,e,t,r){const i=Mg(e);if(null===i||!xd(i.downloadTokens))return null;const u=i.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(b=>{const M=n.fullPath;return su("/b/"+c(n.bucket)+"/o/"+c(M),t,r)+gE({alt:"media",token:b})})[0]}(u,i,n.host,n._protocol)}}(n,t),c);return f.errorHandler=Nd(e),f}(n.storage,n._location,uc());return n.storage.makeRequestWithTokens(e,qs).then(t=>{if(null===t)throw function Io(){return new jn("no-download-url","The given file does not have any download URLs.")}();return t})}function mf(n,e){const t=function EE(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Gr(n._location.bucket,t);return new el(n.storage,r)}function Og(n,e){if(n instanceof v_){const t=n;if(null==t._bucket)throw function dE(){return new jn("no-default-bucket","No default bucket found. Did you set the '"+aE+"' property when initializing the app?")}();const r=new el(t,t._bucket);return null!=e?Og(r,e):r}return void 0!==e?mf(n,e):n}function y_(n,e){if(e&&function m_(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof v_)return function qC(n,e){return new el(n,e)}(n,e);throw oc("To use ref(service, url), the first argument must be a Storage instance.")}return Og(n,e)}function __(n,e){const t=null==e?void 0:e[aE];return null==t?null:Gr.makeFromBucketSpec(t,n)}class v_{constructor(e,t,r,i,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=u,this._bucket=null,this._host=e_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Gr.makeFromBucketSpec(i,this._host):__(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Gr.makeFromBucketSpec(this._url,e):__(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){pE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){pE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,_e.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,_e.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new el(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new r_(hE());{const u=function yE(n,e,t,r,i,u){const c=gE(n.urlParams),f=n.url+c,_=Object.assign({},n.headers);return function SM(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function TM(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function EC(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,u),function mE(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new vC(f,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,_e.Z)(function*(){const[i,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,u).getPromise()})()}}const kg="@firebase/storage";function Lg(n,e){return y_(n=(0,St.m9)(n),e)}function LE(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new v_(t,r,i,e,ca.SDK_VERSION)}!function VE(){(0,ca._registerComponent)(new Md.wA("storage",LE,"PUBLIC").setMultipleInstances(!0)),(0,ca.registerVersion)(kg,"0.9.6",""),(0,ca.registerVersion)(kg,"0.9.6","esm2017")}();class _f{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class UE{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new _f(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new _f(r,this,this._ref))},t)}on(e,t,r,i){let u;return t&&(u="function"==typeof t?c=>t(new _f(c,this,this._ref)):{next:t.next?c=>t.next(new _f(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,i||void 0)}}class Vg{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new au(e,this._service))}get items(){return this._delegate.items.map(e=>new au(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class au{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function OE(n,e){return mf(n,e)}(this._delegate,e);return new au(t,this.storage)}get root(){return new au(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new au(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new UE(function NE(n,e,t){return function BC(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new h_(n,new da(e),t)}(n=(0,St.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Gs.RAW,r){this._throwIfRoot("putString");const i=vE(t,e),u=Object.assign({},r);return null==u.contentType&&null!=i.contentType&&(u.contentType=i.contentType),new UE(new h_(this._delegate,new da(i.data,!0),u),this)}listAll(){return function QC(n){return function OM(n){const e={prefixes:[],items:[]};return f_(n,e).then(()=>e)}(n=(0,St.m9)(n))}(this._delegate).then(e=>new Vg(e,this.storage))}list(e){return function Fg(n,e){return xE(n=(0,St.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Vg(t,this.storage))}getMetadata(){return function PE(n){return function $C(n){n._throwIfRoot("getMetadata");const e=gf(n.storage,n._location,uc());return n.storage.makeRequestWithTokens(e,qs)}(n=(0,St.m9)(n))}(this._delegate)}updateMetadata(e){return function ou(n,e){return function g_(n,e){n._throwIfRoot("updateMetadata");const t=function CE(n,e,t,r){const u=su(e.fullServerUrl(),n.host,n._protocol),f=lc(t,r),b=n.maxOperationRetryTime,A=new Ri(u,"PATCH",pf(n,r),b);return A.headers={"Content-Type":"application/json; charset=utf-8"},A.body=f,A.errorHandler=Nd(e),A}(n.storage,n._location,e,uc());return n.storage.makeRequestWithTokens(t,qs)}(n=(0,St.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function JC(n){return HC(n=(0,St.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function kM(n){return function GC(n){n._throwIfRoot("deleteObject");const e=function DE(n,e){const r=su(e.fullServerUrl(),n.host,n._protocol),f=new Ri(r,"DELETE",function c(_,b){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=Nd(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,qs)}(n=(0,St.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Dg(e)}}class BE{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(E_(e))throw oc("ref() expected a child path but got a URL, use refFromURL instead.");return new au(Lg(this._delegate,e),this)}refFromURL(e){if(!E_(e))throw oc("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Gr.makeFromUrl(e,this._delegate.host)}catch(t){throw oc("refFromUrl() expected a valid full URL but got an invalid one.")}return new au(Lg(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function yf(n,e,t,r={}){!function zC(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,St.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function E_(n){return/^[A-Za-z]+:\/\//.test(n)}function eD(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new BE(t,r)}!function Od(n){const e={TaskState:es,TaskEvent:SE,StringFormat:Gs,Storage:BE,Reference:au};n.INTERNAL.registerComponent(new Md.wA("storage-compat",eD,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(bg.Z),P(5867);var tl=P(1877);const oD=new Map,HM={activated:!1,tokenObservers:[]},w_={initialized:!1,enabled:!1};function Rr(n){return oD.get(n)||HM}function zs(n,e){oD.set(n,e)}function Ef(){return w_}class WE{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new St.BH,yield function aD(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new St.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const mi=new St.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function KE(n){if(!Rr(n).activated)throw mi.create("use-before-activation",{appName:n.name})}function D_(n,e){return T_.apply(this,arguments)}function T_(){return(T_=(0,_e.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const M=yield i.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,f;try{c=yield fetch(n,u)}catch(M){throw mi.create("fetch-network-error",{originalErrorMessage:M.message})}if(200!==c.status)throw mi.create("fetch-status-error",{httpStatus:c.status});try{f=yield c.json()}catch(M){throw mi.create("fetch-parse-error",{originalErrorMessage:M.message})}const _=f.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw mi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const b=1e3*Number(_[1]),A=Date.now();return{token:f.token,expireTimeMillis:A+b,issuedAtTimeMillis:A}})).apply(this,arguments)}function jg(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const uu="firebase-app-check-store";let $g=null;function Hg(){return $g||($g=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(mi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(uu,{keyPath:"compositeKey"})}}catch(t){e(mi.create("storage-open",{originalErrorMessage:t.message}))}}),$g)}function ts(){return(ts=(0,_e.Z)(function*(n,e){const r=(yield Hg()).transaction(uu,"readwrite"),u=r.objectStore(uu).put({compositeKey:n,value:e});return new Promise((c,f)=>{u.onsuccess=_=>{c()},r.onerror=_=>{var b;f(mi.create("storage-set",{originalErrorMessage:null===(b=_.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const ga=new tl.Yd("@firebase/app-check");function pc(n,e){return(0,St.hl)()?function wf(n,e){return function bf(n,e){return ts.apply(this,arguments)}(function fc(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{ga.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function gc(){return Ef().enabled}function S_(){return qg.apply(this,arguments)}function qg(){return(qg=(0,_e.Z)(function*(){const n=Ef();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const QE={error:"UNKNOWN_ERROR"};function JE(n){return St.US.encodeString(JSON.stringify(n),!1)}function If(n){return zg.apply(this,arguments)}function zg(){return(zg=(0,_e.Z)(function*(n,e=!1){const t=n.app;KE(t);const r=Rr(t);let u,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&Zg(_)&&(i=_)}if(!e&&i&&Zg(i))return{token:i.token};let f,c=!1;if(gc()){r.exchangeTokenPromise||(r.exchangeTokenPromise=D_(jg(t,yield S_()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const _=yield r.exchangeTokenPromise;return yield pc(t,_),zs(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),c=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?ga.warn(_.message):ga.error(_),u=_}return i?(f={token:i.token},zs(t,Object.assign(Object.assign({},r),{token:i})),yield pc(t,i)):f=nw(u),c&&tw(t,f),f})).apply(this,arguments)}function Kg(n,e){const t=Rr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),zs(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function XE(n){const{app:e}=n,t=Rr(e);let r=t.tokenRefresher;r||(r=function ew(n){const{app:e}=n;return new WE((0,_e.Z)(function*(){let r;if(r=Rr(e).token?yield If(n,!0):yield If(n),r.error)throw r.error}),()=>!0,()=>{const t=Rr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),zs(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function tw(n,e){const t=Rr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Zg(n){return n.expireTimeMillis-Date.now()>0}function nw(n){return{token:JE(QE),error:n}}class dD{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Rr(this.app);for(const t of e)Kg(this.app,t.next);return Promise.resolve()}}const lw="app-check-internal";!function CD(){(0,ca._registerComponent)(new Md.wA("app-check",n=>function hD(n,e){return new dD(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(lw).initialize()})),(0,ca._registerComponent)(new Md.wA(lw,n=>function rw(n){return{getToken:e=>If(n,e),addTokenListener:e=>function Wg(n,e,t,r){const{app:i}=n,u=Rr(i),c={next:t,error:r,type:e};if(zs(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&Zg(u.token)){const f=u.token;Promise.resolve().then(()=>{t({token:f.token}),XE(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>XE(n))}(n,"INTERNAL",e),removeTokenListener:e=>Kg(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ca.registerVersion)("@firebase/app-check","0.5.8")}();class Cf{constructor(){return(0,Nn.vb)("app-check")}}"undefined"!=typeof window&&window;var Xg=P(127);function pw(n){const e=function JM(n){return new Rn.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function hC(n,e=oE.z){return(0,Yn.e)((t,r)=>{let i=null,u=null,c=null;const f=()=>{if(i){i.unsubscribe(),i=null;const b=u;u=null,r.next(b)}};function _(){const b=c+n,A=e.now();if(A<b)return i=this.schedule(void 0,b-A),void r.add(i);f()}t.subscribe((0,bn.x)(r,b=>{u=b,c=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{u=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Ot.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Bd(n){return{getDownloadURL:()=>et(void 0).pipe(Nn.fc,In(()=>n.getDownloadURL()),Nn.iC),getMetadata:()=>et(void 0).pipe(Nn.fc,In(()=>n.getMetadata()),Nn.iC),delete:()=>(0,ln.D)(n.delete()),child:e=>Bd(n.child(e)),updateMetadata:e=>(0,ln.D)(n.updateMetadata(e)),put:(e,t)=>pw(n.put(e,t)),putString:(e,t,r)=>pw(n.putString(e,t,r)),list:e=>(0,ln.D)(n.list(e)),listAll:()=>(0,ln.D)(n.listAll())}}const F_=new g.OlP("angularfire2.storageBucket"),gw=new g.OlP("angularfire2.storage.maxUploadRetryTime"),SD=new g.OlP("angularfire2.storage.maxOperationRetryTime"),L_=new g.OlP("angularfire2.storage.use-emulator");let V_=(()=>{class n{constructor(t,r,i,u,c,f,_,b,A,M){const F=(0,gi.on)(t,c,r);this.storage=(0,gi.cc)(`${F.name}.storage.${i}`,"AngularFireStorage",F.name,()=>{const U=c.runOutsideAngular(()=>F.storage(i||void 0)),z=A;return z&&U.useEmulator(...z),_&&U.setMaxUploadRetryTime(_),b&&U.setMaxOperationRetryTime(b),U},[_,b])}ref(t){return Bd(this.storage.ref(t))}refFromURL(t){return Bd(this.storage.refFromURL(t))}upload(t,r,i){return Bd(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(gi.Dh),g.LFG(gi.xv,8),g.LFG(F_,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Nn.HU),g.LFG(gw,8),g.LFG(SD,8),g.LFG(L_,8),g.LFG(Cf,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),U_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),mw=(()=>{class n{constructor(){Xg.Z.registerVersion("angularfire",Nn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[V_],imports:[U_]}),n})();function B_(){return(0,Yn.e)((n,e)=>{let t,r=!1;n.subscribe((0,bn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function _w(n,e){return n===e}P(8775);var nt,Ew="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},lu={},j_=j_||{},Rt=Ew||self;function jd(){}function em(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function $d(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var tm="closure_uid_"+(1e9*Math.random()>>>0),bw=0;function Iw(n,e,t){return n.call.apply(n.bind,arguments)}function Cw(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Nr(n,e,t){return(Nr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Iw:Cw).apply(null,arguments)}function $_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function qr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function sl(){this.s=this.s,this.o=this.o}var MD={};sl.prototype.s=!1,sl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function ww(n){return Object.prototype.hasOwnProperty.call(n,tm)&&n[tm]||(n[tm]=++bw)}(this);delete MD[n]}},sl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lr=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},H_=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function Tw(n){return Array.prototype.concat.apply([],arguments)}function nm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function rm(n){return/^[\s\xa0]*$/.test(n)}var Pi,G_=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function _i(n,e){return-1!=n.indexOf(e)}function ol(n,e){return n<e?-1:n>e?1:0}e:{var Sw=Rt.navigator;if(Sw){var q_=Sw.userAgent;if(q_){Pi=q_;break e}}Pi=""}function z_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function W_(n){const e={};for(const t in n)e[t]=n[t];return e}var RD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function K_(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<RD.length;u++)t=RD[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Df(n){return Df[" "](n),n}Df[" "]=jd;var im,n,ND=_i(Pi,"Opera"),Hd=_i(Pi,"Trident")||_i(Pi,"MSIE"),To=_i(Pi,"Edge"),_s=To||Hd,Ws=_i(Pi,"Gecko")&&!(_i(Pi.toLowerCase(),"webkit")&&!_i(Pi,"Edge"))&&!(_i(Pi,"Trident")||_i(Pi,"MSIE"))&&!_i(Pi,"Edge"),Aw=_i(Pi.toLowerCase(),"webkit")&&!_i(Pi,"Edge");function Z_(){var n=Rt.document;return n?n.documentMode:void 0}e:{var Y_="",Q_=(n=Pi,Ws?/rv:([^\);]+)(\)|;)/.exec(n):To?/Edge\/([\d\.]+)/.exec(n):Hd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Aw?/WebKit\/(\S+)/.exec(n):ND?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Q_&&(Y_=Q_?Q_[1]:""),Hd){var J_=Z_();if(null!=J_&&J_>parseFloat(Y_)){im=String(J_);break e}}im=Y_}var X_={};var PD=Rt.document&&Hd&&(Z_()||parseInt(im,10))||void 0,Mw=function(){if(!Rt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Rt.addEventListener("test",jd,e),Rt.removeEventListener("test",jd,e)}catch(t){}return n}();function zr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function al(n,e){if(zr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Ws){e:{try{Df(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:OD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&al.Z.h.call(this)}}zr.prototype.h=function(){this.defaultPrevented=!0},qr(al,zr);var OD={2:"touch",3:"pen",4:"mouse"};al.prototype.h=function(){al.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Gd="closure_listenable_"+(1e6*Math.random()|0),xw=0;function nv(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++xw,this.ca=this.fa=!1}function qd(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Sf(n){this.src=n,this.g={},this.h=0}function sm(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=lr(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(qd(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function om(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}Sf.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=om(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new nv(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var am="closure_lm_"+(1e6*Math.random()|0),um={};function rv(n,e,t,r,i){if(r&&r.once)return Nw(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)rv(n,e[u],t,r,i);return null}return t=uv(t),n&&n[Gd]?n.N(e,t,$d(r)?!!r.capture:!!r,i):iv(n,e,t,!1,r,i)}function iv(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=$d(i)?!!i.capture:!!i,f=ov(n);if(f||(n[am]=f=new Sf(n)),(t=f.add(e,t,r,c,u)).proxy)return t;if(r=function Rw(){var e=kD;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Mw||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Ow(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Nw(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Nw(n,e[u],t,r,i);return null}return t=uv(t),n&&n[Gd]?n.O(e,t,$d(r)?!!r.capture:!!r,i):iv(n,e,t,!0,r,i)}function Pw(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)Pw(n,e[u],t,r,i);else r=$d(r)?!!r.capture:!!r,t=uv(t),n&&n[Gd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=om(u=n.g[e],t,r,i))&&(qd(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=ov(n))&&(e=n.g[e.toString()],n=-1,e&&(n=om(e,t,r,i)),(t=-1<n?e[n]:null)&&sv(t))}function sv(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Gd])sm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Ow(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=ov(e))?(sm(t,n),0==t.h&&(t.src=null,e[am]=null)):qd(n)}}}function Ow(n){return n in um?um[n]:um[n]="on"+n}function kD(n,e){if(n.ca)n=!0;else{e=new al(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&sv(n),n=t.call(r,e)}return n}function ov(n){return(n=n[am])instanceof Sf?n:null}var av="__closure_events_fn_"+(1e9*Math.random()>>>0);function uv(n){return"function"==typeof n?n:(n[av]||(n[av]=function(e){return n.handleEvent(e)}),n[av])}function Pr(){sl.call(this),this.i=new Sf(this),this.P=this,this.I=null}function Wr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new zr(e,n);else if(e instanceof zr)e.target=e.target||n;else{var i=e;K_(e=new zr(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=lm(c,r,!0,e)&&i}if(i=lm(c=e.g=n,r,!0,e)&&i,i=lm(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=lm(c=e.g=t[u],r,!1,e)&&i}function lm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var f=c.listener,_=c.ia||c.src;c.fa&&sm(n.i,c),i=!1!==f.call(_,r)&&i}}return i&&!r.defaultPrevented}qr(Pr,sl),Pr.prototype[Gd]=!0,Pr.prototype.removeEventListener=function(n,e,t,r){Pw(this,n,e,t,r)},Pr.prototype.M=function(){if(Pr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)qd(t[r]);delete n.g[e],n.h--}}this.I=null},Pr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Pr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var lv=Rt.JSON.stringify;function FD(){var n=dv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var cm,kw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new VD,n=>n.reset());class VD{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function UD(n){Rt.setTimeout(()=>{throw n},0)}function cv(n,e){cm||function Fw(){var n=Rt.Promise.resolve(void 0);cm=function(){n.then(Lw)}}(),dm||(cm(),dm=!0),dv.add(n,e)}var dm=!1,dv=new class LD{constructor(){this.h=this.g=null}add(e,t){const r=kw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Lw(){for(var n;n=FD();){try{n.h.call(n.g)}catch(t){UD(t)}var e=kw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}dm=!1}function Af(n,e){Pr.call(this),this.h=n||1,this.g=e||Rt,this.j=Nr(this.kb,this),this.l=Date.now()}function hm(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function fm(n,e,t){if("function"==typeof n)t&&(n=Nr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Nr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Rt.setTimeout(n,e||0)}function hv(n){n.g=fm(()=>{n.g=null,n.i&&(n.i=!1,hv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}qr(Af,Pr),(nt=Af.prototype).da=!1,nt.S=null,nt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Wr(this,"tick"),this.da&&(hm(this),this.start()))}},nt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nt.M=function(){Af.Z.M.call(this),hm(this),delete this.g};class Vw extends sl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:hv(this)}M(){super.M(),this.g&&(Rt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zd(n){sl.call(this),this.h=n,this.g={}}qr(zd,sl);var ul=[];function Uw(n,e,t,r){Array.isArray(t)||(t&&(ul[0]=t.toString()),t=ul);for(var i=0;i<t.length;i++){var u=rv(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Bw(n){z_(n.g,function(e,t){this.g.hasOwnProperty(t)&&sv(e)},n),n.g={}}function cu(){this.g=!0}function Mf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function $w(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return lv(t)}catch(f){return e}}(n,t)+(r?" "+r:"")})}zd.prototype.M=function(){zd.Z.M.call(this),Bw(this)},zd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},cu.prototype.Aa=function(){this.g=!1},cu.prototype.info=function(){};var Wd={},_t=null;function pm(){return _t=_t||new Pr}function Hw(n){zr.call(this,Wd.Ma,n)}function xf(n){const e=pm();Wr(e,new Hw(e,n))}function Rf(n,e){zr.call(this,Wd.STAT_EVENT,n),this.stat=e}function Oi(n){const e=pm();Wr(e,new Rf(e,n))}function Nf(n,e){zr.call(this,Wd.Na,n),this.size=e}function ll(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Rt.setTimeout(function(){n()},e)}Wd.Ma="serverreachability",qr(Hw,zr),Wd.STAT_EVENT="statevent",qr(Rf,zr),Wd.Na="timingevent",qr(Nf,zr);var Tn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},BD={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function gm(){}function qw(){}gm.prototype.h=null;var _m,Kd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function mm(){zr.call(this,"d")}function ym(){zr.call(this,"c")}function vm(){}function Pf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new zd(this),this.P=Of,this.W=new Af(n=_s?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new zw}function zw(){this.i=null,this.g="",this.h=!1}qr(mm,zr),qr(ym,zr),qr(vm,gm),vm.prototype.g=function(){return new XMLHttpRequest},vm.prototype.i=function(){return{}},_m=new vm;var Of=45e3,pv={},Em={};function gv(n,e,t){n.K=1,n.v=bm(hl(e)),n.s=t,n.U=!0,kf(n,null)}function kf(n,e){n.F=Date.now(),Ff(n),n.A=hl(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Iv(t.h,"t",r),n.C=0,t=n.l.H,n.h=new zw,n.g=eh(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Vw(Nr(n.Ia,n,n.g),n.O)),Uw(n.V,n.g,"readystatechange",n.gb),e=n.H?W_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),xf(1),function XM(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",f=u.split("&"),_=0;_<f.length;_++){var b=f[_].split("=");if(1<b.length){var A=b[0];b=b[1];var M=A.split("_");c=2<=M.length&&"type"==M[1]?c+(A+"=")+b+"&":c+(A+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function mv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function yv(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Ww(n,t),i==Em){4==e&&(n.o=4,Oi(14),r=!1),Mf(n.j,n.m,null,"[Incomplete Response]");break}if(i==pv){n.o=4,Oi(15),Mf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Mf(n.j,n.m,i,null),_v(n,i)}mv(n)&&i!=Em&&i!=pv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Oi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ov(e),e.L=!0,Oi(11))):(Mf(n.j,n.m,t,"[Invalid Chunked Response]"),yc(n),Lf(n))}function Ww(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Em:(t=Number(e.substring(t,r)),isNaN(t)?pv:(r+=1)+t>e.length?Em:(e=e.substr(r,t),n.C=r+t,e))}function Ff(n){n.Y=Date.now()+n.P,Zd(n,n.P)}function Zd(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ll(Nr(n.eb,n),e)}function cl(n){n.B&&(Rt.clearTimeout(n.B),n.B=null)}function Lf(n){0==n.l.G||n.I||cb(n.l,n)}function yc(n){cl(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,hm(n.W),Bw(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function _v(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Tv(t.i,n)))if(t.I=n.N,!n.J&&Tv(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=ll(Nr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Nm(t),zf(t)}Rm(t),Oi(18)}if(1>=Dv(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else pl(t,11)}else if((n.J||t.g==n)&&Nm(t),!rm(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const A=b[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const M=b[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const F=b[5];null!=F&&"number"==typeof F&&0<F&&(t.K=r=1.5*F,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const z=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var u=r.i;!u.g&&(_i(z,"spdy")||_i(z,"quic")||_i(z,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Sv(u,u.h),u.h=null))}if(r.D){const le=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;le&&(r.sa=le,Pn(r.F,r.D,le))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=Wf(r,r.H?r.la:null,r.W),c.J){tb(r.i,c);var f=c,_=r.K;_&&f.setTimeout(_),f.B&&(cl(f),Ff(f)),r.g=c}else nT(r);0<t.l.length&&vc(t)}else"stop"!=b[0]&&"close"!=b[0]||pl(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?pl(t,7):Nv(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}xf(4)}catch(b){}}function wm(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(em(n)||"string"==typeof n)H_(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(em(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function Kw(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(em(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function _c(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof _c)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function vv(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];dl(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)dl(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function dl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(nt=Pf.prototype).setTimeout=function(n){this.P=n},nt.gb=function(n){n=n.target;const e=this.L;e&&3==du(n)?e.l():this.Ia(n)},nt.Ia=function(n){try{if(n==this.g)e:{const A=du(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>A)&&(3!=A||_s||this.g&&(this.h.h||this.g.ga()||Mm(this.g)))){this.I||4!=A||7==e||xf(8==e||0>=M?3:2),cl(this);var t=this.g.ba();this.N=t;t:if(mv(this)){var r=Mm(this.g);n="";var i=r.length,u=4==du(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){yc(this),Lf(this);var c="";break t}this.h.i=new Rt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function fv(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var f,_=this.g;if((f=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rm(f)){var b=f;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Oi(12),yc(this),Lf(this);break e}Mf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,_v(this,t)}this.U?(yv(this,A,c),_s&&this.i&&3==A&&(Uw(this.V,this.W,"tick",this.fb),this.W.start())):(Mf(this.j,this.m,c,null),_v(this,c)),4==A&&yc(this),this.i&&!this.I&&(4==A?cb(this.l,this):(this.i=!1,Ff(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Oi(12)):(this.o=0,Oi(13)),yc(this),Lf(this)}}}catch(A){}},nt.fb=function(){if(this.g){var n=du(this.g),e=this.g.ga();this.C<e.length&&(cl(this),yv(this,n,e),this.i&&4!=n&&Ff(this))}},nt.cancel=function(){this.I=!0,yc(this)},nt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function jw(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(xf(3),Oi(17)),yc(this),this.o=2,Lf(this)):Zd(this,this.Y-n)},(nt=_c.prototype).R=function(){vv(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},nt.T=function(){return vv(this),this.g.concat()},nt.get=function(n,e){return dl(this.h,n)?this.h[n]:e},nt.set=function(n,e){dl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},nt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var Zw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Yd(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Yd){this.g=void 0!==e?e:n.g,Ev(this,n.j),this.s=n.s,wv(this,n.i),Vf(this,n.m),this.l=n.l,e=n.h;var t=new ya;t.i=e.i,e.g&&(t.g=new _c(e.g),t.h=e.h),Uf(this,t),this.o=n.o}else n&&(t=String(n).match(Zw))?(this.g=!!e,Ev(this,t[1]||"",!0),this.s=jf(t[2]||""),wv(this,t[3]||"",!0),Vf(this,t[4]),this.l=jf(t[5]||"",!0),Uf(this,t[6]||"",!0),this.o=jf(t[7]||"")):(this.g=!!e,this.h=new ya(null,this.g))}function hl(n){return new Yd(n)}function Ev(n,e,t){n.j=t?jf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function wv(n,e,t){n.i=t?jf(e,!0):e}function Vf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Uf(n,e,t){e instanceof ya?(n.h=e,function eb(n,e){e&&!n.j&&(fl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(bv(this,r),Iv(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=$f(e,GD)),n.h=new ya(e,n.g))}function Pn(n,e,t){n.h.set(e,t)}function bm(n){return Pn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function jf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function $f(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,$D),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function $D(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Yd.prototype.toString=function(){var n=[],e=this.j;e&&n.push($f(e,Qw,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push($f(e,Qw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push($f(t,"/"==t.charAt(0)?Jw:HD,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",$f(t,qD)),n.join("")};var Qw=/[#\/\?@]/g,HD=/[#\?:]/g,Jw=/[#\?]/g,GD=/[#\?@]/g,qD=/#/g;function ya(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function fl(n){n.g||(n.g=new _c,n.h=0,n.i&&function jD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function bv(n,e){fl(n),e=Qd(n,e),dl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,dl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&vv(n)))}function Xw(n,e){return fl(n),e=Qd(n,e),dl(n.g.h,e)}function Iv(n,e,t){bv(n,e),0<t.length&&(n.i=null,n.g.set(Qd(n,e),nm(t)),n.h+=t.length)}function Qd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Im(n){this.l=n||WD,n=Rt.PerformanceNavigationTiming?0<(n=Rt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Rt.g&&Rt.g.Ea&&Rt.g.Ea()&&Rt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(nt=ya.prototype).add=function(n,e){fl(this),this.i=null,n=Qd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},nt.forEach=function(n,e){fl(this),this.g.forEach(function(t,r){H_(t,function(i){n.call(e,i,r,this)},this)},this)},nt.T=function(){fl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},nt.R=function(n){fl(this);var e=[];if("string"==typeof n)Xw(this,n)&&(e=Tw(e,this.g.get(Qd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Tw(e,n[t])}return e},nt.set=function(n,e){return fl(this),this.i=null,Xw(this,n=Qd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},nt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=i;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var WD=10;function Cv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Dv(n){return n.h?1:n.g?n.g.size:0}function Tv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Sv(n,e){n.g?n.g.add(e):n.h=e}function tb(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Cm(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return nm(n.i)}function Av(){}function nb(){this.g=new Av}function KD(n,e,t){const r=t||"";try{wm(n,function(i,u){let c=i;$d(i)&&(c=lv(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Dm(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function Hf(n){this.l=n.$b||null,this.j=n.ib||!1}function Tm(n,e){Pr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Mv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Im.prototype.cancel=function(){if(this.i=Cm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Av.prototype.stringify=function(n){return Rt.JSON.stringify(n,void 0)},Av.prototype.parse=function(n){return Rt.JSON.parse(n,void 0)},qr(Hf,gm),Hf.prototype.g=function(){return new Tm(this.l,this.j)},Hf.prototype.i=function(n){return function(){return n}}({}),qr(Tm,Pr);var Mv=0;function rb(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Gf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Jd(n)}function Jd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(nt=Tm.prototype).open=function(n,e){if(this.readyState!=Mv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Jd(this)},nt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Rt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Gf(this)),this.readyState=Mv},nt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Jd(this)),this.g&&(this.readyState=3,Jd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Rt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;rb(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},nt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Gf(this):Jd(this),3==this.readyState&&rb(this)}},nt.Ua=function(n){this.g&&(this.response=this.responseText=n,Gf(this))},nt.Ta=function(n){this.g&&(this.response=n,Gf(this))},nt.ha=function(){this.g&&Gf(this)},nt.setRequestHeader=function(n,e){this.v.append(n,e)},nt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},nt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Tm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ib=Rt.JSON.parse;function cr(n){Pr.call(this),this.headers=new _c,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=sb,this.K=this.L=!1}qr(cr,Pr);var sb="",ob=/^https?$/i,YD=["POST","PUT"];function JD(n){return"content-type"==n.toLowerCase()}function Sm(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Am(n),Xd(n)}function Am(n){n.D||(n.D=!0,Wr(n,"complete"),Wr(n,"error"))}function xv(n){if(n.h&&void 0!==j_&&(!n.C[1]||4!=du(n)||2!=n.ba()))if(n.v&&4==du(n))fm(n.Fa,0,n);else if(Wr(n,"readystatechange"),4==du(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(Zw)[1]||null;if(!i&&Rt.self&&Rt.self.location){var u=Rt.self.location.protocol;i=u.substr(0,u.length-1)}r=!ob.test(i?i.toLowerCase():"")}t=r}if(t)Wr(n,"complete"),Wr(n,"success");else{n.m=6;try{var c=2<du(n)?n.g.statusText:""}catch(_){c=""}n.j=c+" ["+n.ba()+"]",Am(n)}}finally{Xd(n)}}}function Xd(n,e){if(n.g){ab(n);const t=n.g,r=n.C[0]?jd:null;n.g=null,n.C=null,e||Wr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function ab(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Rt.clearTimeout(n.A),n.A=null)}function du(n){return n.g?n.g.readyState:0}function Mm(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case sb:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function xm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function XD(n){let e="";return z_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Pn(n,e,t))}function qf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Rv(n){this.za=0,this.l=[],this.h=new cu,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=qf("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=qf("baseRetryDelayMs",5e3,n),this.$a=qf("retryDelaySeedMs",1e4,n),this.Ya=qf("forwardChannelMaxRetries",2,n),this.ra=qf("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Im(n&&n.concurrentRequestLimit),this.Ca=new nb,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Nv(n){if(eT(n),3==n.G){var e=n.V++,t=hl(n.F);Pn(t,"SID",n.J),Pn(t,"RID",e),Pn(t,"TYPE","terminate"),hu(n,t),(e=new Pf(n,n.h,e,void 0)).K=2,e.v=bm(hl(t)),t=!1,Rt.navigator&&Rt.navigator.sendBeacon&&(t=Rt.navigator.sendBeacon(e.v.toString(),"")),!t&&Rt.Image&&((new Image).src=e.v,t=!0),t||(e.g=eh(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ff(e)}Pm(n)}function zf(n){n.g&&(Ov(n),n.g.cancel(),n.g=null)}function eT(n){zf(n),n.u&&(Rt.clearTimeout(n.u),n.u=null),Nm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Rt.clearTimeout(n.m),n.m=null)}function Pv(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&vc(n)}function vc(n){Cv(n.i)||n.m||(n.m=!0,cv(n.Ha,n),n.C=0)}function Ec(n,e){var t;t=e?e.m:n.V++;const r=hl(n.F);Pn(r,"SID",n.J),Pn(r,"RID",t),Pn(r,"AID",n.U),hu(n,r),n.o&&n.s&&xm(r,n.o,n.s),t=new Pf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=ub(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Sv(n.i,t),gv(t,r,e)}function hu(n,e){n.j&&wm({},function(t,r){Pn(e,r,t)})}function ub(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Nr(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let f=!0;for(let _=0;_<t;_++){let b=i[_].h;const A=i[_].g;if(b-=u,0>b)u=Math.max(0,i[_].h-100),f=!1;else try{KD(A,c,"req"+b+"_")}catch(M){r&&r(A)}}if(f){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function nT(n){n.g||n.u||(n.Y=1,cv(n.Ga,n),n.A=0)}function Rm(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=ll(Nr(n.Ga,n),kv(n,n.A)),n.A++,0))}function Ov(n){null!=n.B&&(Rt.clearTimeout(n.B),n.B=null)}function lb(n){n.g=new Pf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=hl(n.oa);Pn(e,"RID","rpc"),Pn(e,"SID",n.J),Pn(e,"CI",n.N?"0":"1"),Pn(e,"AID",n.U),hu(n,e),Pn(e,"TYPE","xmlhttp"),n.o&&n.s&&xm(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=bm(hl(e)),t.s=null,t.U=!0,kf(t,n)}function Nm(n){null!=n.v&&(Rt.clearTimeout(n.v),n.v=null)}function cb(n,e){var t=null;if(n.g==e){Nm(n),Ov(n),n.g=null;var r=2}else{if(!Tv(n.i,e))return;t=e.D,tb(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Wr(r=pm(),new Nf(r,t,e,i)),vc(n)}else nT(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function tT(n,e){return!(Dv(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=ll(Nr(n.Ha,n,e),kv(n,n.C)),n.C++,0)))}(n,e)||2==r&&Rm(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:pl(n,5);break;case 4:pl(n,10);break;case 3:pl(n,6);break;default:pl(n,2)}}function kv(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function pl(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Nr(n.jb,n);t||(t=new Yd("//www.google.com/images/cleardot.gif"),Rt.location&&"http"==Rt.location.protocol||Ev(t,"https"),bm(t)),function ZD(n,e){const t=new cu;if(Rt.Image){const r=new Image;r.onload=$_(Dm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=$_(Dm,t,r,"TestLoadImage: error",!1,e),r.onabort=$_(Dm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=$_(Dm,t,r,"TestLoadImage: timeout",!1,e),Rt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Oi(2);n.G=0,n.j&&n.j.va(e),Pm(n),eT(n)}function Pm(n){n.G=0,n.I=-1,n.j&&((0!=Cm(n.i).length||0!=n.l.length)&&(n.i.i.length=0,nm(n.l),n.l.length=0),n.j.ua())}function Wf(n,e,t){let r=function Yw(n){return n instanceof Yd?hl(n):new Yd(n,void 0)}(t);if(""!=r.i)e&&wv(r,e+"."+r.i),Vf(r,r.m);else{const i=Rt.location;r=function Bf(n,e,t,r){var i=new Yd(null,void 0);return n&&Ev(i,n),e&&wv(i,e),t&&Vf(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&z_(n.aa,function(i,u){Pn(r,u,i)}),t=n.sa,(e=n.D)&&t&&Pn(r,e,t),Pn(r,"VER",n.ma),hu(n,r),r}function eh(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new cr(t&&n.Ba&&!n.qa?new Hf({ib:!0}):n.qa)).L=n.H,e}function db(){}function Kf(){if(Hd&&!(10<=Number(PD)))throw Error("Environmental error: no available transport.")}function ns(n,e){Pr.call(this),this.g=new Rv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!rm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new gl(this)}function hb(n){mm.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function fb(){ym.call(this),this.status=1}function gl(n){this.g=n}(nt=cr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_m.g(),this.C=function Gw(n){return n.h||(n.h=n.i())}(this.u?this.u:_m),this.g.onreadystatechange=Nr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Sm(this,u)}n=t||"";const i=new _c(this.headers);r&&wm(r,function(u,c){i.set(c,u)}),r=function xD(n){e:{var e=JD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Rt.FormData&&n instanceof Rt.FormData,!(0<=lr(YD,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ab(this),0<this.B&&((this.K=function QD(n){return Hd&&function Tf(){return function ma(n){var e=X_;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=G_(String(im)).split("."),t=G_("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=ol(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||ol(0==i[2].length,0==u[2].length)||ol(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nr(this.pa,this)):this.A=fm(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Sm(this,u)}},nt.pa=function(){void 0!==j_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wr(this,"timeout"),this.abort(8))},nt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Wr(this,"complete"),Wr(this,"abort"),Xd(this))},nt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xd(this,!0)),cr.Z.M.call(this)},nt.Fa=function(){this.s||(this.F||this.v||this.l?xv(this):this.cb())},nt.cb=function(){xv(this)},nt.ba=function(){try{return 2<du(this)?this.g.status:-1}catch(n){return-1}},nt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},nt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ib(e)}},nt.Da=function(){return this.m},nt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(nt=Rv.prototype).ma=8,nt.G=1,nt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},nt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Pf(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=W_(u),K_(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ub(this,i,e),Pn(t=hl(this.F),"RID",n),Pn(t,"CVER",22),this.D&&Pn(t,"X-HTTP-Session-Id",this.D),hu(this,t),this.o&&u&&xm(t,this.o,u),Sv(this.i,i),this.Ra&&Pn(t,"TYPE","init"),this.ja?(Pn(t,"$req",e),Pn(t,"SID","null"),i.$=!0,gv(i,t,null)):gv(i,t,e),this.G=2}}else 3==this.G&&(n?Ec(this,n):0==this.l.length||Cv(this.i)||Ec(this))},nt.Ga=function(){if(this.u=null,lb(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=ll(Nr(this.bb,this),n)}},nt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Oi(10),zf(this),lb(this))},nt.ab=function(){null!=this.v&&(this.v=null,zf(this),Rm(this),Oi(19))},nt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Oi(2)):(this.h.info("Failed to ping google.com"),Oi(1))},(nt=db.prototype).xa=function(){},nt.wa=function(){},nt.va=function(){},nt.ua=function(){},nt.Oa=function(){},Kf.prototype.g=function(n,e){return new ns(n,e)},qr(ns,Pr),ns.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),cv(Nr(n.hb,n,e))),Oi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Wf(n,null,n.W),vc(n)},ns.prototype.close=function(){Nv(this.g)},ns.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Pv(this.g,e)}else this.v?((e={}).__data__=lv(n),Pv(this.g,e)):Pv(this.g,n)},ns.prototype.M=function(){this.g.j=null,delete this.j,Nv(this.g),delete this.g,ns.Z.M.call(this)},qr(hb,mm),qr(fb,ym),qr(gl,db),gl.prototype.xa=function(){Wr(this.g,"a")},gl.prototype.wa=function(n){Wr(this.g,new hb(n))},gl.prototype.va=function(n){Wr(this.g,new fb(n))},gl.prototype.ua=function(){Wr(this.g,"b")},Kf.prototype.createWebChannel=Kf.prototype.g,ns.prototype.send=ns.prototype.u,ns.prototype.open=ns.prototype.m,ns.prototype.close=ns.prototype.close,Tn.NO_ERROR=0,Tn.TIMEOUT=8,Tn.HTTP_ERROR=6,BD.COMPLETE="complete",qw.EventType=Kd,Kd.OPEN="a",Kd.CLOSE="b",Kd.ERROR="c",Kd.MESSAGE="d",Pr.prototype.listen=Pr.prototype.N,cr.prototype.listenOnce=cr.prototype.O,cr.prototype.getLastError=cr.prototype.La,cr.prototype.getLastErrorCode=cr.prototype.Da,cr.prototype.getStatus=cr.prototype.ba,cr.prototype.getResponseJson=cr.prototype.Qa,cr.prototype.getResponseText=cr.prototype.ga,cr.prototype.send=cr.prototype.ea;var rT=lu.createWebChannelTransport=function(){return new Kf},ex=lu.getStatEventTarget=function(){return pm()},Fv=lu.ErrorCode=Tn,iT=lu.EventType=BD,th=lu.Event=Wd,Lv=lu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},nh=lu.FetchXmlHttpFactory=Hf,Vv=lu.WebChannel=qw,pb=lu.XhrIo=cr;const gb="@firebase/firestore";class vi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vi.UNAUTHENTICATED=new vi(null),vi.GOOGLE_CREDENTIALS=new vi("google-credentials-uid"),vi.FIRST_PARTY=new vi("first-party-uid"),vi.MOCK_USER=new vi("mock-user");let wc="9.8.0";const bc=new tl.Yd("@firebase/firestore");function Om(){return bc.logLevel}function Oe(n,...e){if(bc.logLevel<=tl.in.DEBUG){const t=e.map(Bv);bc.debug(`Firestore (${wc}): ${n}`,...t)}}function dr(n,...e){if(bc.logLevel<=tl.in.ERROR){const t=e.map(Bv);bc.error(`Firestore (${wc}): ${n}`,...t)}}function Zf(n,...e){if(bc.logLevel<=tl.in.WARN){const t=e.map(Bv);bc.warn(`Firestore (${wc}): ${n}`,...t)}}function Bv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${wc}) INTERNAL ASSERTION FAILED: `+n;throw dr(e),new Error(e)}function At(n,e){n||st()}function We(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends St.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Hn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class jv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vi.UNAUTHENTICATED))}shutdown(){}}class yb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _b{constructor(e){this.t=e,this.currentUser=vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let c=new Hn;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Hn,e.enqueueRetryable(()=>u(this.currentUser))};const f=()=>{const b=c;e.enqueueRetryable((0,_e.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},_=b=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(b=>_(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?_(b):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Hn)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(At("string"==typeof r.accessToken),new jv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return At(null===e||"string"==typeof e),new vi(e)}}class vb{constructor(e,t,r){this.type="FirstParty",this.user=vi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class oT{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new vb(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(vi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Eb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aT{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?i(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(At("string"==typeof t.token),this.p=t.token,new Eb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class vs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function uT(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}vs.A=-1;class wb{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=uT(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Nt(n,e){return n<e?-1:n>e?1:0}function rh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function km(n){return n+"\0"}class un{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return un.fromMillis(Date.now())}static fromDate(e){return un.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new un(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new un(0,0))}static max(){return new Dt(new un(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Fm(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function So(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function bb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Yf{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Yf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class zt extends Yf{construct(e,t,r){return new zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new zt(t)}static emptyPath(){return new zt([])}}const Lm=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gn extends Yf{construct(e,t,r){return new Gn(e,t,r)}static isValidIdentifier(e){return Lm.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Gn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Re(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Re(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(u(),i++)}if(u(),c)throw new Re(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gn(t)}static emptyPath(){return new Gn([])}}class ih{constructor(e){this.fields=e,e.sort(Gn.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class hr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new hr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new hr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hr.EMPTY_BYTE_STRING=new hr("");const Ib=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _a(n){if(At(!!n),"string"==typeof n){let e=0;const t=Ib.exec(n);if(At(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fn(n.seconds),nanos:Fn(n.nanos)}}function Fn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ic(n){return"string"==typeof n?hr.fromBase64String(n):hr.fromUint8Array(n)}function $v(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function cT(n){const e=n.mapValue.fields.__previous_value__;return $v(e)?cT(e):e}function Cc(n){const e=_a(n.mapValue.fields.__local_write_time__.timestampValue);return new un(e.seconds,e.nanos)}class Hv{constructor(e,t,r,i,u,c,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.useFetchStreams=_}}class va{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new va("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof va&&e.projectId===this.projectId&&e.database===this.database}}function Dc(n){return null==n}function Tc(n){return 0===n&&1/n==-1/0}function Cb(n){return"number"==typeof n&&Number.isInteger(n)&&!Tc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(zt.fromString(e))}static fromName(e){return new $e(zt.fromString(e).popFirst(5))}static empty(){return new $e(zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new zt(e.slice()))}}const ml={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Vm={nullValue:"NULL_VALUE"};function yl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?$v(n)?4:Tb(n)?9007199254740991:10:st()}function Ks(n,e){if(n===e)return!0;const t=yl(n);if(t!==yl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Cc(n).isEqual(Cc(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=_a(r.timestampValue),c=_a(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Ic(n.bytesValue).isEqual(Ic(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Fn(r.geoPointValue.latitude)===Fn(i.geoPointValue.latitude)&&Fn(r.geoPointValue.longitude)===Fn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Fn(r.integerValue)===Fn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=Fn(r.doubleValue),c=Fn(i.doubleValue);return u===c?Tc(u)===Tc(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return rh(n.arrayValue.values||[],e.arrayValue.values||[],Ks);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Fm(u)!==Fm(c))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(void 0===c[f]||!Ks(u[f],c[f])))return!1;return!0}(n,e);default:return st()}var i}function sh(n,e){return void 0!==(n.values||[]).find(t=>Ks(t,e))}function _l(n,e){if(n===e)return 0;const t=yl(n),r=yl(e);if(t!==r)return Nt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Nt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=Fn(i.integerValue||i.doubleValue),f=Fn(u.integerValue||u.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return Gv(n.timestampValue,e.timestampValue);case 4:return Gv(Cc(n),Cc(e));case 5:return Nt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=Ic(i),f=Ic(u);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),f=u.split("/");for(let _=0;_<c.length&&_<f.length;_++){const b=Nt(c[_],f[_]);if(0!==b)return b}return Nt(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Nt(Fn(i.latitude),Fn(u.latitude));return 0!==c?c:Nt(Fn(i.longitude),Fn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],f=u.values||[];for(let _=0;_<c.length&&_<f.length;++_){const b=_l(c[_],f[_]);if(b)return b}return Nt(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===ml.mapValue&&u===ml.mapValue)return 0;if(i===ml.mapValue)return 1;if(u===ml.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),_=u.fields||{},b=Object.keys(_);f.sort(),b.sort();for(let A=0;A<f.length&&A<b.length;++A){const M=Nt(f[A],b[A]);if(0!==M)return M;const F=_l(c[f[A]],_[b[A]]);if(0!==F)return F}return Nt(f.length,b.length)}(n.mapValue,e.mapValue);default:throw st()}}function Gv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Nt(n,e);const t=_a(n),r=_a(e),i=Nt(t.seconds,r.seconds);return 0!==i?i:Nt(t.nanos,r.nanos)}function Sc(n){return qv(n)}function qv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=_a(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ic(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=qv(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const f of i)c?c=!1:u+=",",u+=`${f}:${qv(r.fields[f])}`;return u+"}"}(n.mapValue):st();var e}function vl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Um(n){return!!n&&"integerValue"in n}function Qf(n){return!!n&&"arrayValue"in n}function zv(n){return!!n&&"nullValue"in n}function Db(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Or(n){return!!n&&"mapValue"in n}function Ea(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return So(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ea(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ea(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Tb(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function dT(n){return"nullValue"in n?Vm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?vl(va.empty(),$e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function nx(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?vl(va.empty(),$e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ml:st()}function oh(n,e){const t=_l(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Sb(n,e){const t=_l(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class kr{constructor(e){this.value=e}static empty(){return new kr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Or(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ea(t)}setAll(e){let t=Gn.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=Ea(c):i.push(f.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());Or(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ks(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Or(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){So(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new kr(Ea(this.value))}}function Ab(n){const e=[];return So(n.fields,(t,r)=>{const i=new Gn([t]);if(Or(r)){const u=Ab(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new ih(e)}class vn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new vn(e,0,Dt.min(),Dt.min(),kr.empty(),0)}static newFoundDocument(e,t,r){return new vn(e,1,t,Dt.min(),r,0)}static newNoDocument(e,t){return new vn(e,2,t,Dt.min(),kr.empty(),0)}static newUnknownDocument(e,t){return new vn(e,3,t,Dt.min(),kr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Bm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Wv(n){return n.fields.find(e=>2===e.kind)}function fu(n){return n.fields.filter(e=>2!==e.kind)}Bm.UNKNOWN_ID=-1;class Jf{constructor(e,t){this.fieldPath=e,this.kind=t}}class ah{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ah(0,wa.min())}}function Xf(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(1e9===r?new un(t+1,0):new un(t,r));return new wa(i,$e.empty(),e)}function Kv(n){return new wa(n.readTime,n.key,-1)}class wa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new wa(Dt.min(),$e.empty(),-1)}static max(){return new wa(Dt.max(),$e.empty(),-1)}}function Zv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=$e.comparator(n.documentKey,e.documentKey),0!==t?t:Nt(n.largestBatchId,e.largestBatchId))}class er{constructor(e,t){this.comparator=e,this.root=t||fr.EMPTY}insert(e,t){return new er(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fr.BLACK,null,null))}remove(e){return new er(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ep(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ep(this.root,e,this.comparator,!1)}getReverseIterator(){return new ep(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ep(this.root,e,this.comparator,!0)}}class ep{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fr{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:fr.RED,this.left=null!=i?i:fr.EMPTY,this.right=null!=u?u:fr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new fr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return fr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return fr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}fr.EMPTY=null,fr.RED=!0,fr.BLACK=!1,fr.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,i){return this}insert(n,e,t){return new fr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mn{constructor(e){this.comparator=e,this.data=new er(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Mb(this.data.getIterator())}getIteratorFrom(e){return new Mb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mn(this.comparator);return t.data=e,t}}class Mb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function El(n){return n.hasNext()?n.getNext():void 0}class Yv{constructor(e,t=null,r=[],i=[],u=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=f,this.P=null}}function hT(n,e=null,t=[],r=[],i=null,u=null,c=null){return new Yv(n,e,t,r,i,u,c)}function Ac(n){const e=We(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Sc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Dc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Sc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Sc(r)).join(",")),e.P=t}return e.P}function uh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!Ob(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Ks(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_T(n.startAt,e.startAt)&&_T(n.endAt,e.endAt)}function tp(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function jm(n,e){return n.filters.filter(t=>t instanceof Kr&&t.field.isEqual(e))}function Qv(n,e,t){let r=Vm,i=!0;for(const u of jm(n,e)){let c=Vm,f=!0;switch(u.op){case"<":case"<=":c=dT(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,f=!1;break;case"!=":case"not-in":c=Vm}oh({value:r,inclusive:i},{value:c,inclusive:f})<0&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];oh({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function Jv(n,e,t){let r=ml,i=!0;for(const u of jm(n,e)){let c=ml,f=!0;switch(u.op){case">=":case">":c=nx(u.value),f=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,f=!1;break;case"!=":case"not-in":c=ml}Sb({value:r,inclusive:i},{value:c,inclusive:f})>0&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];Sb({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Kr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new pT(e,t,r):"array-contains"===t?new Rb(e,r):"in"===t?new Nb(e,r):"not-in"===t?new Pb(e,r):"array-contains-any"===t?new mT(e,r):new Kr(e,t,r)}static V(e,t,r){return"in"===t?new xb(e,r):new gT(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(_l(t,this.value)):null!==t&&yl(this.value)===yl(t)&&this.v(_l(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class pT extends Kr{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.v(t)}}class xb extends Kr{constructor(e,t){super(e,"in",t),this.keys=Xv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class gT extends Kr{constructor(e,t){super(e,"not-in",t),this.keys=Xv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Xv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class Rb extends Kr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qf(t)&&sh(t.arrayValue,this.value)}}class Nb extends Kr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&sh(this.value.arrayValue,t)}}class Pb extends Kr{constructor(e,t){super(e,"not-in",t)}matches(e){if(sh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!sh(this.value.arrayValue,t)}}class mT extends Kr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>sh(this.value.arrayValue,r))}}class wl{constructor(e,t){this.position=e,this.inclusive=t}}class np{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ob(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function yT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?$e.comparator($e.fromName(c.referenceValue),t.key):_l(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function _T(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ks(n.position[t],e.position[t]))return!1;return!0}class bl{constructor(e,t=null,r=[],i=[],u=null,c="F",f=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=f,this.endAt=_,this.D=null,this.C=null}}function vT(n,e,t,r,i,u,c,f){return new bl(n,e,t,r,i,u,c,f)}function rp(n){return new bl(n)}function kb(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Fb(n){for(const e of n.filters)if(e.S())return e.field;return null}function lh(n){return null!==n.collectionGroup}function ip(n){const e=We(n);if(null===e.D){e.D=[];const t=Fb(e),r=kb(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new np(t)),e.D.push(new np(Gn.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new np(Gn.keyField(),u))}}}return e.D}function Es(n){const e=We(n);if(!e.C)if("F"===e.limitType)e.C=hT(e.path,e.collectionGroup,ip(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of ip(e))t.push(new np(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new wl(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new wl(e.startAt.position,e.startAt.inclusive):null;e.C=hT(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function $m(n,e,t){return new bl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ch(n,e){return uh(Es(n),Es(e))&&n.limitType===e.limitType}function e0(n){return`${Ac(Es(n))}|lt:${n.limitType}`}function Lb(n){return`Query(target=${function fT(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Sc(r.value)}`;var r}).join(", ")}]`),Dc(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Sc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Sc(t)).join(",")),`Target(${e})`}(Es(n))}; limitType=${n.limitType})`}function sp(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):$e.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const f=yT(i,u,c);return i.inclusive?f<=0:f<0}(t.startAt,ip(t),r)||t.endAt&&!function(i,u,c){const f=yT(i,u,c);return i.inclusive?f>=0:f>0}(t.endAt,ip(t),r)));var t,r}function t0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function n0(n){return(e,t)=>{let r=!1;for(const i of ip(n)){const u=Vb(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function Vb(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(i,u,c){const f=u.data.field(i),_=c.data.field(i);return null!==f&&null!==_?_l(f,_):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function ET(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tc(e)?"-0":e}}function r0(n){return{integerValue:""+n}}function Ub(n,e){return Cb(e)?r0(e):ET(n,e)}class dh{constructor(){this._=void 0}}function wT(n,e,t){return n instanceof op?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Mc?Bb(n,e):n instanceof xc?IT(n,e):function(r,i){const u=bT(r,i),c=Hm(u)+Hm(r.k);return Um(u)&&Um(r.k)?r0(c):ET(r.M,c)}(n,e)}function ix(n,e,t){return n instanceof Mc?Bb(n,e):n instanceof xc?IT(n,e):t}function bT(n,e){return n instanceof hh?Um(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class op extends dh{}class Mc extends dh{constructor(e){super(),this.elements=e}}function Bb(n,e){const t=jb(e);for(const r of n.elements)t.some(i=>Ks(i,r))||t.push(r);return{arrayValue:{values:t}}}class xc extends dh{constructor(e){super(),this.elements=e}}function IT(n,e){let t=jb(e);for(const r of n.elements)t=t.filter(i=>!Ks(i,r));return{arrayValue:{values:t}}}class hh extends dh{constructor(e,t){super(),this.M=e,this.k=t}}function Hm(n){return Fn(n.integerValue||n.doubleValue)}function jb(n){return Qf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ki{constructor(e,t){this.field=e,this.transform=t}}class s0{constructor(e,t){this.version=e,this.transformResults=t}}class pr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pr}static exists(e){return new pr(void 0,e)}static updateTime(e){return new pr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class fh{}function $b(n,e,t){n instanceof ap?function(r,i,u){const c=r.value.clone(),f=Zs(r.fieldTransforms,i,u.transformResults);c.setAll(f),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Rc?function(r,i,u){if(!Gm(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=Zs(r.fieldTransforms,i,u.transformResults),f=i.data;f.setAll(zm(r)),f.setAll(c),i.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function qm(n,e,t){var i;n instanceof ap?function(r,i,u){if(!Gm(r.precondition,i))return;const c=r.value.clone(),f=Hb(r.fieldTransforms,u,i);c.setAll(f),i.convertToFoundDocument(a0(i),c).setHasLocalMutations()}(n,e,t):n instanceof Rc?function(r,i,u){if(!Gm(r.precondition,i))return;const c=Hb(r.fieldTransforms,u,i),f=i.data;f.setAll(zm(r)),f.setAll(c),i.convertToFoundDocument(a0(i),f).setHasLocalMutations()}(n,e,t):Gm(n.precondition,i=e)&&i.convertToNoDocument(Dt.min())}function DT(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=bT(r.transform,i||null);null!=u&&(null==t&&(t=kr.empty()),t.set(r.field,u))}return t||null}function o0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&rh(t,r,(i,u)=>function CT(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Mc&&r instanceof Mc||t instanceof xc&&r instanceof xc?rh(t.elements,r.elements,Ks):t instanceof hh&&r instanceof hh?Ks(t.k,r.k):t instanceof op&&r instanceof op);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function a0(n){return n.isFoundDocument()?n.version:Dt.min()}class ap extends fh{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Rc extends fh{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}}function zm(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Zs(n,e,t){const r=new Map;At(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,f=e.data.field(u.field);r.set(u.field,ix(c,f,t[i]))}return r}function Hb(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,wT(u,c,e))}return r}class Wm extends fh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class u0 extends fh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Gb{constructor(e){this.count=e}}var gr,Wt;function l0(n){switch(n){default:return st();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function qb(n){if(void 0===n)return dr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case gr.OK:return ce.OK;case gr.CANCELLED:return ce.CANCELLED;case gr.UNKNOWN:return ce.UNKNOWN;case gr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case gr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case gr.INTERNAL:return ce.INTERNAL;case gr.UNAVAILABLE:return ce.UNAVAILABLE;case gr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case gr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case gr.NOT_FOUND:return ce.NOT_FOUND;case gr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case gr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case gr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case gr.ABORTED:return ce.ABORTED;case gr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case gr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case gr.DATA_LOSS:return ce.DATA_LOSS;default:return st()}}(Wt=gr||(gr={}))[Wt.OK=0]="OK",Wt[Wt.CANCELLED=1]="CANCELLED",Wt[Wt.UNKNOWN=2]="UNKNOWN",Wt[Wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wt[Wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wt[Wt.NOT_FOUND=5]="NOT_FOUND",Wt[Wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wt[Wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wt[Wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wt[Wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wt[Wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wt[Wt.ABORTED=10]="ABORTED",Wt[Wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wt[Wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wt[Wt.INTERNAL=13]="INTERNAL",Wt[Wt.UNAVAILABLE=14]="UNAVAILABLE",Wt[Wt.DATA_LOSS=15]="DATA_LOSS";class Nc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return bb(this.inner)}size(){return this.innerSize}}const zb=new er($e.comparator);function ws(){return zb}const TT=new er($e.comparator);function c0(...n){let e=TT;for(const t of n)e=e.insert(t.key,t);return e}function ph(){return new Nc(n=>n.toString(),(n,e)=>n.isEqual(e))}const d0=new er($e.comparator),h0=new mn($e.comparator);function nn(...n){let e=h0;for(const t of n)e=e.add(t);return e}const ST=new mn(Nt);function up(){return ST}class gh{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,lp.createSynthesizedTargetChangeForCurrentChange(e,t)),new gh(Dt.min(),r,up(),ws(),nn())}}class lp{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new lp(hr.EMPTY_BYTE_STRING,t,nn(),nn(),nn())}}class Km{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class AT{constructor(e,t){this.targetId=e,this.$=t}}class MT{constructor(e,t,r=hr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class f0{constructor(){this.B=0,this.L=Kb(),this.U=hr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=nn(),t=nn(),r=nn();return this.L.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:st()}}),new lp(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Kb()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class xT{constructor(e){this.nt=e,this.st=new Map,this.it=ws(),this.rt=Wb(),this.ot=new mn(Nt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const u=i.target;if(tp(u))if(0===r){const c=new $e(u.path);this.ct(t,c,vn.newNoDocument(c,Dt.min()))}else At(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const f=this.wt(c);if(f){if(u.current&&tp(f.target)){const _=new $e(f.target.path);null!==this.it.get(_)||this.It(c,_)||this.ct(c,_,vn.newNoDocument(_,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=nn();this.rt.forEach((u,c)=>{let f=!0;c.forEachWhile(_=>{const b=this.wt(_);return!b||2===b.purpose||(f=!1,!1)}),f&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const i=new gh(e,t,this.ot,this.it,r);return this.it=ws(),this.rt=Wb(),this.ot=new mn(Nt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new f0,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new mn(Nt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new f0),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Wb(){return new er($e.comparator)}function Kb(){return new er($e.comparator)}const sx={asc:"ASCENDING",desc:"DESCENDING"},ox={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ax{constructor(e,t){this.databaseId=e,this.N=t}}function Zm(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RT(n,e){return n.N?e.toBase64():e.toUint8Array()}function NT(n,e){return Zm(n,e.toTimestamp())}function tr(n){return At(!!n),Dt.fromTimestamp(function(e){const t=_a(e);return new un(t.seconds,t.nanos)}(n))}function p0(n,e){return(t=n,new zt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Zb(n){const e=zt.fromString(n);return At(kT(e)),e}function mh(n,e){return p0(n.databaseId,e.path)}function Ei(n,e){const t=Zb(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(Yb(t))}function Ym(n,e){return p0(n.databaseId,e)}function Qm(n){const e=Zb(n);return 4===e.length?zt.emptyPath():Yb(e)}function Pc(n){return new zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Yb(n){return At(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Jm(n,e,t){return{name:mh(n,e),fields:t.value.mapValue.fields}}function Xm(n,e,t){const r=Ei(n,e.name),i=tr(e.updateTime),u=new kr({mapValue:{fields:e.fields}}),c=vn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function ty(n,e){let t;if(e instanceof ap)t={update:Jm(n,e.key,e.value)};else if(e instanceof Wm)t={delete:mh(n,e.key)};else if(e instanceof Rc)t={update:Jm(n,e.key,e.data),updateMask:m0(e.fieldMask)};else{if(!(e instanceof u0))return st();t={verify:mh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof op)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Mc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof xc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof hh)return{fieldPath:u.field.canonicalString(),increment:c.k};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:NT(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:st()),t;var i}function Qb(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?pr.updateTime(tr(i.updateTime)):void 0!==i.exists?pr.exists(i.exists):pr.none():pr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let f=null;"setToServerValue"in c?(At("REQUEST_TIME"===c.setToServerValue),f=new op):"appendMissingElements"in c?f=new Mc(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new xc(c.removeAllFromArray.values||[]):"increment"in c?f=new hh(u,c.increment):st();const _=Gn.fromServerFormat(c.fieldPath);return new ki(_,f)}(n,i)):[];var i;if(e.update){const i=Ei(n,e.update.name),u=new kr({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new ih((e.updateMask.fieldPaths||[]).map(b=>Gn.fromServerFormat(b)));return new Rc(i,u,c,t,r)}return new ap(i,u,t,r)}if(e.delete){const i=Ei(n,e.delete);return new Wm(i,t)}if(e.verify){const i=Ei(n,e.verify);return new u0(i,t)}return st()}function g0(n,e){return{documents:[Ym(n,e.path)]}}function Jb(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Ym(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ym(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const b=_.map(A=>function(M){if("=="===M.op){if(Db(M.value))return{unaryFilter:{field:Oc(M.field),op:"IS_NAN"}};if(zv(M.value))return{unaryFilter:{field:Oc(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(Db(M.value))return{unaryFilter:{field:Oc(M.field),op:"IS_NOT_NAN"}};if(zv(M.value))return{unaryFilter:{field:Oc(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oc(M.field),op:nI(M.op),value:M.value}}}(A));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(_){if(0!==_.length)return _.map(b=>{return{field:Oc((A=b).field),direction:tI(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.N||Dc(b)?b:{value:b});var b,f,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function Xb(n){let e=Qm(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){At(1===r);const A=t.from[0];A.allDescendants?i=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=eI(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(A=>{return new np(yh((M=A).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let f=null;t.limit&&(f=function(A){let M;return M="object"==typeof A?A.value:A,Dc(M)?null:M}(t.limit));let _=null;var A;t.startAt&&(_=new wl((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new wl(A.values||[],!A.before)}(t.endAt)),vT(e,i,c,u,f,"F",_,b)}function eI(n){return n?void 0!==n.unaryFilter?[rI(n)]:void 0!==n.fieldFilter?[OT(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>eI(e)).reduce((e,t)=>e.concat(t)):st():[]}function tI(n){return sx[n]}function nI(n){return ox[n]}function Oc(n){return{fieldPath:n.canonicalString()}}function yh(n){return Gn.fromServerFormat(n.fieldPath)}function OT(n){return Kr.create(yh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function rI(n){switch(n.unaryFilter.op){case"IS_NAN":const e=yh(n.unaryFilter.field);return Kr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=yh(n.unaryFilter.field);return Kr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=yh(n.unaryFilter.field);return Kr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=yh(n.unaryFilter.field);return Kr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function m0(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function kT(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function wi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=iI(e)),e=y0(n.get(t),e);return iI(e)}function y0(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function iI(n){return n+"\x01\x01"}function ba(n){const e=n.length;if(At(e>=2),2===e)return At("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),zt.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&st(),n.charAt(c+1)){case"\x01":const f=n.substring(u,c);let _;0===i.length?_=f:(i+=f,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:st()}u=c+2}return new zt(r)}const FT=["userId","batchId"];function _0(n,e){return[n,wi(e)]}function LT(n,e,t){return[n,wi(e),t]}const VT={},UT=["prefixPath","collectionGroup","readTime","documentId"],cx=["prefixPath","collectionGroup","documentId"],dx=["collectionGroup","readTime","prefixPath","documentId"],hx=["canonicalId","targetId"],fx=["targetId","path"],px=["path","targetId"],BT=["collectionId","parent"],gx=["indexId","uid"],mx=["uid","sequenceNumber"],yx=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_x=["indexId","uid","orderedDocumentKey"],s=["userId","collectionPath","documentId"],o=["userId","collectionPath","largestBatchId"],a=["userId","collectionGroup","largestBatchId"],l=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],d=[...l,"documentOverlays"],p=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],v=[...p,"indexConfiguration","indexState","indexEntries"],w="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class I{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class C{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new C((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof C?t:C.resolve(t)}catch(t){return C.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):C.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):C.reject(t)}static resolve(e){return new C((t,r)=>{t(e)})}static reject(e){return new C((t,r)=>{r(e)})}static waitFor(e){return new C((t,r)=>{let i=0,u=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++u,c&&u===i&&t()},_=>r(_))}),c=!0,u===i&&t()})}static or(e){let t=C.resolve(!1);for(const r of e)t=t.next(i=>i?C.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}}class x{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Hn,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Q(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Te(r.target.error);this.At.reject(new Q(e,i))}}static open(e,t,r,i){try{return new x(t,e.transaction(i,r))}catch(u){throw new Q(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Fe(t)}}class O{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===O.Vt((0,St.z$)())&&dr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),Ve(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,St.hl)())return!1;if(O.St())return!0;const e=(0,St.z$)(),t=O.Vt(e),r=0<t&&t<10,i=O.Dt(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new Q(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new Re(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Re(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Q(e,f))},u.onupgradeneeded=c=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,_e.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{u.db=yield u.Nt(e);const _=x.open(u.db,e,c?"readonly":"readwrite",r),b=i(_).next(A=>(_.bt(),A)).catch(A=>(_.abort(A),C.reject(A))).toPromise();return b.catch(()=>{}),yield _.Rt,b}catch(_){const b="FirebaseError"!==_.name&&f<3;if(Oe("SimpleDb","Transaction failed with error:",_.message,"Retrying:",b),u.close(),!b)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class B{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Ve(this.Ft.delete())}}class Q extends Re{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function me(n){return"IndexedDbTransactionError"===n.name}class Fe{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ve(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),Ve(this.store.add(e))}get(e){return Ve(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),Ve(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),Ve(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.Kt(i,(c,f)=>{u.push(f)}).next(()=>u)}{const i=this.store.getAll(r.range);return new C((u,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{u(f.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new C((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(u,c,f)=>f.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new C((r,i)=>{t.onerror=u=>{const c=Te(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new C((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const _=new B(f),b=t(f.primaryKey,f.value,_);if(b instanceof C){const A=b.catch(M=>(_.done(),C.reject(M)));r.push(A)}_.isDone?i():null===_.Lt?f.continue():f.continue(_.Lt)}}).next(()=>C.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ve(n){return new C((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Te(r.target.error);t(i)}})}let tt=!1;function Te(n){const e=O.Vt((0,St.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return tt||(tt=!0,setTimeout(()=>{throw r},0)),r}}return n}class pt extends I{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function yt(n,e){const t=We(n);return O.xt(t.Ht,e)}class en{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&$b(u,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&qm(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&qm(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Dt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),nn())}isEqual(e){return this.batchId===e.batchId&&rh(this.mutations,e.mutations,(t,r)=>o0(t,r))&&rh(this.baseMutations,e.baseMutations,(t,r)=>o0(t,r))}}class Fi{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){At(e.mutations.length===r.length);let i=d0;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new Fi(e,t,r,i)}}class pu{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ia{constructor(e,t,r,i,u=Dt.min(),c=Dt.min(),f=hr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f}withSequenceNumber(e){return new Ia(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ia(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ny{constructor(e){this.Jt=e}}function ry(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:_h(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:mh(i=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Zm(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:gu(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:gu(e.version)}}var i,u;return r}function _h(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function gu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function mu(n){const e=new un(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function Il(n,e){const t=(e.baseMutations||[]).map(u=>Qb(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Qb(n.Jt,u)),i=un.fromMillis(e.localWriteTimeMs);return new en(e.batchId,i,t,r)}function kc(n){const e=mu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?mu(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var i;return void 0!==n.query.documents?(At(1===(i=n.query).documents.length),r=Es(rp(Qm(i.documents[0])))):r=Es(Xb(n.query)),new Ia(r,n.targetId,0,n.lastListenSequenceNumber,e,t,hr.fromBase64String(n.resumeToken))}function vx(n,e){const t=gu(e.snapshotVersion),r=gu(e.lastLimboFreeSnapshotVersion);let i;i=tp(e.target)?g0(n.Jt,e.target):Jb(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ac(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function jT(n){const e=Xb({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?$m(e,e.limit,"L"):e}function $T(n,e){return new pu(e.largestBatchId,Qb(n.Jt,e.overlayMutation))}function Ex(n,e){const t=e.path.lastSegment();return[n,wi(e.path.popLast()),t]}class kO{getBundleMetadata(e,t){return wx(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:mu(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return wx(e).put({bundleId:(r=t).id,createTime:gu(tr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return bx(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:jT(i.bundledQuery),readTime:mu(i.readTime)};var i})}saveNamedQuery(e,t){return bx(e).put({name:(r=t).name,readTime:gu(tr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function wx(n){return yt(n,"bundles")}function bx(n){return yt(n,"namedQueries")}class HT{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new HT(e,t.uid||"")}getOverlay(e,t){return E0(e).get(Ex(this.userId,t)).next(r=>r?$T(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const f=new pu(t,c);i.push(this.Xt(e,f))}),C.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(wi(c.getCollectionPath())));const u=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(E0(e).Qt("collectionPathOverlayIndex",f))}),C.waitFor(u)}getOverlaysForCollection(e,t,r){const i=ph(),u=wi(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return E0(e).qt("collectionPathOverlayIndex",c).next(f=>{for(const _ of f){const b=$T(this.M,_);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=ph();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return E0(e).Wt({index:"collectionGroupOverlayIndex",range:f},(_,b,A)=>{const M=$T(this.M,b);u.size()<i||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):A.done()}).next(()=>u)}Xt(e,t){return E0(e).put(function(r,i,u){const[c,f,_]=Ex(i,u.mutation.key);return{userId:i,collectionPath:f,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:ty(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function E0(n){return yt(n,"documentOverlays")}class cp{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Fn(e.integerValue));else if("doubleValue"in e){const r=Fn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Tc(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Ic(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?Tb(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):st()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),$e.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function FO(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Ix(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=FO(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}cp.fe=new cp;class LO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=Ix(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=Ix(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class VO{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class UO{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class w0{constructor(){this.De=new LO,this.Ce=new VO(this.De),this.xe=new UO(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class dp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new dp(this.indexId,this.documentKey,this.arrayValue,r)}}function hp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Cx(n.arrayValue,e.arrayValue),0!==t?t:(t=Cx(n.directionalValue,e.directionalValue),0!==t?t:$e.comparator(n.documentKey,e.documentKey)))}function Cx(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class BO{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Wv(e);if(void 0!==t&&!this.Be(t))return!1;const r=fu(e);let i=0,u=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class jO{constructor(){this.qe=new GT}addToCollectionParentIndex(e,t){return this.qe.add(t),C.resolve()}getCollectionParents(e,t){return C.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return C.resolve()}deleteFieldIndex(e,t){return C.resolve()}getDocumentsMatchingTarget(e,t){return C.resolve(null)}getIndexType(e,t){return C.resolve(0)}getFieldIndexes(e,t){return C.resolve([])}getNextCollectionGroupToUpdate(e){return C.resolve(null)}getMinOffset(e,t){return C.resolve(wa.min())}updateCollectionGroup(e,t,r){return C.resolve()}updateIndexEntries(e,t){return C.resolve()}}class GT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new mn(zt.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mn(zt.comparator)).toArray()}}const sI=new Uint8Array(0);class $O{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new GT,this.Ge=new Nc(r=>Ac(r),(r,i)=>uh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:wi(i)};return Dx(e).put(u)}return C.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[km(t),""],!1,!0);return Dx(e).qt(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(ba(c.parent))}return r})}addFieldIndex(e,t){const r=oI(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=oI(e),i=aI(e),u=b0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=b0(e);let i=!0;const u=new Map;return C.forEach(this.Qe(t),c=>this.je(e,c).next(f=>{i&&(i=!!f),u.set(c,f)})).next(()=>{if(i){let c=nn();const f=[];return C.forEach(u,(_,b)=>{var A;Oe("IndexedDbIndexManager",`Using index ${A=_,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Xe=>`${Xe.fieldPath}:${Xe.kind}`).join(",")}`} to execute ${Ac(t)}`);const M=function(Xe,ze){const Tt=Wv(ze);if(void 0===Tt)return null;for(const Mt of jm(Xe,Tt.fieldPath))switch(Mt.op){case"array-contains-any":return Mt.value.arrayValue.values||[];case"array-contains":return[Mt.value]}return null}(b,_),F=function(Xe,ze){const Tt=new Map;for(const Mt of fu(ze))for(const Zt of jm(Xe,Mt.fieldPath))switch(Zt.op){case"==":case"in":Tt.set(Mt.fieldPath.canonicalString(),Zt.value);break;case"not-in":case"!=":return Tt.set(Mt.fieldPath.canonicalString(),Zt.value),Array.from(Tt.values())}return null}(b,_),U=function(Xe,ze){const Tt=[];let Mt=!0;for(const Zt of fu(ze)){const Ir=0===Zt.kind?Qv(Xe,Zt.fieldPath,Xe.startAt):Jv(Xe,Zt.fieldPath,Xe.startAt);Tt.push(Ir.value),Mt&&(Mt=Ir.inclusive)}return new wl(Tt,Mt)}(b,_),z=function(Xe,ze){const Tt=[];let Mt=!0;for(const Zt of fu(ze)){const Ir=0===Zt.kind?Jv(Xe,Zt.fieldPath,Xe.endAt):Qv(Xe,Zt.fieldPath,Xe.endAt);Tt.push(Ir.value),Mt&&(Mt=Ir.inclusive)}return new wl(Tt,Mt)}(b,_),le=this.We(_,b,U),Se=this.We(_,b,z),rt=this.ze(_,b,F),it=this.He(_.indexId,M,le,U.inclusive,Se,z.inclusive,rt);return C.forEach(it,Xe=>r.Gt(Xe,t.limit).next(ze=>{ze.forEach(Tt=>{const Mt=$e.fromSegments(Tt.documentKey);c.has(Mt)||(c=c.add(Mt),f.push(Mt))})}))}).next(()=>f)}return C.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,u,c,f){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),b=_/(null!=t?t.length:1),A=[];for(let M=0;M<_;++M){const F=t?this.Je(t[M/b]):sI,U=this.Ye(e,F,r[M%b],i),z=this.Xe(e,F,u[M%b],c),le=f.map(Se=>this.Ye(e,F,Se,!0));A.push(...this.createRange(U,z,le))}return A}Ye(e,t,r,i){const u=new dp(e,$e.empty(),t,r);return i?u:u.ke()}Xe(e,t,r,i){const u=new dp(e,$e.empty(),t,r);return i?u.ke():u}je(e,t){const r=new BO(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const f of u)r.$e(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;return C.forEach(this.Qe(t),i=>this.je(e,i).next(u=>{u?0!==r&&u.fields.length<function(c){let f=new mn(Gn.comparator),_=!1;for(const b of c.filters){const A=b;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?_=!0:f=f.add(A.field))}for(const b of c.orderBy)b.field.isKeyField()||(f=f.add(b.field));return f.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new w0;for(const i of fu(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.Ne(i.kind);cp.fe.Zt(u,c)}return r.Se()}Je(e){const t=new w0;return cp.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new w0;return cp.fe.Zt(vl(this.databaseId,t),r.Ne(function(i){const u=fu(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new w0);let u=0;for(const c of fu(e)){const f=r[u++];for(const _ of i)if(this.en(t,c.fieldPath)&&Qf(f))i=this.nn(i,c,f);else{const b=_.Ne(c.kind);cp.fe.Zt(f,b)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const f of i){const _=new w0;_.seed(f.Se()),cp.fe.Zt(c,_.Ne(t.kind)),u.push(_)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Kr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=oI(e),i=aI(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return C.forEach(u,f=>i.get([f.indexId,this.uid]).next(_=>{c.push(function(b,A){const M=A?new ah(A.sequenceNumber,new wa(mu(A.readTime),new $e(ba(A.documentKey)),A.largestBatchId)):ah.empty(),F=b.fields.map(([U,z])=>new Jf(Gn.fromServerFormat(U),z));return new Bm(b.indexId,b.collectionGroup,F,M)}(f,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Nt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=oI(e),u=aI(e);return this.rn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>C.forEach(f,_=>{return u.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:gu((F=r).readTime),documentKey:wi(F.documentKey.path),largestBatchId:F.largestBatchId});var F})))}updateIndexEntries(e,t){const r=new Map;return C.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?C.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),C.forEach(f,_=>this.on(e,i,_).next(b=>{const A=this.un(u,_);return b.isEqual(A)?C.resolve():this.an(e,u,_,b,A)}))))})}cn(e,t,r,i){return b0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return b0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=b0(e);let u=new mn(hp);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,f)=>{u=u.add(new dp(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>u)}un(e,t){let r=new mn(hp);const i=this.Ze(t,e);if(null==i)return r;const u=Wv(t);if(null!=u){const c=e.data.field(u.fieldPath);if(Qf(c))for(const f of c.arrayValue.values||[])r=r.add(new dp(t.indexId,e.key,this.Je(f),i))}else r=r.add(new dp(t.indexId,e.key,sI,i));return r}an(e,t,r,i,u){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,_,b,A,M){const F=f.getIterator(),U=_.getIterator();let z=El(F),le=El(U);for(;z||le;){let Se=!1,rt=!1;if(z&&le){const it=b(z,le);it<0?rt=!0:it>0&&(Se=!0)}else null!=z?rt=!0:Se=!0;Se?(A(le),le=El(U)):rt?(M(z),z=El(F)):(z=El(F),le=El(U))}}(i,u,hp,f=>{c.push(this.cn(e,t,r,f))},f=>{c.push(this.hn(e,t,r,f))}),C.waitFor(c)}rn(e){let t=1;return aI(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>hp(c,f)).filter((c,f,_)=>!f||0!==hp(c,_[f-1]));const i=[];i.push(e);for(const c of r){const f=hp(c,e),_=hp(c,t);if(0===f)i[0]=e.ke();else if(f>0&&_<0)i.push(c),i.push(c.ke());else if(_>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,sI,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,sI,[]]));return u}getMinOffset(e,t){let r;return C.forEach(this.Qe(t),i=>this.je(e,i).next(u=>{u?(!r||Zv(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=wa.min()})).next(()=>r)}}function Dx(n){return yt(n,"collectionParents")}function b0(n){return yt(n,"indexEntries")}function oI(n){return yt(n,"indexConfiguration")}function aI(n){return yt(n,"indexState")}const Tx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ys{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ys(e,Ys.DEFAULT_COLLECTION_PERCENTILE,Ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Sx(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let f=0;const _=r.Wt({range:c},(A,M,F)=>(f++,F.delete()));u.push(_.next(()=>{At(1===f)}));const b=[];for(const A of t.mutations){const M=LT(e,A.key.path,t.batchId);u.push(i.delete(M)),b.push(A.key)}return C.waitFor(u).next(()=>b)}function uI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}Ys.DEFAULT_COLLECTION_PERCENTILE=10,Ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ys.DEFAULT=new Ys(41943040,Ys.DEFAULT_COLLECTION_PERCENTILE,Ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ys.DISABLED=new Ys(-1,0,0);class qT{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){At(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new qT(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vh(e).Wt({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=iy(e),c=vh(e);return c.add({}).next(f=>{At("number"==typeof f);const _=new en(f,t,r,i),b=function(F,U,z){const le=z.baseMutations.map(rt=>ty(F.Jt,rt)),Se=z.mutations.map(rt=>ty(F.Jt,rt));return{userId:U,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:le,mutations:Se}}(this.M,this.userId,_),A=[];let M=new mn((F,U)=>Nt(F.canonicalString(),U.canonicalString()));for(const F of i){const U=LT(this.userId,F.key.path,f);M=M.add(F.key.path.popLast()),A.push(c.put(b)),A.push(u.put(U,VT))}return M.forEach(F=>{A.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.ln[f]=_.keys()}),C.waitFor(A).next(()=>_)})}lookupMutationBatch(e,t){return vh(e).get(t).next(r=>r?(At(r.userId===this.userId),Il(this.M,r)):null)}fn(e,t){return this.ln[t]?C.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return vh(e).Wt({index:"userMutationsIndex",range:i},(c,f,_)=>{f.userId===this.userId&&(At(f.batchId>=r),u=Il(this.M,f)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return vh(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vh(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Il(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=_0(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return iy(e).Wt({range:i},(c,f,_)=>{const[b,A,M]=c,F=ba(A);if(b===this.userId&&t.path.isEqual(F))return vh(e).get(M).next(U=>{if(!U)throw st();At(U.userId===this.userId),u.push(Il(this.M,U))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(Nt);const i=[];return t.forEach(u=>{const c=_0(this.userId,u.path),f=IDBKeyRange.lowerBound(c),_=iy(e).Wt({range:f},(b,A,M)=>{const[F,U,z]=b,le=ba(U);F===this.userId&&u.path.isEqual(le)?r=r.add(z):M.done()});i.push(_)}),C.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=_0(this.userId,r),c=IDBKeyRange.lowerBound(u);let f=new mn(Nt);return iy(e).Wt({range:c},(_,b,A)=>{const[M,F,U]=_,z=ba(F);M===this.userId&&r.isPrefixOf(z)?z.length===i&&(f=f.add(U)):A.done()}).next(()=>this.dn(e,f))}dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(vh(e).get(u).next(c=>{if(null===c)throw st();At(c.userId===this.userId),r.push(Il(this.M,c))}))}),C.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Sx(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),C.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return C.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return iy(e).Wt({range:r},(u,c,f)=>{if(u[0]===this.userId){const _=ba(u[1]);i.push(_)}else f.done()}).next(()=>{At(0===i.length)})})}containsKey(e,t){return Ax(e,this.userId,t)}wn(e){return Mx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ax(n,e,t){const r=_0(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return iy(n).Wt({range:u,jt:!0},(f,_,b)=>{const[A,M,F]=f;A===e&&M===i&&(c=!0),b.done()}).next(()=>c)}function vh(n){return yt(n,"mutations")}function iy(n){return yt(n,"documentMutations")}function Mx(n){return yt(n,"mutationQueues")}class fp{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new fp(0)}static yn(){return new fp(-1)}}class HO{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new fp(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Dt.fromTimestamp(new un(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>sy(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(At(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return sy(e).Wt((c,f)=>{const _=kc(f);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,u.push(this.removeTargetData(e,_)))}).next(()=>C.waitFor(u)).next(()=>i)}forEachTarget(e,t){return sy(e).Wt((r,i)=>{const u=kc(i);t(u)})}pn(e){return xx(e).get("targetGlobalKey").next(t=>(At(null!==t),t))}In(e,t){return xx(e).put("targetGlobalKey",t)}Tn(e,t){return sy(e).put(vx(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ac(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return sy(e).Wt({range:i,index:"queryTargetsIndex"},(c,f,_)=>{const b=kc(f);uh(t,b.target)&&(u=b,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Eh(e);return t.forEach(c=>{const f=wi(c.path);i.push(u.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),C.waitFor(i)}removeMatchingKeys(e,t,r){const i=Eh(e);return C.forEach(t,u=>{const c=wi(u.path);return C.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Eh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Eh(e);let u=nn();return i.Wt({range:r,jt:!0},(c,f,_)=>{const b=ba(c[1]),A=new $e(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=wi(t.path),i=IDBKeyRange.bound([r],[km(r)],!1,!0);let u=0;return Eh(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,f],_,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return sy(e).get(t).next(r=>r?kc(r):null)}}function sy(n){return yt(n,"targets")}function xx(n){return yt(n,"targetGlobal")}function Eh(n){return yt(n,"targetDocuments")}function pp(n){return zT.apply(this,arguments)}function zT(){return zT=(0,_e.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==w)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),zT.apply(this,arguments)}function Rx([n,e],[t,r]){const i=Nt(n,t);return 0===i?Nt(e,r):i}class GO{constructor(e){this.An=e,this.buffer=new mn(Rx),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Rx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qO{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Oe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,_e.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){me(i)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield pp(i)}yield t.Sn(e)}))}}class zO{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return C.resolve(vs.A);const r=new GO(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),C.resolve(Tx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Tx):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,u,c,f,_,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,f=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(b=Date.now(),Om()<=tl.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-A}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${u} targets in `+(_-f)+`ms\n\tRemoved ${M} documents in `+(b-_)+`ms\nTotal Duration: ${b-A}ms`),C.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class WO{constructor(e,t){this.db=e,this.garbageCollector=new zO(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return lI(e,r)}removeReference(e,t,r){return lI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lI(e,t)}On(e,t){return function(r,i){let u=!1;return Mx(r).zt(c=>Ax(r,c,i).next(f=>(f&&(u=!0),C.resolve(!f)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Mn(e,(c,f)=>{if(f<=t){const _=this.On(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Dt.min()),Eh(e).delete([0,wi(c.path)])))});i.push(_)}}).next(()=>C.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lI(e,t)}Mn(e,t){const r=Eh(e);let i,u=vs.A;return r.Wt({index:"documentTargetsIndex"},([c,f],{path:_,sequenceNumber:b})=>{0===c?(u!==vs.A&&t(new $e(ba(i)),u),u=b,i=_):u=vs.A}).next(()=>{u!==vs.A&&t(new $e(ba(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lI(n,e){return Eh(n).put((r=n.currentSequenceNumber,{targetId:0,path:wi(e.path),sequenceNumber:r}));var r}class Nx{constructor(){this.changes=new Nc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?C.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class KO{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return gp(e).put(r)}removeEntry(e,t,r){return gp(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],_h(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=vn.newInvalidDocument(t);return gp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(I0(t))},(i,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:vn.newInvalidDocument(t)};return gp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(I0(t))},(i,u)=>{r={document:this.$n(t,u),size:uI(u)}}).next(()=>r)}getEntries(e,t){let r=ws();return this.Ln(e,t,(i,u)=>{const c=this.$n(i,u);r=r.insert(i,c)}).next(()=>r)}Un(e,t){let r=ws(),i=new er($e.comparator);return this.Ln(e,t,(u,c)=>{const f=this.$n(u,c);r=r.insert(u,f),i=i.insert(u,uI(c))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return C.resolve();let i=new mn(kx);t.forEach(_=>i=i.add(_));const u=IDBKeyRange.bound(I0(i.first()),I0(i.last())),c=i.getIterator();let f=c.getNext();return gp(e).Wt({index:"documentKeyIndex",range:u},(_,b,A)=>{const M=$e.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;f&&kx(f,M)<0;)r(f,null),f=c.getNext();f&&f.isEqual(M)&&(r(f,b),f=c.hasNext()?c.getNext():null),f?A.Ut(I0(f)):A.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),_h(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return gp(e).qt(IDBKeyRange.bound(i,u,!0)).next(c=>{let f=ws();for(const _ of c){const b=this.$n($e.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);f=f.insert(b.key,b)}return f})}getAllFromCollectionGroup(e,t,r,i){let u=ws();const c=Ox(t,r),f=Ox(t,wa.max());return gp(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(_,b,A)=>{const M=this.$n($e.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(M.key,M),u.size===i&&A.done()}).next(()=>u)}newChangeBuffer(e){return new ZO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Px(e).get("remoteDocumentGlobalKey").next(t=>(At(!!t),t))}Fn(e,t){return Px(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function v0(n,e){let t;if(e.document)t=Xm(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$e.fromSegments(e.noDocument.path),i=mu(e.noDocument.readTime);t=vn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=$e.fromSegments(e.unknownDocument.path),i=mu(e.unknownDocument.version);t=vn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new un(r[0],r[1]);return Dt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return vn.newInvalidDocument(e)}}class ZO extends Nx{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Nc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new mn((u,c)=>Nt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const f=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,f.readTime)),c.isValidDocument()){const _=ry(this.Kn.M,c);i=i.add(u.path.popLast()),r+=uI(_)-f.size,t.push(this.Kn.addEntry(e,u,_))}else if(r-=f.size,this.trackRemovals){const _=ry(this.Kn.M,c.convertToNoDocument(Dt.min()));t.push(this.Kn.addEntry(e,u,_))}}),i.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),C.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function Px(n){return yt(n,"remoteDocumentGlobal")}function gp(n){return yt(n,"remoteDocumentsV14")}function I0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ox(n,e){const t=e.documentKey.path.toArray();return[n,_h(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function kx(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Nt(t[u],r[u]),i)return i;return i=Nt(t.length,r.length),i||(i=Nt(t[t.length-2],r[r.length-2]),i||Nt(t[t.length-1],r[r.length-1]))}class YO{constructor(e){this.M=e}kt(e,t,r,i){const u=new x("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",FT,{unique:!0}),f.createObjectStore("documentMutations"),Fx(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=C.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),Fx(e)),c=c.next(()=>function(f){const _=f.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",b)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,_){return _.store("mutations").qt().next(b=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",FT,{unique:!0});const A=_.store("mutations"),M=b.map(F=>A.put(F));return C.waitFor(M)})}(e,u))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Qn(u))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&i>=7&&(c=c.next(()=>this.Wn(u))),r<8&&i>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Hn(u))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const _=f.createObjectStore("documentOverlays",{keyPath:s});_.createIndex("collectionPathOverlayIndex",o,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",a,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const _=f.createObjectStore("remoteDocumentsV14",{keyPath:UT});_.createIndex("documentKeyIndex",cx),_.createIndex("collectionGroupIndex",dx)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:gx}).createIndex("sequenceNumberIndex",mx,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:yx}).createIndex("documentKeyIndex",_x,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=uI(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>C.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(f=>C.forEach(f,_=>{At(_.userId===u.userId);const b=Il(this.M,_);return Sx(e,u.userId,b).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Wt((c,f)=>{const _=new zt(c),b=[0,wi(_)];u.push(t.get(b).next(A=>A?C.resolve():t.put({targetId:0,path:wi(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>C.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:BT});const r=t.store("collectionParents"),i=new GT,u=c=>{if(i.add(c)){const f=c.lastSegment(),_=c.popLast();return r.put({collectionId:f,parent:wi(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,f)=>{const _=new zt(c);return u(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,f,_],b)=>{const A=ba(f);return u(A.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const u=kc(i),c=vx(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((u,c)=>{const f=t.store("remoteDocumentsV14"),_=(b=c,b.document?new $e(zt.fromString(b.document.name).popFirst(5)):b.noDocument?$e.fromSegments(b.noDocument.path):b.unknownDocument?$e.fromSegments(b.unknownDocument.path):st()).path.toArray();var b;const A={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(A))}).next(()=>C.waitFor(i))}}function Fx(n){n.createObjectStore("targetDocuments",{keyPath:fx}).createIndex("documentTargetsIndex",px,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hx,{unique:!0}),n.createObjectStore("targetGlobal")}const WT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class KT{constructor(e,t,r,i,u,c,f,_,b,A,M=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=f,this.Xn=b,this.Zn=A,this.ts=M,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=F=>Promise.resolve(),!KT.vt())throw new Re(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new WO(this,i),this.hs=t+"main",this.M=new ny(_),this.ls=new O(this.hs,this.ts,new YO(this.M)),this.fs=new HO(this.referenceDelegate,this.M),this.ds=new KO(this.M),this._s=new kO,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===A&&dr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,WT);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new vs(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,_e.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>cI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(me(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return C0(e).get("owner").next(t=>C.resolve(this.Ps(t)))}Vs(e){return cI(e).delete(this.clientId)}vs(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=yt(r,"clientMetadata");return i.qt().next(u=>{const c=e.Ds(u,18e5),f=u.filter(_=>-1===c.indexOf(_));return C.forEach(f,_=>i.delete(_.clientId)).next(()=>f)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?C.resolve(!0):C0(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,WT);return!1}}return!(!this.networkEnabled||!this.inForeground)||cI(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new pt(t,vs.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>cI(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return qT.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new $O(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return HT.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?v:13===c?p:12===c?d:11===c?l:void st();var c;let f;return this.ls.runTransaction(e,i,u,_=>(f=new pt(_,this.es?this.es.next():vs.A),"readwrite-primary"===t?this.Es(f).next(b=>!!b||this.As(f)).next(b=>{if(!b)throw dr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Re(ce.FAILED_PRECONDITION,w);return r(f)}).next(b=>this.bs(f).next(()=>b)):this.$s(f).next(()=>r(f)))).then(_=>(f.raiseOnCommittedEvent(),_))}$s(e){return C0(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ce.FAILED_PRECONDITION,WT)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return C0(e).put("owner",t)}static vt(){return O.vt()}Rs(e){const t=C0(e);return t.get("owner").next(r=>this.Ps(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):C.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(dr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,St.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return dr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){dr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function C0(n){return yt(n,"owner")}function cI(n){return yt(n,"clientMetadata")}function ZT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class QO{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const u of r)u.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const u of t)u.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return $e.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):lh(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new $e(t)).next(r=>{let i=c0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let u=c0();return this.indexManager.getCollectionParents(e,i).next(c=>C.forEach(c,f=>{const _=(b=t,A=f.child(i),new bl(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.zs(e,_,r).next(b=>{b.forEach((A,M)=>{u=u.insert(A,M)})})}).next(()=>u))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const f of c.mutations){const _=f.key;let b=i.get(_);null==b&&(b=vn.newInvalidDocument(_),i=i.insert(_,b)),qm(f,b,c.localWriteTime),b.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((u,c)=>{sp(t,c)||(i=i.remove(u))}),i))}}class YT{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=nn(),i=nn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new YT(e,t.fromCache,r,i)}}class Lx{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(u=>u||this.ei(e,t,i,r)).next(u=>u||this.ni(e,t))}ti(e,t){return C.resolve(null)}ei(e,t,r,i){return function rx(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(Dt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const c=this.si(t,u);return this.ii(t,c,r,i)?this.ni(e,t):(Om()<=tl.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Lb(t)),this.ri(e,c,t,Xf(i,-1)))})}si(e,t){let r=new mn(n0(e));return t.forEach((i,u)=>{sp(e,u)&&(r=r.add(u))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}ni(e,t){return Om()<=tl.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",Lb(t)),this.Zs.Qs(e,t,wa.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class JO{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new er(Nt),this.ai=new Nc(u=>Ac(u),uh),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new QO(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function Vx(n,e,t,r){return new JO(n,e,t,r)}function Ux(n,e){return QT.apply(this,arguments)}function QT(){return QT=(0,_e.Z)(function*(n,e){const t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(u=>(i=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],f=[];let _=nn();for(const b of i){c.push(b.batchId);for(const A of b.mutations)_=_.add(A.key)}for(const b of u){f.push(b.batchId);for(const A of b.mutations)_=_.add(A.key)}return t.fi.Ks(r,_).next(b=>({di:b,removedBatchIds:c,addedBatchIds:f}))})})}),QT.apply(this,arguments)}function XO(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(c,f,_,b){const A=_.batch,M=A.keys();let F=C.resolve();return M.forEach(U=>{F=F.next(()=>b.getEntry(f,U)).next(z=>{const le=_.docVersions.get(U);At(null!==le),z.version.compareTo(le)<0&&(A.applyToRemoteDocument(z,_),z.isValidDocument()&&(z.setReadTime(_.commitVersion),b.addEntry(z)))})}),F.next(()=>c.Bs.removeMutationBatch(f,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function Bx(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function e1(n,e){const t=We(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const f=[];e.targetChanges.forEach((b,A)=>{const M=i.get(A);if(!M)return;f.push(t.fs.removeMatchingKeys(u,b.removedDocuments,A).next(()=>t.fs.addMatchingKeys(u,b.addedDocuments,A)));let F=M.withSequenceNumber(u.currentSequenceNumber);var U,z,le;e.targetMismatches.has(A)?F=F.withResumeToken(hr.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):b.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(b.resumeToken,r)),i=i.insert(A,F),z=F,le=b,(0===(U=M).resumeToken.approximateByteSize()||z.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||le.addedDocuments.size+le.modifiedDocuments.size+le.removedDocuments.size>0)&&f.push(t.fs.updateTargetData(u,F))});let _=ws();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),f.push(jx(u,c,e.documentUpdates).next(b=>{_=b})),!r.isEqual(Dt.min())){const b=t.fs.getLastRemoteSnapshotVersion(u).next(A=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));f.push(b)}return C.waitFor(f).next(()=>c.apply(u)).next(()=>t.fi.Gs(u,_)).next(()=>_)}).then(u=>(t.ui=i,u))}function jx(n,e,t){let r=nn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let u=ws();return t.forEach((c,f)=>{const _=i.get(c);f.isNoDocument()&&f.version.isEqual(Dt.min())?(e.removeEntry(c,f.readTime),u=u.insert(c,f)):!_.isValidDocument()||f.version.compareTo(_.version)>0||0===f.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(f),u=u.insert(c,f)):Oe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",_.version," Watch version:",f.version)}),u})}function t1(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function oy(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(u=>u?(i=u,C.resolve(i)):t.fs.allocateTargetId(r).next(c=>(i=new Ia(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function ay(n,e,t){return JT.apply(this,arguments)}function JT(){return JT=(0,_e.Z)(function*(n,e,t){const r=We(n),i=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!me(c))throw c;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),JT.apply(this,arguments)}function dI(n,e,t){const r=We(n);let i=Dt.min(),u=nn();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,_,b){const A=We(f),M=A.ai.get(b);return void 0!==M?C.resolve(A.ui.get(M)):A.fs.getTargetData(_,b)}(r,c,Es(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,f.targetId).next(_=>{u=_})}).next(()=>r.oi.Qs(c,e,t?i:Dt.min(),t?u:nn())).next(f=>(Gx(r,t0(e),f),{documents:f,_i:u})))}function $x(n,e){const t=We(n),r=We(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function Hx(n,e){const t=We(n),r=t.ci.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,Xf(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Gx(t,e,i),i))}function Gx(n,e,t){let r=Dt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function XT(){return XT=(0,_e.Z)(function*(n,e,t,r){const i=We(n);let u=nn(),c=ws();for(const b of t){const A=e.wi(b.metadata.name);b.document&&(u=u.add(A));const M=e.mi(b);M.setReadTime(e.gi(b.metadata.readTime)),c=c.insert(A,M)}const f=i.hi.newChangeBuffer({trackRemovals:!0}),_=yield oy(i,(b=r,Es(rp(zt.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>jx(b,f,c).next(A=>(f.apply(b),A)).next(A=>i.fs.removeMatchingKeysForTargetId(b,_.targetId).next(()=>i.fs.addMatchingKeys(b,u,_.targetId)).next(()=>i.fi.Gs(b,A)).next(()=>A)))}),XT.apply(this,arguments)}function r1(n,e){return eS.apply(this,arguments)}function eS(){return eS=(0,_e.Z)(function*(n,e,t=nn()){const r=yield oy(n,Es(jT(e.bundledQuery))),i=We(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=tr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i._s.saveNamedQuery(u,e);const f=r.withResumeToken(hr.EMPTY_BYTE_STRING,c);return i.ui=i.ui.insert(f.targetId,f),i.fs.updateTargetData(u,f).next(()=>i.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.fs.addMatchingKeys(u,t,r.targetId)).next(()=>i._s.saveNamedQuery(u,e))})}),eS.apply(this,arguments)}class i1{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return C.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:tr(r.createTime)}),C.resolve()}getNamedQuery(e,t){return C.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:jT(r.bundledQuery),readTime:tr(r.readTime)}),C.resolve();var r}}class s1{constructor(){this.overlays=new er($e.comparator),this.Ii=new Map}getOverlay(e,t){return C.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.Xt(e,t,u)}),C.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),C.resolve()}getOverlaysForCollection(e,t,r){const i=ph(),u=t.length+1,c=new $e(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const _=f.getNext().value,b=_.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&_.largestBatchId>r&&i.set(_.getKey(),_)}return C.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new er((b,A)=>b-A);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=ph(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const f=ph(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((b,A)=>f.set(b,A)),!(f.size()>=i)););return C.resolve(f)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new pu(t,r));let u=this.Ii.get(t);void 0===u&&(u=nn(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class tS{constructor(){this.Ti=new mn(bi.Ei),this.Ai=new mn(bi.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new bi(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new bi(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new $e(new zt([])),r=new bi(t,e),i=new bi(t,e+1),u=[];return this.Ai.forEachInRange([r,i],c=>{this.Pi(c),u.push(c.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new $e(new zt([])),r=new bi(t,e),i=new bi(t,e+1);let u=nn();return this.Ai.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new bi(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class bi{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return $e.comparator(e.key,t.key)||Nt(e.Ci,t.Ci)}static Ri(e,t){return Nt(e.Ci,t.Ci)||$e.comparator(e.key,t.key)}}class o1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new mn(bi.Ei)}checkEmpty(e){return C.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const u=this.xi;this.xi++;const c=new en(u,t,r,i);this.Bs.push(c);for(const f of i)this.Ni=this.Ni.add(new bi(f.key,u)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return C.resolve(c)}lookupMutationBatch(e,t){return C.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),u=i<0?0:i;return C.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return C.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return C.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new bi(t,0),i=new bi(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,i],c=>{const f=this.ki(c.Ci);u.push(f)}),C.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(Nt);return t.forEach(i=>{const u=new bi(i,0),c=new bi(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,c],f=>{r=r.add(f.Ci)})}),C.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;$e.isDocumentKey(u)||(u=u.child(""));const c=new bi(new $e(u),0);let f=new mn(Nt);return this.Ni.forEachWhile(_=>{const b=_.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(f=f.add(_.Ci)),!0)},c),C.resolve(this.Oi(f))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){At(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return C.forEach(t.mutations,i=>{const u=new bi(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new bi(t,0),i=this.Ni.firstAfterOrEqual(r);return C.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return C.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class a1{constructor(e){this.$i=e,this.docs=new er($e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return C.resolve(r?r.document.mutableCopy():vn.newInvalidDocument(t))}getEntries(e,t){let r=ws();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():vn.newInvalidDocument(i))}),C.resolve(r)}getAllFromCollection(e,t,r){let i=ws();const u=new $e(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:_}}=c.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||Zv(Kv(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return C.resolve(i)}getAllFromCollectionGroup(e,t,r,i){st()}Bi(e,t){return C.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new u1(this)}getSize(e){return C.resolve(this.size)}}class u1 extends Nx{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),C.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class l1{constructor(e){this.persistence=e,this.Li=new Nc(t=>Ac(t),uh),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new tS,this.targetCount=0,this.Ki=fp.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),C.resolve()}getLastRemoteSnapshotVersion(e){return C.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return C.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),C.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),C.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new fp(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,C.resolve()}updateTargetData(e,t){return this.Tn(t),C.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,C.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Li.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Li.delete(c),u.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),C.waitFor(u).next(()=>i)}getTargetCount(e){return C.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return C.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),C.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),C.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),C.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return C.resolve(r)}containsKey(e,t){return C.resolve(this.qi.containsKey(t))}}class c1{constructor(e,t){this.Gi={},this.overlays={},this.es=new vs(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new l1(this),this.indexManager=new jO,this.ds=new a1(r=>this.referenceDelegate.Qi(r)),this.M=new ny(t),this._s=new i1(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new s1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new o1(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const i=new d1(this.es.next());return this.referenceDelegate.ji(),r(i).next(u=>this.referenceDelegate.Wi(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}zi(e,t){return C.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class d1 extends I{constructor(e){super(),this.currentSequenceNumber=e}}class nS{constructor(e){this.persistence=e,this.Hi=new tS,this.Ji=null}static Yi(e){return new nS(e)}get Xi(){if(this.Ji)return this.Ji;throw st()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),C.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),C.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),C.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return C.forEach(this.Xi,r=>{const i=$e.fromPath(r);return this.Zi(e,i).next(u=>{u||t.removeEntry(i,Dt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return C.or([()=>C.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function qx(n,e){return`firestore_clients_${n}_${e}`}function zx(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function rS(n,e){return`firestore_targets_${n}_${e}`}class hI{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Re(i.error.code,i.error.message))),c?new hI(e,t,i.state,u):(dr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class D0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Re(r.error.code,r.error.message))),u?new D0(e,r.state,i):(dr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=up();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=Cb(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new fI(e,u):(dr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class iS{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new iS(t.clientId,t.onlineState):(dr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class sS{constructor(){this.activeTargetIds=up()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oS{constructor(e,t,r,i,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new er(Nt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=qx(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new sS),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const u=e.getItem(qx(e.persistenceKey,i));if(u){const c=fI.tr(i,u);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(rS(this.persistenceKey,e));if(r){const i=D0.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(rS(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void dr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(u){let c=vs.A;if(null!=u)try{const f=JSON.parse(u);At("number"==typeof f),c=f}catch(f){dr("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==vs.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new hI(this.currentUser,e,t,r),u=zx(this.persistenceKey,this.currentUser,e);this.setItem(u,i.er())}Ar(e){const t=zx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=rS(this.persistenceKey,e),u=new D0(e,t,r);this.setItem(i,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return fI.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return hI.tr(new vi(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return D0.tr(i,t)}pr(e){return iS.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),u=this.Tr(r),c=[],f=[];return u.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{u.has(_)||f.push(_)}),this.syncEngine.Lr(c,f).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=up();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Wx{constructor(){this.Ur=new sS,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new sS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class h1{Kr(e){}shutdown(){}}class Kx{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const f1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class p1{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class g1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,u){const c=this.ho(e,t);Oe("RestConnection","Sending: ",c,r);const f={};return this.lo(f,i,u),this.fo(e,c,f,r).then(_=>(Oe("RestConnection","Received: ",_),_),_=>{throw Zf("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}_o(e,t,r,i,u){return this.co(e,t,r,i,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+wc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ho(e,t){return`${this.uo}/v1/${t}:${f1[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((u,c)=>{const f=new pb;f.listenOnce(iT.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Fv.NO_ERROR:const b=f.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(b)),u(b);break;case Fv.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),c(new Re(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Fv.HTTP_ERROR:const A=f.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',A,"response text:",f.getResponseText()),A>0){const M=f.getResponseJson().error;if(M&&M.status&&M.message){const F=function(U){const z=U.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(z)>=0?z:ce.UNKNOWN}(M.status);c(new Re(F,M.message))}else c(new Re(ce.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Re(ce.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);f.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=rT(),c=ex(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new nh({})),this.lo(f.initMessageHeaders,t,r),(0,St.uI)()||(0,St.b$)()||(0,St.d)()||(0,St.w1)()||(0,St.Mn)()||(0,St.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");Oe("Connection","Creating WebChannel: "+_,f);const b=u.createWebChannel(_,f);let A=!1,M=!1;const F=new p1({Jr:z=>{M?Oe("Connection","Not sending because WebChannel is closed:",z):(A||(Oe("Connection","Opening WebChannel transport."),b.open(),A=!0),Oe("Connection","WebChannel sending:",z),b.send(z))},Yr:()=>b.close()}),U=(z,le,Se)=>{z.listen(le,rt=>{try{Se(rt)}catch(it){setTimeout(()=>{throw it},0)}})};return U(b,Vv.EventType.OPEN,()=>{M||Oe("Connection","WebChannel transport opened.")}),U(b,Vv.EventType.CLOSE,()=>{M||(M=!0,Oe("Connection","WebChannel transport closed"),F.ro())}),U(b,Vv.EventType.ERROR,z=>{M||(M=!0,Zf("Connection","WebChannel transport errored:",z),F.ro(new Re(ce.UNAVAILABLE,"The operation could not be completed")))}),U(b,Vv.EventType.MESSAGE,z=>{var le;if(!M){const Se=z.data[0];At(!!Se);const rt=Se,it=rt.error||(null===(le=rt[0])||void 0===le?void 0:le.error);if(it){Oe("Connection","WebChannel received error:",it);const Xe=it.status;let ze=function(Mt){const Zt=gr[Mt];if(void 0!==Zt)return qb(Zt)}(Xe),Tt=it.message;void 0===ze&&(ze=ce.INTERNAL,Tt="Unknown error status: "+Xe+" with message "+it.message),M=!0,F.ro(new Re(ze,Tt)),b.close()}else Oe("Connection","WebChannel received:",Se),F.oo(Se)}}),U(c,th.STAT_EVENT,z=>{z.stat===Lv.PROXY?Oe("Connection","Detected buffering proxy"):z.stat===Lv.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.io()},0),F}}function Zx(){return"undefined"!=typeof window?window:null}function pI(){return"undefined"!=typeof document?document:null}function T0(n){return new ax(n,!0)}class aS{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Yx{constructor(e,t,r,i,u,c,f,_){this.Yn=e,this.Vo=r,this.vo=i,this.So=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=_,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new aS(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,_e.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,_e.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(dr(t.toString()),dr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Re(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,_e.Z)(function*(){e.state=0,e.start()}))}jo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class m1 extends Yx{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function ux(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:st(),i=e.targetChange.targetIds||[],u=function(_,b){return _.N?(At(void 0===b||"string"==typeof b),hr.fromBase64String(b||"")):(At(void 0===b||b instanceof Uint8Array),hr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(_){const b=void 0===_.code?ce.UNKNOWN:qb(_.code);return new Re(b,_.message||"")}(c);t=new MT(r,i,u,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Ei(n,r.document.name),u=tr(r.document.updateTime),c=new kr({mapValue:{fields:r.document.fields}}),f=vn.newFoundDocument(i,u,c);t=new Km(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Ei(n,r.document),u=r.readTime?tr(r.readTime):Dt.min(),c=vn.newNoDocument(i,u);t=new Km([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Ei(n,r.document);t=new Km([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return st();{const r=e.filter,u=new Gb(r.count||0);t=new AT(r.targetId,u)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Dt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Dt.min():u.readTime?tr(u.readTime):Dt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Pc(this.M),t.addTarget=function(i,u){let c;const f=u.target;return c=tp(f)?{documents:g0(i,f)}:{query:Jb(i,f)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=RT(i,u.resumeToken):u.snapshotVersion.compareTo(Dt.min())>0&&(c.readTime=Zm(i,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function PT(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Pc(this.M),t.removeTarget=e,this.Lo(t)}}class y1 extends Yx{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(At(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function lx(n,e){return n&&n.length>0?(At(void 0!==e),n.map(t=>function(r,i){let u=tr(r.updateTime?r.updateTime:i);return u.isEqual(Dt.min())&&(u=tr(i)),new s0(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=tr(e.commitTime);return this.listener.tu(r,t)}return At(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Pc(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ty(this.M,r))};this.Lo(t)}}class _1 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So.co(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(ce.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So._o(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(ce.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class v1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(dr(t),this.uu=!1):Oe("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class E1{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(f=>{r.enqueueAndForget((0,_e.Z)(function*(){var _;wh(c)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,_e.Z)(function*(b){const A=We(b);A.wu.add(4),yield uy(A),A.yu.set("Unknown"),A.wu.delete(4),yield S0(A)}),function(b){return _.apply(this,arguments)})(c))}))}),this.yu=new v1(r,i)}}function S0(n){return uS.apply(this,arguments)}function uS(){return uS=(0,_e.Z)(function*(n){if(wh(n))for(const e of n.mu)yield e(!0)}),uS.apply(this,arguments)}function uy(n){return lS.apply(this,arguments)}function lS(){return lS=(0,_e.Z)(function*(n){for(const e of n.mu)yield e(!1)}),lS.apply(this,arguments)}function gI(n,e){const t=We(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),hS(t)?dS(t):cy(t).Mo()&&cS(t,e))}function A0(n,e){const t=We(n),r=cy(t);t._u.delete(e),r.Mo()&&Qx(t,e),0===t._u.size&&(r.Mo()?r.$o():wh(t)&&t.yu.set("Unknown"))}function cS(n,e){n.pu.Z(e.targetId),cy(n).Ho(e)}function Qx(n,e){n.pu.Z(e),cy(n).Jo(e)}function dS(n){n.pu=new xT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),cy(n).start(),n.yu.au()}function hS(n){return wh(n)&&!cy(n).ko()&&n._u.size>0}function wh(n){return 0===We(n).wu.size}function Jx(n){n.pu=void 0}function w1(n){return fS.apply(this,arguments)}function fS(){return fS=(0,_e.Z)(function*(n){n._u.forEach((e,t)=>{cS(n,e)})}),fS.apply(this,arguments)}function b1(n,e){return pS.apply(this,arguments)}function pS(){return pS=(0,_e.Z)(function*(n,e){Jx(n),hS(n)?(n.yu.lu(e),dS(n)):n.yu.set("Unknown")}),pS.apply(this,arguments)}function I1(n,e,t){return gS.apply(this,arguments)}function gS(){return gS=(0,_e.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof MT&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(i,u){const c=u.cause;for(const f of u.targetIds)i._u.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i._u.delete(f),i.pu.removeTarget(f))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield mI(n,r)}else if(e instanceof Km?n.pu.ut(e):e instanceof AT?n.pu._t(e):n.pu.ht(e),!t.isEqual(Dt.min()))try{const r=yield Bx(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.pu.yt(u);return c.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const b=i._u.get(_);b&&i._u.set(_,b.withResumeToken(f.resumeToken,u))}}),c.targetMismatches.forEach(f=>{const _=i._u.get(f);if(!_)return;i._u.set(f,_.withResumeToken(hr.EMPTY_BYTE_STRING,_.snapshotVersion)),Qx(i,f);const b=new Ia(_.target,f,1,_.sequenceNumber);cS(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield mI(n,r)}var r}),gS.apply(this,arguments)}function mI(n,e,t){return mS.apply(this,arguments)}function mS(){return mS=(0,_e.Z)(function*(n,e,t){if(!me(e))throw e;n.wu.add(1),yield uy(n),n.yu.set("Offline"),t||(t=()=>Bx(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield S0(n)}))}),mS.apply(this,arguments)}function Xx(n,e){return e().catch(t=>mI(n,t,e))}function ly(n){return yS.apply(this,arguments)}function yS(){return yS=(0,_e.Z)(function*(n){const e=We(n),t=bh(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;C1(e);)try{const i=yield t1(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,D1(e,i)}catch(i){yield mI(e,i)}eR(e)&&tR(e)}),yS.apply(this,arguments)}function C1(n){return wh(n)&&n.du.length<10}function D1(n,e){n.du.push(e);const t=bh(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function eR(n){return wh(n)&&!bh(n).ko()&&n.du.length>0}function tR(n){bh(n).start()}function T1(n){return _S.apply(this,arguments)}function _S(){return _S=(0,_e.Z)(function*(n){bh(n).nu()}),_S.apply(this,arguments)}function S1(n){return vS.apply(this,arguments)}function vS(){return vS=(0,_e.Z)(function*(n){const e=bh(n);for(const t of n.du)e.Zo(t.mutations)}),vS.apply(this,arguments)}function A1(n,e,t){return ES.apply(this,arguments)}function ES(){return ES=(0,_e.Z)(function*(n,e,t){const r=n.du.shift(),i=Fi.from(r,e,t);yield Xx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ly(n)}),ES.apply(this,arguments)}function M1(n,e){return wS.apply(this,arguments)}function wS(){return wS=(0,_e.Z)(function*(n,e){var t;e&&bh(n).Xo&&(yield(t=(0,_e.Z)(function*(r,i){if(l0(u=i.code)&&u!==ce.ABORTED){const c=r.du.shift();bh(r).Fo(),yield Xx(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield ly(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),eR(n)&&tR(n)}),wS.apply(this,arguments)}function nR(n,e){return bS.apply(this,arguments)}function bS(){return bS=(0,_e.Z)(function*(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=wh(t);t.wu.add(3),yield uy(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield S0(t)}),bS.apply(this,arguments)}function IS(n,e){return CS.apply(this,arguments)}function CS(){return CS=(0,_e.Z)(function*(n,e){const t=We(n);e?(t.wu.delete(2),yield S0(t)):e||(t.wu.add(2),yield uy(t),t.yu.set("Unknown"))}),CS.apply(this,arguments)}function cy(n){return n.Iu||(n.Iu=function(e,t,r){const i=We(e);return i.iu(),new m1(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:w1.bind(null,n),eo:b1.bind(null,n),zo:I1.bind(null,n)}),n.mu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Iu.Fo(),hS(n)?dS(n):n.yu.set("Unknown")):(yield n.Iu.stop(),Jx(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function bh(n){return n.Tu||(n.Tu=function(e,t,r){const i=We(e);return i.iu(),new y1(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:T1.bind(null,n),eo:M1.bind(null,n),eu:S1.bind(null,n),tu:A1.bind(null,n)}),n.mu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Tu.Fo(),yield ly(n)):(yield n.Tu.stop(),n.du.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class DS{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new Hn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,f=new DS(e,t,c,i,u);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dy(n,e){if(dr("AsyncQueue",`${e}: ${n}`),me(n))return new Re(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class hy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=c0(),this.sortedSet=new er(this.comparator)}static emptySet(e){return new hy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new hy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class rR{constructor(){this.Eu=new er($e.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):st():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class fy{constructor(e,t,r,i,u,c,f,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new fy(e,t,hy.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ch(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class x1{constructor(){this.Ru=void 0,this.listeners=[]}}class R1{constructor(){this.queries=new Nc(e=>e0(e),ch),this.onlineState="Unknown",this.bu=new Set}}function TS(n,e){return SS.apply(this,arguments)}function SS(){return SS=(0,_e.Z)(function*(n,e){const t=We(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new x1),i)try{u.Ru=yield t.onListen(r)}catch(c){const f=dy(c,`Initialization of query '${Lb(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&xS(t)}),SS.apply(this,arguments)}function AS(n,e){return MS.apply(this,arguments)}function MS(){return MS=(0,_e.Z)(function*(n,e){const t=We(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),MS.apply(this,arguments)}function N1(n,e){const t=We(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.Vu(i)&&(r=!0);c.Ru=i}}r&&xS(t)}function P1(n,e,t){const r=We(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function xS(n){n.bu.forEach(e=>{e.next()})}class RS{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new fy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=fy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class O1{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class iR{constructor(e){this.M=e}wi(e){return Ei(this.M,e)}mi(e){return e.metadata.exists?Xm(this.M,e.document,!1):vn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return tr(e)}}class k1{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=sR(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=zt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new iR(this.M);for(const i of e)if(i.metadata.queries){const u=r.wi(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||nn()).add(u);t.set(c,f)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function n1(n,e,t,r){return XT.apply(this,arguments)}(e.localStore,new iR(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield r1(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function sR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class oR{constructor(e){this.key=e}}class aR{constructor(e){this.key=e}}class uR{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=nn(),this.mutatedKeys=nn(),this.Gu=n0(e),this.Qu=new hy(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new rR,i=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,b="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((A,M)=>{const F=i.get(A),U=sp(this.query,M)?M:null,z=!!F&&this.mutatedKeys.has(F.key),le=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let Se=!1;F&&U?F.data.isEqual(U.data)?z!==le&&(r.track({type:3,doc:U}),Se=!0):this.Hu(F,U)||(r.track({type:2,doc:U}),Se=!0,(_&&this.Gu(U,_)>0||b&&this.Gu(U,b)<0)&&(f=!0)):!F&&U?(r.track({type:0,doc:U}),Se=!0):F&&!U&&(r.track({type:1,doc:F}),Se=!0,(_||b)&&(f=!0)),Se&&(U?(c=c.add(U),u=le?u.add(A):u.delete(A)):(c=c.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const A="F"===this.query.limitType?c.last():c.first();c=c.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:c,zu:r,ii:f,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((b,A)=>function(M,F){const U=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return U(M)-U(F)}(b.type,A.type)||this.Gu(b.doc,A.doc)),this.Ju(r);const c=t?this.Yu():[],f=0===this.Ku.size&&this.current?1:0,_=f!==this.qu;return this.qu=f,0!==u.length||_?{snapshot:new fy(this.query,e.Qu,i,u,e.mutatedKeys,0===f,_,!1),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new rR,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=nn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new aR(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new oR(r))}),t}ta(e){this.Uu=e._i,this.Ku=nn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return fy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class F1{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class L1{constructor(e){this.key=e,this.na=!1}}class V1{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new Nc(f=>e0(f),ch),this.ra=new Map,this.oa=new Set,this.ua=new er($e.comparator),this.aa=new Map,this.ca=new tS,this.ha={},this.la=new Map,this.fa=fp.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function U1(n,e){return NS.apply(this,arguments)}function NS(){return NS=(0,_e.Z)(function*(n,e){const t=tA(n);let r,i;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.ea();else{const c=yield oy(t.localStore,Es(e));t.isPrimaryClient&&gI(t.remoteStore,c);const f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield PS(t,e,r,"current"===f)}return i}),NS.apply(this,arguments)}function PS(n,e,t,r){return OS.apply(this,arguments)}function OS(){return OS=(0,_e.Z)(function*(n,e,t,r){n._a=(A,M,F)=>{return(U=(0,_e.Z)(function*(z,le,Se,rt){let it=le.view.Wu(Se);it.ii&&(it=yield dI(z.localStore,le.query,!1).then(({documents:Tt})=>le.view.Wu(Tt,it)));const Xe=rt&&rt.targetChanges.get(le.targetId),ze=le.view.applyChanges(it,z.isPrimaryClient,Xe);return GS(z,le.targetId,ze.Xu),ze.snapshot}),function(z,le,Se,rt){return U.apply(this,arguments)})(n,A,M,F);var U};const i=yield dI(n.localStore,e,!0),u=new uR(e,i._i),c=u.Wu(i.documents),f=lp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=u.applyChanges(c,n.isPrimaryClient,f);GS(n,t,_.Xu);const b=new F1(e,t,u);return n.ia.set(e,b),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),_.snapshot}),OS.apply(this,arguments)}function B1(n,e){return kS.apply(this,arguments)}function kS(){return kS=(0,_e.Z)(function*(n,e){const t=We(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(u=>!ch(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ay(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),A0(t.remoteStore,r.targetId),py(t,r.targetId)}).catch(pp))):(py(t,r.targetId),yield ay(t.localStore,r.targetId,!0))}),kS.apply(this,arguments)}function FS(){return FS=(0,_e.Z)(function*(n,e,t){const r=nA(n);try{const i=yield function(u,c){const f=We(u),_=un.now(),b=c.reduce((M,F)=>M.add(F.key),nn());let A;return f.persistence.runTransaction("Locally write mutations","readwrite",M=>f.fi.Ks(M,b).next(F=>{A=F;const U=[];for(const z of c){const le=DT(z,A.get(z.key));null!=le&&U.push(new Rc(z.key,le,Ab(le.value.mapValue),pr.exists(!0)))}return f.Bs.addMutationBatch(M,_,U,c)})).then(M=>(M.applyToLocalDocumentSet(A),{batchId:M.batchId,changes:A}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,f){let _=u.ha[u.currentUser.toKey()];_||(_=new er(Nt)),_=_.insert(c,f),u.ha[u.currentUser.toKey()]=_}(r,i.batchId,t),yield Fc(r,i.changes),yield ly(r.remoteStore)}catch(i){const u=dy(i,"Failed to persist write");t.reject(u)}}),FS.apply(this,arguments)}function lR(n,e){return LS.apply(this,arguments)}function LS(){return LS=(0,_e.Z)(function*(n,e){const t=We(n);try{const r=yield e1(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.aa.get(u);c&&(At(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.na=!0:i.modifiedDocuments.size>0?At(c.na):i.removedDocuments.size>0&&(At(c.na),c.na=!1))}),yield Fc(t,r,e)}catch(r){yield pp(r)}}),LS.apply(this,arguments)}function cR(n,e,t){const r=We(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((u,c)=>{const f=c.view.Pu(e);f.snapshot&&i.push(f.snapshot)}),function(u,c){const f=We(u);f.onlineState=c;let _=!1;f.queries.forEach((b,A)=>{for(const M of A.listeners)M.Pu(c)&&(_=!0)}),_&&xS(f)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function $1(n,e,t){return VS.apply(this,arguments)}function VS(){return VS=(0,_e.Z)(function*(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),u=i&&i.key;if(u){let c=new er($e.comparator);c=c.insert(u,vn.newNoDocument(u,Dt.min()));const f=nn().add(u),_=new gh(Dt.min(),new Map,new mn(Nt),c,f);yield lR(r,_),r.ua=r.ua.remove(u),r.aa.delete(e),qS(r)}else yield ay(r.localStore,e,!1).then(()=>py(r,e,t)).catch(pp)}),VS.apply(this,arguments)}function H1(n,e){return US.apply(this,arguments)}function US(){return US=(0,_e.Z)(function*(n,e){const t=We(n),r=e.batch.batchId;try{const i=yield XO(t.localStore,e);HS(t,r,null),$S(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Fc(t,i)}catch(i){yield pp(i)}}),US.apply(this,arguments)}function G1(n,e,t){return BS.apply(this,arguments)}function BS(){return BS=(0,_e.Z)(function*(n,e,t){const r=We(n);try{const i=yield function(u,c){const f=We(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let b;return f.Bs.lookupMutationBatch(_,c).next(A=>(At(null!==A),b=A.keys(),f.Bs.removeMutationBatch(_,A))).next(()=>f.Bs.performConsistencyCheck(_)).next(()=>f.fi.Ks(_,b))})}(r.localStore,e);HS(r,e,t),$S(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Fc(r,i)}catch(i){yield pp(i)}}),BS.apply(this,arguments)}function jS(){return jS=(0,_e.Z)(function*(n,e){const t=We(n);wh(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=We(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.Bs.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=dy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),jS.apply(this,arguments)}function $S(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function HS(n,e,t){const r=We(n);let i=r.ha[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function py(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||dR(n,r)})}function dR(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(A0(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),qS(n))}function GS(n,e,t){for(const r of t)r instanceof oR?(n.ca.addReference(r.key,e),z1(n,r)):r instanceof aR?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||dR(n,r.key)):st()}function z1(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.oa.add(r),qS(n))}function qS(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new $e(zt.fromString(e)),r=n.fa.next();n.aa.set(r,new L1(t)),n.ua=n.ua.insert(t,r),gI(n.remoteStore,new Ia(Es(rp(t.path)),r,2,vs.A))}}function Fc(n,e,t){return zS.apply(this,arguments)}function zS(){return zS=(0,_e.Z)(function*(n,e,t){const r=We(n),i=[],u=[],c=[];var f;r.ia.isEmpty()||(r.ia.forEach((f,_)=>{c.push(r._a(_,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,b.fromCache?"not-current":"current"),i.push(b);const A=YT.Ys(_.targetId,b);u.push(A)}}))}),yield Promise.all(c),r.sa.zo(i),yield(f=(0,_e.Z)(function*(_,b){const A=We(_);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>C.forEach(b,F=>C.forEach(F.Hs,U=>A.persistence.referenceDelegate.addReference(M,F.targetId,U)).next(()=>C.forEach(F.Js,U=>A.persistence.referenceDelegate.removeReference(M,F.targetId,U)))))}catch(M){if(!me(M))throw M;Oe("LocalStore","Failed to update sequence numbers: "+M)}for(const M of b){const F=M.targetId;if(!M.fromCache){const U=A.ui.get(F),le=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);A.ui=A.ui.insert(F,le)}}}),function(_,b){return f.apply(this,arguments)})(r.localStore,u))}),zS.apply(this,arguments)}function W1(n,e){return WS.apply(this,arguments)}function WS(){return WS=(0,_e.Z)(function*(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield Ux(t.localStore,e);t.currentUser=e,(i=t).la.forEach(c=>{c.forEach(f=>{f.reject(new Re(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fc(t,r.di)}var i}),WS.apply(this,arguments)}function K1(n,e){const t=We(n),r=t.aa.get(e);if(r&&r.na)return nn().add(r.key);{let i=nn();const u=t.ra.get(e);if(!u)return i;for(const c of u){const f=t.ia.get(c);i=i.unionWith(f.view.ju)}return i}}function Z1(n,e){return KS.apply(this,arguments)}function KS(){return KS=(0,_e.Z)(function*(n,e){const t=We(n),r=yield dI(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&GS(t,e.targetId,i.Xu),i}),KS.apply(this,arguments)}function Y1(n,e){return ZS.apply(this,arguments)}function ZS(){return ZS=(0,_e.Z)(function*(n,e){const t=We(n);return Hx(t.localStore,e).then(r=>Fc(t,r))}),ZS.apply(this,arguments)}function Q1(n,e,t,r){return YS.apply(this,arguments)}function YS(){return YS=(0,_e.Z)(function*(n,e,t,r){const i=We(n),u=yield function(c,f){const _=We(c),b=We(_.Bs);return _.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.fn(A,f).next(M=>M?_.fi.Ks(A,M):C.resolve(null)))}(i.localStore,e);var f;null!==u?("pending"===t?yield ly(i.remoteStore):"acknowledged"===t||"rejected"===t?(HS(i,e,r||null),$S(i,e),f=e,We(We(i.localStore).Bs)._n(f)):st(),yield Fc(i,u)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),YS.apply(this,arguments)}function QS(){return QS=(0,_e.Z)(function*(n,e){const t=We(n);if(tA(t),nA(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield hR(t,r.toArray());t.da=!0,yield IS(t.remoteStore,!0);for(const u of i)gI(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(py(t,c),ay(t.localStore,c,!0))),A0(t.remoteStore,c)}),yield i,yield hR(t,r),function(u){const c=We(u);c.aa.forEach((f,_)=>{A0(c.remoteStore,_)}),c.ca.Si(),c.aa=new Map,c.ua=new er($e.comparator)}(t),t.da=!1,yield IS(t.remoteStore,!1)}}),QS.apply(this,arguments)}function hR(n,e,t){return JS.apply(this,arguments)}function JS(){return JS=(0,_e.Z)(function*(n,e,t){const r=We(n),i=[],u=[];for(const c of e){let f;const _=r.ra.get(c);if(_&&0!==_.length){f=yield oy(r.localStore,Es(_[0]));for(const b of _){const A=r.ia.get(b),M=yield Z1(r,A);M.snapshot&&u.push(M.snapshot)}}else{const b=yield $x(r.localStore,c);f=yield oy(r.localStore,b),yield PS(r,fR(b),c,!1)}i.push(f)}return r.sa.zo(u),i}),JS.apply(this,arguments)}function fR(n){return vT(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function X1(n){const e=We(n);return We(We(e.localStore).persistence).Fs()}function ek(n,e,t,r){return XS.apply(this,arguments)}function XS(){return XS=(0,_e.Z)(function*(n,e,t,r){const i=We(n);if(i.da)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const u=i.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield Hx(i.localStore,t0(u[0])),f=gh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Fc(i,c,f);break}case"rejected":yield ay(i.localStore,e,!0),py(i,e,r);break;default:st()}}),XS.apply(this,arguments)}function tk(n,e,t){return eA.apply(this,arguments)}function eA(){return eA=(0,_e.Z)(function*(n,e,t){const r=tA(n);if(r.da){for(const i of e){if(r.ra.has(i)){Oe("SyncEngine","Adding an already active target "+i);continue}const u=yield $x(r.localStore,i),c=yield oy(r.localStore,u);yield PS(r,fR(u),c.targetId,!1),gI(r.remoteStore,c)}for(const i of t)r.ra.has(i)&&(yield ay(r.localStore,i,!1).then(()=>{A0(r.remoteStore,i),py(r,i)}).catch(pp))}}),eA.apply(this,arguments)}function tA(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=lR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=K1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$1.bind(null,e),e.sa.zo=N1.bind(null,e.eventManager),e.sa.wa=P1.bind(null,e.eventManager),e}function nA(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=H1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=G1.bind(null,e),e}class pR{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.M=T0(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return Vx(this.persistence,new Lx,e.initialUser,this.M)}ya(e){return new c1(nS.Yi,this.M)}ga(e){return new Wx}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class gR extends pR{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield nA(r.Ta.syncEngine),yield ly(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return Vx(this.persistence,new Lx,e.initialUser,this.M)}pa(e){return new qO(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=ZT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ys.withCacheSize(this.cacheSizeBytes):Ys.DEFAULT;return new KT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Zx(),pI(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new Wx}}class rk extends gR{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof oS&&(r.sharedClientState.syncEngine={$r:Q1.bind(null,i),Br:ek.bind(null,i),Lr:tk.bind(null,i),Fs:X1.bind(null,i),Fr:Y1.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,_e.Z)(function*(c){yield function J1(n,e){return QS.apply(this,arguments)}(r.Ta.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}ga(e){const t=Zx();if(!oS.vt(t))throw new Re(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ZT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new oS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class rA{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>cR(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=W1.bind(null,r.syncEngine),yield IS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new R1}createDatastore(e){const t=T0(e.databaseInfo.databaseId),r=new g1(e.databaseInfo);return new _1(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=f=>cR(this.syncEngine,f,0),c=Kx.vt()?new Kx:new h1,new E1(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,f,_,b){const A=new V1(r,i,u,c,f,_);return b&&(A.da=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=We(t);Oe("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield uy(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function mR(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class yI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ik{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Hn,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(i);return new O1(JSON.parse(u),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,_e.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class sk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,_e.Z)(function*(u,c){const f=We(u),_=Pc(f.M)+"/documents",b={documents:c.map(U=>mh(f.M,U))},A=yield f._o("BatchGetDocuments",_,b),M=new Map;A.forEach(U=>{const z=function ey(n,e){return"found"in e?function(t,r){At(!!r.found);const i=Ei(t,r.found.name),u=tr(r.found.updateTime),c=new kr({mapValue:{fields:r.found.fields}});return vn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){At(!!r.missing),At(!!r.readTime);const i=Ei(t,r.missing),u=tr(r.readTime);return vn.newNoDocument(i,u)}(n,e):st()}(f.M,U);M.set(z.key.toString(),z)});const F=[];return c.forEach(U=>{const z=M.get(U.toString());At(!!z),F.push(z)}),F}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=$e.fromPath(i);e.mutations.push(new u0(u,e.precondition(u)))}),yield(r=(0,_e.Z)(function*(i,u){const c=We(i),f=Pc(c.M)+"/documents",_={writes:u.map(b=>ty(c.M,b))};yield c.co("Commit",f,_)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?pr.updateTime(t):pr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new Re(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pr.updateTime(t)}return pr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ok{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.xa=r.maxAttempts,this.No=new aS(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,_e.Z)(function*(){const t=new sk(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Ma(u)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!Dc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!l0(t)}return!1}}class ak{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=vi.UNAUTHENTICATED,this.clientId=wb.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,_e.Z)(function*(f){Oe("FirestoreClient","Received user=",f.uid),yield u.authCredentialListener(f),u.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Oe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Hn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=dy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function yR(n,e){return iA.apply(this,arguments)}function iA(){return iA=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,_e.Z)(function*(u){r.isEqual(u)||(yield Ux(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),iA.apply(this,arguments)}function _R(n,e){return sA.apply(this,arguments)}function sA(){return sA=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield oA(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>nR(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>nR(e.remoteStore,u)),n.onlineComponents=e}),sA.apply(this,arguments)}function oA(n){return aA.apply(this,arguments)}function aA(){return aA=(0,_e.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield yR(n,new pR)),n.offlineComponents}),aA.apply(this,arguments)}function _I(n){return uA.apply(this,arguments)}function uA(){return uA=(0,_e.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield _R(n,new rA)),n.onlineComponents}),uA.apply(this,arguments)}function vR(n){return oA(n).then(e=>e.persistence)}function lA(n){return oA(n).then(e=>e.localStore)}function ER(n){return _I(n).then(e=>e.remoteStore)}function cA(n){return _I(n).then(e=>e.syncEngine)}function gy(n){return dA.apply(this,arguments)}function dA(){return dA=(0,_e.Z)(function*(n){const e=yield _I(n),t=e.eventManager;return t.onListen=U1.bind(null,e.syncEngine),t.onUnlisten=B1.bind(null,e.syncEngine),t}),dA.apply(this,arguments)}function wR(n,e,t={}){const r=new Hn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,u,c,f,_){const b=new yI({next:M=>{u.enqueueAndForget(()=>AS(i,A));const F=M.docs.has(c);!F&&M.fromCache?_.reject(new Re(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&M.fromCache&&f&&"server"===f.source?_.reject(new Re(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(M)},error:M=>_.reject(M)}),A=new RS(rp(c.path),b,{includeMetadataChanges:!0,ku:!0});return TS(i,A)}(yield gy(n),n.asyncQueue,e,t,r)})),r.promise}function bR(n,e,t={}){const r=new Hn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,u,c,f,_){const b=new yI({next:M=>{u.enqueueAndForget(()=>AS(i,A)),M.fromCache&&"server"===f.source?_.reject(new Re(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(M)},error:M=>_.reject(M)}),A=new RS(c,b,{includeMetadataChanges:!0,ku:!0});return TS(i,A)}(yield gy(n),n.asyncQueue,e,t,r)})),r.promise}const IR=new Map;function hA(n,e,t){if(!t)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function CR(n,e,t,r){if(!0===e&&!0===r)throw new Re(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function DR(n){if(!$e.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TR(n){if($e.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function Jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vI(n);throw new Re(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function SR(n,e){if(e<=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class AR{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,CR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class M0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AR({}),this._settingsFrozen=!1,e instanceof va?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Re(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new va(i.options.projectId)}(e))}get app(){if(!this._app)throw new Re(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new mb;switch(t.type){case"gapi":const r=t.client;return At(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new oT(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Re(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=IR.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),IR.delete(e),t.terminate())}(this),Promise.resolve()}}class Ln{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ln(this.firestore,e,this._key)}}class rs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new rs(this.firestore,e,this._query)}}class Cl extends rs{constructor(e,t,r){super(e,t,rp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ln(this.firestore,null,new $e(e))}withConverter(e){return new Cl(this.firestore,e,this._path)}}function MR(n,e,...t){if(n=(0,St.m9)(n),hA("collection","path",e),n instanceof M0){const r=zt.fromString(e,...t);return TR(r),new Cl(n,null,r)}{if(!(n instanceof Ln||n instanceof Cl))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zt.fromString(e,...t));return TR(r),new Cl(n.firestore,null,r)}}function EI(n,e,...t){if(n=(0,St.m9)(n),1===arguments.length&&(e=wb.R()),hA("doc","path",e),n instanceof M0){const r=zt.fromString(e,...t);return DR(r),new Ln(n,null,new $e(r))}{if(!(n instanceof Ln||n instanceof Cl))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zt.fromString(e,...t));return DR(r),new Ln(n.firestore,n instanceof Cl?n.converter:null,new $e(r))}}function xR(n,e){return n=(0,St.m9)(n),e=(0,St.m9)(e),(n instanceof Ln||n instanceof Cl)&&(e instanceof Ln||e instanceof Cl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function RR(n,e){return n=(0,St.m9)(n),e=(0,St.m9)(e),n instanceof rs&&e instanceof rs&&n.firestore===e.firestore&&ch(n._query,e._query)&&n.converter===e.converter}class _k{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new aS(this,"async_queue_retry"),this.Qa=()=>{const t=pI();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=pI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=pI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Hn;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,_e.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!me(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,dr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=DS.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(i),i}ja(){this.Ua&&st()}verifyOperationInProgress(){}Ja(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function fA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class vk{constructor(){this._progressObserver={},this._taskCompletionResolver=new Hn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class qn extends M0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new _k,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||NR(this),this._firestoreClient.terminate()}}function Fr(n){return n._firestoreClient||NR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function NR(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Hv(n._databaseId,u,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var u,f;n._firestoreClient=new ak(n._authCredentials,n._appCheckCredentials,n._queue,r)}function PR(n,e,t){const r=new Hn;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield yR(n,t),yield _R(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(u=i).name?u.code===ce.FAILED_PRECONDITION||u.code===ce.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var u})).then(()=>r.promise)}function OR(n){if(n._initialized||n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Lc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Dl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dl(hr.fromBase64String(e))}catch(t){throw new Re(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Dl(hr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class mp{constructor(e){this._methodName=e}}class wI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}}const Mk=/^__.*__$/;class xk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Rc(e,this.data,this.fieldMask,t,this.fieldTransforms):new ap(e,this.data,t,this.fieldTransforms)}}class kR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Rc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function FR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class bI{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new bI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return DI(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(FR(this.ec)&&Mk.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class Rk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||T0(e)}lc(e,t,r,i=!1){return new bI({ec:e,methodName:t,hc:r,path:Gn.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function yp(n){const e=n._freezeSettings(),t=T0(n._databaseId);return new Rk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function II(n,e,t,r,i,u={}){const c=n.lc(u.merge||u.mergeFields?2:0,e,t,i);yA("Data must be an object, but it was:",c,r);const f=UR(r,c);let _,b;if(u.merge)_=new ih(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const A=[];for(const M of u.mergeFields){const F=_A(e,M,t);if(!c.contains(F))throw new Re(ce.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);jR(A,F)||A.push(F)}_=new ih(A),b=c.fieldTransforms.filter(M=>_.covers(M.field))}else _=null,b=c.fieldTransforms;return new xk(new kr(f),_,b)}class x0 extends mp{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof x0}}function LR(n,e,t){return new bI({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class pA extends mp{_toFieldTransform(e){return new ki(e.path,new op)}isEqual(e){return e instanceof pA}}class Nk extends mp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=LR(this,e,!0),r=this.fc.map(u=>_p(u,t)),i=new Mc(r);return new ki(e.path,i)}isEqual(e){return this===e}}class Pk extends mp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=LR(this,e,!0),r=this.fc.map(u=>_p(u,t)),i=new xc(r);return new ki(e.path,i)}isEqual(e){return this===e}}class Ok extends mp{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new hh(e.M,Ub(e.M,this.dc));return new ki(e.path,t)}isEqual(e){return this===e}}function gA(n,e,t,r){const i=n.lc(1,e,t);yA("Data must be an object, but it was:",i,r);const u=[],c=kr.empty();So(r,(_,b)=>{const A=CI(e,_,t);b=(0,St.m9)(b);const M=i.oc(A);if(b instanceof x0)u.push(A);else{const F=_p(b,M);null!=F&&(u.push(A),c.set(A,F))}});const f=new ih(u);return new kR(c,f,i.fieldTransforms)}function mA(n,e,t,r,i,u){const c=n.lc(1,e,t),f=[_A(e,r,t)],_=[i];if(u.length%2!=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)f.push(_A(e,u[F])),_.push(u[F+1]);const b=[],A=kr.empty();for(let F=f.length-1;F>=0;--F)if(!jR(b,f[F])){const U=f[F];let z=_[F];z=(0,St.m9)(z);const le=c.oc(U);if(z instanceof x0)b.push(U);else{const Se=_p(z,le);null!=Se&&(b.push(U),A.set(U,Se))}}const M=new ih(b);return new kR(A,M,c.fieldTransforms)}function VR(n,e,t,r=!1){return _p(t,n.lc(r?4:3,e))}function _p(n,e){if(BR(n=(0,St.m9)(n)))return yA("Unsupported field value:",e,n),UR(n,e);if(n instanceof mp)return function(t,r){if(!FR(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let f=_p(c,r.uc(u));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,St.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ub(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=un.fromDate(t);return{timestampValue:Zm(r.M,i)}}if(t instanceof un){const i=new un(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Zm(r.M,i)}}if(t instanceof wI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Dl)return{bytesValue:RT(r.M,t._byteString)};if(t instanceof Ln){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:p0(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${vI(t)}`)}(n,e)}function UR(n,e){const t={};return bb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(n,(r,i)=>{const u=_p(i,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function BR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof un||n instanceof wI||n instanceof Dl||n instanceof Ln||n instanceof mp)}function yA(n,e,t){if(!BR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=vI(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function _A(n,e,t){if((e=(0,St.m9)(e))instanceof Lc)return e._internalPath;if("string"==typeof e)return CI(n,e);throw DI("Field path arguments must be of type string or ",n,!1,void 0,t)}const kk=new RegExp("[~\\*/\\[\\]]");function CI(n,e,t){if(e.search(kk)>=0)throw DI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lc(...e.split("."))._internalPath}catch(r){throw DI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function DI(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let _="";return(u||c)&&(_+=" (found",u&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new Re(ce.INVALID_ARGUMENT,f+n+_)}function jR(n,e){return n.some(t=>t.isEqual(e))}class R0{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ln(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Fk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(TI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Fk extends R0{data(){return super.data()}}function TI(n,e){return"string"==typeof e?CI(n,e):e instanceof Lc?e._internalPath:e._delegate._internalPath}class vp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vc extends R0{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new N0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(TI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class N0 extends Vc{data(e={}){return super.data(e)}}class Ih{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new vp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new N0(this._firestore,this._userDataWriter,r.key,r,new vp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new N0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new vp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new N0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new vp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,b=-1;return 0!==c.type&&(_=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:Lk(c.type),doc:f,oldIndex:_,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Lk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function $R(n,e){return n instanceof Vc&&e instanceof Vc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ih&&e instanceof Ih&&n._firestore===e._firestore&&RR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function HR(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class P0{}function Ch(n,...e){for(const t of e)n=t._apply(n);return n}class Vk extends P0{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=yp(e.firestore),r=function(i,u,c,f,_,b,A){let M;if(_.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){ZR(A,b);const U=[];for(const z of A)U.push(KR(f,i,z));M={arrayValue:{values:U}}}else M=KR(f,i,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||ZR(A,b),M=VR(c,"where",A,"in"===b||"not-in"===b);const F=Kr.create(_,b,M);return function(U,z){if(z.S()){const Se=Fb(U);if(null!==Se&&!Se.isEqual(z.field))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Se.toString()}' and '${z.field.toString()}'`);const rt=kb(U);null!==rt&&YR(0,z.field,rt)}const le=function(Se,rt){for(const it of Se.filters)if(rt.indexOf(it.op)>=0)return it.op;return null}(U,function(Se){switch(Se){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(z.op));if(null!==le)throw new Re(ce.INVALID_ARGUMENT,le===z.op?`Invalid query. You cannot use more than one '${z.op.toString()}' filter.`:`Invalid query. You cannot use '${z.op.toString()}' filters with '${le.toString()}' filters.`)}(i,F),F}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new rs(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new bl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class Bk extends P0{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new np(i,u);return function(f,_){if(null===kb(f)){const b=Fb(f);null!==b&&YR(0,b,_.field)}}(r,c),c}(e._query,this._c,this.gc);return new rs(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new bl(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class GR extends P0{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new rs(e.firestore,e.converter,$m(e._query,this.yc,this.Ic))}}class qR extends P0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=WR(e,this.type,this.Tc,this.Ec);return new rs(e.firestore,e.converter,(i=t,new bl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class zR extends P0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=WR(e,this.type,this.Tc,this.Ec);return new rs(e.firestore,e.converter,(i=t,new bl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function WR(n,e,t,r){if(t[0]=(0,St.m9)(t[0]),t[0]instanceof R0)return function(i,u,c,f,_){if(!f)throw new Re(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const A of ip(i))if(A.field.isKeyField())b.push(vl(u,f.key));else{const M=f.data.field(A.field);if($v(M))throw new Re(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const F=A.field.canonicalString();throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}b.push(M)}return new wl(b,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=yp(n.firestore);return function(u,c,f,_,b,A){const M=u.explicitOrderBy;if(b.length>M.length)throw new Re(ce.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let U=0;U<b.length;U++){const z=b[U];if(M[U].field.isKeyField()){if("string"!=typeof z)throw new Re(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof z}`);if(!lh(u)&&-1!==z.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${z}' contains a slash.`);const le=u.path.child(zt.fromString(z));if(!$e.isDocumentKey(le))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${le}' is not because it contains an odd number of segments.`);const Se=new $e(le);F.push(vl(c,Se))}else{const le=VR(f,_,z);F.push(le)}}return new wl(F,A)}(n._query,n.firestore._databaseId,i,e,t,r)}}function KR(n,e,t){if("string"==typeof(t=(0,St.m9)(t))){if(""===t)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lh(e)&&-1!==t.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(zt.fromString(t));if(!$e.isDocumentKey(r))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vl(n,new $e(r))}if(t instanceof Ln)return vl(n,t._key);throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vI(t)}.`)}function ZR(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function YR(n,e,t){if(!t.isEqual(e))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const Kk={maxAttempts:5};class vA{convertValue(e,t="none"){switch(yl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ic(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return So(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new wI(Fn(e.latitude),Fn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=cT(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Cc(e));default:return null}}convertTimestamp(e){const t=_a(e);return new un(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=zt.fromString(e);At(kT(r));const i=new va(r.get(1),r.get(3)),u=new $e(r.popFirst(5));return i.isEqual(t)||dr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function SI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Zk extends vA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,t)}}class QR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=yp(e)}set(e,t,r){this._verifyNotCommitted();const i=Dh(e,this._firestore),u=SI(i.converter,t,r),c=II(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,pr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Dh(e,this._firestore);let c;return c="string"==typeof(t=(0,St.m9)(t))||t instanceof Lc?mA(this._dataReader,"WriteBatch.update",u._key,t,r,i):gA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,pr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Dh(e,this._firestore);return this._mutations=this._mutations.concat(new Wm(t._key,pr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Dh(n,e){if((n=(0,St.m9)(n)).firestore!==e)throw new Re(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ep extends vA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,t)}}function JR(n,e,t){n=Jt(n,Ln);const r=Jt(n.firestore,qn),i=SI(n.converter,e,t);return my(r,[II(yp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,pr.none())])}function XR(n,e,t,...r){n=Jt(n,Ln);const i=Jt(n.firestore,qn),u=yp(i);let c;return c="string"==typeof(e=(0,St.m9)(e))||e instanceof Lc?mA(u,"updateDoc",n._key,e,t,r):gA(u,"updateDoc",n._key,e),my(i,[c.toMutation(n._key,pr.exists(!0))])}function eN(n,...e){var t,r,i;n=(0,St.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||fA(e[c])||(u=e[c],c++);const f={includeMetadataChanges:u.includeMetadataChanges};if(fA(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let _,b,A;if(n instanceof Ln)b=Jt(n.firestore,qn),A=rp(n._key.path),_={next:M=>{e[c]&&e[c](EA(b,n,M))},error:e[c+1],complete:e[c+2]};else{const M=Jt(n,rs);b=Jt(M.firestore,qn),A=M._query;const F=new Ep(b);_={next:U=>{e[c]&&e[c](new Ih(b,F,M,U))},error:e[c+1],complete:e[c+2]},HR(n._query)}return function(M,F,U,z){const le=new yI(z),Se=new RS(F,le,U);return M.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return TS(yield gy(M),Se)})),()=>{le.Aa(),M.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return AS(yield gy(M),Se)}))}}(Fr(b),A,f,_)}function my(n,e){return function(t,r){const i=new Hn;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function j1(n,e,t){return FS.apply(this,arguments)}(yield cA(t),r,i)})),i.promise}(Fr(n),e)}function EA(n,e,t){const r=t.docs.get(e._key),i=new Ep(n);return new Vc(n,i,e._key,r,new vp(t.hasPendingWrites,t.fromCache),e.converter)}class sF extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=yp(e)}get(e){const t=Dh(e,this._firestore),r=new Zk(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return st();const u=i[0];if(u.isFoundDocument())return new R0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new R0(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const i=Dh(e,this._firestore),u=SI(i.converter,t,r),c=II(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=Dh(e,this._firestore);let c;return c="string"==typeof(t=(0,St.m9)(t))||t instanceof Lc?mA(this._dataReader,"Transaction.update",u._key,t,r,i):gA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Dh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Dh(e,this._firestore),r=new Ep(this._firestore);return super.get(e).then(i=>new Vc(this._firestore,r,t._key,i._document,new vp(!1,!1),t.converter))}}function wA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function nN(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function rN(){if(!function lT(){return"undefined"!=typeof atob}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){wc=ca.SDK_VERSION,(0,ca._registerComponent)(new Md.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),u=new qn(i,new _b(t.getProvider("auth-internal")),new aT(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,ca.registerVersion)(gb,"3.4.9",n),(0,ca.registerVersion)(gb,"3.4.9","esm2017")}();class O0{constructor(e){this._delegate=e}static fromBase64String(e){return rN(),new O0(Dl.fromBase64String(e))}static fromUint8Array(e){return nN(),new O0(Dl.fromUint8Array(e))}toBase64(){return rN(),this._delegate.toBase64()}toUint8Array(){return nN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function bA(n){return function pF(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class gF{enableIndexedDbPersistence(e,t){return function wk(n,e){OR(n=Jt(n,qn));const t=Fr(n),r=n._freezeSettings(),i=new rA;return PR(t,i,new gR(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function bk(n){OR(n=Jt(n,qn));const e=Fr(n),t=n._freezeSettings(),r=new rA;return PR(e,r,new rk(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Ik(n){if(n._initialized&&!n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Hn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!O.vt())return Promise.resolve();const i=r+"main";yield O.delete(i)}),function(r){return t.apply(this,arguments)})(ZT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class iN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof va||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Zf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function mk(n,e,t,r={}){var i;const u=(n=Jt(n,M0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Zf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,f;if("string"==typeof r.mockUserToken)c=r.mockUserToken,f=vi.MOCK_USER;else{c=(0,St.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Re(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new vi(_)}n._authCredentials=new yb(new jv(c,f))}}(this._delegate,e,t,r)}enableNetwork(){return function Dk(n){return function uk(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield vR(n),t=yield ER(n);return e.setNetworkEnabled(!0),function(r){const i=We(r);return i.wu.delete(0),S0(i)}(t)}))}(Fr(n=Jt(n,qn)))}(this._delegate)}disableNetwork(){return function Tk(n){return function lk(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield vR(n),t=yield ER(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(i){const u=We(i);u.wu.add(0),yield uy(u),u.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Fr(n=Jt(n,qn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,CR("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Ck(n){return function(e){const t=new Hn;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function q1(n,e){return jS.apply(this,arguments)}(yield cA(e),t)})),t.promise}(Fr(n=Jt(n,qn)))}(this._delegate)}onSnapshotsInSync(e){return function iF(n,e){return function hk(n,e){const t=new yI(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield gy(n),i=t,We(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield gy(n),i=t,void We(r).bu.delete(i);var r,i}))}}(Fr(n=Jt(n,qn)),fA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new yy(this,MR(this._delegate,e))}catch(t){throw bs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ca(this,EI(this._delegate,e))}catch(t){throw bs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Is(this,function yk(n,e){if(n=Jt(n,M0),hA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new rs(n,null,(t=e,new bl(zt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw bs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function oF(n,e,t){n=Jt(n,qn);const r=Object.assign(Object.assign({},Kk),t);return function(i){if(i.maxAttempts<1)throw new Re(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function fk(n,e,t){const r=new Hn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const i=yield(u=n,_I(u).then(c=>c.datastore));var u;new ok(n.asyncQueue,i,t,e,r).run()})),r.promise}(Fr(n),i=>e(new sF(n,i)),r)}(this._delegate,t=>e(new sN(this,t)))}batch(){return Fr(this._delegate),new oN(new QR(this._delegate,e=>my(this._delegate,e)))}loadBundle(e){return function Sk(n,e){const t=Fr(n=Jt(n,qn)),r=new vk;return function pk(n,e,t,r){const i=function(u,c){let f;return f="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,b){if(_ instanceof Uint8Array)return mR(_,b);if(_ instanceof ArrayBuffer)return mR(new Uint8Array(_),b);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new ik(_,c);var _}(t,T0(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function nk(n,e,t){const r=We(n);var i;(i=(0,_e.Z)(function*(u,c,f){try{const _=yield c.getMetadata();if(yield function(F,U){const z=We(F),le=tr(U.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",Se=>z._s.getBundleMetadata(Se,U.id)).then(Se=>!!Se&&Se.createTime.compareTo(le)>=0)}(u.localStore,_))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(F=_).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);f._updateProgress(sR(_));const b=new k1(_,u.localStore,c.M);let A=yield c.ma();for(;A;){const F=yield b.Fu(A);F&&f._updateProgress(F),A=yield c.ma()}const M=yield b.complete();return yield Fc(u,M.Lu,void 0),yield function(F,U){const z=We(F);return z.persistence.runTransaction("Save bundle","readwrite",le=>z._s.saveBundleMetadata(le,U))}(u.localStore,_),f._completeWith(M.progress),Promise.resolve(M.Bu)}catch(_){return Zf("SyncEngine",`Loading bundle failed with ${_}`),f._failWith(_),Promise.resolve(new Set)}var F}),function(u,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield cA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Ak(n,e){return function gk(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const i=We(t);return i.persistence.runTransaction("Get named query","readonly",u=>i._s.getNamedQuery(u,r))}(yield lA(n),e)}))}(Fr(n=Jt(n,qn)),e).then(t=>t?new rs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Is(this,t):null)}}class AI extends vA{constructor(e){super(),this.firestore=e}convertBytes(e){return new O0(new Dl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ca.forKey(t,this.firestore,null)}}class sN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new AI(e)}get(e){const t=bp(e);return this._delegate.get(t).then(r=>new k0(this._firestore,new Vc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=bp(e);return r?(wA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=bp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=bp(e);return this._delegate.delete(t),this}}class oN{constructor(e){this._delegate=e}set(e,t,r){const i=bp(e);return r?(wA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=bp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=bp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class wp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new N0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new F0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=wp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new wp(e,new AI(e),t),i.set(t,u)),u}}wp.INSTANCES=new WeakMap;class Ca{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new AI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ca(t,new Ln(t._delegate,r,new $e(e)))}static forKey(e,t,r){return new Ca(t,new Ln(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new yy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new yy(this.firestore,MR(this._delegate,e))}catch(t){throw bs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,St.m9)(e))instanceof Ln&&xR(this._delegate,e)}set(e,t){t=wA("DocumentReference.set",t);try{return t?JR(this._delegate,e,t):JR(this._delegate,e)}catch(r){throw bs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?XR(this._delegate,e):XR(this._delegate,e,t,...r)}catch(i){throw bs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function nF(n){return my(Jt(n.firestore,qn),[new Wm(n._key,pr.none())])}(this._delegate)}onSnapshot(...e){const t=aN(e),r=uN(e,i=>new k0(this.firestore,new Vc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return eN(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Qk(n){n=Jt(n,Ln);const e=Jt(n.firestore,qn),t=Fr(e),r=new Ep(e);return function ck(n,e){const t=new Hn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,u,c){try{const f=yield function(_,b){const A=We(_);return A.persistence.runTransaction("read document","readonly",M=>A.fi.Ls(M,b))}(i,u);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Re(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const _=dy(f,`Failed to get document '${u} from cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield lA(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Vc(e,r,n._key,i,new vp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Jk(n){n=Jt(n,Ln);const e=Jt(n.firestore,qn);return wR(Fr(e),n._key,{source:"server"}).then(t=>EA(e,n,t))}(this._delegate):function Yk(n){n=Jt(n,Ln);const e=Jt(n.firestore,qn);return wR(Fr(e),n._key).then(t=>EA(e,n,t))}(this._delegate),t.then(r=>new k0(this.firestore,new Vc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ca(this.firestore,this._delegate.withConverter(e?wp.getInstance(this.firestore,e):null))}}function bs(n,e,t){return n.message=n.message.replace(e,t),n}function aN(n){for(const e of n)if("object"==typeof e&&!bA(e))return e;return{}}function uN(n,e){var t,r;let i;return i=bA(n[0])?n[0]:bA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class k0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ca(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return $R(this._delegate,e._delegate)}}class F0 extends k0{data(e){const t=this._delegate.data(e);return function sT(n,e){n||st()}(void 0!==t),t}}class Is{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new AI(e)}where(e,t,r){try{return new Is(this.firestore,Ch(this._delegate,function Uk(n,e,t){const r=e,i=TI("where",n);return new Vk(i,r,t)}(e,t,r)))}catch(i){throw bs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Is(this.firestore,Ch(this._delegate,function jk(n,e="asc"){const t=e,r=TI("orderBy",n);return new Bk(r,t)}(e,t)))}catch(r){throw bs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Is(this.firestore,Ch(this._delegate,function $k(n){return SR("limit",n),new GR("limit",n,"F")}(e)))}catch(t){throw bs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Is(this.firestore,Ch(this._delegate,function Hk(n){return SR("limitToLast",n),new GR("limitToLast",n,"L")}(e)))}catch(t){throw bs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Is(this.firestore,Ch(this._delegate,function Gk(...n){return new qR("startAt",n,!0)}(...e)))}catch(t){throw bs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Is(this.firestore,Ch(this._delegate,function qk(...n){return new qR("startAfter",n,!1)}(...e)))}catch(t){throw bs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Is(this.firestore,Ch(this._delegate,function zk(...n){return new zR("endBefore",n,!1)}(...e)))}catch(t){throw bs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Is(this.firestore,Ch(this._delegate,function Wk(...n){return new zR("endAt",n,!0)}(...e)))}catch(t){throw bs(t,"endAt()","Query.endAt()")}}isEqual(e){return RR(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function eF(n){n=Jt(n,rs);const e=Jt(n.firestore,qn),t=Fr(e),r=new Ep(e);return function dk(n,e){const t=new Hn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,u,c){try{const f=yield dI(i,u,!0),_=new uR(u,f._i),b=_.Wu(f.documents),A=_.applyChanges(b,!1);c.resolve(A.snapshot)}catch(f){const _=dy(f,`Failed to execute query '${u} against cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield lA(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ih(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function tF(n){n=Jt(n,rs);const e=Jt(n.firestore,qn),t=Fr(e),r=new Ep(e);return bR(t,n._query,{source:"server"}).then(i=>new Ih(e,r,n,i))}(this._delegate):function Xk(n){n=Jt(n,rs);const e=Jt(n.firestore,qn),t=Fr(e),r=new Ep(e);return HR(n._query),bR(t,n._query).then(i=>new Ih(e,r,n,i))}(this._delegate),t.then(r=>new IA(this.firestore,new Ih(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=aN(e),r=uN(e,i=>new IA(this.firestore,new Ih(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return eN(this._delegate,t,r)}withConverter(e){return new Is(this.firestore,this._delegate.withConverter(e?wp.getInstance(this.firestore,e):null))}}class yF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new F0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class IA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Is(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new F0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new yF(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new F0(this._firestore,r))})}isEqual(e){return $R(this._delegate,e._delegate)}}class yy extends Is{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ca(this.firestore,e):null}doc(e){try{return new Ca(this.firestore,void 0===e?EI(this._delegate):EI(this._delegate,e))}catch(t){throw bs(t,"doc()","CollectionReference.doc()")}}add(e){return function rF(n,e){const t=Jt(n.firestore,qn),r=EI(n),i=SI(n.converter,e);return my(t,[II(yp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,pr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ca(this.firestore,t))}isEqual(e){return xR(this._delegate,e._delegate)}withConverter(e){return new yy(this.firestore,this._delegate.withConverter(e?wp.getInstance(this.firestore,e):null))}}function bp(n){return Jt(n,Ln)}class CA{constructor(...e){this._delegate=new Lc(...e)}static documentId(){return new CA(Gn.keyField().canonicalString())}isEqual(e){return(e=(0,St.m9)(e))instanceof Lc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ip{constructor(e){this._delegate=e}static serverTimestamp(){const e=function uF(){return new pA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ip(e)}static delete(){const e=function aF(){return new x0("deleteField")}();return e._methodName="FieldValue.delete",new Ip(e)}static arrayUnion(...e){const t=function lF(...n){return new Nk("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ip(t)}static arrayRemove(...e){const t=function cF(...n){return new Pk("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ip(t)}static increment(e){const t=function dF(n){return new Ok("increment",n)}(e);return t._methodName="FieldValue.increment",new Ip(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const _F={Firestore:iN,GeoPoint:wI,Timestamp:un,Blob:O0,Transaction:sN,WriteBatch:oN,DocumentReference:Ca,DocumentSnapshot:k0,Query:Is,QueryDocumentSnapshot:F0,QuerySnapshot:IA,CollectionReference:yy,FieldPath:CA,FieldValue:Ip,setLogLevel:function mF(n){!function Uv(n){bc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function EF(n){(function vF(n,e){n.INTERNAL.registerComponent(new Md.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},_F)))})(n,(e,t)=>new iN(e,t,new gF)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(bg.Z);var wF=P(6451),MI=P(5363),bF=P(6063);class IF extends ni.x{constructor(e=1/0,t=1/0,r=bF.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let f=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)f=_;f&&r.splice(0,f+1)}}}var CF=P(3099);function lN(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,CF.B)({connector:()=>new IF(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function cN(n,e){return(0,Pu.m)(e)?In(()=>n,e):In(()=>n)}var DA=P(9468);const dN=new g.OlP("angularfire2.auth.use-emulator"),hN=new g.OlP("angularfire2.auth.settings"),fN=new g.OlP("angularfire2.auth.tenant-id"),pN=new g.OlP("angularfire2.auth.langugage-code"),gN=new g.OlP("angularfire2.auth.use-device-language"),mN=new g.OlP("angularfire.auth.persistence"),yN=(n,e,t,r,i,u,c,f)=>(0,gi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,u&&_.useDeviceLanguage(),c)for(const[b,A]of Object.entries(c))_.settings[b]=A;return f&&_.setPersistence(f),_},[t,r,i,u,c,f]);let _N=(()=>{class n{constructor(t,r,i,u,c,f,_,b,A,M,F,U){const z=new ni.x,le=et(void 0).pipe((0,MI.Q)(c.outsideAngular),In(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,8775)))),(0,Ot.U)(()=>(0,gi.on)(t,u,r)),(0,Ot.U)(Se=>yN(Se,u,f,b,A,M,_,F)),lN({bufferSize:1,refCount:!1}));if(Lo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=et(null);else{le.pipe(ea()).subscribe();const rt=le.pipe(In(ze=>ze.getRedirectResult().then(Tt=>Tt,()=>null)),Nn.iC,lN({bufferSize:1,refCount:!1})),it=le.pipe(In(ze=>new Rn.y(Tt=>({unsubscribe:u.runOutsideAngular(()=>ze.onAuthStateChanged(Mt=>Tt.next(Mt),Mt=>Tt.error(Mt),()=>Tt.complete()))})))),Xe=le.pipe(In(ze=>new Rn.y(Tt=>({unsubscribe:u.runOutsideAngular(()=>ze.onIdTokenChanged(Mt=>Tt.next(Mt),Mt=>Tt.error(Mt),()=>Tt.complete()))}))));this.authState=rt.pipe(cN(it),(0,DA.R)(c.outsideAngular),(0,MI.Q)(c.insideAngular)),this.user=rt.pipe(cN(Xe),(0,DA.R)(c.outsideAngular),(0,MI.Q)(c.insideAngular)),this.idToken=this.user.pipe(In(ze=>ze?(0,ln.D)(ze.getIdToken()):et(null))),this.idTokenResult=this.user.pipe(In(ze=>ze?(0,ln.D)(ze.getIdTokenResult()):et(null))),this.credential=(0,wF.T)(rt,z,this.authState.pipe(ii(ze=>!ze))).pipe((0,Ot.U)(ze=>(null==ze?void 0:ze.user)?ze:null),(0,DA.R)(c.outsideAngular),(0,MI.Q)(c.insideAngular))}return(0,gi.pX)(this,le,u,{spy:{apply:(Se,rt,it)=>{(Se.startsWith("signIn")||Se.startsWith("createUser"))&&it.then(Xe=>z.next(Xe))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(gi.Dh),g.LFG(gi.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Nn.HU),g.LFG(dN,8),g.LFG(hN,8),g.LFG(fN,8),g.LFG(pN,8),g.LFG(gN,8),g.LFG(mN,8),g.LFG(Cf,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function vN(n,e){return function TF(n,e=oE.z){return new Rn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function TA(n,e){return vN(n,e).pipe((0,Ot.U)(t=>({payload:t,type:"query"})))}function xI(n,e){return TA(n,e).pipe(Qi(void 0),B_(),(0,Ot.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const _=i.find(A=>A.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),u}))}function EN(n,e,t){return xI(n,t).pipe(Ji((r,i)=>function AF(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function MF(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return SA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return SA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return SA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function yw(n,e=Mi.y){return n=null!=n?n:_w,(0,Yn.e)((t,r)=>{let i,u=!0;t.subscribe((0,bn.x)(r,c=>{const f=e(c);(u||!n(i,f))&&(u=!1,i=f,r.next(c))}))})}(),(0,Ot.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function SA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function wN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class bN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=xI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ot.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Qi(void 0),B_(),ii(([r,i])=>i.length>0||!r),(0,Ot.U)(([r,i])=>i),Nn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ji((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=wN(e);return EN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Nn.iC)}valueChanges(e={}){return TA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ot.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Nn.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(Nn.iC)}add(e){return this.ref.add(e)}doc(e){return new IN(this.ref.doc(e),this.afs)}}class IN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=TN(r,t);return new bN(i,u,this.afs)}snapshotChanges(){return function SF(n,e){return vN(n,e).pipe(Qi(void 0),B_(),(0,Ot.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Nn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ot.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ln.D)(this.ref.get(e)).pipe(Nn.iC)}}class xF{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?xI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ot.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ii(t=>t.length>0),Nn.iC):xI(this.query,this.afs.schedulers.outsideAngular).pipe(Nn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ji((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=wN(e);return EN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Nn.iC)}valueChanges(e={}){return TA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ot.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Nn.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(Nn.iC)}}const CN=new g.OlP("angularfire2.enableFirestorePersistence"),DN=new g.OlP("angularfire2.firestore.persistenceSettings"),RF=new g.OlP("angularfire2.firestore.settings"),NF=new g.OlP("angularfire2.firestore.use-emulator");function TN(n,e=(t=>t)){return{query:e(n),ref:n}}let AA=(()=>{class n{constructor(t,r,i,u,c,f,_,b,A,M,F,U,z,le,Se,rt,it){this.schedulers=_;const Xe=(0,gi.on)(t,f,r),ze=A;M&&yN(Xe,f,F,z,le,Se,U,rt),[this.firestore,this.persistenceEnabled$]=(0,gi.cc)(`${Xe.name}.firestore`,"AngularFirestore",Xe.name,()=>{const Tt=f.runOutsideAngular(()=>Xe.firestore());if(u&&Tt.settings(u),ze&&Tt.useEmulator(...ze),i&&!Lo(c)){const Mt=()=>{try{return(0,ln.D)(Tt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Zt){return"undefined"!=typeof console&&console.warn(Zt),et(!1)}};return[Tt,f.runOutsideAngular(Mt)]}return[Tt,et(!1)]},[u,ze,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=TN(i,r),f=this.schedulers.ngZone.run(()=>u);return new bN(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new xF(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new IN(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(gi.Dh),g.LFG(gi.xv,8),g.LFG(CN,8),g.LFG(RF,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Nn.HU),g.LFG(DN,8),g.LFG(NF,8),g.LFG(_N,8),g.LFG(dN,8),g.LFG(hN,8),g.LFG(fN,8),g.LFG(pN,8),g.LFG(gN,8),g.LFG(mN,8),g.LFG(Cf,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),PF=(()=>{class n{constructor(){Xg.Z.registerVersion("angularfire",Nn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:CN,useValue:!0},{provide:DN,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[AA]}),n})(),SN=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),Cp=(()=>{class n extends SN{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Tl=new g.OlP("NgValueAccessor"),FF={provide:Tl,useExisting:(0,g.Gpc)(()=>L0),multi:!0},VF=new g.OlP("CompositionEventMode");let L0=(()=>{class n extends SN{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function LF(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(VF,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[g._Bn([FF]),g.qOj]}),n})();const is=new g.OlP("NgValidators"),Sh=new g.OlP("NgAsyncValidators");function VN(n){return null!=n}function UN(n){const e=(0,g.QGY)(n)?(0,ln.D)(n):n;return(0,g.CqO)(e),e}function BN(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function jN(n,e){return e.map(t=>t(n))}function $N(n){return n.map(e=>function BF(n){return!n.validate}(e)?e:t=>e.validate(t))}function MA(n){return null!=n?function HN(n){if(!n)return null;const e=n.filter(VN);return 0==e.length?null:function(t){return BN(jN(t,e))}}($N(n)):null}function xA(n){return null!=n?function GN(n){if(!n)return null;const e=n.filter(VN);return 0==e.length?null:function(t){return function OF(...n){const e=(0,qa.jO)(n),{args:t,keys:r}=cn(n),i=new Rn.y(u=>{const{length:c}=t;if(!c)return void u.complete();const f=new Array(c);let _=c,b=c;for(let A=0;A<c;A++){let M=!1;(0,Jo.Xf)(t[A]).subscribe((0,bn.x)(u,F=>{M||(M=!0,b--),f[A]=F},()=>_--,void 0,()=>{(!_||!M)&&(b||u.next(r?zl(r,f):f),u.complete())}))}});return e?i.pipe(ud(e)):i}(jN(t,e).map(UN)).pipe((0,Ot.U)(BN))}}($N(n)):null}function qN(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function RA(n){return n?Array.isArray(n)?n:[n]:[]}function NI(n,e){return Array.isArray(n)?n.includes(e):n===e}function KN(n,e){const t=RA(e);return RA(n).forEach(i=>{NI(t,i)||t.push(i)}),t}function ZN(n,e){return RA(e).filter(t=>!NI(n,t))}class YN{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=MA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ah extends YN{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Cs extends YN{get formDirective(){return null}get path(){return null}}class QN{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let NA=(()=>{class n extends QN{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ah,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[g.qOj]}),n})(),JN=(()=>{class n extends QN{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Cs,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[g.qOj]}),n})();function V0(n,e){kA(n,e),e.valueAccessor.writeValue(n.value),function KF(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&eP(n,e)})}(n,e),function YF(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function ZF(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&eP(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function WF(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function FI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function kA(n,e){const t=function zN(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(qN(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function WN(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(qN(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();FI(e._rawValidators,i),FI(e._rawAsyncValidators,i)}function eP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function VA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const U0="VALID",VI="INVALID",_y="PENDING",B0="DISABLED";function BA(n){return(UI(n)?n.validators:n)||null}function iP(n){return Array.isArray(n)?MA(n):n||null}function jA(n,e){return(UI(e)?e.asyncValidators:n)||null}function sP(n){return Array.isArray(n)?xA(n):n||null}function UI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const $A=n=>n instanceof GA;function aP(n){return(n=>n instanceof cP)(n)?n.value:n.getRawValue()}function uP(n,e){const t=$A(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[e])throw new g.vHH(1001,"")}function lP(n,e){$A(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new g.vHH(1002,"")})}class HA{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=iP(this._rawValidators),this._composedAsyncValidatorFn=sP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===U0}get invalid(){return this.status===VI}get pending(){return this.status==_y}get disabled(){return this.status===B0}get enabled(){return this.status!==B0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=iP(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=sP(e)}addValidators(e){this.setValidators(KN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(KN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ZN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ZN(e,this._rawAsyncValidators))}hasValidator(e){return NI(this._rawValidators,e)}hasAsyncValidator(e){return NI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=_y,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=B0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=U0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===U0||this.status===_y)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?B0:U0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=_y,this._hasOwnPendingAsyncValidator=!0;const t=UN(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function eL(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=$A(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof nL)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?B0:this.errors?VI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_y)?_y:this._anyControlsHaveStatus(VI)?VI:U0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){UI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class cP extends HA{constructor(e=null,t,r){super(BA(t),jA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),UI(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){VA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){VA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class GA extends HA{constructor(e,t,r){super(BA(t),jA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){lP(this,e),Object.keys(e).forEach(r=>{uP(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=aP(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class nL extends HA{constructor(e,t,r){super(BA(t),jA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){lP(this,e),e.forEach((r,i)=>{uP(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>aP(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const rL={provide:Cs,useExisting:(0,g.Gpc)(()=>BI)},j0=(()=>Promise.resolve(null))();let BI=(()=>{class n extends Cs{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new GA({},MA(t),xA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){j0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),V0(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){j0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){j0.then(()=>{const r=this._findContainer(t.path),i=new GA({});(function tP(n,e){kA(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){j0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){j0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function rP(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(is,10),g.Y36(Sh,10))},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([rL]),g.qOj]}),n})();const sL={provide:Ah,useExisting:(0,g.Gpc)(()=>jI)},fP=(()=>Promise.resolve(null))();let jI=(()=>{class n extends Ah{constructor(t,r,i,u,c){super(),this._changeDetectorRef=c,this.control=new cP,this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function LA(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===L0?t=u:function XF(n){return Object.getPrototypeOf(n.constructor)===Cp}(u)?r=u:i=u}),i||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function FA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){V0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){fP.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;fP.then(()=>{var u;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function OI(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Cs,9),g.Y36(is,10),g.Y36(Sh,10),g.Y36(Tl,10),g.Y36(g.sBO,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([sL]),g.qOj,g.TTD]}),n})(),pP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),mP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();const gL={provide:Tl,useExisting:(0,g.Gpc)(()=>$I),multi:!0};function IP(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let $I=(()=>{class n extends Cp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=IP(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function mL(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&g.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[g._Bn([gL]),g.qOj]}),n})(),KA=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(IP(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36($I,9))},n.\u0275dir=g.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const yL={provide:Tl,useExisting:(0,g.Gpc)(()=>ZA),multi:!0};function CP(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let ZA=(()=>{class n extends Cp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(u=>this._getOptionId(u));r=(u,c)=>{u._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,u)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],u=r.selectedOptions;if(void 0!==u){const c=u;for(let f=0;f<c.length;f++){const b=this._getOptionValue(c[f].value);i.push(b)}}else{const c=r.options;for(let f=0;f<c.length;f++){const _=c[f];if(_.selected){const b=this._getOptionValue(_.value);i.push(b)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function _L(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&g.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[g._Bn([yL]),g.qOj]}),n})(),YA=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(CP(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(CP(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(ZA,9))},n.\u0275dir=g.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),AL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[mP]]}),n})(),ML=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[AL]}),n})();function xL(n,e){1&n&&(g.TgZ(0,"div",21)(1,"div",17),g._uU(2,"Getting certificate..."),g.qZA()())}function RL(n,e){if(1&n&&(g.TgZ(0,"div",22),g._uU(1),g.qZA()),2&n){const t=g.oxw();g.Q6J("ngClass",t.success?"text-success":"text-danger"),g.xp6(1),g.Oqu(t.alert)}}let NL=(()=>{class n{constructor(t){this.firestore=t,this.eventId=1,this.success=!1,this.loading=!1,this.itemsCollection=t.collection("certificate")}ngOnInit(){this.generateCAPTCHA()}getCertificate(){return this.aadharNumber?12!=this.aadharNumber.toString().length?(this.alert="*Please enter valid aadhar number",void this.clearError()):this.generatedCaptcha!=this.captcha?(this.alert="Invalid Captcha....",void this.clearError()):(this.loading=!0,void this.firestore.collection("certificate",t=>t.where("aadhaarNumber","==",this.aadharNumber)).valueChanges().subscribe(t=>{this.loading=!1,this.success=!0,this.items=t,this.captcha="",this.generateCAPTCHA()})):(this.alert="*Please enter aadhar number",void this.clearError())}generateCAPTCHA(){this.generatedCaptcha=Math.random().toString(36).substring(7)}clearError(){setTimeout(()=>{this.alert="",this.success=!1},2e3)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(AA))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-download-certificate"]],decls:41,vars:5,consts:[["class","loading",4,"ngIf"],[1,"container","bg-border","mt-20"],[1,"bold"],[1,"shadow"],[1,"upload-title","mt-20"],[1,"col-12","col-lg-6","offset-lg-3"],[1,"row","mt-20"],[1,"col-12","col-lg-6","margin-auto","title"],[1,"col-12","col-lg-6"],["type","text",1,"box-border",3,"ngModel","ngModelChange"],[1,"pointer"],[1,"box-border"],[1,"row","mt-20","mb-20"],[1,"col-12","col-lg-6","margin-auto","mb-center"],["type","button","id","show_captcha_button",1,"button","captcha"],[1,"col-12","col-lg-6","margin-auto"],["type","text","placeholder","Enter captcha",1,"box-border",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-12","text-center"],[3,"ngClass",4,"ngIf"],["type","button",1,"btn","btn-blue",3,"click"],[1,"loading"],[3,"ngClass"]],template:function(t,r){1&t&&(g.YNc(0,xL,3,0,"div",0),g.TgZ(1,"section",1)(2,"div",2),g._uU(3,"*Note"),g.qZA(),g._uU(4," Enter your aadhar card number and select the event name of the certificate to be downloaded "),g.TgZ(5,"div",3)(6,"div",4),g._uU(7,"Certificate center"),g.qZA(),g.TgZ(8,"div",5)(9,"div",6)(10,"div",7),g._uU(11," Aadhar card number "),g.qZA(),g.TgZ(12,"div",8)(13,"input",9),g.NdJ("ngModelChange",function(u){return r.aadharNumber=u}),g.qZA()()(),g.TgZ(14,"div",6)(15,"div",7),g._uU(16," Event Name "),g.qZA(),g.TgZ(17,"div",8)(18,"span",10)(19,"select",11)(20,"option"),g._uU(21,"Master royal cup 2022"),g.qZA(),g.TgZ(22,"option"),g._uU(23,"Grand Prix international 2022"),g.qZA(),g.TgZ(24,"option"),g._uU(25,"State level silambam Tournament"),g.qZA(),g.TgZ(26,"option"),g._uU(27,"TN open championship 2021"),g.qZA(),g.TgZ(28,"option"),g._uU(29,"Silimbam Interdistrict 2021"),g.qZA()()()()(),g.TgZ(30,"div",12)(31,"div",13)(32,"button",14),g._uU(33),g.qZA()(),g.TgZ(34,"div",15)(35,"input",16),g.NdJ("ngModelChange",function(u){return r.captcha=u}),g.qZA()()(),g.TgZ(36,"div",17)(37,"div",18),g.YNc(38,RL,2,2,"div",19),g.TgZ(39,"button",20),g.NdJ("click",function(){return r.getCertificate()}),g._uU(40,"Download"),g.qZA()()()()()()),2&t&&(g.Q6J("ngIf",r.loading),g.xp6(13),g.Q6J("ngModel",r.aadharNumber),g.xp6(20),g.Oqu(r.generatedCaptcha),g.xp6(2),g.Q6J("ngModel",r.captcha),g.xp6(3),g.Q6J("ngIf",r.alert))},directives:[Wn,L0,NA,jI,KA,YA,Bi],styles:['.button[_ngcontent-%COMP%]{background:#efefef;border:none;width:200px;padding:20px;border-radius:45px;color:#6495ed;font-size:1rem;letter-spacing:.1rem;text-align:center;outline:none;cursor:pointer;transition:.4s ease-in-out;font-style:italic;box-shadow:-6px -6px 14px #ffffffb3,-6px -6px 10px #ffffff80,6px 6px 8px #ffffff14,6px 6px 10px #00000026}.button[_ngcontent-%COMP%]:hover{box-shadow:var(--main-box-shadow-hover)}.captcha_textfield[_ngcontent-%COMP%]{border-radius:10px;border:none;background:var(--main-bg-color);box-shadow:var(--main-textfield-focus-shadow);margin:10px 10px 10px 0;padding:10px;color:var(--main-text-color);font-size:1rem;transition:.4s ease-in-out}.captcha_textfield[_ngcontent-%COMP%]:focus{box-shadow:var(--main-textfield-enabled-shadow);outline:none}.verify_button[_ngcontent-%COMP%]{background:var(--main-bg-color);border:none;width:auto;padding:10px;border-radius:45px;color:var(--main-text-color);font-size:1rem;letter-spacing:.1rem;text-align:center;outline:none;cursor:pointer;transition:.4s ease-in-out;box-shadow:var(--main-box-shadow);margin-left:15px}.verify_button[_ngcontent-%COMP%]:hover{box-shadow:var(--main-box-shadow-hover)}.btn-blue[_ngcontent-%COMP%]{border-radius:10px!important;padding:10px!important;width:120px;margin-bottom:20px;background:#0786d9;color:#fff}.red[_ngcontent-%COMP%]{color:red}.loading[_ngcontent-%COMP%]{position:fixed;z-index:999;overflow:show;margin:auto;top:0;left:0;bottom:0;right:0;width:50px;height:50px}.loading[_ngcontent-%COMP%]:before{content:"";display:block;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#ffffff80}.loading[_ngcontent-%COMP%]:not(:required):after{content:"";display:block;font-size:10px;width:90px;height:90px;margin-top:-.5em;border:5px solid #c6a9e4;border-radius:100%;border-bottom-color:transparent;animation:spinner 1s linear 0s infinite}']}),n})();function PL(n,e){1&n&&(g.TgZ(0,"div",30)(1,"div",27),g._uU(2,"Uploading certificate..."),g.qZA()())}function OL(n,e){if(1&n&&(g.TgZ(0,"span",31),g._uU(1),g.qZA()),2&n){const t=g.oxw();g.Q6J("ngClass",t.success?"text-success":"text-danger"),g.xp6(1),g.Oqu(t.alert)}}let kL=(()=>{class n{constructor(t,r){this.afStorage=r,this.eventId=1,this.success=!1,this.loading=!1,this.itemsCollection=t.collection("certificate")}ngOnInit(){}onSelectFile(t){var r=this;return(0,_e.Z)(function*(){if(r.event=t,t.target.files&&t.target.files[0]){var i=new FileReader;i.readAsDataURL(t.target.files[0]),i.onload=u=>{r.url=u.target.result}}})()}uploadImage(){var t=this;return(0,_e.Z)(function*(){if(!t.aadharNumber)return t.alert="*Please enter aadhar number",void t.clearError();if(12!=t.aadharNumber.toString().length)return t.alert="*Please enter valid aadhar number",void t.clearError();if(!t.event)return t.alert="*Please select certificate to upload",void t.clearError();if(t.loading=!0,t.event.target.files&&t.event.target.files[0]){const i=t.event.target.files[0],u=new FileReader;u.onload=c=>t.imageSrc=u.result,u.readAsDataURL(i)}const r=Math.random().toString(36).substring(2);t.ref=t.afStorage.ref(r),t.task=t.ref.put(t.event.target.files[0]).then(i=>{}),yield t.task,t.ref.getDownloadURL().subscribe(i=>{t.image=i,t.addDataToDB()})})()}addDataToDB(){this.itemsCollection.add({aadhaarNumber:this.aadharNumber,certificateUrl:this.image,eventId:this.eventId}).then(r=>{r&&(this.loading=!1,this.aadharNumber=null,this.eventId=1,this.image=null,this.url=null,this.alert="Certificate Uploaded successfully",this.success=!0,this.clearError())},r=>{console.log("Fail to add data",r),this.alert="*Unable to upload certificate. Please try again later."})}clearError(){setTimeout(()=>{this.alert="",this.success=!1},2e3)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(AA),g.Y36(V_))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-upload-certificate"]],decls:49,vars:5,consts:[["class","loading",4,"ngIf"],[1,"container","bg-border","mt-20"],[1,"bold","text-danger"],[1,"text-danger"],[1,"shadow"],[1,"upload-title","mt-20"],[1,"col-12","col-lg-6","offset-lg-3"],[1,"row","mt-20"],[1,"col-12","col-lg-6","margin-auto","title"],[1,"col-12","col-lg-6"],["type","text",1,"box-border",3,"ngModel","ngModelChange"],[1,"pointer"],[1,"box-border",3,"ngModel","ngModelChange"],["value","1"],["value","2"],["value","3"],["value","'4"],["value","5"],[1,"row","mt-20","mb-20"],["id","drop-area",1,"col-12","col-lg-6","drop-it-hot"],["height","200",3,"src"],[1,"choose-files"],[1,"button-wrapper"],["type","button",1,"btn"],["type","file","id","fileElem","multiple","","accept","image/*",3,"change"],["id","gallery"],[3,"ngClass",4,"ngIf"],[1,"row"],[1,"col-12","text-center"],["type","button",1,"btn","btn-blue",3,"click"],[1,"loading"],[3,"ngClass"]],template:function(t,r){1&t&&(g.YNc(0,PL,3,0,"div",0),g.TgZ(1,"section",1)(2,"div",2),g._uU(3,"*Note"),g.qZA(),g.TgZ(4,"div",3),g._uU(5,"1. Upload Clear photo or certificate make sure that all letters are visible"),g.qZA(),g.TgZ(6,"div",3),g._uU(7,"2. File type must be in (ipg/jpeg/png)."),g.qZA(),g.TgZ(8,"div",3),g._uU(9,"3. File size must be below amh"),g.qZA(),g.TgZ(10,"div",4)(11,"div",5),g._uU(12,"Upload certificate"),g.qZA(),g.TgZ(13,"div",6)(14,"div",7)(15,"div",8),g._uU(16," *Aadhar card number "),g.qZA(),g.TgZ(17,"div",9)(18,"input",10),g.NdJ("ngModelChange",function(u){return r.aadharNumber=u}),g.qZA()()(),g.TgZ(19,"div",7)(20,"div",8),g._uU(21," *Event Name "),g.qZA(),g.TgZ(22,"div",9)(23,"span",11)(24,"select",12),g.NdJ("ngModelChange",function(u){return r.eventId=u}),g.TgZ(25,"option",13),g._uU(26,"Master royal cup 2022"),g.qZA(),g.TgZ(27,"option",14),g._uU(28,"Grand Prix international 2022"),g.qZA(),g.TgZ(29,"option",15),g._uU(30,"State level silambam Tournament"),g.qZA(),g.TgZ(31,"option",16),g._uU(32,"TN open championship 2021"),g.qZA(),g.TgZ(33,"option",17),g._uU(34,"Silimbam Interdistrict 2021"),g.qZA()()()()(),g.TgZ(35,"div",18)(36,"div",19),g._UZ(37,"img",20),g.TgZ(38,"form",21)(39,"div",22)(40,"button",23),g._uU(41,"Choose image"),g.qZA(),g.TgZ(42,"input",24),g.NdJ("change",function(u){return r.onSelectFile(u)}),g.qZA()()(),g._UZ(43,"div",25),g.qZA()(),g.YNc(44,OL,2,2,"span",26),g.TgZ(45,"div",27)(46,"div",28)(47,"button",29),g.NdJ("click",function(){return r.uploadImage()}),g._uU(48,"Submit"),g.qZA()()()()()()),2&t&&(g.Q6J("ngIf",r.loading),g.xp6(18),g.Q6J("ngModel",r.aadharNumber),g.xp6(6),g.Q6J("ngModel",r.eventId),g.xp6(13),g.Q6J("src",r.url,g.LSH),g.xp6(7),g.Q6J("ngIf",r.alert))},directives:[Wn,L0,NA,jI,$I,KA,YA,pP,JN,BI,Bi],styles:['.drop-it-hot[_ngcontent-%COMP%]{background-color:#fff;border-radius:15px;margin-top:20px;height:186px;margin-left:auto;margin-right:auto;position:relative;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 15px #0000001a;overflow:hidden}.drop-it-hot[_ngcontent-%COMP%]:after{content:"";position:absolute;width:calc(100% - 20px);height:calc(100% - 20px);border:none;border-radius:5px;z-index:0}.drop-it-hot[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:50%;position:absolute;color:var(--accent);background-color:#0586d7;border:3px solid #eae4e4;width:100px;height:100px;top:12px}.circle[_ngcontent-%COMP%]{transition:transform .15s ease-in;z-index:10}.circle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:40px;height:40px;color:#fff}.circle[_ngcontent-%COMP%]:before{content:"";background-color:var(--accent);width:130px;height:130px;border-radius:50%;position:absolute;opacity:0;transition:transform .25s ease-in,opacity .2s ease-in;z-index:0}.circle[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100px;height:100px;border-radius:50%}.circle[_ngcontent-%COMP%]:hover{transform:scale(1.2);opacity:.9}.circle[_ngcontent-%COMP%]:hover:before{transform:scale(8);opacity:1}.circle[_ngcontent-%COMP%]:hover:after{border:3px solid white}.circle[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{color:#fff;z-index:1}.highlight[_ngcontent-%COMP%]:before{transform:scale(8);opacity:1}.highlight[_ngcontent-%COMP%]:after{border:3px solid white}.highlight[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#fff;z-index:1}.choose-files[_ngcontent-%COMP%]{align-self:flex-end;z-index:10}.button-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:40px;position:relative;overflow:hidden;top:26px;cursor:pointer}.button-wrapper[_ngcontent-%COMP%]:hover   .btn[_ngcontent-%COMP%]{background-color:#0986d9}.label[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--dark-gray);font-size:18px}.button-wrapper[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{font-size:100px;position:absolute;left:0;top:0;opacity:0}.btn[_ngcontent-%COMP%]{border:none;padding:10px 20px;border-radius:50px;background-color:#0986d9;color:#fff;font-size:16px;cursor:pointer;transition:background-color .2s ease-in}#gallery[_ngcontent-%COMP%]{position:absolute;height:100%;top:0;left:0;z-index:100}#gallery[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;filter:contrast(var(--contrast)) brightness(var(--brightness)) sepia(var(--sepia)) hue-rotate(var(--hue-rotate))}.editor[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;width:700px;padding:20px;box-sizing:border-box;background-color:#fff;margin-top:-10px;z-index:100;opacity:0;transform:translateY(50px)}.is-visible[_ngcontent-%COMP%]{transition:transform .5s ease-in-out,opacity .5s ease-in-out;opacity:1;transform:translateY(0)}.range-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:20%}.range[_ngcontent-%COMP%]{-webkit-appearance:none;height:2px;border-radius:5px;background:var(--gray);outline:none;padding:0;margin:10px 0}[_ngcontent-%COMP%]::-moz-range-track{background:var(--gray);border:0}input[_ngcontent-%COMP%]::-moz-focus-inner, input[_ngcontent-%COMP%]::-moz-focus-outer{border:0}input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;height:12px;width:12px;border-radius:8px;background-color:var(--accent);cursor:pointer}input[type=range][_ngcontent-%COMP%]::-moz-range-thumb{-webkit-appearance:none;height:12px;width:12px;border-radius:8px;background-color:var(--accent);cursor:pointer}input[type=range][_ngcontent-%COMP%]::-ms-thumb{-webkit-appearance:none;height:12px;width:12px;border-radius:8px;background-color:var(--accent);cursor:pointer}.loading[_ngcontent-%COMP%]{position:fixed;z-index:999;overflow:show;margin:auto;top:0;left:0;bottom:0;right:0;width:50px;height:50px}.loading[_ngcontent-%COMP%]:before{content:"";display:block;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#ffffff80}.loading[_ngcontent-%COMP%]:not(:required):after{content:"";display:block;font-size:10px;width:90px;height:90px;margin-top:-.5em;border:5px solid #c6a9e4;border-radius:100%;border-bottom-color:transparent;animation:spinner 1s linear 0s infinite}']}),n})();const OP_firebase={apiKey:"AIzaSyDMfqjZ6Fo4O8dv7Z79pMN64REi7talV5A",authDomain:"vks-trust.firebaseapp.com",projectId:"vks-trust",storageBucket:"vks-trust.appspot.com",messagingSenderId:"15646034500",appId:"1:15646034500:web:00998a1ca3f439a8554a11",measurementId:"G-6CD7LB5R1G"},FL=[{path:"",component:kL},{path:"download-certificate",component:NL}];let LL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[lf.forRoot(FL),gi.hO.initializeApp(OP_firebase),PF,mw],lf]}),n})();class kP{}const Uc="*";function FP(n,e=null){return{type:2,steps:n,options:e}}function LP(n){return{type:6,styles:n,offset:null}}function VP(n){Promise.resolve(null).then(n)}class $0{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){VP(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class UP{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?VP(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,f)=>Math.max(c,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const Kt=!1;function BP(n){return new g.vHH(3e3,Kt)}function _V(){return"undefined"!=typeof window&&void 0!==window.document}function XA(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Mh(n){switch(n.length){case 0:return new $0;case 1:return n[0];default:return new UP(n)}}function jP(n,e,t,r,i={},u={}){const c=[],f=[];let _=-1,b=null;if(r.forEach(A=>{const M=A.offset,F=M==_,U=F&&b||{};Object.keys(A).forEach(z=>{let le=z,Se=A[z];if("offset"!==z)switch(le=e.normalizePropertyName(le,c),Se){case"!":Se=i[z];break;case Uc:Se=u[z];break;default:Se=e.normalizeStyleValue(z,le,Se,c)}U[le]=Se}),F||f.push(U),b=U,_=M}),c.length)throw function aV(n){return new g.vHH(3502,Kt)}();return f}function eM(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&tM(t,"start",n)));break;case"done":n.onDone(()=>r(t&&tM(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&tM(t,"destroy",n)))}}function tM(n,e,t){const r=t.totalTime,u=nM(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function nM(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function Ao(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function $P(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let rM=(n,e)=>!1,HP=(n,e,t)=>[],GP=null;function iM(n){const e=n.parentNode||n.host;return e===GP?null:e}(XA()||"undefined"!=typeof Element)&&(_V()?(GP=(()=>document.documentElement)(),rM=(n,e)=>{for(;e;){if(e===n)return!0;e=iM(e)}return!1}):rM=(n,e)=>n.contains(e),HP=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Tp=null,qP=!1;function zP(n){Tp||(Tp=function EV(){return"undefined"!=typeof document?document.body:null}()||{},qP=!!Tp.style&&"WebkitAppearance"in Tp.style);let e=!0;return Tp.style&&!function vV(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Tp.style,!e&&qP&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Tp.style)),e}const WP=rM,KP=HP;let ZP=(()=>{class n{validateStyleProperty(t){return zP(t)}matchesElement(t,r){return!1}containsElement(t,r){return WP(t,r)}getParentElement(t){return iM(t)}query(t,r,i){return KP(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,f=[],_){return new $0(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),sM=(()=>{class n{}return n.NOOP=new ZP,n})();const oM="ng-enter",GI="ng-leave",qI="ng-trigger",zI=".ng-trigger",QP="ng-animating",aM=".ng-animating";function Sp(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:uM(parseFloat(e[1]),e[2])}function uM(n,e){return"s"===e?1e3*n:n}function WI(n,e,t){return n.hasOwnProperty("duration")?n:function IV(n,e,t){let i,u=0,c="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(BP()),{duration:0,delay:0,easing:""};i=uM(parseFloat(f[1]),f[2]);const _=f[3];null!=_&&(u=uM(parseFloat(_),f[4]));const b=f[5];b&&(c=b)}else i=n;if(!t){let f=!1,_=e.length;i<0&&(e.push(function UL(){return new g.vHH(3100,Kt)}()),f=!0),u<0&&(e.push(function BL(){return new g.vHH(3101,Kt)}()),f=!0),f&&e.splice(_,0,BP())}return{duration:i,delay:u,easing:c}}(n,e,t)}function vy(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function xh(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else vy(n,t);return t}function XP(n,e,t){return t?e+":"+t+";":""}function eO(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=XP(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=XP(0,TV(t),n.style[t]));n.setAttribute("style",e)}function Sl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=cM(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),XA()&&eO(n))}function Ap(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=cM(t);n.style[r]=""}),XA()&&eO(n))}function H0(n){return Array.isArray(n)?1==n.length?n[0]:FP(n):n}const lM=new RegExp("{{\\s*(.+?)\\s*}}","g");function tO(n){let e=[];if("string"==typeof n){let t;for(;t=lM.exec(n);)e.push(t[1]);lM.lastIndex=0}return e}function KI(n,e,t){const r=n.toString(),i=r.replace(lM,(u,c)=>{let f=e[c];return e.hasOwnProperty(c)||(t.push(function $L(n){return new g.vHH(3003,Kt)}()),f=""),f.toString()});return i==r?n:i}function ZI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const DV=/-+([a-z0-9])/g;function cM(n){return n.replace(DV,(...e)=>e[1].toUpperCase())}function TV(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Mo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function HL(n){return new g.vHH(3004,Kt)}()}}function nO(n,e){return window.getComputedStyle(n)[e]}function NV(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function PV(n,e,t){if(":"==n[0]){const _=function OV(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function rV(n){return new g.vHH(3016,Kt)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function nV(n){return new g.vHH(3015,Kt)}()),e;const i=r[1],u=r[2],c=r[3];e.push(rO(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(rO(c,i))}(r,t,e)):t.push(n),t}const XI=new Set(["true","1"]),eC=new Set(["false","0"]);function rO(n,e){const t=XI.has(n)||eC.has(n),r=XI.has(e)||eC.has(e);return(i,u)=>{let c="*"==n||n==i,f="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?XI.has(n):eC.has(n)),!f&&r&&"boolean"==typeof u&&(f=u?XI.has(e):eC.has(e)),c&&f}}const kV=new RegExp("s*:selfs*,?","g");function dM(n,e,t,r){return new FV(n).build(e,t,r)}class FV{constructor(e){this._driver=e}build(e,t,r){const i=new UV(t);this._resetContextStyleTimingState(i);const u=Mo(this,H0(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function qL(){return new g.vHH(3006,Kt)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const _=f,b=_.name;b.toString().split(/\s*,\s*/).forEach(A=>{_.name=A,u.push(this.visitState(_,t))}),_.name=b}else if(1==f.type){const _=this.visitTransition(f,t);r+=_.queryCount,i+=_.depCount,c.push(_)}else t.errors.push(function zL(){return new g.vHH(3007,Kt)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(f=>{if(tC(f)){const _=f;Object.keys(_).forEach(b=>{tO(_[b]).forEach(A=>{c.hasOwnProperty(A)||u.add(A)})})}}),u.size&&(ZI(u.values()),t.errors.push(function WL(n,e){return new g.vHH(3008,Kt)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Mo(this,H0(e.animation),t);return{type:1,matchers:NV(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Mp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Mo(this,r,t)),options:Mp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const f=Mo(this,c,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:u,options:Mp(e.options)}}visitAnimate(e,t){const r=function jV(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return hM(WI(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=hM(0,0,"");return u.dynamic=!0,u.strValue=r,u}return t=t||WI(r,e),hM(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:LP({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,f=!1;if(!c){f=!0;const b={};r.easing&&(b.easing=r.easing),c=LP(b)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(c,t);_.isEmptyStep=f,i=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==Uc?r.push(c):t.errors.push(function KL(n){return new g.vHH(3002,Kt)}()):r.push(c)}):r.push(e.styles);let i=!1,u=null;return r.forEach(c=>{if(tC(c)){const f=c,_=f.easing;if(_&&(u=_,delete f.easing),!i)for(let b in f)if(f[b].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(f=>{if(!this._driver.validateStyleProperty(f))return delete c[f],void t.unsupportedCSSPropertiesFound.add(f);const _=t.collectedStyles[t.currentQuerySelector],b=_[f];let A=!0;b&&(u!=i&&u>=b.startTime&&i<=b.endTime&&(t.errors.push(function ZL(n,e,t,r,i){return new g.vHH(3010,Kt)}()),A=!1),u=b.startTime),A&&(_[f]={startTime:u,endTime:i}),t.options&&function CV(n,e,t){const r=e.params||{},i=tO(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function jL(n){return new g.vHH(3001,Kt)}())})}(c[f],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function YL(){return new g.vHH(3011,Kt)}()),r;let u=0;const c=[];let f=!1,_=!1,b=0;const A=e.steps.map(rt=>{const it=this._makeStyleAst(rt,t);let Xe=null!=it.offset?it.offset:function BV(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(tC(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(tC(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(it.styles),ze=0;return null!=Xe&&(u++,ze=it.offset=Xe),_=_||ze<0||ze>1,f=f||ze<b,b=ze,c.push(ze),it});_&&t.errors.push(function QL(){return new g.vHH(3012,Kt)}()),f&&t.errors.push(function JL(){return new g.vHH(3200,Kt)}());const M=e.steps.length;let F=0;u>0&&u<M?t.errors.push(function XL(){return new g.vHH(3202,Kt)}()):0==u&&(F=1/(M-1));const U=M-1,z=t.currentTime,le=t.currentAnimateTimings,Se=le.duration;return A.forEach((rt,it)=>{const Xe=F>0?it==U?1:F*it:c[it],ze=Xe*Se;t.currentTime=z+le.delay+ze,le.duration=ze,this._validateStyleAst(rt,t),rt.offset=Xe,r.styles.push(rt)}),r}visitReference(e,t){return{type:8,animation:Mo(this,H0(e.animation),t),options:Mp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Mp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Mp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function LV(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(kV,"")),n=n.replace(/@\*/g,zI).replace(/@\w+/g,t=>zI+"-"+t.substr(1)).replace(/:animating/g,aM),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Ao(t.collectedStyles,t.currentQuerySelector,{});const f=Mo(this,H0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:f,originalSelector:e.selector,options:Mp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function eV(){return new g.vHH(3013,Kt)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:WI(e.timings,t.errors,!0);return{type:12,animation:Mo(this,H0(e.animation),t),timings:r,options:null}}}class UV{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function tC(n){return!Array.isArray(n)&&"object"==typeof n}function Mp(n){return n?(n=vy(n)).params&&(n.params=function VV(n){return n?vy(n):null}(n.params)):n={},n}function hM(n,e,t){return{duration:n,delay:e,easing:t}}function fM(n,e,t,r,i,u,c=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:f}}class nC{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const GV=new RegExp(":enter","g"),zV=new RegExp(":leave","g");function pM(n,e,t,r,i,u={},c={},f,_,b=[]){return(new WV).buildKeyframes(n,e,t,r,i,u,c,f,_,b)}class WV{buildKeyframes(e,t,r,i,u,c,f,_,b,A=[]){b=b||new nC;const M=new gM(e,t,b,i,u,A,[]);M.options=_,M.currentTimeline.setStyles([c],null,M.errors,_),Mo(this,r,M);const F=M.timelines.filter(U=>U.containsAnimation());if(Object.keys(f).length){let U;for(let z=F.length-1;z>=0;z--){const le=F[z];if(le.element===t){U=le;break}}U&&!U.allowOnlyTimelineStyles()&&U.setStyles([f],null,M.errors,_)}return F.length?F.map(U=>U.buildKeyframes()):[fM(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?Sp(r.duration):null,f=null!=r.delay?Sp(r.delay):null;return 0!==c&&e.forEach(_=>{const b=t.appendInstructionToTimeline(_,c,f);u=Math.max(u,b.duration+b.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Mo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=rC);const c=Sp(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Mo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?Sp(e.options.delay):0;e.steps.forEach(c=>{const f=t.createSubContext(e.options);u&&f.delayNextStep(u),Mo(this,c,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return WI(t.params?KI(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(_=>{f.forwardTime((_.offset||0)*u),f.setStyles(_.styles,_.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?Sp(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=rC);let c=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let _=null;f.forEach((b,A)=>{t.currentQueryIndex=A;const M=t.createSubContext(e.options,b);u&&M.delayNextStep(u),b===t.element&&(_=M.currentTimeline),Mo(this,e.animation,M),M.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,M.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),f=c*(t.currentQueryTotal-1);let _=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":_=f-_;break;case"full":_=r.currentStaggerTime}const A=t.currentTimeline;_&&A.delayNextStep(_);const M=A.currentTime;Mo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-M+(i.startTime-r.currentTimeline.startTime)}}const rC={};class gM{constructor(e,t,r,i,u,c,f,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=rC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new iC(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Sp(r.duration)),null!=r.delay&&(i.delay=Sp(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(f=>{(!t||!c.hasOwnProperty(f))&&(c[f]=KI(u[f],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new gM(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=rC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new KV(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(GV,"."+this._enterClassName)).replace(zV,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),f.push(...b)}return!u&&0==f.length&&c.push(function tV(n){return new g.vHH(3014,Kt)}()),f}}class iC{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new iC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Uc,this._currentKeyframe[t]=Uc}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const u=i&&i.params||{},c=function ZV(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(u=>{t[u]=Uc})):xh(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(f=>{const _=KI(c[f],u,r);this._pendingStyles[f]=_,this._localTimelineStyles.hasOwnProperty(f)||(this._backFill[f]=this._globalTimelineStyles.hasOwnProperty(f)?this._globalTimelineStyles[f]:Uc),this._updateStyle(f,_)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,_)=>{const b=xh(f,!0);Object.keys(b).forEach(A=>{const M=b[A];"!"==M?e.add(A):M==Uc&&t.add(A)}),r||(b.offset=_/this.duration),i.push(b)});const u=e.size?ZI(e.values()):[],c=t.size?ZI(t.values()):[];if(r){const f=i[0],_=vy(f);f.offset=0,_.offset=1,i=[f,_]}return fM(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class KV extends iC{constructor(e,t,r,i,u,c,f=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=f,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,f=t/c,_=xh(e[0],!1);_.offset=0,u.push(_);const b=xh(e[0],!1);b.offset=oO(f),u.push(b);const A=e.length-1;for(let M=1;M<=A;M++){let F=xh(e[M],!1);F.offset=oO((t+F.offset*r)/c),u.push(F)}r=c,t=0,i="",e=u}return fM(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function oO(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class mM{}class YV extends mM{normalizePropertyName(e,t){return cM(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(QV[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function GL(n,e){return new g.vHH(3005,Kt)}())}return c+u}}const QV=(()=>function JV(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function aO(n,e,t,r,i,u,c,f,_,b,A,M,F){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:f,queriedElements:_,preStyleProps:b,postStyleProps:A,totalTime:M,errors:F}}const yM={};class uO{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function XV(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],u=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,i,u,c,f,_,b,A){const M=[],F=this.ast.options&&this.ast.options.params||yM,z=this.buildStyles(r,f&&f.params||yM,M),le=_&&_.params||yM,Se=this.buildStyles(i,le,M),rt=new Set,it=new Map,Xe=new Map,ze="void"===i,Tt={params:Object.assign(Object.assign({},F),le)},Mt=A?[]:pM(e,t,this.ast.animation,u,c,z,Se,Tt,b,M);let Zt=0;if(Mt.forEach(xo=>{Zt=Math.max(xo.duration+xo.delay,Zt)}),M.length)return aO(t,this._triggerName,r,i,ze,z,Se,[],[],it,Xe,Zt,M);Mt.forEach(xo=>{const Bc=xo.element,CO=Ao(it,Bc,{});xo.preStyleProps.forEach(xp=>CO[xp]=!0);const q0=Ao(Xe,Bc,{});xo.postStyleProps.forEach(xp=>q0[xp]=!0),Bc!==t&&rt.add(Bc)});const Ir=ZI(rt.values());return aO(t,this._triggerName,r,i,ze,z,Se,Mt,Ir,it,Xe,Zt)}}class eU{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=vy(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(i[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(f=>{let _=c[f];_.length>1&&(_=KI(_,i,t));const b=this.normalizer.normalizePropertyName(f,t);_=this.normalizer.normalizeStyleValue(f,b,_,t),r[b]=_})}}),r}}class nU{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new eU(i.style,i.options&&i.options.params||{},r)}),lO(this.states,"true","1"),lO(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new uO(e,i,this.states))}),this.fallbackTransition=function rU(n,e,t){return new uO(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function lO(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const iU=new nC;class sU{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=dM(this._driver,t,r,[]);if(r.length)throw function uV(n){return new g.vHH(3503,Kt)}();this._animations[e]=u}_buildPlayer(e,t,r){const i=e.element,u=jP(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations[e];let c;const f=new Map;if(u?(c=pM(this._driver,t,u,oM,GI,{},{},r,iU,i),c.forEach(A=>{const M=Ao(f,A.element,{});A.postStyleProps.forEach(F=>M[F]=null)})):(i.push(function lV(){return new g.vHH(3300,Kt)}()),c=[]),i.length)throw function cV(n){return new g.vHH(3504,Kt)}();f.forEach((A,M)=>{Object.keys(A).forEach(F=>{A[F]=this._driver.computeStyle(M,F,Uc)})});const b=Mh(c.map(A=>{const M=f.get(A.element);return this._buildPlayer(A,{},M)}));return this._playersById[e]=b,b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function dV(n){return new g.vHH(3301,Kt)}();return t}listen(e,t,r,i){const u=nM(t,"","","");return eM(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const cO="ng-animate-queued",_M="ng-animate-disabled",cU=[],dO={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},dU={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Da="__ng_removed";class vM{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function gU(n){return null!=n?n:null}(r?e.value:e),r){const u=vy(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const G0="void",EM=new vM(G0);class hU{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ta(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function hV(n,e){return new g.vHH(3302,Kt)}();if(null==r||0==r.length)throw function fV(n){return new g.vHH(3303,Kt)}();if(!function mU(n){return"start"==n||"done"==n}(r))throw function pV(n,e){return new g.vHH(3400,Kt)}();const u=Ao(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const f=Ao(this._engine.statesByElement,e,{});return f.hasOwnProperty(t)||(Ta(e,qI),Ta(e,qI+"-"+t),f[t]=EM),()=>{this._engine.afterFlush(()=>{const _=u.indexOf(c);_>=0&&u.splice(_,1),this._triggers[t]||delete f[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function gV(n){return new g.vHH(3401,Kt)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new wM(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(Ta(e,qI),Ta(e,qI+"-"+t),this._engine.statesByElement.set(e,f={}));let _=f[t];const b=new vM(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&b.absorbOptions(_.options),f[t]=b,_||(_=EM),b.value!==G0&&_.value===b.value){if(!function vU(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(_.params,b.params)){const le=[],Se=u.matchStyles(_.value,_.params,le),rt=u.matchStyles(b.value,b.params,le);le.length?this._engine.reportError(le):this._engine.afterFlush(()=>{Ap(e,Se),Sl(e,rt)})}return}const F=Ao(this._engine.playersByElement,e,[]);F.forEach(le=>{le.namespaceId==this.id&&le.triggerName==t&&le.queued&&le.destroy()});let U=u.matchTransition(_.value,b.value,e,b.params),z=!1;if(!U){if(!i)return;U=u.fallbackTransition,z=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:U,fromState:_,toState:b,player:c,isFallbackTransition:z}),z||(Ta(e,cO),c.onStart(()=>{Ey(e,cO)})),c.onDone(()=>{let le=this.players.indexOf(c);le>=0&&this.players.splice(le,1);const Se=this._engine.playersByElement.get(e);if(Se){let rt=Se.indexOf(c);rt>=0&&Se.splice(rt,1)}}),this.players.push(c),F.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,zI,!0);r.forEach(i=>{if(i[Da])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const f=[];if(Object.keys(u).forEach(_=>{if(c.set(_,u[_].value),this._triggers[_]){const b=this.trigger(e,_,G0,i);b&&f.push(b)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Mh(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const _=this._triggers[c].fallbackTransition,b=r[c]||EM,A=new vM(G0),M=new wM(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:_,fromState:b,toState:A,player:M,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[Da];(!u||u===dO)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ta(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(f=>{if(f.name==r.triggerName){const _=nM(u,r.triggerName,r.fromState.value,r.toState.value);_._data=e,eM(r.player,f.phase,_,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class fU{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new hU(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let f=this.driver.getParentElement(t);for(;f;){const _=i.get(f);if(_){const b=r.indexOf(_);r.splice(b+1,0,e),c=!0;break}f=this.driver.getParentElement(f)}}else for(let f=u;f>=0;f--)if(this.driver.containsElement(r[f].hostElement,t)){r.splice(f+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let u=0;u<i.length;u++){const c=r[i[u]].namespaceId;if(c){const f=this._fetchNamespace(c);f&&t.add(f)}}}return t}trigger(e,t,r,i){if(sC(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!sC(t))return;const u=t[Da];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ta(e,_M)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ey(e,_M))}removeNode(e,t,r,i){if(sC(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[Da]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return sC(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,zI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,aM,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Mh(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Da];if(r&&r.setForRemoval){if(e[Da]=dO,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(_M))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ta(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Mh(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function mV(n){return new g.vHH(3402,Kt)}()}_flushAnimations(e,t){const r=new nC,i=[],u=new Map,c=[],f=new Map,_=new Map,b=new Map,A=new Set;this.disabledNodes.forEach(at=>{A.add(at);const bt=this.driver.query(at,".ng-animate-queued",!0);for(let Pt=0;Pt<bt.length;Pt++)A.add(bt[Pt])});const M=this.bodyNode,F=Array.from(this.statesByElement.keys()),U=pO(F,this.collectedEnterElements),z=new Map;let le=0;U.forEach((at,bt)=>{const Pt=oM+le++;z.set(bt,Pt),at.forEach(rn=>Ta(rn,Pt))});const Se=[],rt=new Set,it=new Set;for(let at=0;at<this.collectedLeaveElements.length;at++){const bt=this.collectedLeaveElements[at],Pt=bt[Da];Pt&&Pt.setForRemoval&&(Se.push(bt),rt.add(bt),Pt.hasAnimation?this.driver.query(bt,".ng-star-inserted",!0).forEach(rn=>rt.add(rn)):it.add(bt))}const Xe=new Map,ze=pO(F,Array.from(rt));ze.forEach((at,bt)=>{const Pt=GI+le++;Xe.set(bt,Pt),at.forEach(rn=>Ta(rn,Pt))}),e.push(()=>{U.forEach((at,bt)=>{const Pt=z.get(bt);at.forEach(rn=>Ey(rn,Pt))}),ze.forEach((at,bt)=>{const Pt=Xe.get(bt);at.forEach(rn=>Ey(rn,Pt))}),Se.forEach(at=>{this.processLeaveNode(at)})});const Tt=[],Mt=[];for(let at=this._namespaceList.length-1;at>=0;at--)this._namespaceList[at].drainQueuedTransitions(t).forEach(Pt=>{const rn=Pt.player,Ii=Pt.element;if(Tt.push(rn),this.collectedEnterElements.length){const Ds=Ii[Da];if(Ds&&Ds.setForMove){if(Ds.previousTriggersValues&&Ds.previousTriggersValues.has(Pt.triggerName)){const Rp=Ds.previousTriggersValues.get(Pt.triggerName),Nh=this.statesByElement.get(Pt.element);Nh&&Nh[Pt.triggerName]&&(Nh[Pt.triggerName].value=Rp)}return void rn.destroy()}}const Al=!M||!this.driver.containsElement(M,Ii),Ro=Xe.get(Ii),Rh=z.get(Ii),nr=this._buildInstruction(Pt,r,Rh,Ro,Al);if(nr.errors&&nr.errors.length)return void Mt.push(nr);if(Al)return rn.onStart(()=>Ap(Ii,nr.fromStyles)),rn.onDestroy(()=>Sl(Ii,nr.toStyles)),void i.push(rn);if(Pt.isFallbackTransition)return rn.onStart(()=>Ap(Ii,nr.fromStyles)),rn.onDestroy(()=>Sl(Ii,nr.toStyles)),void i.push(rn);const SO=[];nr.timelines.forEach(Ds=>{Ds.stretchStartingKeyframe=!0,this.disabledNodes.has(Ds.element)||SO.push(Ds)}),nr.timelines=SO,r.append(Ii,nr.timelines),c.push({instruction:nr,player:rn,element:Ii}),nr.queriedElements.forEach(Ds=>Ao(f,Ds,[]).push(rn)),nr.preStyleProps.forEach((Ds,Rp)=>{const Nh=Object.keys(Ds);if(Nh.length){let Np=_.get(Rp);Np||_.set(Rp,Np=new Set),Nh.forEach(IM=>Np.add(IM))}}),nr.postStyleProps.forEach((Ds,Rp)=>{const Nh=Object.keys(Ds);let Np=b.get(Rp);Np||b.set(Rp,Np=new Set),Nh.forEach(IM=>Np.add(IM))})});if(Mt.length){const at=[];Mt.forEach(bt=>{at.push(function yV(n,e){return new g.vHH(3505,Kt)}())}),Tt.forEach(bt=>bt.destroy()),this.reportError(at)}const Zt=new Map,Ir=new Map;c.forEach(at=>{const bt=at.element;r.has(bt)&&(Ir.set(bt,bt),this._beforeAnimationBuild(at.player.namespaceId,at.instruction,Zt))}),i.forEach(at=>{const bt=at.element;this._getPreviousPlayers(bt,!1,at.namespaceId,at.triggerName,null).forEach(rn=>{Ao(Zt,bt,[]).push(rn),rn.destroy()})});const xo=Se.filter(at=>mO(at,_,b)),Bc=new Map;fO(Bc,this.driver,it,b,Uc).forEach(at=>{mO(at,_,b)&&xo.push(at)});const q0=new Map;U.forEach((at,bt)=>{fO(q0,this.driver,new Set(at),_,"!")}),xo.forEach(at=>{const bt=Bc.get(at),Pt=q0.get(at);Bc.set(at,Object.assign(Object.assign({},bt),Pt))});const xp=[],DO=[],TO={};c.forEach(at=>{const{element:bt,player:Pt,instruction:rn}=at;if(r.has(bt)){if(A.has(bt))return Pt.onDestroy(()=>Sl(bt,rn.toStyles)),Pt.disabled=!0,Pt.overrideTotalTime(rn.totalTime),void i.push(Pt);let Ii=TO;if(Ir.size>1){let Ro=bt;const Rh=[];for(;Ro=Ro.parentNode;){const nr=Ir.get(Ro);if(nr){Ii=nr;break}Rh.push(Ro)}Rh.forEach(nr=>Ir.set(nr,Ii))}const Al=this._buildAnimation(Pt.namespaceId,rn,Zt,u,q0,Bc);if(Pt.setRealPlayer(Al),Ii===TO)xp.push(Pt);else{const Ro=this.playersByElement.get(Ii);Ro&&Ro.length&&(Pt.parentPlayer=Mh(Ro)),i.push(Pt)}}else Ap(bt,rn.fromStyles),Pt.onDestroy(()=>Sl(bt,rn.toStyles)),DO.push(Pt),A.has(bt)&&i.push(Pt)}),DO.forEach(at=>{const bt=u.get(at.element);if(bt&&bt.length){const Pt=Mh(bt);at.setRealPlayer(Pt)}}),i.forEach(at=>{at.parentPlayer?at.syncPlayerEvents(at.parentPlayer):at.destroy()});for(let at=0;at<Se.length;at++){const bt=Se[at],Pt=bt[Da];if(Ey(bt,GI),Pt&&Pt.hasAnimation)continue;let rn=[];if(f.size){let Al=f.get(bt);Al&&Al.length&&rn.push(...Al);let Ro=this.driver.query(bt,aM,!0);for(let Rh=0;Rh<Ro.length;Rh++){let nr=f.get(Ro[Rh]);nr&&nr.length&&rn.push(...nr)}}const Ii=rn.filter(Al=>!Al.destroyed);Ii.length?yU(this,bt,Ii):this.processLeaveNode(bt)}return Se.length=0,xp.forEach(at=>{this.players.push(at),at.onDone(()=>{at.destroy();const bt=this.players.indexOf(at);this.players.splice(bt,1)}),at.play()}),xp}elementContainsData(e,t){let r=!1;const i=t[Da];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(c=f)}else{const f=this.playersByElement.get(e);if(f){const _=!u||u==G0;f.forEach(b=>{b.queued||!_&&b.triggerName!=i||c.push(b)})}}return(r||i)&&(c=c.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const b=_.element,A=b!==u,M=Ao(r,b,[]);this._getPreviousPlayers(b,A,c,f,t.toState).forEach(U=>{const z=U.getRealPlayer();z.beforeDestroy&&z.beforeDestroy(),U.destroy(),M.push(U)})}Ap(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const f=t.triggerName,_=t.element,b=[],A=new Set,M=new Set,F=t.timelines.map(z=>{const le=z.element;A.add(le);const Se=le[Da];if(Se&&Se.removedBeforeQueried)return new $0(z.duration,z.delay);const rt=le!==_,it=function _U(n){const e=[];return gO(n,e),e}((r.get(le)||cU).map(Zt=>Zt.getRealPlayer())).filter(Zt=>!!Zt.element&&Zt.element===le),Xe=u.get(le),ze=c.get(le),Tt=jP(0,this._normalizer,0,z.keyframes,Xe,ze),Mt=this._buildPlayer(z,Tt,it);if(z.subTimeline&&i&&M.add(le),rt){const Zt=new wM(e,f,le);Zt.setRealPlayer(Mt),b.push(Zt)}return Mt});b.forEach(z=>{Ao(this.playersByQueriedElement,z.element,[]).push(z),z.onDone(()=>function pU(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,z.element,z))}),A.forEach(z=>Ta(z,QP));const U=Mh(F);return U.onDestroy(()=>{A.forEach(z=>Ey(z,QP)),Sl(_,t.toStyles)}),M.forEach(z=>{Ao(i,z,[]).push(U)}),U}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new $0(e.duration,e.delay)}}class wM{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new $0,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>eM(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ao(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function sC(n){return n&&1===n.nodeType}function hO(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function fO(n,e,t,r,i){const u=[];t.forEach(_=>u.push(hO(_)));const c=[];r.forEach((_,b)=>{const A={};_.forEach(M=>{const F=A[M]=e.computeStyle(b,M,i);(!F||0==F.length)&&(b[Da]=dU,c.push(b))}),n.set(b,A)});let f=0;return t.forEach(_=>hO(_,u[f++])),c}function pO(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(f){if(!f)return 1;let _=u.get(f);if(_)return _;const b=f.parentNode;return _=t.has(b)?b:i.has(b)?1:c(b),u.set(f,_),_}return e.forEach(f=>{const _=c(f);1!==_&&t.get(_).push(f)}),t}function Ta(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Ey(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function yU(n,e,t){Mh(t).onDone(()=>n.processLeaveNode(e))}function gO(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof UP?gO(r.players,e):e.push(r)}}function mO(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class oC{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new fU(e,t,r),this._timelineEngine=new sU(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let f=this._triggerCache[c];if(!f){const _=[],A=dM(this._driver,u,_,[]);if(_.length)throw function oV(n,e){return new g.vHH(3404,Kt)}();f=function tU(n,e,t){return new nU(n,e,t)}(i,A,this._normalizer),this._triggerCache[c]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=$P(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,f]=$P(r);return this._timelineEngine.listen(c,t,f,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let wU=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&Sl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Sl(this._element,this._initialStyles),this._endStyles&&(Sl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ap(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ap(this._element,this._endStyles),this._endStyles=null),Sl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function bM(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];bU(i)&&(e=e||{},e[i]=n[i])}return e}function bU(n){return"display"===n||"position"===n}class yO{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:nO(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class IU{validateStyleProperty(e){return zP(e)}matchesElement(e,t){return!1}containsElement(e,t){return WP(e,t)}getParentElement(e){return iM(e)}query(e,t,r){return KP(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const _={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(_.easing=u);const b={},A=c.filter(F=>F instanceof yO);(function SV(n,e){return 0===n||0===e})(r,i)&&A.forEach(F=>{let U=F.currentSnapshot;Object.keys(U).forEach(z=>b[z]=U[z])}),t=function AV(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(f=>{u.hasOwnProperty(f)||c.push(f),u[f]=t[f]}),c.length)for(var i=1;i<e.length;i++){let f=e[i];c.forEach(function(_){f[_]=nO(n,_)})}}return e}(e,t=t.map(F=>xh(F,!1)),b);const M=function EU(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=bM(e[0]),e.length>1&&(r=bM(e[e.length-1]))):e&&(t=bM(e)),t||r?new wU(n,t,r):null}(e,t);return new yO(e,t,_,M)}}let CU=(()=>{class n extends kP{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:g.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?FP(t):t;return _O(this._renderer,null,r,"register",[i]),new DU(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.FYo),g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class DU extends class VL{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new TU(this._id,e,t||{},this._renderer)}}class TU{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return _O(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function _O(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const vO="@.disabled";let SU=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const f=null==c?void 0:c.parentNode(u);f&&c.removeChild(f,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let A=this._rendererCache.get(u);return A||(A=new EO("",u,this.engine),this._rendererCache.set(u,A)),A}const c=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const _=A=>{Array.isArray(A)?A.forEach(_):this.engine.registerTrigger(c,f,t,A.name,A)};return r.data.animation.forEach(_),new AU(this,f,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,f]=u;c(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.FYo),g.LFG(oC),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class EO{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==vO?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class AU extends EO{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==vO?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function MU(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function xU(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let RU=(()=>{class n extends oC{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue),g.LFG(sM),g.LFG(mM))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const wO=new g.OlP("AnimationModuleType"),bO=[{provide:kP,useClass:CU},{provide:mM,useFactory:function NU(){return new YV}},{provide:oC,useClass:RU},{provide:g.FYo,useFactory:function PU(n,e,t){return new SU(n,e,t)},deps:[pn,oC,g.R0b]}],IO=[{provide:sM,useFactory:()=>new IU},{provide:wO,useValue:"BrowserAnimations"},...bO],OU=[{provide:sM,useClass:ZP},{provide:wO,useValue:"NoopAnimations"},...bO];let kU=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?OU:IO}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:IO,imports:[$o]}),n})(),FU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[dC]}),n.\u0275inj=g.cJS({providers:[],imports:[[$o,LL,ML,kU]]}),n})();(0,g.G48)(),Au().bootstrapModule(FU).catch(n=>console.error(n))},5867:(Je,we,P)=>{P.d(we,{Mq:()=>g.getApp,C6:()=>g.getApps});var g=P(9681);(0,g.registerVersion)("firebase","9.8.2","app")},127:(Je,we,P)=>{P.d(we,{Z:()=>g.Z});var g=P(3942);g.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(Je,we,P)=>{P.r(we);var g=P(5861),X=P(3942),k=P(2090),ae=P(9681),re=P(655),pe=P(1877),ue=P(4859);const Ne=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ue=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ge=new pe.Yd("@firebase/auth");function Ze(y,...h){Ge.logLevel<=pe.in.ERROR&&Ge.error(`Auth (${ae.SDK_VERSION}): ${y}`,...h)}function De(y,...h){throw Be(y,...h)}function Ee(y,...h){return Be(y,...h)}function be(y,h,m){const E=Object.assign(Object.assign({},Ue()),{[h]:m});return new k.LL("auth","Firebase",E).create(h,{appName:y.name})}function je(y,h,m){if(!(h instanceof m))throw m.name!==h.constructor.name&&De(y,"argument-error"),be(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(y,...h){if("string"!=typeof y){const m=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(m,...E)}return he.create(y,...h)}function $(y,h,...m){if(!y)throw Be(h,...m)}function ve(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Ze(h),new Error(h)}function Z(y,h){y||ve(h)}const ie=new Map;function ee(y){Z(y instanceof Function,"Expected a class definition");let h=ie.get(y);return h?(Z(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,ie.set(y,h),h)}function Pe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function lt(){return"http:"===$t()||"https:"===$t()}function $t(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Xt{constructor(h,m){this.shortDelay=h,this.longDelay=m,Z(m>h,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function Ut(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(lt()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Sn(y,h){Z(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return h?`${m}${h.startsWith("/")?h.slice(1):h}`:m}class sn{static initialize(h,m,E){this.fetchImpl=h,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Yt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Cr=new Xt(3e4,6e4);function qt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Vt(y,h,m,E){return ss.apply(this,arguments)}function ss(){return(ss=(0,g.Z)(function*(y,h,m,E,S={}){return Zr(y,S,(0,g.Z)(function*(){let N={},K={};E&&("GET"===h?K=E:N={body:JSON.stringify(E)});const fe=(0,k.xO)(Object.assign({key:y.config.apiKey},K)).slice(1),ke=yield y._getAdditionalHeaders();return ke["Content-Type"]="application/json",y.languageCode&&(ke["X-Firebase-Locale"]=y.languageCode),sn.fetch()(Ts(y,y.config.apiHost,m,fe),Object.assign({method:h,headers:ke,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function Zr(y,h,m){return mr.apply(this,arguments)}function mr(){return(mr=(0,g.Z)(function*(y,h,m){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},Yt),h);try{const S=new Yr(y),N=yield Promise.race([m(),S.promise]);S.clearNetworkTimeout();const K=yield N.json();if("needConfirmation"in K)throw Ci(y,"account-exists-with-different-credential",K);if(N.ok&&!("errorMessage"in K))return K;{const fe=N.ok?K.errorMessage:K.error.message,[ke,Ke]=fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw Ci(y,"credential-already-in-use",K);if("EMAIL_EXISTS"===ke)throw Ci(y,"email-already-in-use",K);if("USER_DISABLED"===ke)throw Ci(y,"user-disabled",K);const mt=E[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(Ke)throw be(y,mt,Ke);De(y,mt)}}catch(S){if(S instanceof k.ZR)throw S;De(y,"network-request-failed")}})).apply(this,arguments)}function Dr(y,h,m,E){return Li.apply(this,arguments)}function Li(){return(Li=(0,g.Z)(function*(y,h,m,E,S={}){const N=yield Vt(y,h,m,E,S);return"mfaPendingCredential"in N&&De(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Ts(y,h,m,E){const S=`${h}${m}?${E}`;return y.config.emulator?Sn(y.config,S):`${y.config.apiScheme}://${S}`}class Yr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Ee(this.auth,"network-request-failed")),Cr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ci(y,h,m){const E={appName:y.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const S=Ee(y,h,E);return S.customData._tokenResponse=m,S}function Qr(){return(Qr=(0,g.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function En(y,h){return An.apply(this,arguments)}function An(){return(An=(0,g.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Qs(y,h){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,g.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function zn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function No(){return(No=(0,g.Z)(function*(y,h=!1){const m=(0,k.m9)(y),E=yield m.getIdToken(h),S=ot(E);$(S&&S.exp&&S.auth_time&&S.iat,m.auth,"internal-error");const N="object"==typeof S.firebase?S.firebase:void 0,K=null==N?void 0:N.sign_in_provider;return{claims:S,token:E,authTime:zn(Ht(S.auth_time)),issuedAtTime:zn(Ht(S.iat)),expirationTime:zn(Ht(S.exp)),signInProvider:K||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function Ht(y){return 1e3*Number(y)}function ot(y){const[h,m,E]=y.split(".");if(void 0===h||void 0===m||void 0===E)return Ze("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,k.tV)(m);return S?JSON.parse(S):(Ze("Failed to decode base64 JWT payload"),null)}catch(S){return Ze("Caught error parsing JWT payload as JSON",S),null}}function yr(y,h){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,g.Z)(function*(y,h,m=!1){if(m)return h;try{return yield h}catch(E){throw E instanceof k.ZR&&Bt(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function Bt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Js{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var m;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const S=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield m.iteration()}),E)}iteration(){var h=this;return(0,g.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&h.schedule(!0))}h.schedule()})()}}class _r{constructor(h,m){this.createdAt=h,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=zn(this.lastLoginAt),this.creationTime=zn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function vr(y){return V.apply(this,arguments)}function V(){return(V=(0,g.Z)(function*(y){var h;const m=y.auth,E=yield y.getIdToken(),S=yield yr(y,Qs(m,{idToken:E}));$(null==S?void 0:S.users.length,m,"internal-error");const N=S.users[0];y._notifyReloadListener(N);const K=(null===(h=N.providerUserInfo)||void 0===h?void 0:h.length)?G(N.providerUserInfo):[],fe=Ie(y.providerData,K),mt=!!y.isAnonymous&&!(y.email&&N.passwordHash||(null==fe?void 0:fe.length)),ct={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:fe,metadata:new _r(N.createdAt,N.lastLoginAt),isAnonymous:mt};Object.assign(y,ct)})).apply(this,arguments)}function W(){return(W=(0,g.Z)(function*(y){const h=(0,k.m9)(y);yield vr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ie(y,h){return[...y.filter(E=>!h.some(S=>S.providerId===E.providerId)),...h]}function G(y){return y.map(h=>{var{providerId:m}=h,E=(0,re._T)(h,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function xe(){return(xe=(0,g.Z)(function*(y,h){const m=yield Zr(y,{},(0,g.Z)(function*(){const E=(0,k.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:N}=y.config,K=Ts(y,S,"/v1/token",`key=${N}`),fe=yield y._getAdditionalHeaders();return fe["Content-Type"]="application/x-www-form-urlencoded",sn.fetch()(K,{method:"POST",headers:fe,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Qe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){$(h.idToken,"internal-error"),$(void 0!==h.idToken,"internal-error"),$(void 0!==h.refreshToken,"internal-error");const m="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function vt(y){const h=ot(y);return $(h,"internal-error"),$(void 0!==h.exp,"internal-error"),$(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,m)}getToken(h,m=!1){var E=this;return(0,g.Z)(function*(){return $(!E.accessToken||E.refreshToken,h,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,m){var E=this;return(0,g.Z)(function*(){const{accessToken:S,refreshToken:N,expiresIn:K}=yield function J(y,h){return xe.apply(this,arguments)}(h,m);E.updateTokensAndExpiration(S,N,Number(K))})()}updateTokensAndExpiration(h,m,E){this.refreshToken=m||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,m){const{refreshToken:E,accessToken:S,expirationTime:N}=m,K=new Qe;return E&&($("string"==typeof E,"internal-error",{appName:h}),K.refreshToken=E),S&&($("string"==typeof S,"internal-error",{appName:h}),K.accessToken=S),N&&($("number"==typeof N,"internal-error",{appName:h}),K.expirationTime=N),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Qe,this.toJSON())}_performRefresh(){return ve("not implemented")}}function ht(y,h){$("string"==typeof y||void 0===y,"internal-error",{appName:h})}class It{constructor(h){var{uid:m,auth:E,stsTokenManager:S}=h,N=(0,re._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Js(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new _r(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var m=this;return(0,g.Z)(function*(){const E=yield yr(m,m.stsTokenManager.getToken(m.auth,h));return $(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(h){return function Di(y){return No.apply(this,arguments)}(this,h)}reload(){return function q(y){return W.apply(this,arguments)}(this)}_assign(h){this!==h&&($(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(m=>Object.assign({},m)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new It(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,m=!1){var E=this;return(0,g.Z)(function*(){let S=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),S=!0),m&&(yield vr(E)),yield E.auth._persistUserIfCurrent(E),S&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,g.Z)(function*(){const m=yield h.getIdToken();return yield yr(h,function gt(y,h){return Qr.apply(this,arguments)}(h.auth,{idToken:m})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,m){var E,S,N,K,fe,ke,Ke,mt;const ct=null!==(E=m.displayName)&&void 0!==E?E:void 0,Dn=null!==(S=m.email)&&void 0!==S?S:void 0,fi=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,ic=null!==(K=m.photoURL)&&void 0!==K?K:void 0,Gy=null!==(fe=m.tenantId)&&void 0!==fe?fe:void 0,la=null!==(ke=m._redirectEventId)&&void 0!==ke?ke:void 0,Dd=null!==(Ke=m.createdAt)&&void 0!==Ke?Ke:void 0,Td=null!==(mt=m.lastLoginAt)&&void 0!==mt?mt:void 0,{uid:rf,emailVerified:Sd,isAnonymous:pi,providerData:sf,stsTokenManager:af}=m;$(rf&&af,h,"internal-error");const uf=Qe.fromJSON(this.name,af);$("string"==typeof rf,h,"internal-error"),ht(ct,h.name),ht(Dn,h.name),$("boolean"==typeof Sd,h,"internal-error"),$("boolean"==typeof pi,h,"internal-error"),ht(fi,h.name),ht(ic,h.name),ht(Gy,h.name),ht(la,h.name),ht(Dd,h.name),ht(Td,h.name);const sc=new It({uid:rf,auth:h,email:Dn,emailVerified:Sd,displayName:ct,isAnonymous:pi,photoURL:ic,phoneNumber:fi,tenantId:Gy,stsTokenManager:uf,createdAt:Dd,lastLoginAt:Td});return sf&&Array.isArray(sf)&&(sc.providerData=sf.map(Yu=>Object.assign({},Yu))),la&&(sc._redirectEventId=la),sc}static _fromIdTokenResponse(h,m,E=!1){return(0,g.Z)(function*(){const S=new Qe;S.updateFromServerResponse(m);const N=new It({uid:m.localId,auth:h,stsTokenManager:S,isAnonymous:E});return yield vr(N),N})()}}const Et=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(m,E){var S=this;return(0,g.Z)(function*(){S.storage[m]=E})()}_get(m){var E=this;return(0,g.Z)(function*(){const S=E.storage[m];return void 0===S?null:S})()}_remove(m){var E=this;return(0,g.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return y.type="NONE",y})();function Vn(y,h,m){return`firebase:${y}:${h}:${m}`}class Tr{constructor(h,m,E){this.persistence=h,this.auth=m,this.userKey=E;const{config:S,name:N}=this.auth;this.fullUserKey=Vn(this.userKey,S.apiKey,N),this.fullPersistenceKey=Vn("persistence",S.apiKey,N),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const m=yield h.persistence._get(h.fullUserKey);return m?It._fromJSON(h.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var m=this;return(0,g.Z)(function*(){if(m.persistence===h)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=h,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,m,E="authUser"){return(0,g.Z)(function*(){if(!m.length)return new Tr(ee(Et),h,E);const S=(yield Promise.all(m.map(function(){var Ke=(0,g.Z)(function*(mt){if(yield mt._isAvailable())return mt});return function(mt){return Ke.apply(this,arguments)}}()))).filter(Ke=>Ke);let N=S[0]||ee(Et);const K=Vn(E,h.config.apiKey,h.name);let fe=null;for(const Ke of m)try{const mt=yield Ke._get(K);if(mt){const ct=It._fromJSON(h,mt);Ke!==N&&(fe=ct),N=Ke;break}}catch(mt){}const ke=S.filter(Ke=>Ke._shouldAllowMigration);return N._shouldAllowMigration&&ke.length?(N=ke[0],fe&&(yield N._set(K,fe.toJSON())),yield Promise.all(m.map(function(){var Ke=(0,g.Z)(function*(mt){if(mt!==N)try{yield mt._remove(K)}catch(ct){}});return function(mt){return Ke.apply(this,arguments)}}())),new Tr(N,h,E)):new Tr(N,h,E)})()}}function yu(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Un(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Sa(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(os(h))return"Blackberry";if(Bn(h))return"Webos";if(_u(h))return"Safari";if((h.includes("chrome/")||Aa(h))&&!h.includes("edge/"))return"Chrome";if(Sr(h))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Sa(y=(0,k.z$)()){return/firefox\//i.test(y)}function _u(y=(0,k.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Aa(y=(0,k.z$)()){return/crios\//i.test(y)}function Un(y=(0,k.z$)()){return/iemobile/i.test(y)}function Sr(y=(0,k.z$)()){return/android/i.test(y)}function os(y=(0,k.z$)()){return/blackberry/i.test(y)}function Bn(y=(0,k.z$)()){return/webos/i.test(y)}function Lr(y=(0,k.z$)()){return/iphone|ipad|ipod/i.test(y)}function Ss(y=(0,k.z$)()){return Lr(y)||Sr(y)||Bn(y)||os(y)||/windows phone/i.test(y)||Un(y)}function Po(y,h=[]){let m;switch(y){case"Browser":m=yu((0,k.z$)());break;case"Worker":m=`${yu((0,k.z$)())}-${y}`;break;default:m=y}const E=h.length?h.join(","):"FirebaseCore-web";return`${m}/JsCore/${ae.SDK_VERSION}/${E}`}class Vr{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,m){const E=N=>new Promise((K,fe)=>{try{K(h(N))}catch(ke){fe(ke)}});E.onAbort=m,this.queue.push(E);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var m=this;return(0,g.Z)(function*(){if(m.auth.currentUser===h)return;const E=[];try{for(const S of m.queue)yield S(h),S.onAbort&&E.push(S.onAbort)}catch(S){E.reverse();for(const N of E)try{N()}catch(K){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:S.message})}})()}}class qe{constructor(h,m,E){this.app=h,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tn(this),this.idTokenSubscription=new tn(this),this.beforeStateQueue=new Vr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(h,m){var E=this;return m&&(this._popupRedirectResolver=ee(m)),this._initializationPromise=this.queue((0,g.Z)(function*(){var S,N;if(!E._deleted&&(E.persistenceManager=yield Tr.create(E,h),!E._deleted)){if(null===(S=E._popupRedirectResolver)||void 0===S?void 0:S._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(K){}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(N=E.currentUser)||void 0===N?void 0:N.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const m=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||m){if(h.currentUser&&m&&h.currentUser.uid===m.uid)return h._currentUser._assign(m),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(m,!0)}})()}initializeCurrentUser(h){var m=this;return(0,g.Z)(function*(){var E;const S=yield m.assertedPersistence.getCurrentUser();let N=S,K=!1;if(h&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const fe=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,ke=null==N?void 0:N._redirectEventId,Ke=yield m.tryRedirectSignIn(h);(!fe||fe===ke)&&(null==Ke?void 0:Ke.user)&&(N=Ke.user,K=!0)}if(!N)return m.directlySetCurrentUser(null);if(!N._redirectEventId){if(K)try{yield m.beforeStateQueue.runMiddleware(N)}catch(fe){N=S,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(fe))}return N?m.reloadAndSetCurrentUserOrClear(N):m.directlySetCurrentUser(null)}return $(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===N._redirectEventId?m.directlySetCurrentUser(N):m.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(h){var m=this;return(0,g.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,h,!0)}catch(S){yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var m=this;return(0,g.Z)(function*(){try{yield vr(h)}catch(E){if("auth/network-request-failed"!==E.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Ye(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var m=this;return(0,g.Z)(function*(){const E=h?(0,k.m9)(h):null;return E&&$(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(h,m=!1){var E=this;return(0,g.Z)(function*(){if(!E._deleted)return h&&$(E.tenantId===h.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(h)),E.queue((0,g.Z)(function*(){yield E.directlySetCurrentUser(h),E.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var m=this;return this.queue((0,g.Z)(function*(){yield m.assertedPersistence.setPersistence(ee(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new k.LL("auth","Firebase",h())}onAuthStateChanged(h,m,E){return this.registerStateListener(this.authStateSubscription,h,m,E)}beforeAuthStateChanged(h,m){return this.beforeStateQueue.pushCallback(h,m)}onIdTokenChanged(h,m,E){return this.registerStateListener(this.idTokenSubscription,h,m,E)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,m){var E=this;return(0,g.Z)(function*(){const S=yield E.getOrInitRedirectPersistenceManager(m);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var m=this;return(0,g.Z)(function*(){if(!m.redirectPersistenceManager){const E=h&&ee(h)||m._popupRedirectResolver;$(E,m,"argument-error"),m.redirectPersistenceManager=yield Tr.create(m,[ee(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(h){var m=this;return(0,g.Z)(function*(){var E,S;return m._isInitialized&&(yield m.queue((0,g.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===h?m._currentUser:(null===(S=m.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?m.redirectUser:null})()}_persistUserIfCurrent(h){var m=this;return(0,g.Z)(function*(){if(h===m.currentUser)return m.queue((0,g.Z)(function*(){return m.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,m,E,S){if(this._deleted)return()=>{};const N="function"==typeof m?m:m.next.bind(m),K=this._isInitialized?Promise.resolve():this._initializationPromise;return $(K,this,"internal-error"),K.then(()=>N(this.currentUser)),"function"==typeof m?h.addObserver(m,E,S):h.addObserver(m)}directlySetCurrentUser(h){var m=this;return(0,g.Z)(function*(){m.currentUser&&m.currentUser!==h&&(m._currentUser._stopProactiveRefresh(),h&&m.isProactiveRefreshEnabled&&h._startProactiveRefresh()),m.currentUser=h,h?yield m.assertedPersistence.setCurrentUser(h):yield m.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Po(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var m;const E={"X-Client-Version":h.clientVersion};h.app.options.appId&&(E["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(m=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return S&&(E["X-Firebase-Client"]=S),E})()}}function ut(y){return(0,k.m9)(y)}class tn{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,k.ne)(m=>this.observer=m)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Vi(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Ui(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class Ti{constructor(h,m){this.providerId=h,this.signInMethod=m}toJSON(){return ve("not implemented")}_getIdTokenResponse(h){return ve("not implemented")}_linkToIdToken(h,m){return ve("not implemented")}_getReauthenticationResolver(h){return ve("not implemented")}}function Mn(y,h){return xt.apply(this,arguments)}function xt(){return(xt=(0,g.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:resetPassword",qt(y,h))})).apply(this,arguments)}function xa(y,h){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,g.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function vu(y,h){return As.apply(this,arguments)}function As(){return(As=(0,g.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:update",qt(y,h))})).apply(this,arguments)}function eo(){return(eo=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithPassword",qt(y,h))})).apply(this,arguments)}function Ms(y,h){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,g.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:sendOobCode",qt(y,h))})).apply(this,arguments)}function on(y,h){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,g.Z)(function*(y,h){return Ms(y,h)})).apply(this,arguments)}function Ra(y,h){return Br.apply(this,arguments)}function Br(){return(Br=(0,g.Z)(function*(y,h){return Ms(y,h)})).apply(this,arguments)}function ji(y,h){return wu.apply(this,arguments)}function wu(){return(wu=(0,g.Z)(function*(y,h){return Ms(y,h)})).apply(this,arguments)}function $c(y,h){return $i.apply(this,arguments)}function $i(){return($i=(0,g.Z)(function*(y,h){return Ms(y,h)})).apply(this,arguments)}function Ml(){return(Ml=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithEmailLink",qt(y,h))})).apply(this,arguments)}function Hc(){return(Hc=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithEmailLink",qt(y,h))})).apply(this,arguments)}class Er extends Ti{constructor(h,m,E,S=null){super("password",E),this._email=h,this._password=m,this._tenantId=S}static _fromEmailAndPassword(h,m){return new Er(h,m,"password")}static _fromEmailAndCode(h,m,E=null){return new Er(h,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(h){var m=this;return(0,g.Z)(function*(){switch(m.signInMethod){case"password":return function ir(y,h){return eo.apply(this,arguments)}(h,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Hi(y,h){return Ml.apply(this,arguments)}(h,{email:m._email,oobCode:m._password});default:De(h,"internal-error")}})()}_linkToIdToken(h,m){var E=this;return(0,g.Z)(function*(){switch(E.signInMethod){case"password":return xa(h,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Pp(y,h){return Hc.apply(this,arguments)}(h,{idToken:m,email:E._email,oobCode:E._password});default:De(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function xs(y,h){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithIdp",qt(y,h))})).apply(this,arguments)}class as extends Ti{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const m=new as(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(m.idToken=h.idToken),h.accessToken&&(m.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(m.nonce=h.nonce),h.pendingToken&&(m.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(m.accessToken=h.oauthToken,m.secret=h.oauthTokenSecret):De("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:S}=m,N=(0,re._T)(m,["providerId","signInMethod"]);if(!E||!S)return null;const K=new as(E,S);return K.idToken=N.idToken||void 0,K.accessToken=N.accessToken||void 0,K.secret=N.secret,K.nonce=N.nonce,K.pendingToken=N.pendingToken||null,K}_getIdTokenResponse(h){return xs(h,this.buildRequest())}_linkToIdToken(h,m){const E=this.buildRequest();return E.idToken=m,xs(h,E)}_getReauthenticationResolver(h){const m=this.buildRequest();return m.autoCreate=!1,xs(h,m)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),h.postBody=(0,k.xO)(m)}return h}}function kp(y,h){return qc.apply(this,arguments)}function qc(){return(qc=(0,g.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:sendVerificationCode",qt(y,h))})).apply(this,arguments)}function Rs(){return(Rs=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,h))})).apply(this,arguments)}function zc(){return(zc=(0,g.Z)(function*(y,h){const m=yield Dr(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,h));if(m.temporaryProof)throw Ci(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Lp={USER_NOT_FOUND:"user-not-found"};function Wc(){return(Wc=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Lp)})).apply(this,arguments)}class Oo extends Ti{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,m){return new Oo({verificationId:h,verificationCode:m})}static _fromTokenResponse(h,m){return new Oo({phoneNumber:h,temporaryProof:m})}_getIdTokenResponse(h){return function xl(y,h){return Rs.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,m){return function Fp(y,h){return zc.apply(this,arguments)}(h,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Vp(y,h){return Wc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:m,verificationId:E,verificationCode:S}=this.params;return h&&m?{temporaryProof:h,phoneNumber:m}:{sessionInfo:E,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:m,verificationCode:E,phoneNumber:S,temporaryProof:N}=h;return E||m||S||N?new Oo({verificationId:m,verificationCode:E,phoneNumber:S,temporaryProof:N}):null}}class bu{constructor(h){var m,E,S,N,K,fe;const ke=(0,k.zd)((0,k.pd)(h)),Ke=null!==(m=ke.apiKey)&&void 0!==m?m:null,mt=null!==(E=ke.oobCode)&&void 0!==E?E:null,ct=function Ph(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=ke.mode)&&void 0!==S?S:null);$(Ke&&mt&&ct,"argument-error"),this.apiKey=Ke,this.operation=ct,this.code=mt,this.continueUrl=null!==(N=ke.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(K=ke.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(fe=ke.tenantId)&&void 0!==fe?fe:null}static parseLink(h){const m=function Na(y){const h=(0,k.zd)((0,k.pd)(y)).link,m=h?(0,k.zd)((0,k.pd)(h)).deep_link_id:null,E=(0,k.zd)((0,k.pd)(y)).deep_link_id;return(E?(0,k.zd)((0,k.pd)(E)).link:null)||E||m||h||y}(h);try{return new bu(m)}catch(E){return null}}}let Zc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,E){return Er._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const S=bu.parseLink(E);return $(S,"argument-error"),Er._fromEmailAndCode(m,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class wr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class to extends wr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Gi extends to{static credentialFromJSON(h){const m="string"==typeof h?JSON.parse(h):h;return $("providerId"in m&&"signInMethod"in m,"argument-error"),as._fromParams(m)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return $(h.idToken||h.accessToken,"argument-error"),as._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Gi.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Gi.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:S,pendingToken:N,nonce:K,providerId:fe}=h;if(!E&&!S&&!m&&!N||!fe)return null;try{return new Gi(fe)._credential({idToken:m,accessToken:E,nonce:K,pendingToken:N})}catch(ke){return null}}}let ko=(()=>{class y extends to{constructor(){super("facebook.com")}static credential(m){return as._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(E){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Yc=(()=>{class y extends to{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return as._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:S}=m;if(!E&&!S)return null;try{return y.credential(E,S)}catch(N){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Oh=(()=>{class y extends to{constructor(){super("github.com")}static credential(m){return as._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(E){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class no extends Ti{constructor(h,m){super(h,h),this.pendingToken=m}_getIdTokenResponse(h){return xs(h,this.buildRequest())}_linkToIdToken(h,m){const E=this.buildRequest();return E.idToken=m,xs(h,E)}_getReauthenticationResolver(h){const m=this.buildRequest();return m.autoCreate=!1,xs(h,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:S,pendingToken:N}=m;return E&&S&&N&&E===S?new no(E,N):null}static _create(h,m){return new no(h,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ar extends wr{constructor(h){$(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Ar.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Ar.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const m=no.fromJSON(h);return $(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:m,providerId:E}=h;if(!m||!E)return null;try{return no._create(E,m)}catch(S){return null}}}let Jc=(()=>{class y extends to{constructor(){super("twitter.com")}static credential(m,E){return as._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:S}=m;if(!E||!S)return null;try{return y.credential(E,S)}catch(N){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Mr(y,h){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signUp",qt(y,h))})).apply(this,arguments)}class ei{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,m,E,S=!1){return(0,g.Z)(function*(){const N=yield It._fromIdTokenResponse(h,E,S),K=Rl(E);return new ei({user:N,providerId:K,_tokenResponse:E,operationType:m})})()}static _forOperation(h,m,E){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const S=Rl(E);return new ei({user:h,providerId:S,_tokenResponse:E,operationType:m})})()}}function Rl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Nl(){return(Nl=(0,g.Z)(function*(y){var h;const m=ut(y);if(yield m._initializationPromise,null===(h=m.currentUser)||void 0===h?void 0:h.isAnonymous)return new ei({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Mr(m,{returnSecureToken:!0}),S=yield ei._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class Vo extends k.ZR{constructor(h,m,E,S){var N;super(m.code,m.message),this.operationType=E,this.user=S,Object.setPrototypeOf(this,Vo.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,m,E,S){return new Vo(h,m,E,S)}}function Pl(y,h,m,E){return("reauthenticate"===h?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Vo._fromErrorAndOperation(y,N,h,E):N})}function qi(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function an(){return(an=(0,g.Z)(function*(y,h){const m=(0,k.m9)(y);yield Qt(!0,m,h);const{providerUserInfo:E}=yield En(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[h]}),S=qi(E||[]);return m.providerData=m.providerData.filter(N=>S.has(N.providerId)),S.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Pa(y,h){return ro.apply(this,arguments)}function ro(){return(ro=(0,g.Z)(function*(y,h,m=!1){const E=yield yr(y,h._linkToIdToken(y.auth,yield y.getIdToken()),m);return ei._forOperation(y,"link",E)})).apply(this,arguments)}function Qt(y,h,m){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,g.Z)(function*(y,h,m){yield vr(h);const S=!1===y?"provider-already-linked":"no-such-provider";$(qi(h.providerData).has(m)===y,h.auth,S)})).apply(this,arguments)}function Iu(y,h){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,g.Z)(function*(y,h,m=!1){const{auth:E}=y,S="reauthenticate";try{const N=yield yr(y,Pl(E,S,h,y),m);$(N.idToken,E,"internal-error");const K=ot(N.idToken);$(K,E,"internal-error");const{sub:fe}=K;return $(y.uid===fe,E,"user-mismatch"),ei._forOperation(y,S,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&De(E,"user-mismatch"),N}})).apply(this,arguments)}function sr(y,h){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,g.Z)(function*(y,h,m=!1){const E="signIn",S=yield Pl(y,E,h),N=yield ei._fromIdTokenResponse(y,E,S);return m||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function yn(y,h){return zi.apply(this,arguments)}function zi(){return(zi=(0,g.Z)(function*(y,h){return sr(ut(y),h)})).apply(this,arguments)}function or(y,h){return io.apply(this,arguments)}function io(){return(io=(0,g.Z)(function*(y,h){const m=(0,k.m9)(y);return yield Qt(!1,m,h.providerId),Pa(m,h)})).apply(this,arguments)}function us(y,h){return ka.apply(this,arguments)}function ka(){return(ka=(0,g.Z)(function*(y,h){return Iu((0,k.m9)(y),h)})).apply(this,arguments)}function Si(y,h){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithCustomToken",qt(y,h))})).apply(this,arguments)}function ft(){return(ft=(0,g.Z)(function*(y,h){const m=ut(y),E=yield Si(m,{token:h,returnSecureToken:!0}),S=yield ei._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class Bo{constructor(h,m){this.factorId=h,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(h,m){return"phoneInfo"in m?Cu._fromServerResponse(h,m):De(h,"internal-error")}}class Cu extends Bo{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,m){return new Cu(m)}}function Fa(y,h,m){var E;$((null===(E=m.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),$(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=m.url,h.dynamicLinkDomain=m.dynamicLinkDomain,h.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&($(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=m.iOS.bundleId),m.android&&($(m.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=m.android.installApp,h.androidMinimumVersionCode=m.android.minimumVersion,h.androidPackageName=m.android.packageName)}function La(){return(La=(0,g.Z)(function*(y,h,m){const E=(0,k.m9)(y),S={requestType:"PASSWORD_RESET",email:h};m&&Fa(E,S,m),yield Ra(E,S)})).apply(this,arguments)}function Ll(){return(Ll=(0,g.Z)(function*(y,h,m){yield Mn((0,k.m9)(y),{oobCode:h,newPassword:m})})).apply(this,arguments)}function Lt(){return(Lt=(0,g.Z)(function*(y,h){yield vu((0,k.m9)(y),{oobCode:h})})).apply(this,arguments)}function Vl(y,h){return pn.apply(this,arguments)}function pn(){return(pn=(0,g.Z)(function*(y,h){const m=(0,k.m9)(y),E=yield Mn(m,{oobCode:h}),S=E.requestType;switch($(S,m,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$(E.mfaInfo,m,"internal-error");default:$(E.email,m,"internal-error")}let N=null;return E.mfaInfo&&(N=Bo._fromServerResponse(ut(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:N},operation:S}})).apply(this,arguments)}function so(){return(so=(0,g.Z)(function*(y,h){const{data:m}=yield Vl((0,k.m9)(y),h);return m.email})).apply(this,arguments)}function Va(){return(Va=(0,g.Z)(function*(y,h,m){const E=ut(y),S=yield Mr(E,{returnSecureToken:!0,email:h,password:m}),N=yield ei._fromIdTokenResponse(E,"signIn",S);return yield E._updateCurrentUser(N.user),N})).apply(this,arguments)}function Du(){return(Du=(0,g.Z)(function*(y,h,m){const E=(0,k.m9)(y),S={requestType:"EMAIL_SIGNIN",email:h};$(m.handleCodeInApp,E,"argument-error"),m&&Fa(E,S,m),yield ji(E,S)})).apply(this,arguments)}function xn(){return(xn=(0,g.Z)(function*(y,h,m){const E=(0,k.m9)(y),S=Zc.credentialWithLink(h,m||Pe());return $(S._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),yn(E,S)})).apply(this,arguments)}function ls(y,h){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,g.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:createAuthUri",qt(y,h))})).apply(this,arguments)}function Ai(){return(Ai=(0,g.Z)(function*(y,h){const E={identifier:h,continueUri:lt()?Pe():"http://localhost"},{signinMethods:S}=yield ls((0,k.m9)(y),E);return S||[]})).apply(this,arguments)}function Su(){return(Su=(0,g.Z)(function*(y,h){const m=(0,k.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Fa(m.auth,S,h);const{email:N}=yield on(m.auth,S);N!==y.email&&(yield y.reload())})).apply(this,arguments)}function Au(){return(Au=(0,g.Z)(function*(y,h,m){const E=(0,k.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};m&&Fa(E.auth,N,m);const{email:K}=yield $c(E.auth,N);K!==y.email&&(yield y.reload())})).apply(this,arguments)}function ja(y,h){return $o.apply(this,arguments)}function $o(){return($o=(0,g.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function $a(){return($a=(0,g.Z)(function*(y,{displayName:h,photoURL:m}){if(void 0===h&&void 0===m)return;const E=(0,k.m9)(y),N={idToken:yield E.getIdToken(),displayName:h,photoUrl:m,returnSecureToken:!0},K=yield yr(E,ja(E.auth,N));E.displayName=K.displayName||null,E.photoURL=K.photoUrl||null;const fe=E.providerData.find(({providerId:ke})=>"password"===ke);fe&&(fe.displayName=E.displayName,fe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(K)})).apply(this,arguments)}function Ho(y,h,m){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,g.Z)(function*(y,h,m){const{auth:E}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(N.email=h),m&&(N.password=m);const K=yield yr(y,xa(E,N));yield y._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class Go{constructor(h,m,E={}){this.isNewUser=h,this.providerId=m,this.profile=E}}class td extends Go{constructor(h,m,E,S){super(h,m,E),this.username=S}}class qo extends Go{constructor(h,m){super(h,"facebook.com",m)}}class Ki extends td{constructor(h,m){super(h,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Fh extends Go{constructor(h,m){super(h,"google.com",m)}}class Kn extends td{constructor(h,m,E){super(h,"twitter.com",m,E)}}function Zi(y){const{user:h,_tokenResponse:m}=y;return h.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function ed(y){var h,m;if(!y)return null;const{providerId:E}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&(null==y?void 0:y.idToken)){const K=null===(m=null===(h=ot(y.idToken))||void 0===h?void 0:h.firebase)||void 0===m?void 0:m.sign_in_provider;if(K)return new Go(N,"anonymous"!==K&&"custom"!==K?K:null)}if(!E)return null;switch(E){case"facebook.com":return new qo(N,S);case"github.com":return new Ki(N,S);case"google.com":return new Fh(N,S);case"twitter.com":return new Kn(N,S,y.screenName||null);case"custom":case"anonymous":return new Go(N,null);default:return new Go(N,E,S)}}(m)}class cs{constructor(h,m){this.type=h,this.credential=m}static _fromIdtoken(h){return new cs("enroll",h)}static _fromMfaPendingCredential(h){return new cs("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var m,E;if(null==h?void 0:h.multiFactorSession){if(null===(m=h.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return cs._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(E=h.multiFactorSession)||void 0===E?void 0:E.idToken)return cs._fromIdtoken(h.multiFactorSession.idToken)}return null}}class zo{constructor(h,m,E){this.session=h,this.hints=m,this.signInResolver=E}static _fromError(h,m){const E=ut(h),S=m.customData._serverResponse,N=(S.mfaInfo||[]).map(fe=>Bo._fromServerResponse(E,fe));$(S.mfaPendingCredential,E,"internal-error");const K=cs._fromMfaPendingCredential(S.mfaPendingCredential);return new zo(K,N,function(){var fe=(0,g.Z)(function*(ke){const Ke=yield ke._process(E,K);delete S.mfaInfo,delete S.mfaPendingCredential;const mt=Object.assign(Object.assign({},S),{idToken:Ke.idToken,refreshToken:Ke.refreshToken});switch(m.operationType){case"signIn":const ct=yield ei._fromIdTokenResponse(E,m.operationType,mt);return yield E._updateCurrentUser(ct.user),ct;case"reauthenticate":return $(m.user,E,"internal-error"),ei._forOperation(m.user,m.operationType,mt);default:De(E,"internal-error")}});return function(ke){return fe.apply(this,arguments)}}())}resolveSignIn(h){var m=this;return(0,g.Z)(function*(){return m.signInResolver(h)})()}}function Vh(y,h){return Vt(y,"POST","/v2/accounts/mfaEnrollment:start",qt(y,h))}class id{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>Bo._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new id(h)}getSession(){var h=this;return(0,g.Z)(function*(){return cs._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,m){var E=this;return(0,g.Z)(function*(){const S=h,N=yield E.getSession(),K=yield yr(E.user,S._process(E.user.auth,N,m));return yield E.user._updateTokensIfNecessary(K),E.user.reload()})()}unenroll(h){var m=this;return(0,g.Z)(function*(){const E="string"==typeof h?h:h.uid,S=yield m.user.getIdToken(),N=yield yr(m.user,function Mu(y,h){return Vt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",qt(y,h))}(m.user.auth,{idToken:S,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:K})=>K!==E),yield m.user._updateTokensIfNecessary(N);try{yield m.user.reload()}catch(K){if("auth/user-token-expired"!==K.code)throw K}})()}}const xu=new WeakMap,ao="__sak";class sd{constructor(h,m){this.storageRetriever=h,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(ao,"1"),this.storage.removeItem(ao),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,m){return this.storage.setItem(h,JSON.stringify(m)),Promise.resolve()}_get(h){const m=this.storage.getItem(h);return Promise.resolve(m?JSON.parse(m):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const ni=(()=>{class y extends sd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function $p(){const y=(0,k.z$)();return _u(y)||Lr(y)}()&&function rr(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Ss(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const S=this.storage.getItem(E),N=this.localCache[E];S!==N&&m(E,N,S)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((fe,ke,Ke)=>{this.notifyListeners(fe,Ke)});const S=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const fe=this.storage.getItem(S);if(m.newValue!==fe)null!==m.newValue?this.storage.setItem(S,m.newValue):this.storage.removeItem(S);else if(this.localCache[S]===m.newValue&&!E)return}const N=()=>{const fe=this.storage.getItem(S);!E&&this.localCache[S]===fe||this.notifyListeners(S,fe)},K=this.storage.getItem(S);!function Ma(){return(0,k.w1)()&&10===document.documentMode}()||K===m.newValue||m.newValue===m.oldValue?N():setTimeout(N,10)}notifyListeners(m,E){this.localCache[m]=E;const S=this.listeners[m];if(S)for(const N of Array.from(S))N(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var S=()=>super._set,N=this;return(0,g.Z)(function*(){yield S().call(N,m,E),N.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,S=this;return(0,g.Z)(function*(){const N=yield E().call(S,m);return S.localCache[m]=JSON.stringify(N),N})()}_remove(m){var E=()=>super._remove,S=this;return(0,g.Z)(function*(){yield E().call(S,m),delete S.localCache[m]})()}}return y.type="LOCAL",y})(),Rn=(()=>{class y extends sd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return y.type="SESSION",y})();let od=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(N=>N.isListeningto(m));if(E)return E;const S=new y(m);return this.receivers.push(S),S}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,g.Z)(function*(){const S=m,{eventId:N,eventType:K,data:fe}=S.data,ke=E.handlersMap[K];if(!(null==ke?void 0:ke.size))return;S.ports[0].postMessage({status:"ack",eventId:N,eventType:K});const Ke=Array.from(ke).map(function(){var ct=(0,g.Z)(function*(Dn){return Dn(S.origin,fe)});return function(Dn){return ct.apply(this,arguments)}}()),mt=yield function Gl(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return h.apply(this,arguments)}}()))}(Ke);S.ports[0].postMessage({status:"done",eventId:N,eventType:K,response:mt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Yi(y="",h=10){let m="";for(let E=0;E<h;E++)m+=Math.floor(10*Math.random());return y+m}class ql{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,m,E=50){var S=this;return(0,g.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let K,fe;return new Promise((ke,Ke)=>{const mt=Yi("",20);N.port1.start();const ct=setTimeout(()=>{Ke(new Error("unsupported_event"))},E);fe={messageChannel:N,onMessage(Dn){const fi=Dn;if(fi.data.eventId===mt)switch(fi.data.status){case"ack":clearTimeout(ct),K=setTimeout(()=>{Ke(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),ke(fi.data.response);break;default:clearTimeout(ct),clearTimeout(K),Ke(new Error("invalid_response"))}}},S.handlers.add(fe),N.port1.addEventListener("message",fe.onMessage),S.target.postMessage({eventType:h,eventId:mt,data:m},[N.port2])}).finally(()=>{fe&&S.removeMessageHandler(fe)})})()}}function cn(){return window}function Mi(){return void 0!==cn().WorkerGlobalScope&&"function"==typeof cn().importScripts}function Nu(){return(Nu=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const zl="firebaseLocalStorageDb",Wo="firebaseLocalStorage",Ko="fbase_key";class Os{constructor(h){this.request=h}toPromise(){return new Promise((h,m)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function ar(y,h){return y.transaction([Wo],h?"readwrite":"readonly").objectStore(Wo)}function ks(){const y=indexedDB.open(zl,1);return new Promise((h,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(Wo,{keyPath:Ko})}catch(S){m(S)}}),y.addEventListener("success",(0,g.Z)(function*(){const E=y.result;E.objectStoreNames.contains(Wo)?h(E):(E.close(),yield function Pu(){const y=indexedDB.deleteDatabase(zl);return new Os(y).toPromise()}(),h(yield ks()))}))})}function Zo(y,h,m){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,g.Z)(function*(y,h,m){const E=ar(y,!0).put({[Ko]:h,value:m});return new Os(E).toPromise()})).apply(this,arguments)}function uo(){return(uo=(0,g.Z)(function*(y,h){const m=ar(y,!1).get(h),E=yield new Os(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Qo(y,h){const m=ar(y,!0).delete(h);return new Os(m).toPromise()}const Ls=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,g.Z)(function*(){return m.db||(m.db=yield ks()),m.db})()}_withRetries(m){var E=this;return(0,g.Z)(function*(){let S=0;for(;;)try{const N=yield E._openDb();return yield m(N)}catch(N){if(S++>3)throw N;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,g.Z)(function*(){return Mi()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,g.Z)(function*(){m.receiver=od._getInstance(function ud(){return Mi()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,g.Z)(function*(S,N){return{keyProcessed:(yield m._poll()).includes(N.key)}});return function(S,N){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,g.Z)(function*(S,N){return["keyChanged"]});return function(S,N){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,g.Z)(function*(){var E,S;if(m.activeServiceWorker=yield function Ot(){return Nu.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new ql(m.activeServiceWorker);const N=yield m.sender._send("ping",{},800);!N||(null===(E=N[0])||void 0===E?void 0:E.fulfilled)&&(null===(S=N[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,g.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function ad(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch(S){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const m=yield ks();return yield Zo(m,ao,"1"),yield Qo(m,ao),!0}catch(m){}return!1})()}_withPendingWrite(m){var E=this;return(0,g.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var S=this;return(0,g.Z)(function*(){return S._withPendingWrite((0,g.Z)(function*(){return yield S._withRetries(N=>Zo(N,m,E)),S.localCache[m]=E,S.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,g.Z)(function*(){const S=yield E._withRetries(N=>function Yo(y,h){return uo.apply(this,arguments)}(N,m));return E.localCache[m]=S,S})()}_remove(m){var E=this;return(0,g.Z)(function*(){return E._withPendingWrite((0,g.Z)(function*(){return yield E._withRetries(S=>Qo(S,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,g.Z)(function*(){const E=yield m._withRetries(K=>{const fe=ar(K,!1).getAll();return new Os(fe).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const S=[],N=new Set;for(const{fbase_key:K,value:fe}of E)N.add(K),JSON.stringify(m.localCache[K])!==JSON.stringify(fe)&&(m.notifyListeners(K,fe),S.push(K));for(const K of Object.keys(m.localCache))m.localCache[K]&&!N.has(K)&&(m.notifyListeners(K,null),S.push(K));return S})()}notifyListeners(m,E){this.localCache[m]=E;const S=this.listeners[m];if(S)for(const N of Array.from(S))N(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Yn(y,h){return Vt(y,"POST","/v2/accounts/mfaSignIn:start",qt(y,h))}function In(){return(In=(0,g.Z)(function*(y){return(yield Vt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Qi(y){return new Promise((h,m)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=h,E.onerror=S=>{const N=Ee("internal-error");N.customData=S,m(N)},E.type="text/javascript",E.charset="UTF-8",function co(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(E)})}function ds(y){return`__${y}${Math.floor(1e6*Math.random())}`}const si=1e12;class Cn{constructor(h){this.auth=h,this.counter=si,this._widgets=new Map}render(h,m){const E=this.counter;return this._widgets.set(E,new ku(h,this.auth.name,m||{})),this.counter++,E}reset(h){var m;const E=h||si;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(h){var m;return(null===(m=this._widgets.get(h||si))||void 0===m?void 0:m.getResponse())||""}execute(h){var m=this;return(0,g.Z)(function*(){var E;return null===(E=m._widgets.get(h||si))||void 0===E||E.execute(),""})()}}class ku{constructor(h,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;$(S,"argument-error",{appName:m}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ka(y){const h=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)h.push(m.charAt(Math.floor(Math.random()*m.length)));return h.join("")}(50);const{callback:h,"expired-callback":m}=this.params;if(h)try{h(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const gn=ds("rcb"),Hp=new Xt(3e4,6e4);class by{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!cn().grecaptcha}load(h,m=""){return $(function ea(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),h,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(cn().grecaptcha):new Promise((E,S)=>{const N=cn().setTimeout(()=>{S(Ee(h,"network-request-failed"))},Hp.get());cn()[gn]=()=>{cn().clearTimeout(N),delete cn()[gn];const fe=cn().grecaptcha;if(!fe)return void S(Ee(h,"internal-error"));const ke=fe.render;fe.render=(Ke,mt)=>{const ct=ke(Ke,mt);return this.counter++,ct},this.hostLanguage=m,E(fe)},Qi(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:gn,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(N),S(Ee(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!cn().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class jr{load(h){return(0,g.Z)(function*(){return new Cn(h)})()}clearedOneInstance(){}}const ld="recaptcha",Vs={theme:"light",type:"image"};class ho{constructor(h,m=Object.assign({},Vs),E){this.parameters=m,this.type=ld,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ut(E),this.isInvisible="invisible"===this.parameters.size,$("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;$(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jr:new by,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const m=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(m)||new Promise(N=>{const K=fe=>{!fe||(h.tokenChangeListeners.delete(K),N(fe))};h.tokenChangeListeners.add(K),h.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){$(!this.parameters.sitekey,this.auth,"argument-error"),$(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof h)h(m);else if("string"==typeof h){const E=cn()[h];"function"==typeof E&&E(m)}}}assertNotDestroyed(){$(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let m=h.container;if(!h.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}h.widgetId=h.getAssertedRecaptcha().render(m,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){$(lt()&&!Mi(),h.auth,"internal-error"),yield function Fu(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const m=yield function Ou(y){return In.apply(this,arguments)}(h.auth);$(m,h.auth,"internal-error"),h.parameters.sitekey=m})()}getAssertedRecaptcha(){return $(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class _n{constructor(h,m){this.verificationId=h,this.onConfirmation=m}confirm(h){const m=Oo._fromVerification(this.verificationId,h);return this.onConfirmation(m)}}function fo(){return(fo=(0,g.Z)(function*(y,h,m){const E=ut(y),S=yield ta(E,h,(0,k.m9)(m));return new _n(S,N=>yn(E,N))})).apply(this,arguments)}function Kl(){return(Kl=(0,g.Z)(function*(y,h,m){const E=(0,k.m9)(y);yield Qt(!1,E,"phone");const S=yield ta(E.auth,h,(0,k.m9)(m));return new _n(S,N=>or(E,N))})).apply(this,arguments)}function $r(){return($r=(0,g.Z)(function*(y,h,m){const E=(0,k.m9)(y),S=yield ta(E.auth,h,(0,k.m9)(m));return new _n(S,N=>us(E,N))})).apply(this,arguments)}function ta(y,h,m){return po.apply(this,arguments)}function po(){return(po=(0,g.Z)(function*(y,h,m){var E;const S=yield m.verify();try{let N;if($("string"==typeof S,y,"argument-error"),$(m.type===ld,y,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const K=N.session;if("phoneNumber"in N)return $("enroll"===K.type,y,"internal-error"),(yield Vh(y,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{$("signin"===K.type,y,"internal-error");const fe=(null===(E=N.multiFactorHint)||void 0===E?void 0:E.uid)||N.multiFactorUid;return $(fe,y,"missing-multi-factor-info"),(yield Yn(y,{mfaPendingCredential:K.credential,mfaEnrollmentId:fe,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield kp(y,{phoneNumber:N.phoneNumber,recaptchaToken:S});return K}}finally{m._reset()}})).apply(this,arguments)}function na(){return(na=(0,g.Z)(function*(y,h){yield Pa((0,k.m9)(y),h)})).apply(this,arguments)}let mo=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=ut(m)}verifyPhoneNumber(m,E){return ta(this.auth,m,(0,k.m9)(E))}static credential(m,E){return Oo._fromVerification(m,E)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:S}=m;return E&&S?Oo._fromTokenResponse(E,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function hs(y,h){return h?ee(h):($(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Za extends Ti{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return xs(h,this._buildIdpRequest())}_linkToIdToken(h,m){return xs(h,this._buildIdpRequest(m))}_getReauthenticationResolver(h){return xs(h,this._buildIdpRequest())}_buildIdpRequest(h){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(m.idToken=h),m}}function Ft(y){return sr(y.auth,new Za(y),y.bypassAuthState)}function Lu(y){const{auth:h,user:m}=y;return $(m,h,"internal-error"),Iu(m,new Za(y),y.bypassAuthState)}function Qn(y){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,g.Z)(function*(y){const{auth:h,user:m}=y;return $(m,h,"internal-error"),Pa(m,new Za(y),y.bypassAuthState)})).apply(this,arguments)}class Us{constructor(h,m,E,S,N=!1){this.auth=h,this.resolver=E,this.user=S,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var h=this;return new Promise(function(){var m=(0,g.Z)(function*(E,S){h.pendingPromise={resolve:E,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(E,S){return m.apply(this,arguments)}}())}onAuthEvent(h){var m=this;return(0,g.Z)(function*(){const{urlResponse:E,sessionId:S,postBody:N,tenantId:K,error:fe,type:ke}=h;if(fe)return void m.reject(fe);const Ke={auth:m.auth,requestUri:E,sessionId:S,tenantId:K||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(ke)(Ke))}catch(mt){m.reject(mt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Ft;case"linkViaPopup":case"linkViaRedirect":return Qn;case"reauthViaPopup":case"reauthViaRedirect":return Lu;default:De(this.auth,"internal-error")}}resolve(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qp=new Xt(2e3,1e4);function Bs(){return(Bs=(0,g.Z)(function*(y,h,m){const E=ut(y);je(y,h,wr);const S=hs(E,m);return new Zl(E,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function Vu(){return(Vu=(0,g.Z)(function*(y,h,m){const E=(0,k.m9)(y);je(E.auth,h,wr);const S=hs(E.auth,m);return new Zl(E.auth,"reauthViaPopup",h,S,E).executeNotNull()})).apply(this,arguments)}function Xi(){return(Xi=(0,g.Z)(function*(y,h,m){const E=(0,k.m9)(y);je(E.auth,h,wr);const S=hs(E.auth,m);return new Zl(E.auth,"linkViaPopup",h,S,E).executeNotNull()})).apply(this,arguments)}let Zl=(()=>{class y extends Us{constructor(m,E,S,N,K){super(m,E,N,K),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,g.Z)(function*(){const E=yield m.execute();return $(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,g.Z)(function*(){Z(1===m.filter.length,"Popup operations only handle one event");const E=Yi();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(S=>{m.reject(S)}),m.resolver._isIframeWebStorageSupported(m.auth,S=>{S||m.reject(Ee(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,S;this.pollId=(null===(S=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===S?void 0:S.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,qp.get())};m()}}return y.currentPopupAction=null,y})();const Jn=new Map;class Cy extends Us{constructor(h,m,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,m=this;return(0,g.Z)(function*(){let E=Jn.get(m.auth._key());if(!E){try{const N=(yield function ra(y,h){return ia.apply(this,arguments)}(m.resolver,m.auth))?yield h().call(m):null;E=()=>Promise.resolve(N)}catch(S){E=()=>Promise.reject(S)}Jn.set(m.auth._key(),E)}return m.bypassAuthState||Jn.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var m=()=>super.onAuthEvent,E=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return m().call(E,h);if("unknown"!==h.type){if(h.eventId){const S=yield E.auth._redirectUserForId(h.eventId);if(S)return E.user=S,m().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function ia(){return(ia=(0,g.Z)(function*(y,h){const m=L(h),E=R(y);if(!(yield E._isAvailable()))return!1;const S="true"===(yield E._get(m));return yield E._remove(m),S})).apply(this,arguments)}function yo(y,h){return hd.apply(this,arguments)}function hd(){return(hd=(0,g.Z)(function*(y,h){return R(y)._set(L(h),"true")})).apply(this,arguments)}function T(y,h){Jn.set(y._key(),h)}function R(y){return ee(y._redirectPersistence)}function L(y){return Vn("pendingRedirect",y.config.apiKey,y.name)}function ge(){return(ge=(0,g.Z)(function*(y,h,m){const E=ut(y);je(y,h,wr);const S=hs(E,m);return yield yo(S,E),S._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function dt(){return(dt=(0,g.Z)(function*(y,h,m){const E=(0,k.m9)(y);je(E.auth,h,wr);const S=hs(E.auth,m);yield yo(S,E.auth);const N=yield ui(E);return S._openRedirect(E.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function br(){return(br=(0,g.Z)(function*(y,h,m){const E=(0,k.m9)(y);je(E.auth,h,wr);const S=hs(E.auth,m);yield Qt(!1,E,h.providerId),yield yo(S,E.auth);const N=yield ui(E);return S._openRedirect(E.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function fs(){return(fs=(0,g.Z)(function*(y,h){return yield ut(y)._initializationPromise,Hr(y,h,!1)})).apply(this,arguments)}function Hr(y,h){return ai.apply(this,arguments)}function ai(){return(ai=(0,g.Z)(function*(y,h,m=!1){const E=ut(y),S=hs(E,h),K=yield new Cy(E,S,m).execute();return K&&!m&&(delete K.user._redirectEventId,yield E._persistUserIfCurrent(K.user),yield E._setRedirectUser(null,h)),K})).apply(this,arguments)}function ui(y){return li.apply(this,arguments)}function li(){return(li=(0,g.Z)(function*(y){const h=Yi(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Bu{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(m=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function zp(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ju(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=h,m=!0)),m}sendToConsumer(h,m){var E;if(h.error&&!ju(h)){const S=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Ee(this.auth,S))}else m.onAuthEvent(h)}isEventForConsumer(h,m){const E=null===m.eventId||!!h.eventId&&h.eventId===m.eventId;return m.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yl(h))}saveEventToCache(h){this.cachedEventUids.add(Yl(h)),this.lastProcessedEventTime=Date.now()}}function Yl(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function ju({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Wp(y){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,g.Z)(function*(y,h={}){return Vt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const _o=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ql=/^https?/;function Kp(){return(Kp=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Wp(y);for(const m of h)try{if(Zp(m))return}catch(E){}De(y,"unauthorized-domain")})).apply(this,arguments)}function Zp(y){const h=Pe(),{protocol:m,hostname:E}=new URL(h);if(y.startsWith("chrome-extension://")){const K=new URL(y);return""===K.hostname&&""===E?"chrome-extension:"===m&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===m&&K.hostname===E}if(!Ql.test(m))return!1;if(_o.test(y))return E===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(E)}const Ty=new Xt(3e4,6e4);function Yp(){const y=cn().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let $u=null;function vo(y){return $u=$u||function Bh(y){return new Promise((h,m)=>{var E,S,N;function K(){Yp(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Yp(),m(Ee(y,"network-request-failed"))},timeout:Ty.get()})}if(null===(S=null===(E=cn().gapi)||void 0===E?void 0:E.iframes)||void 0===S?void 0:S.Iframe)h(gapi.iframes.getContext());else{if(!(null===(N=cn().gapi)||void 0===N?void 0:N.load)){const fe=ds("iframefcb");return cn()[fe]=()=>{gapi.load?K():m(Ee(y,"network-request-failed"))},Qi(`https://apis.google.com/js/api.js?onload=${fe}`).catch(ke=>m(ke))}K()}}).catch(h=>{throw $u=null,h})}(y),$u}const Eo=new Xt(5e3,15e3),Sy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ay(y){const h=y.config;$(h.authDomain,y,"auth-domain-config-required");const m=h.emulator?Sn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:h.apiKey,appName:y.name,v:ae.SDK_VERSION},S=Hu.get(y.config.apiHost);S&&(E.eid=S);const N=y._getFrameworks();return N.length&&(E.fw=N.join(",")),`${m}?${(0,k.xO)(E).slice(1)}`}function sa(){return sa=(0,g.Z)(function*(y){const h=yield vo(y),m=cn().gapi;return $(m,y,"internal-error"),h.open({where:document.body,url:Ay(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sy,dontclear:!0},E=>new Promise(function(){var S=(0,g.Z)(function*(N,K){yield E.restyle({setHideOnLeave:!1});const fe=Ee(y,"network-request-failed"),ke=cn().setTimeout(()=>{K(fe)},Eo.get());function Ke(){cn().clearTimeout(ke),N(E)}E.ping(Ke).then(Ke,()=>{K(fe)})});return function(N,K){return S.apply(this,arguments)}}()))}),sa.apply(this,arguments)}const jh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Qp{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function js(y,h,m,E,S,N){$(y.config.authDomain,y,"auth-domain-config-required"),$(y.config.apiKey,y,"invalid-api-key");const K={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:E,v:ae.SDK_VERSION,eventId:S};if(h instanceof wr){h.setDefaultLanguage(y.languageCode),K.providerId=h.providerId||"",(0,k.xb)(h.getCustomParameters())||(K.customParameters=JSON.stringify(h.getCustomParameters()));for(const[ke,Ke]of Object.entries(N||{}))K[ke]=Ke}if(h instanceof to){const ke=h.getScopes().filter(Ke=>""!==Ke);ke.length>0&&(K.scopes=ke.join(","))}y.tenantId&&(K.tid=y.tenantId);const fe=K;for(const ke of Object.keys(fe))void 0===fe[ke]&&delete fe[ke];return`${function Xl({config:y}){return y.emulator?Sn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,k.xO)(fe).slice(1)}`}const yd="webStorageSupport";class _d extends class K0{constructor(h){this.factorId=h}_process(h,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(h,m.credential,E);case"signin":return this._finalizeSignIn(h,m.credential);default:return ve("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new _d(h)}_finalizeEnroll(h,m,E){return function oo(y,h){return Vt(y,"POST","/v2/accounts/mfaEnrollment:finalize",qt(y,h))}(h,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,m){return function lo(y,h){return Vt(y,"POST","/v2/accounts/mfaSignIn:finalize",qt(y,h))}(h,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Xp=(()=>{class y{constructor(){}static assertion(m){return _d._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var eg="@firebase/auth";class ng{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var m=this;return(0,g.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const m=this.auth.onIdTokenChanged(E=>{var S;h((null===(S=E)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,m),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const m=this.internalListeners.get(h);!m||(this.internalListeners.delete(h),m(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function $s(){return window}function Ja(){return(Ja=(0,g.Z)(function*(y,h,m){var E;const{BuildInfo:S}=$s();Z(h.sessionId,"AuthEvent did not contain a session ID");const N=yield qh(h.sessionId),K={};return Lr()?K.ibi=S.packageName:Sr()?K.apn=S.packageName:De(y,"operation-not-supported-in-this-environment"),S.displayName&&(K.appDisplayName=S.displayName),K.sessionId=N,js(y,m,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,K)})).apply(this,arguments)}function Ed(){return(Ed=(0,g.Z)(function*(y){const{BuildInfo:h}=$s(),m={};Lr()?m.iosBundleId=h.packageName:Sr()?m.androidPackageName=h.packageName:De(y,"operation-not-supported-in-this-environment"),yield Wp(y,m)})).apply(this,arguments)}function sg(){return(sg=(0,g.Z)(function*(y,h,m){const{cordova:E}=$s();let S=()=>{};try{yield new Promise((N,K)=>{let fe=null;function ke(){var ct;N();const Dn=null===(ct=E.plugins.browsertab)||void 0===ct?void 0:ct.close;"function"==typeof Dn&&Dn(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function Ke(){fe||(fe=window.setTimeout(()=>{K(Ee(y,"redirect-cancelled-by-user"))},2e3))}function mt(){"visible"===(null==document?void 0:document.visibilityState)&&Ke()}h.addPassiveListener(ke),document.addEventListener("resume",Ke,!1),Sr()&&document.addEventListener("visibilitychange",mt,!1),S=()=>{h.removePassiveListener(ke),document.removeEventListener("resume",Ke,!1),document.removeEventListener("visibilitychange",mt,!1),fe&&window.clearTimeout(fe)}})}finally{S()}})).apply(this,arguments)}function qh(y){return ec.apply(this,arguments)}function ec(){return(ec=(0,g.Z)(function*(y){const h=zh(y),m=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(m)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function zh(y){if(Z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),m=new Uint8Array(h);for(let E=0;E<y.length;E++)m[E]=y.charCodeAt(E);return m}!function Z0(y){(0,ae._registerComponent)(new ue.wA("auth",(h,{options:m})=>{const E=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),{apiKey:N,authDomain:K}=E.options;return((fe,ke)=>{$(N&&!N.includes(":"),"invalid-api-key",{appName:fe.name}),$(!(null==K?void 0:K.includes(":")),"argument-error",{appName:fe.name});const Ke={apiKey:N,authDomain:K,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Po(y)},mt=new qe(fe,ke,Ke);return function oe(y,h){const m=(null==h?void 0:h.persistence)||[],E=(Array.isArray(m)?m:[m]).map(ee);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(E,null==h?void 0:h.popupRedirectResolver)}(mt,m),mt})(E,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,m,E)=>{h.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new ue.wA("auth-internal",h=>{const m=ut(h.getProvider("auth").getImmediate());return new ng(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(eg,"0.20.2",function vd(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)(eg,"0.20.2","esm2017")}("Browser");class bd extends Bu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function zu(y){return tc.apply(this,arguments)}function tc(){return(tc=(0,g.Z)(function*(y){const h=yield eu()._get(Kh(y));return h&&(yield eu()._remove(Kh(y))),h})).apply(this,arguments)}function Wh(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*h.length);y.push(h.charAt(E))}return y.join("")}function eu(){return ee(ni)}function Kh(y){return Vn("authEvent",y.config.apiKey,y.name)}function Gt(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...m]=y.split("?");return(0,k.zd)(m.join("?"))}function Ku(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function aa(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function ug(y=(0,k.z$)()){return!("file:"!==aa()&&"ionic:"!==aa()&&"capacitor:"!==aa()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jh(){try{const y=self.localStorage,h=Yi();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Qh(y=(0,k.z$)()){return function xr(){return(0,k.w1)()&&11===(null==document?void 0:document.documentMode)}()||function tu(y=(0,k.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,k.hl)()}catch(y){return ur()&&(0,k.hl)()}return!1}function ur(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function nu(){return(function Vy(){return"http:"===aa()||"https:"===aa()}()||(0,k.ru)()||ug())&&!function ua(){return(0,k.b$)()||(0,k.UG)()}()&&Jh()&&!ur()}function Id(){return ug()&&"undefined"!=typeof document}function nc(){return(nc=(0,g.Z)(function*(){return!!Id()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const ci={LOCAL:"local",NONE:"none",SESSION:"session"},wo=$,cg="persistence";function Zu(y){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,g.Z)(function*(y){yield y._initializationPromise;const h=hg(),m=Vn(cg,y.config.apiKey,y.name);h&&h.setItem(m,y._getPersistence())})).apply(this,arguments)}function hg(){var y;try{return(null===(y=function lg(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const By=$;class di{constructor(){this.browserResolver=ee(class Ry{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rn,this._completeRedirectFn=Hr,this._overrideRedirectResult=T}_openPopup(h,m,E,S){var N=this;return(0,g.Z)(function*(){var K;Z(null===(K=N.eventManagers[h._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const fe=js(h,m,E,Pe(),S);return function Jl(y,h,m,E=500,S=600){const N=Math.max((window.screen.availHeight-S)/2,0).toString(),K=Math.max((window.screen.availWidth-E)/2,0).toString();let fe="";const ke=Object.assign(Object.assign({},jh),{width:E.toString(),height:S.toString(),top:N,left:K}),Ke=(0,k.z$)().toLowerCase();m&&(fe=Aa(Ke)?"_blank":m),Sa(Ke)&&(h=h||"http://localhost",ke.scrollbars="yes");const mt=Object.entries(ke).reduce((Dn,[fi,ic])=>`${Dn}${fi}=${ic},`,"");if(function Xs(y=(0,k.z$)()){var h;return Lr(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Ke)&&"_self"!==fe)return function My(y,h){const m=document.createElement("a");m.href=y,m.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(h||"",fe),new Qp(null);const ct=window.open(h||"",fe,mt);$(ct,y,"popup-blocked");try{ct.focus()}catch(Dn){}return new Qp(ct)}(h,fe,Yi())})()}_openRedirect(h,m,E,S){var N=this;return(0,g.Z)(function*(){return yield N._originValidation(h),function za(y){cn().location.href=y}(js(h,m,E,Pe(),S)),new Promise(()=>{})})()}_initialize(h){const m=h._key();if(this.eventManagers[m]){const{manager:S,promise:N}=this.eventManagers[m];return S?Promise.resolve(S):(Z(N,"If manager is not set, promise should be"),N)}const E=this.initAndGetManager(h);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(h){var m=this;return(0,g.Z)(function*(){const E=yield function pd(y){return sa.apply(this,arguments)}(h),S=new Bu(h);return E.register("authEvent",N=>($(null==N?void 0:N.authEvent,h,"invalid-auth-event"),{status:S.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[h._key()]={manager:S},m.iframes[h._key()]=E,S})()}_isIframeWebStorageSupported(h,m){this.iframes[h._key()].send(yd,{type:yd},S=>{var N;const K=null===(N=null==S?void 0:S[0])||void 0===N?void 0:N[yd];void 0!==K&&m(!!K),De(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const m=h._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Dy(y){return Kp.apply(this,arguments)}(h)),this.originValidationPromises[m]}get _shouldInitProactively(){return Ss()||_u()||Lr()}}),this.cordovaResolver=ee(class ag{constructor(){this._redirectPersistence=Rn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Hr,this._overrideRedirectResult=T}_initialize(h){var m=this;return(0,g.Z)(function*(){const E=h._key();let S=m.eventManagers.get(E);return S||(S=new bd(h),m.eventManagers.set(E,S),m.attachCallbackListeners(h,S)),S})()}_openPopup(h){De(h,"operation-not-supported-in-this-environment")}_openRedirect(h,m,E,S){var N=this;return(0,g.Z)(function*(){!function Gu(y){var h,m,E,S,N,K,fe,ke,Ke,mt;const ct=$s();$("function"==typeof(null===(h=null==ct?void 0:ct.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$(void 0!==(null===(m=null==ct?void 0:ct.BuildInfo)||void 0===m?void 0:m.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$("function"==typeof(null===(N=null===(S=null===(E=null==ct?void 0:ct.cordova)||void 0===E?void 0:E.plugins)||void 0===S?void 0:S.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(ke=null===(fe=null===(K=null==ct?void 0:ct.cordova)||void 0===K?void 0:K.plugins)||void 0===fe?void 0:fe.browsertab)||void 0===ke?void 0:ke.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(mt=null===(Ke=null==ct?void 0:ct.cordova)||void 0===Ke?void 0:Ke.InAppBrowser)||void 0===mt?void 0:mt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const K=yield N._initialize(h);yield K.initialized(),K.resetRedirect(),function D(){Jn.clear()}(),yield N._originValidation(h);const fe=function qu(y,h,m=null){return{type:h,eventId:m,urlResponse:null,sessionId:Wh(),postBody:null,tenantId:y.tenantId,error:Ee(y,"no-auth-event")}}(h,E,S);yield function Ny(y,h){return eu()._set(Kh(y),h)}(h,fe);const ke=yield function ps(y,h,m){return Ja.apply(this,arguments)}(h,fe,m),Ke=yield function wd(y){const{cordova:h}=$s();return new Promise(m=>{h.plugins.browsertab.isAvailable(E=>{let S=null;E?h.plugins.browsertab.openUrl(y):S=h.InAppBrowser.open(y,function jc(y=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(S)})})}(ke);return function Xa(y,h,m){return sg.apply(this,arguments)}(h,K,Ke)})()}_isIframeWebStorageSupported(h,m){throw new Error("Method not implemented.")}_originValidation(h){const m=h._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function ig(y){return Ed.apply(this,arguments)}(h)),this.originValidationPromises[m]}attachCallbackListeners(h,m){const{universalLinks:E,handleOpenURL:S,BuildInfo:N}=$s(),K=setTimeout((0,g.Z)(function*(){yield zu(h),m.onEvent(Ku())}),500),fe=function(){var mt=(0,g.Z)(function*(ct){clearTimeout(K);const Dn=yield zu(h);let fi=null;Dn&&(null==ct?void 0:ct.url)&&(fi=function Py(y,h){var m,E;const S=function Yh(y){const h=Gt(y),m=h.link?decodeURIComponent(h.link):void 0,E=Gt(m).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Gt(S).link||S||E||m||y}(h);if(S.includes("/__/auth/callback")){const N=Gt(S),K=N.firebaseError?function Zh(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(N.firebaseError)):null,fe=null===(E=null===(m=null==K?void 0:K.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],ke=fe?Ee(fe):null;return ke?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(Dn,ct.url)),m.onEvent(fi||Ku())});return function(Dn){return mt.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,fe);const ke=S,Ke=`${N.packageName.toLowerCase()}://`;$s().handleOpenURL=function(){var mt=(0,g.Z)(function*(ct){if(ct.toLowerCase().startsWith(Ke)&&fe({url:ct}),"function"==typeof ke)try{ke(ct)}catch(Dn){console.error(Dn)}});return function(ct){return mt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Rn,this._completeRedirectFn=Hr,this._overrideRedirectResult=T}_initialize(h){var m=this;return(0,g.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,m,E,S){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,m,E,S)})()}_openRedirect(h,m,E,S){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,m,E,S)})()}_isIframeWebStorageSupported(h,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,m)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Id()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return By(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const m=yield function Uy(){return nc.apply(this,arguments)}();h.underlyingResolver=m?h.cordovaResolver:h.browserResolver})()}}function fg(y){return y.unwrap()}function Cd(y){return pg(y)}function pg(y){const{_tokenResponse:h}=y instanceof k.ZR?y.customData:y;if(!h)return null;if(!(y instanceof k.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return mo.credentialFromResult(y);const m=h.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=Yc;break;case"facebook.com":E=ko;break;case"github.com":E=Oh;break;case"twitter.com":E=Jc;break;default:const{oauthIdToken:S,oauthAccessToken:N,oauthTokenSecret:K,pendingToken:fe,nonce:ke}=h;return N||K||S||fe?fe?m.startsWith("saml.")?no._create(m,fe):as._fromParams({providerId:m,signInMethod:m,pendingToken:fe,idToken:S,accessToken:N}):new Gi(m).credential({idToken:S,accessToken:N,rawNonce:ke}):null}return y instanceof k.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function hi(y,h){return h.catch(m=>{throw m instanceof k.ZR&&function $y(y,h){var m;const E=null===(m=h.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new gg(y,function Zn(y,h){var m;const E=(0,k.m9)(y),S=h;return $(h.customData.operationType,E,"argument-error"),$(null===(m=S.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),zo._fromError(E,S)}(y,h));else if(E){const S=pg(h),N=h;S&&(N.credential=S,N.tenantId=E.tenantId||void 0,N.email=E.email||void 0,N.phoneNumber=E.phoneNumber||void 0)}}(y,m),m}).then(m=>{const S=m.user;return{operationType:m.operationType,credential:Cd(m),additionalUserInfo:Zi(m),user:Hs.getOrCreate(S)}})}function ef(y,h){return tf.apply(this,arguments)}function tf(){return(tf=(0,g.Z)(function*(y,h){const m=yield h;return{verificationId:m.verificationId,confirm:E=>hi(y,m.confirm(E))}})).apply(this,arguments)}class gg{constructor(h,m){this.resolver=m,this.auth=function jy(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return hi(fg(this.auth),this.resolver.resolveSignIn(h))}}class Hs{constructor(h){this._delegate=h,this.multiFactor=function Ru(y){const h=(0,k.m9)(y);return xu.has(h)||xu.set(h,id._fromUser(h)),xu.get(h)}(h)}static getOrCreate(h){return Hs.USER_MAP.has(h)||Hs.USER_MAP.set(h,new Hs(h)),Hs.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var m=this;return(0,g.Z)(function*(){return hi(m.auth,or(m._delegate,h))})()}linkWithPhoneNumber(h,m){var E=this;return(0,g.Z)(function*(){return ef(E.auth,function Iy(y,h,m){return Kl.apply(this,arguments)}(E._delegate,h,m))})()}linkWithPopup(h){var m=this;return(0,g.Z)(function*(){return hi(m.auth,function dd(y,h,m){return Xi.apply(this,arguments)}(m._delegate,h,di))})()}linkWithRedirect(h){var m=this;return(0,g.Z)(function*(){return yield Zu(ut(m.auth)),function jt(y,h,m){return function wt(y,h,m){return br.apply(this,arguments)}(y,h,m)}(m._delegate,h,di)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var m=this;return(0,g.Z)(function*(){return hi(m.auth,us(m._delegate,h))})()}reauthenticateWithPhoneNumber(h,m){return ef(this.auth,function oi(y,h,m){return $r.apply(this,arguments)}(this._delegate,h,m))}reauthenticateWithPopup(h){return hi(this.auth,function xi(y,h,m){return Vu.apply(this,arguments)}(this._delegate,h,di))}reauthenticateWithRedirect(h){var m=this;return(0,g.Z)(function*(){return yield Zu(ut(m.auth)),function Le(y,h,m){return function Ct(y,h,m){return dt.apply(this,arguments)}(y,h,m)}(m._delegate,h,di)})()}sendEmailVerification(h){return function Bl(y,h){return Su.apply(this,arguments)}(this._delegate,h)}unlink(h){var m=this;return(0,g.Z)(function*(){return yield function kh(y,h){return an.apply(this,arguments)}(m._delegate,h),m})()}updateEmail(h){return function Bp(y,h){return Ho((0,k.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Hl(y,h){return Ho((0,k.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function go(y,h){return na.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function $l(y,h){return $a.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,m){return function jl(y,h,m){return Au.apply(this,arguments)}(this._delegate,h,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Hs.USER_MAP=new WeakMap;const rc=$;let mg=(()=>{class y{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=m.options;rc(S,"invalid-api-key",{appName:m.name}),rc(S,"invalid-api-key",{appName:m.name});const N="undefined"!=typeof window?di:void 0;this._delegate=E.initialize({options:{persistence:Hy(S,m.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Ne),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Hs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function Ur(y,h,m){const E=ut(y);$(E._canInitEmulator,E,"emulator-config-failed"),$(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const S=!!(null==m?void 0:m.disableWarnings),N=Vi(h),{host:K,port:fe}=function kn(y){const h=Vi(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(E);if(S){const N=S[1];return{host:N,port:Ui(E.substr(N.length+1))}}{const[N,K]=E.split(":");return{host:N,port:Ui(K)}}}(h);E.config.emulator={url:`${N}//${K}${null===fe?"":`:${fe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:K,port:fe,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function fn(){function y(){const h=document.createElement("p"),m=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,E)}applyActionCode(m){return function Ae(y,h){return Lt.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Vl(this._delegate,m)}confirmPasswordReset(m,E){return function Fl(y,h,m){return Ll.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var S=this;return(0,g.Z)(function*(){return hi(S._delegate,function ti(y,h,m){return Va.apply(this,arguments)}(S._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Ps(y,h){return Ai.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Ua(y,h){const m=bu.parseLink(h);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,g.Z)(function*(){rc(nu(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function Xn(y,h){return fs.apply(this,arguments)}(m._delegate,di);return E?hi(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Oy(y,h){ut(y)._logFramework(h)}(this._delegate,m)}onAuthStateChanged(m,E,S){const{next:N,error:K,complete:fe}=yg(m,E,S);return this._delegate.onAuthStateChanged(N,K,fe)}onIdTokenChanged(m,E,S){const{next:N,error:K,complete:fe}=yg(m,E,S);return this._delegate.onIdTokenChanged(N,K,fe)}sendSignInLinkToEmail(m,E){return function Up(y,h,m){return Du.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function kl(y,h,m){return La.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,g.Z)(function*(){let S;switch(function dg(y,h){wo(Object.values(ci).includes(h),y,"invalid-persistence-type"),(0,k.b$)()?wo(h!==ci.SESSION,y,"unsupported-persistence-type"):(0,k.UG)()?wo(h===ci.NONE,y,"unsupported-persistence-type"):ur()?wo(h===ci.NONE||h===ci.LOCAL&&(0,k.hl)(),y,"unsupported-persistence-type"):wo(h===ci.NONE||Jh(),y,"unsupported-persistence-type")}(E._delegate,m),m){case ci.SESSION:S=Rn;break;case ci.LOCAL:S=(yield ee(Ls)._isAvailable())?Ls:ni;break;case ci.NONE:S=Et;break;default:return De("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return hi(this._delegate,function Xc(y){return Nl.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return hi(this._delegate,yn(this._delegate,m))}signInWithCustomToken(m){return hi(this._delegate,function Uo(y,h){return ft.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return hi(this._delegate,function Ul(y,h,m){return yn((0,k.m9)(y),Zc.credential(h,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return hi(this._delegate,function Tu(y,h,m){return xn.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return ef(this._delegate,function Wl(y,h,m){return fo.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,g.Z)(function*(){return rc(nu(),E._delegate,"operation-not-supported-in-this-environment"),hi(E._delegate,function cd(y,h,m){return Bs.apply(this,arguments)}(E._delegate,m,di))})()}signInWithRedirect(m){var E=this;return(0,g.Z)(function*(){return rc(nu(),E._delegate,"operation-not-supported-in-this-environment"),yield Zu(E._delegate),function Y(y,h,m){return function ne(y,h,m){return ge.apply(this,arguments)}(y,h,m)}(E._delegate,m,di)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function jo(y,h){return so.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=ci,y})();function yg(y,h,m){let E=y;"function"!=typeof y&&({next:E,error:h,complete:m}=y);const S=E;return{next:K=>S(K&&Hs.getOrCreate(K)),error:h,complete:m}}function Hy(y,h){const m=function ru(y,h){const m=hg();if(!m)return[];const E=Vn(cg,y,h);switch(m.getItem(E)){case ci.NONE:return[Et];case ci.LOCAL:return[Ls,Rn];case ci.SESSION:return[Rn];default:return[]}}(y,h);if("undefined"!=typeof self&&!m.includes(Ls)&&m.push(Ls),"undefined"!=typeof window)for(const E of[ni,Rn])m.includes(E)||m.push(E);return m.includes(Et)||m.push(Et),m}class nf{constructor(){this.providerId="phone",this._delegate=new mo(fg(X.Z.auth()))}static credential(h,m){return mo.credential(h,m)}verifyPhoneNumber(h,m){return this._delegate.verifyPhoneNumber(h,m)}unwrap(){return this._delegate}}nf.PHONE_SIGN_IN_METHOD=mo.PHONE_SIGN_IN_METHOD,nf.PROVIDER_ID=mo.PROVIDER_ID;const _g=$;class Q0{constructor(h,m,E=X.Z.app()){var S;_g(null===(S=E.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new ho(h,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function gs(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",h=>{const m=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new mg(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Zc,FacebookAuthProvider:ko,GithubAuthProvider:Oh,GoogleAuthProvider:Yc,OAuthProvider:Gi,SAMLAuthProvider:Ar,PhoneAuthProvider:nf,PhoneMultiFactorGenerator:Xp,RecaptchaVerifier:Q0,TwitterAuthProvider:Jc,Auth:mg,AuthCredential:Ti,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.15")}(X.Z)},8306:(Je,we,P)=>{P.d(we,{y:()=>H});var g=P(2961),X=P(727),k=P(8822),ae=P(4671);var ue=P(2416),se=P(576),de=P(2806);let H=(()=>{class Me{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const he=new Me;return he.source=this,he.operator=Ue,he}subscribe(Ue,he,Ce){const Ge=function He(Me){return Me&&Me instanceof g.Lv||function te(Me){return Me&&(0,se.m)(Me.next)&&(0,se.m)(Me.error)&&(0,se.m)(Me.complete)}(Me)&&(0,X.Nn)(Me)}(Ue)?Ue:new g.Hp(Ue,he,Ce);return(0,de.x)(()=>{const{operator:Ze,source:De}=this;Ge.add(Ze?Ze.call(Ge,De):De?this._subscribe(Ge):this._trySubscribe(Ge))}),Ge}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(he){Ue.error(he)}}forEach(Ue,he){return new(he=j(he))((Ce,Ge)=>{const Ze=new g.Hp({next:De=>{try{Ue(De)}catch(Ee){Ge(Ee),Ze.unsubscribe()}},error:Ge,complete:Ce});this.subscribe(Ze)})}_subscribe(Ue){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(Ue)}[k.L](){return this}pipe(...Ue){return function pe(Me){return 0===Me.length?ae.y:1===Me.length?Me[0]:function(Ue){return Me.reduce((he,Ce)=>Ce(he),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=j(Ue))((he,Ce)=>{let Ge;this.subscribe(Ze=>Ge=Ze,Ze=>Ce(Ze),()=>he(Ge))})}}return Me.create=Ne=>new Me(Ne),Me})();function j(Me){var Ne;return null!==(Ne=null!=Me?Me:ue.v.Promise)&&void 0!==Ne?Ne:Promise}},7579:(Je,we,P)=>{P.d(we,{x:()=>ue});var g=P(8306),X=P(727);const ae=(0,P(3888).d)(de=>function(){de(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=P(8737),pe=P(2806);let ue=(()=>{class de extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const te=new se(this,this);return te.operator=j,te}_throwIfClosed(){if(this.closed)throw new ae}next(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(j)}})}error(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:te}=this;for(;te.length;)te.shift().error(j)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:te,isStopped:He,observers:Me}=this;return te||He?X.Lc:(this.currentObservers=null,Me.push(j),new X.w0(()=>{this.currentObservers=null,(0,re.P)(Me,j)}))}_checkFinalizedStatuses(j){const{hasError:te,thrownError:He,isStopped:Me}=this;te?j.error(He):Me&&j.complete()}asObservable(){const j=new g.y;return j.source=this,j}}return de.create=(H,j)=>new se(H,j),de})();class se extends ue{constructor(H,j){super(),this.destination=H,this.source=j}next(H){var j,te;null===(te=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===te||te.call(j,H)}error(H){var j,te;null===(te=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===te||te.call(j,H)}complete(){var H,j;null===(j=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===j||j.call(H)}_subscribe(H){var j,te;return null!==(te=null===(j=this.source)||void 0===j?void 0:j.subscribe(H))&&void 0!==te?te:X.Lc}}},2961:(Je,we,P)=>{P.d(we,{Hp:()=>Ue,Lv:()=>te});var g=P(576),X=P(727),k=P(2416),ae=P(7849);function re(){}const pe=de("C",void 0,void 0);function de(De,Ee,be){return{kind:De,value:Ee,error:be}}var H=P(3410),j=P(2806);class te extends X.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,X.Nn)(Ee)&&Ee.add(this)):this.destination=Ze}static create(Ee,be,je){return new Ue(Ee,be,je)}next(Ee){this.isStopped?Ge(function se(De){return de("N",De,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?Ge(function ue(De){return de("E",void 0,De)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?Ge(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Me(De,Ee){return He.call(De,Ee)}class Ne{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:be}=this;if(be.next)try{be.next(Ee)}catch(je){he(je)}}error(Ee){const{partialObserver:be}=this;if(be.error)try{be.error(Ee)}catch(je){he(je)}else he(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(be){he(be)}}}class Ue extends te{constructor(Ee,be,je){let Be;if(super(),(0,g.m)(Ee)||!Ee)Be={next:null!=Ee?Ee:void 0,error:null!=be?be:void 0,complete:null!=je?je:void 0};else{let $;this&&k.v.useDeprecatedNextContext?($=Object.create(Ee),$.unsubscribe=()=>this.unsubscribe(),Be={next:Ee.next&&Me(Ee.next,$),error:Ee.error&&Me(Ee.error,$),complete:Ee.complete&&Me(Ee.complete,$)}):Be=Ee}this.destination=new Ne(Be)}}function he(De){k.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(De):(0,ae.h)(De)}function Ge(De,Ee){const{onStoppedNotification:be}=k.v;be&&H.z.setTimeout(()=>be(De,Ee))}const Ze={closed:!0,next:re,error:function Ce(De){throw De},complete:re}},727:(Je,we,P)=>{P.d(we,{Lc:()=>pe,w0:()=>re,Nn:()=>ue});var g=P(576);const k=(0,P(3888).d)(de=>function(j){de(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((te,He)=>`${He+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ae=P(8737);class re{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Me of j)Me.remove(this);else j.remove(this);const{initialTeardown:te}=this;if((0,g.m)(te))try{te()}catch(Me){H=Me instanceof k?Me.errors:[Me]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Me of He)try{se(Me)}catch(Ne){H=null!=H?H:[],Ne instanceof k?H=[...H,...Ne.errors]:H.push(Ne)}}if(H)throw new k(H)}}add(H){var j;if(H&&H!==this)if(this.closed)se(H);else{if(H instanceof re){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(H)}}_hasParent(H){const{_parentage:j}=this;return j===H||Array.isArray(j)&&j.includes(H)}_addParent(H){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(H),j):j?[j,H]:H}_removeParent(H){const{_parentage:j}=this;j===H?this._parentage=null:Array.isArray(j)&&(0,ae.P)(j,H)}remove(H){const{_finalizers:j}=this;j&&(0,ae.P)(j,H),H instanceof re&&H._removeParent(this)}}re.EMPTY=(()=>{const de=new re;return de.closed=!0,de})();const pe=re.EMPTY;function ue(de){return de instanceof re||de&&"closed"in de&&(0,g.m)(de.remove)&&(0,g.m)(de.add)&&(0,g.m)(de.unsubscribe)}function se(de){(0,g.m)(de)?de():de.unsubscribe()}},2416:(Je,we,P)=>{P.d(we,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Je,we,P)=>{P.d(we,{E:()=>X});const X=new(P(8306).y)(re=>re.complete())},8996:(Je,we,P)=>{P.d(we,{D:()=>Ee});var g=P(8421),X=P(5363),k=P(9468),pe=P(8306),se=P(2202),de=P(576),H=P(9672);function te(be,je){if(!be)throw new Error("Iterable cannot be null");return new pe.y(Be=>{(0,H.f)(Be,je,()=>{const $=be[Symbol.asyncIterator]();(0,H.f)(Be,je,()=>{$.next().then(ve=>{ve.done?Be.complete():Be.next(ve.value)})},0,!0)})})}var He=P(3670),Me=P(8239),Ne=P(1144),Ue=P(6495),he=P(2206),Ce=P(4532),Ge=P(3260);function Ee(be,je){return je?function De(be,je){if(null!=be){if((0,He.c)(be))return function ae(be,je){return(0,g.Xf)(be).pipe((0,k.R)(je),(0,X.Q)(je))}(be,je);if((0,Ne.z)(be))return function ue(be,je){return new pe.y(Be=>{let $=0;return je.schedule(function(){$===be.length?Be.complete():(Be.next(be[$++]),Be.closed||this.schedule())})})}(be,je);if((0,Me.t)(be))return function re(be,je){return(0,g.Xf)(be).pipe((0,k.R)(je),(0,X.Q)(je))}(be,je);if((0,he.D)(be))return te(be,je);if((0,Ue.T)(be))return function j(be,je){return new pe.y(Be=>{let $;return(0,H.f)(Be,je,()=>{$=be[se.h](),(0,H.f)(Be,je,()=>{let ve,Z;try{({value:ve,done:Z}=$.next())}catch(ie){return void Be.error(ie)}Z?Be.complete():Be.next(ve)},0,!0)}),()=>(0,de.m)(null==$?void 0:$.return)&&$.return()})}(be,je);if((0,Ge.L)(be))return function Ze(be,je){return te((0,Ge.Q)(be),je)}(be,je)}throw(0,Ce.z)(be)}(be,je):(0,g.Xf)(be)}},8421:(Je,we,P)=>{P.d(we,{Xf:()=>He});var g=P(655),X=P(1144),k=P(8239),ae=P(8306),re=P(3670),pe=P(2206),ue=P(4532),se=P(6495),de=P(3260),H=P(576),j=P(7849),te=P(8822);function He(De){if(De instanceof ae.y)return De;if(null!=De){if((0,re.c)(De))return function Me(De){return new ae.y(Ee=>{const be=De[te.L]();if((0,H.m)(be.subscribe))return be.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,X.z)(De))return function Ne(De){return new ae.y(Ee=>{for(let be=0;be<De.length&&!Ee.closed;be++)Ee.next(De[be]);Ee.complete()})}(De);if((0,k.t)(De))return function Ue(De){return new ae.y(Ee=>{De.then(be=>{Ee.closed||(Ee.next(be),Ee.complete())},be=>Ee.error(be)).then(null,j.h)})}(De);if((0,pe.D)(De))return Ce(De);if((0,se.T)(De))return function he(De){return new ae.y(Ee=>{for(const be of De)if(Ee.next(be),Ee.closed)return;Ee.complete()})}(De);if((0,de.L)(De))return function Ge(De){return Ce((0,de.Q)(De))}(De)}throw(0,ue.z)(De)}function Ce(De){return new ae.y(Ee=>{(function Ze(De,Ee){var be,je,Be,$;return(0,g.mG)(this,void 0,void 0,function*(){try{for(be=(0,g.KL)(De);!(je=yield be.next()).done;)if(Ee.next(je.value),Ee.closed)return}catch(ve){Be={error:ve}}finally{try{je&&!je.done&&($=be.return)&&(yield $.call(be))}finally{if(Be)throw Be.error}}Ee.complete()})})(De,Ee).catch(be=>Ee.error(be))})}},6451:(Je,we,P)=>{P.d(we,{T:()=>pe});var g=P(8189),X=P(8421),k=P(515),ae=P(7669),re=P(8996);function pe(...ue){const se=(0,ae.yG)(ue),de=(0,ae._6)(ue,1/0),H=ue;return H.length?1===H.length?(0,X.Xf)(H[0]):(0,g.J)(de)((0,re.D)(H,se)):k.E}},5403:(Je,we,P)=>{P.d(we,{x:()=>X});var g=P(2961);function X(ae,re,pe,ue,se){return new k(ae,re,pe,ue,se)}class k extends g.Lv{constructor(re,pe,ue,se,de,H){super(re),this.onFinalize=de,this.shouldUnsubscribe=H,this._next=pe?function(j){try{pe(j)}catch(te){re.error(te)}}:super._next,this._error=se?function(j){try{se(j)}catch(te){re.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(j){re.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(Je,we,P)=>{P.d(we,{U:()=>k});var g=P(4482),X=P(5403);function k(ae,re){return(0,g.e)((pe,ue)=>{let se=0;pe.subscribe((0,X.x)(ue,de=>{ue.next(ae.call(re,de,se++))}))})}},8189:(Je,we,P)=>{P.d(we,{J:()=>k});var g=P(5577),X=P(4671);function k(ae=1/0){return(0,g.z)(X.y,ae)}},5577:(Je,we,P)=>{P.d(we,{z:()=>se});var g=P(4004),X=P(8421),k=P(4482),ae=P(9672),re=P(5403),ue=P(576);function se(de,H,j=1/0){return(0,ue.m)(H)?se((te,He)=>(0,g.U)((Me,Ne)=>H(te,Me,He,Ne))((0,X.Xf)(de(te,He))),j):("number"==typeof H&&(j=H),(0,k.e)((te,He)=>function pe(de,H,j,te,He,Me,Ne,Ue){const he=[];let Ce=0,Ge=0,Ze=!1;const De=()=>{Ze&&!he.length&&!Ce&&H.complete()},Ee=je=>Ce<te?be(je):he.push(je),be=je=>{Me&&H.next(je),Ce++;let Be=!1;(0,X.Xf)(j(je,Ge++)).subscribe((0,re.x)(H,$=>{null==He||He($),Me?Ee($):H.next($)},()=>{Be=!0},void 0,()=>{if(Be)try{for(Ce--;he.length&&Ce<te;){const $=he.shift();Ne?(0,ae.f)(H,Ne,()=>be($)):be($)}De()}catch($){H.error($)}}))};return de.subscribe((0,re.x)(H,Ee,()=>{Ze=!0,De()})),()=>{null==Ue||Ue()}}(te,He,de,j)))}},5363:(Je,we,P)=>{P.d(we,{Q:()=>ae});var g=P(9672),X=P(4482),k=P(5403);function ae(re,pe=0){return(0,X.e)((ue,se)=>{ue.subscribe((0,k.x)(se,de=>(0,g.f)(se,re,()=>se.next(de),pe),()=>(0,g.f)(se,re,()=>se.complete(),pe),de=>(0,g.f)(se,re,()=>se.error(de),pe)))})}},3099:(Je,we,P)=>{P.d(we,{B:()=>pe});var g=P(8996),X=P(5698),k=P(7579),ae=P(2961),re=P(4482);function pe(se={}){const{connector:de=(()=>new k.x),resetOnError:H=!0,resetOnComplete:j=!0,resetOnRefCountZero:te=!0}=se;return He=>{let Me=null,Ne=null,Ue=null,he=0,Ce=!1,Ge=!1;const Ze=()=>{null==Ne||Ne.unsubscribe(),Ne=null},De=()=>{Ze(),Me=Ue=null,Ce=Ge=!1},Ee=()=>{const be=Me;De(),null==be||be.unsubscribe()};return(0,re.e)((be,je)=>{he++,!Ge&&!Ce&&Ze();const Be=Ue=null!=Ue?Ue:de();je.add(()=>{he--,0===he&&!Ge&&!Ce&&(Ne=ue(Ee,te))}),Be.subscribe(je),Me||(Me=new ae.Hp({next:$=>Be.next($),error:$=>{Ge=!0,Ze(),Ne=ue(De,H,$),Be.error($)},complete:()=>{Ce=!0,Ze(),Ne=ue(De,j),Be.complete()}}),(0,g.D)(be).subscribe(Me))})(He)}}function ue(se,de,...H){return!0===de?(se(),null):!1===de?null:de(...H).pipe((0,X.q)(1)).subscribe(()=>se())}},9468:(Je,we,P)=>{P.d(we,{R:()=>X});var g=P(4482);function X(k,ae=0){return(0,g.e)((re,pe)=>{pe.add(k.schedule(()=>re.subscribe(pe),ae))})}},5698:(Je,we,P)=>{P.d(we,{q:()=>ae});var g=P(515),X=P(4482),k=P(5403);function ae(re){return re<=0?()=>g.E:(0,X.e)((pe,ue)=>{let se=0;pe.subscribe((0,k.x)(ue,de=>{++se<=re&&(ue.next(de),re<=se&&ue.complete())}))})}},8505:(Je,we,P)=>{P.d(we,{b:()=>re});var g=P(576),X=P(4482),k=P(5403),ae=P(4671);function re(pe,ue,se){const de=(0,g.m)(pe)||ue||se?{next:pe,error:ue,complete:se}:pe;return de?(0,X.e)((H,j)=>{var te;null===(te=de.subscribe)||void 0===te||te.call(de);let He=!0;H.subscribe((0,k.x)(j,Me=>{var Ne;null===(Ne=de.next)||void 0===Ne||Ne.call(de,Me),j.next(Me)},()=>{var Me;He=!1,null===(Me=de.complete)||void 0===Me||Me.call(de),j.complete()},Me=>{var Ne;He=!1,null===(Ne=de.error)||void 0===Ne||Ne.call(de,Me),j.error(Me)},()=>{var Me,Ne;He&&(null===(Me=de.unsubscribe)||void 0===Me||Me.call(de)),null===(Ne=de.finalize)||void 0===Ne||Ne.call(de)}))}):ae.y}},4408:(Je,we,P)=>{P.d(we,{o:()=>re});var g=P(727);class X extends g.w0{constructor(ue,se){super()}schedule(ue,se=0){return this}}const k={setInterval(pe,ue,...se){const{delegate:de}=k;return(null==de?void 0:de.setInterval)?de.setInterval(pe,ue,...se):setInterval(pe,ue,...se)},clearInterval(pe){const{delegate:ue}=k;return((null==ue?void 0:ue.clearInterval)||clearInterval)(pe)},delegate:void 0};var ae=P(8737);class re extends X{constructor(ue,se){super(ue,se),this.scheduler=ue,this.work=se,this.pending=!1}schedule(ue,se=0){if(this.closed)return this;this.state=ue;const de=this.id,H=this.scheduler;return null!=de&&(this.id=this.recycleAsyncId(H,de,se)),this.pending=!0,this.delay=se,this.id=this.id||this.requestAsyncId(H,this.id,se),this}requestAsyncId(ue,se,de=0){return k.setInterval(ue.flush.bind(ue,this),de)}recycleAsyncId(ue,se,de=0){if(null!=de&&this.delay===de&&!1===this.pending)return se;k.clearInterval(se)}execute(ue,se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(ue,se);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,se){let H,de=!1;try{this.work(ue)}catch(j){de=!0,H=j||new Error("Scheduled action threw falsy error")}if(de)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:ue,scheduler:se}=this,{actions:de}=se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(de,this),null!=ue&&(this.id=this.recycleAsyncId(se,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(Je,we,P)=>{P.d(we,{v:()=>k});var g=P(6063);class X{constructor(re,pe=X.now){this.schedulerActionCtor=re,this.now=pe}schedule(re,pe=0,ue){return new this.schedulerActionCtor(this,re).schedule(ue,pe)}}X.now=g.l.now;class k extends X{constructor(re,pe=X.now){super(re,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:pe}=this;if(this._active)return void pe.push(re);let ue;this._active=!0;do{if(ue=re.execute(re.state,re.delay))break}while(re=pe.shift());if(this._active=!1,ue){for(;re=pe.shift();)re.unsubscribe();throw ue}}}},4986:(Je,we,P)=>{P.d(we,{z:()=>k});var g=P(4408);const k=new(P(7565).v)(g.o)},6063:(Je,we,P)=>{P.d(we,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(Je,we,P)=>{P.d(we,{z:()=>g});const g={setTimeout(X,k,...ae){const{delegate:re}=g;return(null==re?void 0:re.setTimeout)?re.setTimeout(X,k,...ae):setTimeout(X,k,...ae)},clearTimeout(X){const{delegate:k}=g;return((null==k?void 0:k.clearTimeout)||clearTimeout)(X)},delegate:void 0}},2202:(Je,we,P)=>{P.d(we,{h:()=>X});const X=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Je,we,P)=>{P.d(we,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Je,we,P)=>{P.d(we,{_6:()=>pe,jO:()=>ae,yG:()=>re});var g=P(576);function k(ue){return ue[ue.length-1]}function ae(ue){return(0,g.m)(k(ue))?ue.pop():void 0}function re(ue){return function X(ue){return ue&&(0,g.m)(ue.schedule)}(k(ue))?ue.pop():void 0}function pe(ue,se){return"number"==typeof k(ue)?ue.pop():se}},8737:(Je,we,P)=>{function g(X,k){if(X){const ae=X.indexOf(k);0<=ae&&X.splice(ae,1)}}P.d(we,{P:()=>g})},3888:(Je,we,P)=>{function g(X){const ae=X(re=>{Error.call(re),re.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}P.d(we,{d:()=>g})},2806:(Je,we,P)=>{P.d(we,{x:()=>k,O:()=>ae});var g=P(2416);let X=null;function k(re){if(g.v.useDeprecatedSynchronousErrorHandling){const pe=!X;if(pe&&(X={errorThrown:!1,error:null}),re(),pe){const{errorThrown:ue,error:se}=X;if(X=null,ue)throw se}}else re()}function ae(re){g.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=re)}},9672:(Je,we,P)=>{function g(X,k,ae,re=0,pe=!1){const ue=k.schedule(function(){ae(),pe?X.add(this.schedule(null,re)):this.unsubscribe()},re);if(X.add(ue),!pe)return ue}P.d(we,{f:()=>g})},4671:(Je,we,P)=>{function g(X){return X}P.d(we,{y:()=>g})},1144:(Je,we,P)=>{P.d(we,{z:()=>g});const g=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(Je,we,P)=>{P.d(we,{D:()=>X});var g=P(576);function X(k){return Symbol.asyncIterator&&(0,g.m)(null==k?void 0:k[Symbol.asyncIterator])}},576:(Je,we,P)=>{function g(X){return"function"==typeof X}P.d(we,{m:()=>g})},3670:(Je,we,P)=>{P.d(we,{c:()=>k});var g=P(8822),X=P(576);function k(ae){return(0,X.m)(ae[g.L])}},6495:(Je,we,P)=>{P.d(we,{T:()=>k});var g=P(2202),X=P(576);function k(ae){return(0,X.m)(null==ae?void 0:ae[g.h])}},8239:(Je,we,P)=>{P.d(we,{t:()=>X});var g=P(576);function X(k){return(0,g.m)(null==k?void 0:k.then)}},3260:(Je,we,P)=>{P.d(we,{Q:()=>k,L:()=>ae});var g=P(655),X=P(576);function k(re){return(0,g.FC)(this,arguments,function*(){const ue=re.getReader();try{for(;;){const{value:se,done:de}=yield(0,g.qq)(ue.read());if(de)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(se)}}finally{ue.releaseLock()}})}function ae(re){return(0,X.m)(null==re?void 0:re.getReader)}},4482:(Je,we,P)=>{P.d(we,{A:()=>X,e:()=>k});var g=P(576);function X(ae){return(0,g.m)(null==ae?void 0:ae.lift)}function k(ae){return re=>{if(X(re))return re.lift(function(pe){try{return ae(pe,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Je,we,P)=>{P.d(we,{h:()=>k});var g=P(2416),X=P(3410);function k(ae){X.z.setTimeout(()=>{const{onUnhandledError:re}=g.v;if(!re)throw ae;re(ae)})}},4532:(Je,we,P)=>{function g(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(we,{z:()=>g})},655:(Je,we,P)=>{function ae(Z,ie){var ee={};for(var ye in Z)Object.prototype.hasOwnProperty.call(Z,ye)&&ie.indexOf(ye)<0&&(ee[ye]=Z[ye]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var oe=0;for(ye=Object.getOwnPropertySymbols(Z);oe<ye.length;oe++)ie.indexOf(ye[oe])<0&&Object.prototype.propertyIsEnumerable.call(Z,ye[oe])&&(ee[ye[oe]]=Z[ye[oe]])}return ee}function se(Z,ie,ee,ye){return new(ee||(ee=Promise))(function(Pe,lt){function $t(Xt){try{Ye(ye.next(Xt))}catch(Sn){lt(Sn)}}function Ut(Xt){try{Ye(ye.throw(Xt))}catch(Sn){lt(Sn)}}function Ye(Xt){Xt.done?Pe(Xt.value):function oe(Pe){return Pe instanceof ee?Pe:new ee(function(lt){lt(Pe)})}(Xt.value).then($t,Ut)}Ye((ye=ye.apply(Z,ie||[])).next())})}function he(Z){return this instanceof he?(this.v=Z,this):new he(Z)}function Ce(Z,ie,ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,ye=ee.apply(Z,ie||[]),Pe=[];return oe={},lt("next"),lt("throw"),lt("return"),oe[Symbol.asyncIterator]=function(){return this},oe;function lt(sn){ye[sn]&&(oe[sn]=function(Yt){return new Promise(function(Cr,qt){Pe.push([sn,Yt,Cr,qt])>1||$t(sn,Yt)})})}function $t(sn,Yt){try{!function Ut(sn){sn.value instanceof he?Promise.resolve(sn.value.v).then(Ye,Xt):Sn(Pe[0][2],sn)}(ye[sn](Yt))}catch(Cr){Sn(Pe[0][3],Cr)}}function Ye(sn){$t("next",sn)}function Xt(sn){$t("throw",sn)}function Sn(sn,Yt){sn(Yt),Pe.shift(),Pe.length&&$t(Pe[0][0],Pe[0][1])}}function Ze(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,ie=Z[Symbol.asyncIterator];return ie?ie.call(Z):(Z=function te(Z){var ie="function"==typeof Symbol&&Symbol.iterator,ee=ie&&Z[ie],ye=0;if(ee)return ee.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&ye>=Z.length&&(Z=void 0),{value:Z&&Z[ye++],done:!Z}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),ee={},ye("next"),ye("throw"),ye("return"),ee[Symbol.asyncIterator]=function(){return this},ee);function ye(Pe){ee[Pe]=Z[Pe]&&function(lt){return new Promise(function($t,Ut){!function oe(Pe,lt,$t,Ut){Promise.resolve(Ut).then(function(Ye){Pe({value:Ye,done:$t})},lt)}($t,Ut,(lt=Z[Pe](lt)).done,lt.value)})}}}P.d(we,{_T:()=>ae,mG:()=>se,qq:()=>he,FC:()=>Ce,KL:()=>Ze})},5e3:(Je,we,P)=>{P.d(we,{deG:()=>Hp,tb:()=>Vb,AFp:()=>ch,ip1:()=>Es,CZH:()=>$m,hGG:()=>UT,z2F:()=>d0,sBO:()=>xT,Sil:()=>Bb,_Vd:()=>vc,EJc:()=>wT,SBq:()=>hu,qLn:()=>Cd,vpe:()=>un,tBr:()=>Hr,XFs:()=>gt,OlP:()=>gn,zs3:()=>Co,ZZ4:()=>m0,aQg:()=>y0,soG:()=>dh,YKP:()=>Lv,h0i:()=>th,PXZ:()=>gr,R0b:()=>ki,FiY:()=>ai,Lbi:()=>n0,g9A:()=>t0,Qsj:()=>Ov,FYo:()=>Rm,JOm:()=>S,tp0:()=>li,Rgc:()=>So,dDg:()=>o0,q4F:()=>pl,GfV:()=>kv,s_b:()=>Gn,ifc:()=>Ht,eFA:()=>l0,G48:()=>Km,Gpc:()=>j,X6Q:()=>lp,_c5:()=>VT,VLi:()=>Rc,c2e:()=>r0,zSh:()=>kE,wAp:()=>_t,vHH:()=>Ne,cg1:()=>fv,kL8:()=>jw,dqk:()=>Bt,sIi:()=>uu,CqO:()=>AD,QGY:()=>L_,F4k:()=>V_,RDi:()=>Pl,AaK:()=>se,qOj:()=>kd,TTD:()=>Gi,_Bn:()=>xm,xp6:()=>cE,uIk:()=>Gg,ekj:()=>Df,Suo:()=>Gv,Xpm:()=>ht,lG2:()=>_u,Yz7:()=>Yt,cJS:()=>qt,oAB:()=>Tr,Yjl:()=>Aa,Y36:()=>Jg,_UZ:()=>Xg,qZA:()=>k_,TgZ:()=>O_,n5z:()=>Ou,LFG:()=>Le,$8M:()=>co,$Z:()=>dw,NdJ:()=>U_,CRH:()=>Sc,oxw:()=>Ew,Q6J:()=>hw,iGM:()=>sh,LSH:()=>Wu,YNc:()=>ew,_uU:()=>xw,Oqu:()=>nv});var g=P(7579),X=P(727),k=P(8306),ae=P(6451),re=P(3099);function pe(s){for(let o in s)if(s[o]===pe)return o;throw Error("Could not find renamed property on target object.")}function ue(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function se(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(se).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function de(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const H=pe({__forward_ref__:pe});function j(s){return s.__forward_ref__=j,s.toString=function(){return se(this())},s}function te(s){return He(s)?s():s}function He(s){return"function"==typeof s&&s.hasOwnProperty(H)&&s.__forward_ref__===j}class Ne extends Error{constructor(o,a){super(function Ue(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function he(s){return"string"==typeof s?s:null==s?"":String(s)}function Ce(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():he(s)}function Ee(s,o){const a=o?` in ${o}`:"";throw new Ne(-201,`No provider for ${Ce(s)} found${a}`)}function Ut(s,o){null==s&&function Ye(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function Yt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function qt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Vt(s){return ss(s,Li)||ss(s,Yr)}function ss(s,o){return s.hasOwnProperty(o)?s[o]:null}function Dr(s){return s&&(s.hasOwnProperty(Ts)||s.hasOwnProperty(Ci))?s[Ts]:null}const Li=pe({\u0275prov:pe}),Ts=pe({\u0275inj:pe}),Yr=pe({ngInjectableDef:pe}),Ci=pe({ngInjectorDef:pe});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let Qr;function An(s){const o=Qr;return Qr=s,o}function Qs(s,o,a){const l=Vt(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&gt.Optional?null:void 0!==o?o:void Ee(se(s),"Injector")}function zn(s){return{toString:s}.toString()}var On=(()=>((On=On||{})[On.OnPush=0]="OnPush",On[On.Default=1]="Default",On))(),Ht=(()=>{return(s=Ht||(Ht={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Ht;var s})();const ot="undefined"!=typeof globalThis&&globalThis,vt="undefined"!=typeof window&&window,yr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Bt=ot||"undefined"!=typeof global&&global||vt||yr,vr={},V=[],q=pe({\u0275cmp:pe}),W=pe({\u0275dir:pe}),Ie=pe({\u0275pipe:pe}),G=pe({\u0275mod:pe}),J=pe({\u0275fac:pe}),xe=pe({__NG_ELEMENT_ID__:pe});let Qe=0;function ht(s){return zn(()=>{const a={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===On.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||V,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Ht.Emulated,id:"c",styles:s.styles||V,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,p=s.features,v=s.pipes;return l.id+=Qe++,l.inputs=Sa(s.inputs,a),l.outputs=Sa(s.outputs),p&&p.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(hn):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(Et):null,l})}function hn(s){return Un(s)||function Sr(s){return s[W]||null}(s)}function Et(s){return function os(s){return s[Ie]||null}(s)}const Vn={};function Tr(s){return zn(()=>{const o={type:s.type,bootstrap:s.bootstrap||V,declarations:s.declarations||V,imports:s.imports||V,exports:s.exports||V,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Vn[s.id]=s.type),o})}function Sa(s,o){if(null==s)return vr;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=l,o&&(o[d]=p)}return a}const _u=ht;function Aa(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Un(s){return s[q]||null}function Bn(s,o){const a=s[G]||null;if(!a&&!0===o)throw new Error(`Type ${se(s)} does not have '\u0275mod' property.`);return a}function Br(s){return Array.isArray(s)&&"object"==typeof s[1]}function ji(s){return Array.isArray(s)&&!0===s[1]}function wu(s){return 0!=(8&s.flags)}function $c(s){return 2==(2&s.flags)}function $i(s){return 1==(1&s.flags)}function Hi(s){return null!==s.template}function Ml(s){return 0!=(512&s[2])}function wr(s,o){return s.hasOwnProperty(J)?s[J]:null}class to{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Gi(){return ko}function ko(s){return s.type.prototype.ngOnChanges&&(s.setInput=Oh),Yc}function Yc(){const s=no(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===vr)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Oh(s,o,a,l){const d=no(s)||function Fo(s,o){return s[Qc]=o}(s,{previous:vr,current:null}),p=d.current||(d.current={}),v=d.previous,w=this.declaredInputs[a],I=v[w];p[w]=new to(I&&I.currentValue,o,v===vr),s[l]=o}Gi.ngInherit=!0;const Qc="__ngSimpleChanges__";function no(s){return s[Qc]||null}let Vo;function Pl(s){Vo=s}function an(s){return!!s.listen}const Pa={createRenderer:(s,o)=>function qi(){return void 0!==Vo?Vo:"undefined"!=typeof document?document:void 0}()};function Qt(s){for(;Array.isArray(s);)s=s[0];return s}function Ns(s,o){return Qt(o[s])}function sr(s,o){return Qt(o[s.index])}function yn(s,o){return s.data[o]}function or(s,o){const a=o[s];return Br(a)?a:a[0]}function io(s){return 4==(4&s[2])}function us(s){return 128==(128&s[2])}function Si(s,o){return null==o?null:s[o]}function Wi(s){s[18]=0}function Uo(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const ft={lFrame:ed(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function La(){return ft.bindingsEnabled}function Ae(){return ft.lFrame.lView}function Lt(){return ft.lFrame.tView}function pn(){let s=jo();for(;null!==s&&64===s.type;)s=s.parent;return s}function jo(){return ft.lFrame.currentTNode}function ti(s,o){const a=ft.lFrame;a.currentTNode=s,a.isParent=o}function Va(){return ft.lFrame.isParent}function Ua(){return ft.isInCheckNoChangesMode}function Tu(s){ft.isInCheckNoChangesMode=s}function Ps(){return ft.lFrame.bindingIndex++}function jl(s,o){const a=ft.lFrame;a.bindingIndex=a.bindingRootIndex=s,ja(o)}function ja(s){ft.lFrame.currentDirectiveIndex=s}function $l(){return ft.lFrame.currentQueryIndex}function $a(s){ft.lFrame.currentQueryIndex=s}function Bp(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Hl(s,o,a){if(a&gt.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||a&gt.Host||(d=Bp(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,s=p}const l=ft.lFrame=Ha();return l.currentTNode=o,l.lView=s,!0}function Ho(s){const o=Ha(),a=s[1];ft.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Ha(){const s=ft.lFrame,o=null===s?null:s.child;return null===o?ed(s):o}function ed(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Go(){const s=ft.lFrame;return ft.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const td=Go;function qo(){const s=Go();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Kn(){return ft.lFrame.selectedIndex}function Zi(s){ft.lFrame.selectedIndex=s}function wn(){const s=ft.lFrame;return yn(s.tView,s.selectedIndex)}function rd(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const p=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:C,ngOnDestroy:x}=p;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),w&&((s.contentHooks||(s.contentHooks=[])).push(a,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,w)),I&&(s.viewHooks||(s.viewHooks=[])).push(-a,I),C&&((s.viewHooks||(s.viewHooks=[])).push(a,C),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,C)),null!=x&&(s.destroyHooks||(s.destroyHooks=[])).push(a,x)}}function Ga(s,o,a){Zn(s,o,3,a)}function cs(s,o,a,l){(3&s[2])===a&&Zn(s,o,a,l)}function zo(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function Zn(s,o,a,l){const p=null!=l?l:-1,v=o.length-1;let w=0;for(let I=void 0!==l?65535&s[18]:0;I<v;I++)if("number"==typeof o[I+1]){if(w=o[I],null!=l&&w>=l)break}else o[I]<0&&(s[18]+=65536),(w<p||-1==p)&&(Vh(s,a,o,I),s[18]=(4294901760&s[18])+I+2),I++}function Vh(s,o,a,l){const d=a[l]<0,p=a[l+1],w=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class Mu{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function et(s,o,a){const l=an(s);let d=0;for(;d<a.length;){const p=a[d];if("number"==typeof p){if(0!==p)break;d++;const v=a[d++],w=a[d++],I=a[d++];l?s.setAttribute(o,w,I,v):o.setAttributeNS(v,w,I)}else{const v=p,w=a[++d];ri(v)?l&&s.setProperty(o,v,w):l?s.setAttribute(o,v,w):o.setAttribute(v,w),d++}}return d}function ni(s){return 3===s||4===s||6===s}function ri(s){return 64===s.charCodeAt(0)}function Rn(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||Gl(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function Gl(s,o,a,l,d){let p=0,v=s.length;if(-1===o)v=-1;else for(;p<s.length;){const w=s[p++];if("number"==typeof w){if(w===o){v=-1;break}if(w>o){v=p-1;break}}}for(;p<s.length;){const w=s[p];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(s[p+1]=d));if(l===s[p+1])return void(s[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==v&&(s.splice(v,0,o),p=v+1),s.splice(p++,0,a),null!==l&&s.splice(p++,0,l),null!==d&&s.splice(p++,0,d)}function od(s){return-1!==s}function Yi(s){return 32767&s}function cn(s,o){let a=function ql(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let za=!0;function Mi(s){const o=za;return za=s,o}let ud=0;function bn(s,o){const a=Ko(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,Wo(l.data,s),Wo(o,null),Wo(l.blueprint,null));const d=Os(s,o),p=s.injectorIndex;if(od(d)){const v=Yi(d),w=cn(d,o),I=w[1].data;for(let C=0;C<8;C++)o[p+C]=w[v+C]|I[v+C]}return o[p+8]=d,p}function Wo(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Ko(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Os(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const p=d[1],v=p.type;if(l=2===v?p.declTNode:1===v?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function ar(s,o,a){!function zl(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(xe)&&(l=a[xe]),null==l&&(l=a[xe]=ud++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function ks(s,o,a){if(a&gt.Optional)return s;Ee(o,"NodeInjector")}function Zo(s,o,a,l){if(a&gt.Optional&&void 0===l&&(l=null),0==(a&(gt.Self|gt.Host))){const d=s[9],p=An(void 0);try{return d?d.get(o,l,a&gt.Optional):Qs(o,l,a&gt.Optional)}finally{An(p)}}return ks(l,o,a)}function Fs(s,o,a,l=gt.Default,d){if(null!==s){const p=function Wa(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(xe)?s[xe]:void 0;return"number"==typeof o?o>=0?255&o:uo:o}(a);if("function"==typeof p){if(!Hl(o,s,l))return l&gt.Host?ks(d,a,l):Zo(o,a,l,d);try{const v=p(l);if(null!=v||l&gt.Optional)return v;Ee(a)}finally{td()}}else if("number"==typeof p){let v=null,w=Ko(s,o),I=-1,C=l&gt.Host?o[16][6]:null;for((-1===w||l&gt.SkipSelf)&&(I=-1===w?Os(s,o):o[w+8],-1!==I&&Yn(l,!1)?(v=o[1],w=Yi(I),o=cn(I,o)):w=-1);-1!==w;){const x=o[1];if(Ls(p,w,x.data)){const O=Qo(w,o,a,v,l,C);if(O!==Yo)return O}I=o[w+8],-1!==I&&Yn(l,o[1].data[w+8]===C)&&Ls(p,w,o)?(v=x,w=Yi(I),o=cn(I,o)):w=-1}}}return Zo(o,a,l,d)}const Yo={};function uo(){return new lo(pn(),Ae())}function Qo(s,o,a,l,d,p){const v=o[1],w=v.data[s+8],x=Jo(w,v,a,null==l?$c(w)&&za:l!=v&&0!=(3&w.type),d&gt.Host&&p===w);return null!==x?Xo(o,v,x,w):Yo}function Jo(s,o,a,l,d){const p=s.providerIndexes,v=o.data,w=1048575&p,I=s.directiveStart,x=p>>20,B=d?w+x:s.directiveEnd;for(let Q=l?w:w+x;Q<B;Q++){const me=v[Q];if(Q<I&&a===me||Q>=I&&me.type===a)return Q}if(d){const Q=v[I];if(Q&&Hi(Q)&&Q.type===a)return I}return null}function Xo(s,o,a,l){let d=s[a];const p=o.data;if(function id(s){return s instanceof Mu}(d)){const v=d;v.resolving&&function Ge(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${s}${a}`)}(Ce(p[a]));const w=Mi(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?An(v.injectImpl):null;Hl(s,l,gt.Default);try{d=s[a]=v.factory(void 0,p,s,l),o.firstCreatePass&&a>=l.directiveStart&&function jp(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(l){const v=ko(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,p))}(a,p[a],o)}finally{null!==I&&An(I),Mi(w),v.resolving=!1,td()}}return d}function Ls(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Yn(s,o){return!(s&gt.Self||s&gt.Host&&o)}class lo{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Fs(this._tNode,this._lView,o,l,a)}}function Ou(s){return zn(()=>{const o=s.prototype.constructor,a=o[J]||In(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const p=d[J]||In(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function In(s){return He(s)?()=>{const o=In(te(s));return o&&o()}:wr(s)}function co(s){return function Pu(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const p=a[d];if(ni(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(pn(),s)}const ds="__parameters__";function Cn(s,o,a){return zn(()=>{const l=function si(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...p){if(this instanceof d)return l.apply(this,p),this;const v=new d(...p);return w.annotation=v,w;function w(I,C,x){const O=I.hasOwnProperty(ds)?I[ds]:Object.defineProperty(I,ds,{value:[]})[ds];for(;O.length<=x;)O.push(null);return(O[x]=O[x]||[]).push(v),I}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class gn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Yt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Hp=new gn("AnalyzeForEntryComponents");function oi(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),oi(l,o)):o!==s&&o.push(l)}return o}function $r(s,o){s.forEach(a=>Array.isArray(a)?$r(a,o):o(a))}function ta(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function po(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Qn(s,o,a){let l=Us(s,o);return l>=0?s[1|l]=a:(l=~l,function hs(s,o,a,l){let d=s.length;if(d==o)s.push(a,l);else if(1===d)s.push(l,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function Ya(s,o){const a=Us(s,o);if(a>=0)return s[1|a]}function Us(s,o){return function cd(s,o,a){let l=0,d=s.length>>a;for(;d!==l;){const p=l+(d-l>>1),v=s[p<<a];if(o===v)return p<<a;v>o?d=p:l=p+1}return~(d<<a)}(s,o,1)}const ra={},ia="__NG_DI_FLAG__",yo="ngTempTokenPath",D=/\n/gm,R="__source",L=pe({provide:String,useValue:pe});let Y;function ne(s){const o=Y;return Y=s,o}function ge(s,o=gt.Default){if(void 0===Y)throw new Ne(203,"");return null===Y?Qs(s,void 0,o):Y.get(s,o&gt.Optional?null:void 0,o)}function Le(s,o=gt.Default){return(function En(){return Qr}()||ge)(te(s),o)}const dt=Le;function jt(s){const o=[];for(let a=0;a<s.length;a++){const l=te(s[a]);if(Array.isArray(l)){if(0===l.length)throw new Ne(900,"");let d,p=gt.Default;for(let v=0;v<l.length;v++){const w=l[v],I=br(w);"number"==typeof I?-1===I?d=w.token:p|=I:d=w}o.push(Le(d,p))}else o.push(Le(l))}return o}function wt(s,o){return s[ia]=o,s.prototype[ia]=o,s}function br(s){return s[ia]}const Hr=wt(Cn("Inject",s=>({token:s})),-1),ai=wt(Cn("Optional"),8),li=wt(Cn("SkipSelf"),4);class md{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function oa(s){return s instanceof md?s.changingThisBreaksApplicationSecurity:s}const vd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,rg=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Gt=(()=>((Gt=Gt||{})[Gt.NONE=0]="NONE",Gt[Gt.HTML=1]="HTML",Gt[Gt.STYLE=2]="STYLE",Gt[Gt.SCRIPT=3]="SCRIPT",Gt[Gt.URL=4]="URL",Gt[Gt.RESOURCE_URL=5]="RESOURCE_URL",Gt))();function Wu(s){const o=function ua(){const s=Ae();return s&&s[12]}();return o?o.sanitize(Gt.URL,s)||"":function js(s,o){const a=function Xl(s){return s instanceof md&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?oa(s):function $s(s){return(s=String(s)).match(vd)||s.match(rg)?s:"unsafe:"+s}(he(s))}const Jh="__ngContext__";function ur(s,o){s[Jh]=o}function Id(s){const o=function nu(s){return s[Jh]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function di(s){return s.ngOriginalError}function jy(s,...o){s.error(...o)}class Cd{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function fg(s){return s&&s.ngErrorLogger||jy}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&di(o);for(;a&&di(a);)a=di(a);return a||null}}const Hy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Bt))();function gs(s){return s instanceof Function?s():s}var S=(()=>((S=S||{})[S.Important=1]="Important",S[S.DashCase=2]="DashCase",S))();function K(s,o){return undefined(s,o)}function Ke(s){const o=s[3];return ji(o)?o[3]:o}function Dn(s){return ic(s[13])}function fi(s){return ic(s[4])}function ic(s){for(;null!==s&&!ji(s);)s=s[4];return s}function la(s,o,a,l,d){if(null!=l){let p,v=!1;ji(l)?p=l:Br(l)&&(v=!0,l=l[0]);const w=Qt(l);0===s&&null!==a?null==d?Ky(o,a,w):ms(o,a,w,d||null,!0):1===s&&null!==a?ms(o,a,w,d||null,!0):2===s?function Jy(s,o,a){const l=lf(s,o);l&&function lC(s,o,a,l){an(s)?s.removeChild(o,a,l):o.removeChild(a)}(s,l,o,a)}(o,w,v):3===s&&o.destroyNode(w),null!=p&&function oE(s,o,a,l,d){const p=a[7];p!==Qt(a)&&la(o,s,l,p,d);for(let w=10;w<a.length;w++){const I=a[w];wg(I[1],I,s,o,l,p)}}(o,s,p,a,d)}}function Sd(s,o,a){if(an(s))return s.createElement(o,a);{const l=null!==a?function Nl(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?s.createElement(o):s.createElementNS(l,o)}}function J0(s,o){const a=s[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Uo(d,-1)),a.splice(l,1)}function qy(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&J0(d,l),o>0&&(s[a-1][4]=l[4]);const p=po(s,10+o);!function pi(s,o){wg(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=p[19];null!==v&&v.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function zy(s,o){if(!(256&o[2])){const a=o[11];an(a)&&a.destroyNode&&wg(s,o,a,3,null,null),function uf(s){let o=s[13];if(!o)return Wy(s[1],s);for(;o;){let a=null;if(Br(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)Br(o)&&Wy(o[1],o),o=o[3];null===o&&(o=s),Br(o)&&Wy(o[1],o),a=o&&o[4]}o=a}}(o)}}function Wy(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function eE(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Mu)){const p=a[l+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const w=d[p[v]],I=p[v+1];try{I.call(w)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function X0(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const v=a[p+1],w="function"==typeof v?v(o):Qt(o[v]),I=l[d=a[p+2]],C=a[p+3];"boolean"==typeof C?w.removeEventListener(a[p],I,C):C>=0?l[d=C]():l[d=-C].unsubscribe(),p+=2}else{const v=l[d=a[p+1]];a[p].call(v)}if(null!==l){for(let p=d+1;p<l.length;p++)l[p]();o[7]=null}}(s,o),1===o[1].type&&an(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&ji(o[3])){a!==o[3]&&J0(a,o);const l=o[19];null!==l&&l.detachView(s)}}}function vg(s,o,a){return function uC(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===Ht.None||d===Ht.Emulated)return null}return sr(l,a)}(s,o.parent,a)}function ms(s,o,a,l,d){an(s)?s.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function Ky(s,o,a){an(s)?s.appendChild(o,a):o.appendChild(a)}function tE(s,o,a,l,d){null!==l?ms(s,o,a,l,d):Ky(s,o,a)}function lf(s,o){return an(s)?s.parentNode(o):o.parentNode}let Zy=function rE(s,o,a){return 40&s.type?sr(s,a):null};function Eg(s,o,a,l){const d=vg(s,l,o),p=o[11],w=function nE(s,o,a){return Zy(s,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let I=0;I<a.length;I++)tE(p,d,a[I],w,!1);else tE(p,d,a,w,!1)}function Ad(s,o){if(null!==o){const a=o.type;if(3&a)return sr(o,s);if(4&a)return Qy(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return Ad(s,l);{const d=s[o.index];return ji(d)?Qy(-1,d):Qt(d)}}if(32&a)return K(o,s)()||Qt(s[o.index]);{const l=sE(s,o);return null!==l?Array.isArray(l)?l[0]:Ad(Ke(s[16]),l):Ad(s,o.next)}}return null}function sE(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Qy(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return Ad(l,d)}return o[7]}function Xy(s,o,a,l,d,p,v){for(;null!=a;){const w=l[a.index],I=a.type;if(v&&0===o&&(w&&ur(Qt(w),l),a.flags|=4),64!=(64&a.flags))if(8&I)Xy(s,o,a.child,l,d,p,!1),la(o,s,d,w,p);else if(32&I){const C=K(a,l);let x;for(;x=C();)la(o,s,d,x,p);la(o,s,d,w,p)}else 16&I?gi(s,o,l,a,d,p):la(o,s,d,w,p);a=v?a.projectionNext:a.next}}function wg(s,o,a,l,d,p){Xy(a,l,s.firstChild,o,d,p,!1)}function gi(s,o,a,l,d,p){const v=a[16],I=v[6].projection[l.projection];if(Array.isArray(I))for(let C=0;C<I.length;C++)la(o,s,d,I[C],p);else Xy(s,o,I,v[3],d,p,!0)}function Nn(s,o,a){an(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function bg(s,o,a){an(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function _e(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===l||s.charCodeAt(d+p)<=32)return d}a=d+1}}const St="ng-template";function Md(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==_e(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function e_(s){return 4===s.type&&s.value!==St}function aE(s,o,a){return o===(4!==s.type||a?s.value:St)}function fC(s,o,a){let l=4;const d=s.attrs||[],p=function pC(s){for(let o=0;o<s.length;o++)if(ni(s[o]))return o;return s.length}(d);let v=!1;for(let w=0;w<o.length;w++){const I=o[w];if("number"!=typeof I){if(!v)if(4&l){if(l=2|1&l,""!==I&&!aE(s,I,a)||""===I&&1===o.length){if(bo(l))return!1;v=!0}}else{const C=8&l?I:o[++w];if(8&l&&null!==s.attrs){if(!Md(s.attrs,C,a)){if(bo(l))return!1;v=!0}continue}const O=jn(8&l?"class":I,d,e_(s),a);if(-1===O){if(bo(l))return!1;v=!0;continue}if(""!==C){let B;B=O>p?"":d[O+1].toLowerCase();const Q=8&l?B:null;if(Q&&-1!==_e(Q,C,0)||2&l&&C!==B){if(bo(l))return!1;v=!0}}}}else{if(!v&&!bo(l)&&!bo(I))return!1;if(v&&bo(I))continue;v=!1,l=I|1&l}}return bo(l)||v}function bo(s){return 0==(1&s)}function jn(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let p=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function gC(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function Ig(s,o,a=!1){for(let l=0;l<o.length;l++)if(fC(s,o[l],a))return!0;return!1}function uE(s,o){return s?":not("+o.trim()+")":o}function yC(s){let o=s[0],a=1,l=2,d="",p=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&l){const w=s[++a];d+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!bo(v)&&(o+=uE(p,d),d=""),l=v,p=p||!bo(l);a++}return""!==d&&(o+=uE(p,d)),o}const kt={};function cE(s){dE(Lt(),Ae(),Kn()+s,Ua())}function dE(s,o,a,l){if(!l)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Ga(o,p,a)}else{const p=s.preOrderHooks;null!==p&&cs(o,p,0,a)}Zi(a)}function Cg(s,o){return s<<17|o<<2}function Io(s){return s>>17&32767}function Dg(s){return 2|s}function ys(s){return(131068&s)>>2}function ac(s,o){return-131069&s|o<<2}function r_(s){return 1|s}function wE(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],p=a[l+1];if(-1!==p){const v=s.data[p];$a(d),v.contentQueries(2,o[p],p)}}}function lc(s,o,a,l,d,p,v,w,I,C){const x=o.blueprint.slice();return x[0]=d,x[2]=140|l,Wi(x),x[3]=x[15]=s,x[8]=a,x[10]=v||s&&s[10],x[11]=w||s&&s[11],x[12]=I||s&&s[12]||null,x[9]=C||s&&s[9]||null,x[6]=p,x[16]=2==o.type?s[16]:x,x}function cc(s,o,a,l,d){let p=s.data[o];if(null===p)p=function Rg(s,o,a,l,d){const p=jo(),v=Va(),I=s.data[o]=function xC(s,o,a,l,d,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=I),null!==p&&(v?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(s,o,a,l,d),function Bl(){return ft.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=d;const v=function so(){const s=ft.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return ti(p,!0),p}function Rd(s,o,a,l){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function ff(s,o,a){Ho(o);try{const l=s.viewQuery;null!==l&&kg(1,l,a);const d=s.template;null!==d&&pf(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&wE(s,o),s.staticViewQueries&&kg(2,s.viewQuery,a);const p=s.components;null!==p&&function AC(s,o){for(let a=0;a<o.length;a++)HC(s,o[a])}(o,p)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,qo()}}function Ri(s,o,a,l){const d=o[2];if(256==(256&d))return;Ho(o);const p=Ua();try{Wi(o),function Ba(s){return ft.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&pf(s,o,a,2,l);const v=3==(3&d);if(!p)if(v){const C=s.preOrderCheckHooks;null!==C&&Ga(o,C,null)}else{const C=s.preOrderHooks;null!==C&&cs(o,C,0,null),zo(o,0)}if(function xE(s){for(let o=Dn(s);null!==o;o=fi(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],p=d[3];0==(1024&d[2])&&Uo(p,1),d[2]|=1024}}}(o),function p_(s){for(let o=Dn(s);null!==o;o=fi(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];us(l)&&Ri(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&wE(s,o),!p)if(v){const C=s.contentCheckHooks;null!==C&&Ga(o,C)}else{const C=s.contentHooks;null!==C&&cs(o,C,1),zo(o,1)}!function SC(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Zi(~d);else{const p=d,v=a[++l],w=a[++l];jl(v,p),w(2,o[p])}}}finally{Zi(-1)}}(s,o);const w=s.components;null!==w&&function bE(s,o){for(let a=0;a<o.length;a++)$C(s,o[a])}(o,w);const I=s.viewQuery;if(null!==I&&kg(2,I,l),!p)if(v){const C=s.viewCheckHooks;null!==C&&Ga(o,C)}else{const C=s.viewHooks;null!==C&&cs(o,C,2),zo(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Uo(o[3],-1))}finally{qo()}}function ha(s,o,a,l){const d=o[10],p=!Ua(),v=io(o);try{p&&!v&&d.begin&&d.begin(),v&&ff(s,o,l),Ri(s,o,a,l)}finally{p&&!v&&d.end&&d.end()}}function pf(s,o,a,l,d){const p=Kn(),v=2&l;try{Zi(-1),v&&o.length>20&&dE(s,o,20,Ua()),a(l,d)}finally{Zi(p)}}function a_(s,o,a){!La()||(function OC(s,o,a,l){const d=a.directiveStart,p=a.directiveEnd;s.firstCreatePass||bn(a,o),ur(l,o);const v=a.initialInputs;for(let w=d;w<p;w++){const I=s.data[w],C=Hi(I);C&&UC(o,a,I);const x=Xo(o,s,w,a);ur(x,o),null!==v&&BC(0,w-d,x,I,0,v),C&&(or(a.index,o)[8]=x)}}(s,o,a,sr(a,o)),128==(128&a.flags)&&function kC(s,o,a){const l=a.directiveStart,d=a.directiveEnd,v=a.index,w=function Au(){return ft.lFrame.currentDirectiveIndex}();try{Zi(v);for(let I=l;I<d;I++){const C=s.data[I],x=o[I];ja(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&qs(C,x)}}finally{Zi(-1),ja(w)}}(s,o,a))}function Xu(s,o,a=sr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let p=0;p<l.length;p+=2){const v=l[p+1],w=-1===v?a(o,s):s[v];s[d++]=w}}}function Nd(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=gf(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function gf(s,o,a,l,d,p,v,w,I,C){const x=20+l,O=x+d,B=function MC(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:kt);return a}(x,O),Q="function"==typeof C?C():C;return B[1]={type:s,blueprint:B,template:a,queries:null,viewQuery:w,declTNode:o,data:B.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:Q,incompleteFirstPass:!1}}function DE(s,o,a,l){const d=KC(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&ZC(s).push(l,d.length-1))}function l_(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function d_(s,o,a,l){let d=!1;if(La()){const p=function FC(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let p=0;p<l.length;p++){const v=l[p];Ig(a,v.selectors,!1)&&(d||(d=[]),ar(bn(a,o),s,v.type),Hi(v)?(ME(s,a),d.unshift(v)):d.push(v))}return d}(s,o,a),v=null===l?null:{"":-1};if(null!==p){d=!0,h_(a,s.data.length,p.length);for(let x=0;x<p.length;x++){const O=p[x];O.providersResolver&&O.providersResolver(O)}let w=!1,I=!1,C=Rd(s,o,p.length,null);for(let x=0;x<p.length;x++){const O=p[x];a.mergedAttrs=Rn(a.mergedAttrs,O.hostAttrs),el(s,a,o,C,O),VC(C,O,v),null!==O.contentQueries&&(a.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(a.flags|=128);const B=O.type.prototype;!w&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),w=!0),!I&&(B.ngOnChanges||B.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),I=!0),C++}!function TE(s,o){const l=o.directiveEnd,d=s.data,p=o.attrs,v=[];let w=null,I=null;for(let C=o.directiveStart;C<l;C++){const x=d[C],O=x.inputs,B=null===p||e_(o)?null:jC(O,p);v.push(B),w=l_(O,C,w),I=l_(x.outputs,C,I)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=w,o.outputs=I}(s,a)}v&&function LC(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new Ne(-301,!1);l.push(o[d],p)}}}(a,l,v)}return a.mergedAttrs=Rn(a.mergedAttrs,a.attrs),d}function dc(s,o,a,l,d,p){const v=p.hostBindings;if(v){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const I=~o.index;(function AE(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(w)!=I&&w.push(I),w.push(l,d,v)}}function qs(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function ME(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function VC(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;Hi(o)&&(a[""]=s)}}function h_(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function el(s,o,a,l,d){s.data[l]=d;const p=d.factory||(d.factory=wr(d.type)),v=new Mu(p,Hi(d),null);s.blueprint[l]=v,a[l]=v,dc(s,o,0,l,Rd(s,a,d.hostVars,kt),d)}function UC(s,o,a){const l=sr(o,s),d=Nd(a),p=s[10],v=mf(s,lc(s,d,null,a.onPush?64:16,l,o,p,p.createRenderer(l,a),null,null));s[o.index]=v}function fa(s,o,a,l,d,p){const v=sr(s,o);!function Pg(s,o,a,l,d,p,v){if(null==p)an(s)?s.removeAttribute(o,d,a):o.removeAttribute(d);else{const w=null==v?he(p):v(p,l||"",d);an(s)?s.setAttribute(o,d,w,a):a?o.setAttributeNS(a,d,w):o.setAttribute(d,w)}}(o[11],v,p,s.value,a,l,d)}function BC(s,o,a,l,d,p){const v=p[o];if(null!==v){const w=l.setInput;for(let I=0;I<v.length;){const C=v[I++],x=v[I++],O=v[I++];null!==w?l.setInput(a,O,C,x):a[x]=O}}}function jC(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function f_(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function $C(s,o){const a=or(o,s);if(us(a)){const l=a[1];80&a[2]?Ri(l,a,l.template,a[8]):a[5]>0&&g_(a)}}function g_(s){for(let l=Dn(s);null!==l;l=fi(l))for(let d=10;d<l.length;d++){const p=l[d];if(1024&p[2]){const v=p[1];Ri(v,p,v.template,p[8])}else p[5]>0&&g_(p)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=or(a[l],s);us(d)&&d[5]>0&&g_(d)}}function HC(s,o){const a=or(o,s),l=a[1];(function GC(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),ff(l,a,a[8])}function mf(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function m_(s){for(;s;){s[2]|=64;const o=Ke(s);if(Ml(s)&&!o)return s;s=o}return null}function y_(s,o,a){const l=o[10];l.begin&&l.begin();try{Ri(s,o,s.template,a)}catch(d){throw NE(o,d),d}finally{l.end&&l.end()}}function __(s){!function Og(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=Id(a),d=l[1];ha(d,l,d.template,a)}}(s[8])}function kg(s,o,a){$a(0),o(s,a)}const RE=(()=>Promise.resolve(null))();function KC(s){return s[7]||(s[7]=[])}function ZC(s){return s.cleanup||(s.cleanup=[])}function NE(s,o){const a=s[9],l=a?a.get(Cd,null):null;l&&l.handleError(o)}function PE(s,o,a,l,d){for(let p=0;p<a.length;){const v=a[p++],w=a[p++],I=o[v],C=s.data[v];null!==C.setInput?C.setInput(I,d,l,w):I[w]=d}}function ou(s,o,a){const l=Ns(o,s);!function Td(s,o,a){an(s)?s.setValue(o,a):o.textContent=a}(s[11],l,a)}function Fg(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const w=o[v];"number"==typeof w?p=w:1==p?d=de(d,w):2==p&&(l=de(l,w+": "+o[++v]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}const Lg=new gn("INJECTOR",-1);class OE{get(o,a=ra){if(a===ra){const l=new Error(`NullInjectorError: No provider for ${se(o)}!`);throw l.name="NullInjectorError",l}return a}}const kE=new gn("Set Injector scope."),yf={},FM={};let FE;function LE(){return void 0===FE&&(FE=new OE),FE}function VE(s,o=null,a=null,l){const d=_f(s,o,a,l);return d._resolveInjectorDefTypes(),d}function _f(s,o=null,a=null,l){return new UE(s,a,o||LE(),l)}class UE{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&$r(a,w=>this.processProvider(w,o,a)),$r([o],w=>this.processInjectorType(w,[],p)),this.records.set(Lg,Pd(void 0,this));const v=this.records.get(kE);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:se(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=ra,l=gt.Default){this.assertNotDestroyed();const d=ne(this),p=An(void 0);try{if(!(l&gt.SkipSelf)){let w=this.records.get(o);if(void 0===w){const I=function LM(s){return"function"==typeof s||"object"==typeof s&&s instanceof gn}(o)&&Vt(o);w=I&&this.injectableDefInScope(I)?Pd(Vg(o),yf):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(l&gt.Self?LE():this.parent).get(o,a=l&gt.Optional&&a===ra?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[yo]=v[yo]||[]).unshift(se(o)),d)throw v;return function Xn(s,o,a,l){const d=s[yo];throw o[R]&&d.unshift(o[R]),s.message=function fs(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=se(o);if(Array.isArray(o))d=o.map(se).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let w=o[v];p.push(v+":"+("string"==typeof w?JSON.stringify(w):se(w)))}d=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(D,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[yo]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{An(p),ne(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(se(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processInjectorType(o,a,l){if(!(o=te(o)))return!1;let d=Dr(o);const p=null==d&&o.ngModule||void 0,v=void 0===p?o:p,w=-1!==l.indexOf(v);if(void 0!==p&&(d=Dr(p)),null==d)return!1;if(null!=d.imports&&!w){let x;l.push(v);try{$r(d.imports,O=>{this.processInjectorType(O,a,l)&&(void 0===x&&(x=[]),x.push(O))})}finally{}if(void 0!==x)for(let O=0;O<x.length;O++){const{ngModule:B,providers:Q}=x[O];$r(Q,me=>this.processProvider(me,B,Q||V))}}this.injectorDefTypes.add(v);const I=wr(v)||(()=>new v);this.records.set(v,Pd(I,yf));const C=d.providers;if(null!=C&&!w){const x=o;$r(C,O=>this.processProvider(O,x,C))}return void 0!==p&&void 0!==o.providers}processProvider(o,a,l){let d=Od(o=te(o))?o:te(o&&o.provide);const p=function BE(s,o,a){return jE(s)?Pd(void 0,s.useValue):Pd(E_(s),yf)}(o);if(Od(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=Pd(void 0,yf,!0),v.factory=()=>jt(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,p)}hydrate(o,a){return a.value===yf&&(a.value=FM,a.value=a.factory()),"object"==typeof a.value&&a.value&&function tD(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=te(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Vg(s){const o=Vt(s),a=null!==o?o.factory:wr(s);if(null!==a)return a;if(s instanceof gn)throw new Ne(204,!1);if(s instanceof Function)return function au(s){const o=s.length;if(o>0)throw function go(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new Ne(204,!1);const a=function Zr(s){const o=s&&(s[Li]||s[Yr]);if(o){const a=function mr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Ne(204,!1)}function E_(s,o,a){let l;if(Od(s)){const d=te(s);return wr(d)||Vg(d)}if(jE(s))l=()=>te(s.useValue);else if(function eD(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...jt(s.deps||[]));else if(function XC(s){return!(!s||!s.useExisting)}(s))l=()=>Le(te(s.useExisting));else{const d=te(s&&(s.useClass||s.provide));if(!function Ug(s){return!!s.deps}(s))return wr(d)||Vg(d);l=()=>new d(...jt(s.deps))}return l}function Pd(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function jE(s){return null!==s&&"object"==typeof s&&L in s}function Od(s){return"function"==typeof s}let Co=(()=>{class s{static create(a,l){var d;if(Array.isArray(a))return VE({name:""},l,a,"");{const p=null!==(d=a.name)&&void 0!==d?d:"";return VE({name:p},a.parent,a.providers,p)}}}return s.THROW_IF_NOT_FOUND=ra,s.NULL=new OE,s.\u0275prov=Yt({token:s,providedIn:"any",factory:()=>Le(Lg)}),s.__NG_ELEMENT_ID__=-1,s})();function aD(s,o){rd(Id(s)[1],pn())}function kd(s){let o=function mi(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let d;if(Hi(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ne(903,"");d=o.\u0275dir}if(d){if(a){l.push(d);const v=s;v.inputs=I_(s.inputs),v.declaredInputs=I_(s.declaredInputs),v.outputs=I_(s.outputs);const w=d.hostBindings;w&&D_(s,w);const I=d.viewQuery,C=d.contentQueries;if(I&&C_(s,I),C&&Bg(s,C),ue(s.inputs,d.inputs),ue(s.declaredInputs,d.declaredInputs),ue(s.outputs,d.outputs),Hi(d)&&d.data.animation){const x=s.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let v=0;v<p.length;v++){const w=p[v];w&&w.ngInherit&&w(s),w===kd&&(a=!1)}}o=Object.getPrototypeOf(o)}!function KE(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Rn(d.hostAttrs,a=Rn(a,d.hostAttrs))}}(l)}function I_(s){return s===vr?{}:s===V?[]:s}function C_(s,o){const a=s.viewQuery;s.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function Bg(s,o){const a=s.contentQueries;s.contentQueries=a?(l,d,p)=>{o(l,d,p),a(l,d,p)}:o}function D_(s,o){const a=s.hostBindings;s.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let jg=null;function Fd(){if(!jg){const s=Bt.Symbol;if(s&&s.iterator)jg=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(jg=l)}}}return jg}function uu(s){return!!Hg(s)&&(Array.isArray(s)||!(s instanceof Map)&&Fd()in s)}function Hg(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function yi(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function Gg(s,o,a,l){const d=Ae();return yi(d,Ps(),o)&&(Lt(),fa(wn(),d,s,o,a,l)),Gg}function ew(s,o,a,l,d,p,v,w){const I=Ae(),C=Lt(),x=s+20,O=C.firstCreatePass?function XE(s,o,a,l,d,p,v,w,I){const C=o.consts,x=cc(o,s,4,v||null,Si(C,w));d_(o,a,x,Si(C,I)),rd(o,x);const O=x.tViews=gf(2,x,l,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,C);return null!==o.queries&&(o.queries.template(o,x),O.queries=o.queries.embeddedTView(x)),x}(x,C,I,o,a,l,d,p,v):C.data[x];ti(O,!1);const B=I[11].createComment("");Eg(C,I,B,O),ur(B,I),mf(I,I[x]=f_(B,I,B,O)),$i(O)&&a_(C,I,O),null!=v&&Xu(I,O,w)}function Jg(s,o=gt.Default){const a=Ae();return null===a?Le(s,o):Fs(pn(),a,te(s),o)}function dw(){throw new Error("invalid")}function hw(s,o,a){const l=Ae();return yi(l,Ps(),o)&&function Ni(s,o,a,l,d,p,v,w){const I=sr(o,a);let x,C=o.inputs;!w&&null!=C&&(x=C[l])?(PE(s,a,x,l,d),$c(o)&&function RC(s,o){const a=or(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function Ng(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,an(p)?p.setProperty(I,l,d):ri(l)||(I.setProperty?I.setProperty(l,d):I[l]=d))}(Lt(),wn(),l,s,o,l[11],a,!1),hw}function fw(s,o,a,l,d){const v=d?"class":"style";PE(s,a,o.inputs[v],v,l)}function O_(s,o,a,l){const d=Ae(),p=Lt(),v=20+s,w=d[11],I=d[v]=Sd(w,o,function nd(){return ft.lFrame.currentNamespace}()),C=p.firstCreatePass?function QM(s,o,a,l,d,p,v){const w=o.consts,C=cc(o,s,2,d,Si(w,p));return d_(o,a,C,Si(w,v)),null!==C.attrs&&Fg(C,C.attrs,!1),null!==C.mergedAttrs&&Fg(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(v,p,d,0,o,a,l):p.data[v];ti(C,!0);const x=C.mergedAttrs;null!==x&&et(w,I,x);const O=C.classes;null!==O&&bg(w,I,O);const B=C.styles;return null!==B&&Nn(w,I,B),64!=(64&C.flags)&&Eg(p,d,I,C),0===function Cu(){return ft.lFrame.elementDepthCount}()&&ur(I,d),function Fa(){ft.lFrame.elementDepthCount++}(),$i(C)&&(a_(p,d,C),function IE(s,o,a){if(wu(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const v=s.data[p];v.contentQueries&&v.contentQueries(1,a[p],p)}}}(p,C,d)),null!==l&&Xu(d,C),O_}function k_(){let s=pn();Va()?function Ul(){ft.lFrame.isParent=!1}():(s=s.parent,ti(s,!1));const o=s;!function kl(){ft.lFrame.elementDepthCount--}();const a=Lt();return a.firstCreatePass&&(rd(a,s),wu(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function sd(s){return 0!=(16&s.flags)}(o)&&fw(a,o,Ae(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function $p(s){return 0!=(32&s.flags)}(o)&&fw(a,o,Ae(),o.stylesWithoutHost,!1),k_}function Xg(s,o,a,l){return O_(s,o,a,l),k_(),Xg}function L_(s){return!!s&&"function"==typeof s.then}function V_(s){return!!s&&"function"==typeof s.subscribe}const AD=V_;function U_(s,o,a,l){const d=Ae(),p=Lt(),v=pn();return function yw(s,o,a,l,d,p,v,w){const I=$i(l),x=s.firstCreatePass&&ZC(s),O=o[8],B=KC(o);let Q=!0;if(3&l.type||w){const Ve=sr(l,o),tt=w?w(Ve):Ve,Te=B.length,pt=w?yt=>w(Qt(yt[l.index])):l.index;if(an(a)){let yt=null;if(!w&&I&&(yt=function B_(s,o,a,l){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const v=d[p];if(v===a&&d[p+1]===l){const w=o[7],I=d[p+2];return w.length>I?w[I]:null}"string"==typeof v&&(p+=2)}return null}(s,o,d,l.index)),null!==yt)(yt.__ngLastListenerFn__||yt).__ngNextListenerFn__=p,yt.__ngLastListenerFn__=p,Q=!1;else{p=vw(l,o,O,p,!1);const en=a.listen(tt,d,p);B.push(p,en),x&&x.push(d,pt,Te,Te+1)}}else p=vw(l,o,O,p,!0),tt.addEventListener(d,p,v),B.push(p),x&&x.push(d,pt,Te,v)}else p=vw(l,o,O,p,!1);const me=l.outputs;let Fe;if(Q&&null!==me&&(Fe=me[d])){const Ve=Fe.length;if(Ve)for(let tt=0;tt<Ve;tt+=2){const Fi=o[Fe[tt]][Fe[tt+1]].subscribe(p),pu=B.length;B.push(p,Fi),x&&x.push(d,l.index,pu,-(pu+1))}}}(p,d,d[11],v,s,o,!!a,l),U_}function _w(s,o,a,l){try{return!1!==a(l)}catch(d){return NE(s,d),!1}}function vw(s,o,a,l,d){return function p(v){if(v===Function)return l;const w=2&s.flags?or(s.index,o):o;0==(32&o[2])&&m_(w);let I=_w(o,0,l,v),C=p.__ngNextListenerFn__;for(;C;)I=_w(o,0,C,v)&&I,C=C.__ngNextListenerFn__;return d&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function Ew(s=1){return function Ki(s){return(ft.lFrame.contextLView=function Fh(s,o){for(;s>0;)o=o[15],s--;return o}(s,ft.lFrame.contextLView))[8]}(s)}function Dw(s,o,a,l,d){const p=s[a+1],v=null===o;let w=l?Io(p):ys(p),I=!1;for(;0!==w&&(!1===I||v);){const x=s[w+1];MD(s[w],o)&&(I=!0,s[w+1]=l?r_(x):Dg(x)),w=l?Io(x):ys(x)}I&&(s[a+1]=l?Dg(p):r_(p))}function MD(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Us(s,o)>=0}function Df(s,o){return function _s(s,o,a,l){const d=Ae(),p=Lt(),v=function Ai(s){const o=ft.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}(2);p.firstUpdatePass&&function Z_(s,o,a,l){const d=s.data;if(null===d[a+1]){const p=d[Kn()],v=function Aw(s,o){return o>=s.expandoStartIndex}(s,a);(function Gd(s,o){return 0!=(s.flags&(o?16:32))})(p,l)&&null===o&&!v&&(o=!1),o=function im(s,o,a,l){const d=function $o(s){const o=ft.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=Tf(a=X_(null,s,o,a,l),o.attrs,l),p=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(a=X_(d,s,o,a,l),null===p){let I=function Y_(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==ys(l))return s[Io(l)]}(s,o,l);void 0!==I&&Array.isArray(I)&&(I=X_(null,s,o,I[1],l),I=Tf(I,o.attrs,l),function Q_(s,o,a,l){s[Io(a?o.classBindings:o.styleBindings)]=l}(s,o,l,I))}else p=function J_(s,o,a){let l;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)l=Tf(l,s[p].hostAttrs,a);return Tf(l,o.attrs,a)}(s,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,l),function qr(s,o,a,l,d,p){let v=p?o.classBindings:o.styleBindings,w=Io(v),I=ys(v);s[l]=a;let x,C=!1;if(Array.isArray(a)){const O=a;x=O[1],(null===x||Us(O,x)>0)&&(C=!0)}else x=a;if(d)if(0!==I){const B=Io(s[w+1]);s[l+1]=Cg(B,w),0!==B&&(s[B+1]=ac(s[B+1],l)),s[w+1]=function hE(s,o){return 131071&s|o<<17}(s[w+1],l)}else s[l+1]=Cg(w,0),0!==w&&(s[w+1]=ac(s[w+1],l)),w=l;else s[l+1]=Cg(I,0),0===w?w=l:s[I+1]=ac(s[I+1],l),I=l;C&&(s[l+1]=Dg(s[l+1])),Dw(s,x,l,!0),Dw(s,x,l,!1),function sl(s,o,a,l,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Us(p,o)>=0&&(a[l+1]=r_(a[l+1]))}(o,x,s,l,p),v=Cg(w,I),p?o.classBindings=v:o.styleBindings=v}(d,p,o,a,v,l)}}(p,s,v,l),o!==kt&&yi(d,v,o)&&function Mw(s,o,a,l,d,p,v,w){if(!(3&o.type))return;const I=s.data,C=I[w+1];al(function Gr(s){return 1==(1&s)}(C)?zr(I,o,a,d,ys(C),v):void 0)||(al(p)||function oc(s){return 2==(2&s)}(C)&&(p=zr(I,null,a,d,w,v)),function hC(s,o,a,l,d){const p=an(s);if(o)d?p?s.addClass(a,l):a.classList.add(l):p?s.removeClass(a,l):a.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:S.DashCase;if(null==d)p?s.removeStyle(a,l,v):a.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),v|=S.Important),p?s.setStyle(a,l,d,v):a.style.setProperty(l,d,w?"important":"")}}}(l,v,Ns(Kn(),a),d,p))}(p,p.data[Kn()],d,d[11],s,d[v+1]=function OD(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=se(oa(s)))),s}(o,a),l,v)}(s,o,null,!0),Df}function X_(s,o,a,l,d){let p=null;const v=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<v&&(p=o[w],l=Tf(l,p.hostAttrs,d),p!==s);)w++;return null!==s&&(a.directiveStylingLast=w),l}function Tf(s,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const v=o[p];"number"==typeof v?d=v:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Qn(s,v,!!a||o[++p]))}return void 0===s?null:s}function zr(s,o,a,l,d,p){const v=null===o;let w;for(;d>0;){const I=s[d],C=Array.isArray(I),x=C?I[1]:I,O=null===x;let B=a[d+1];B===kt&&(B=O?V:void 0);let Q=O?Ya(B,l):x===l?B:void 0;if(C&&!al(Q)&&(Q=Ya(I,l)),al(Q)&&(w=Q,v))return w;const me=s[d+1];d=v?Io(me):ys(me)}if(null!==o){let I=p?o.residualClasses:o.residualStyles;null!=I&&(w=Ya(I,l))}return w}function al(s){return void 0!==s}function xw(s,o=""){const a=Ae(),l=Lt(),d=s+20,p=l.firstCreatePass?cc(l,d,1,o,null):l.data[d],v=a[d]=function Dd(s,o){return an(s)?s.createText(o):s.createTextNode(o)}(a[11],o);Eg(l,a,v,p),ti(p,!1)}function nv(s){return qd("",s,""),nv}function qd(s,o,a){const l=Ae(),d=function fc(s,o,a,l){return yi(s,Ps(),a)?o+he(a)+l:kt}(l,s,o,a);return d!==kt&&ou(l,Kn(),d),qd}const ul=void 0;var Bw=["en",[["a","p"],["AM","PM"],ul],[["AM","PM"],ul,ul],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ul,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ul,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ul,"{1} 'at' {0}",ul],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Uw(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let cu={};function fv(s){const o=function pm(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=$w(o);if(a)return a;const l=o.split("-")[0];if(a=$w(l),a)return a;if("en"===l)return Bw;throw new Error(`Missing locale data for the locale "${s}".`)}function jw(s){return fv(s)[_t.PluralCase]}function $w(s){return s in cu||(cu[s]=Bt.ng&&Bt.ng.common&&Bt.ng.common.locales&&Bt.ng.common.locales[s]),cu[s]}var _t=(()=>((_t=_t||{})[_t.LocaleId=0]="LocaleId",_t[_t.DayPeriodsFormat=1]="DayPeriodsFormat",_t[_t.DayPeriodsStandalone=2]="DayPeriodsStandalone",_t[_t.DaysFormat=3]="DaysFormat",_t[_t.DaysStandalone=4]="DaysStandalone",_t[_t.MonthsFormat=5]="MonthsFormat",_t[_t.MonthsStandalone=6]="MonthsStandalone",_t[_t.Eras=7]="Eras",_t[_t.FirstDayOfWeek=8]="FirstDayOfWeek",_t[_t.WeekendRange=9]="WeekendRange",_t[_t.DateFormat=10]="DateFormat",_t[_t.TimeFormat=11]="TimeFormat",_t[_t.DateTimeFormat=12]="DateTimeFormat",_t[_t.NumberSymbols=13]="NumberSymbols",_t[_t.NumberFormats=14]="NumberFormats",_t[_t.CurrencyCode=15]="CurrencyCode",_t[_t.CurrencySymbol=16]="CurrencySymbol",_t[_t.CurrencyName=17]="CurrencyName",_t[_t.Currencies=18]="Currencies",_t[_t.Directionality=19]="Directionality",_t[_t.PluralCase=20]="PluralCase",_t[_t.ExtraData=21]="ExtraData",_t))();const Rf="en-US";let gm=Rf;function Sm(s,o,a,l,d){if(s=te(s),Array.isArray(s))for(let p=0;p<s.length;p++)Sm(s[p],o,a,l,d);else{const p=Lt(),v=Ae();let w=Od(s)?s:te(s.provide),I=E_(s);const C=pn(),x=1048575&C.providerIndexes,O=C.directiveStart,B=C.providerIndexes>>20;if(Od(s)||!s.multi){const Q=new Mu(I,d,Jg),me=Xd(w,o,d?x:x+B,O);-1===me?(ar(bn(C,v),p,w),Am(p,s,o.length),o.push(w),C.directiveStart++,C.directiveEnd++,d&&(C.providerIndexes+=1048576),a.push(Q),v.push(Q)):(a[me]=Q,v[me]=Q)}else{const Q=Xd(w,o,x+B,O),me=Xd(w,o,x,x+B),Fe=Q>=0&&a[Q],Ve=me>=0&&a[me];if(d&&!Ve||!d&&!Fe){ar(bn(C,v),p,w);const tt=function XD(s,o,a,l,d){const p=new Mu(s,a,Jg);return p.multi=[],p.index=o,p.componentProviders=0,xv(p,d,l&&!a),p}(d?du:ab,a.length,d,l,I);!d&&Ve&&(a[me].providerFactory=tt),Am(p,s,o.length,0),o.push(w),C.directiveStart++,C.directiveEnd++,d&&(C.providerIndexes+=1048576),a.push(tt),v.push(tt)}else Am(p,s,Q>-1?Q:me,xv(a[d?me:Q],I,!d&&l));!d&&l&&Ve&&a[me].componentProviders++}}}function Am(s,o,a,l){const d=Od(o),p=function $E(s){return!!s.useClass}(o);if(d||p){const I=(p?te(o.useClass):o).prototype.ngOnDestroy;if(I){const C=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const x=C.indexOf(a);-1===x?C.push(a,[l,I]):C[x+1].push(l,I)}else C.push(a,I)}}}function xv(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function Xd(s,o,a,l){for(let d=a;d<l;d++)if(o[d]===s)return d;return-1}function ab(s,o,a,l){return Mm(this.multi,[])}function du(s,o,a,l){const d=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=Xo(a,a[1],this.providerFactory.index,l);p=w.slice(0,v),Mm(d,p);for(let I=v;I<w.length;I++)p.push(w[I])}else p=[],Mm(d,p);return p}function Mm(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function xm(s,o=[]){return a=>{a.providersResolver=(l,d)=>function JD(s,o,a){const l=Lt();if(l.firstCreatePass){const d=Hi(s);Sm(a,l.data,l.blueprint,d,!0),Sm(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class Rv{}class Pv{resolveComponentFactory(o){throw function Nv(s){const o=Error(`No component factory found for ${se(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let vc=(()=>{class s{}return s.NULL=new Pv,s})();function tT(){return Ec(pn(),Ae())}function Ec(s,o){return new hu(sr(s,o))}let hu=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=tT,s})();function ub(s){return s instanceof hu?s.nativeElement:s}class Rm{}let Ov=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Nm(){const s=Ae(),a=or(pn().index,s);return function lb(s){return s[11]}(Br(a)?a:s)}(),s})(),cb=(()=>{class s{}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:()=>null}),s})();class kv{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const pl=new kv("13.2.7"),Pm={};function Wf(s,o,a,l,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&l.push(Qt(p)),ji(p))for(let w=10;w<p.length;w++){const I=p[w],C=I[1].firstChild;null!==C&&Wf(I[1],I,C,l)}const v=a.type;if(8&v)Wf(s,o,a.child,l);else if(32&v){const w=K(a,o);let I;for(;I=w();)l.push(I)}else if(16&v){const w=sE(o,a);if(Array.isArray(w))l.push(...w);else{const I=Ke(o[16]);Wf(I[1],I,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class eh{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Wf(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ji(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(qy(o,l),po(a,l))}this._attachedToViewContainer=!1}zy(this._lView[1],this._lView)}onDestroy(o){DE(this._lView[1],this._lView,null,o)}markForCheck(){m_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){y_(this._lView[1],this._lView,this.context)}checkNoChanges(){!function zC(s,o,a){Tu(!0);try{y_(s,o,a)}finally{Tu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function af(s,o){wg(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ne(902,"");this._appRef=o}}class db extends eh{constructor(o){super(o),this._view=o}detectChanges(){__(this._view)}checkNoChanges(){!function v_(s){Tu(!0);try{__(s)}finally{Tu(!1)}}(this._view)}get context(){return null}}class Kf extends vc{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Un(o);return new gl(a,this.ngModule)}}function ns(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class gl extends Rv{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function _C(s){return s.map(yC).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return ns(this.componentDef.inputs)}get outputs(){return ns(this.componentDef.outputs)}create(o,a,l,d){const p=(d=d||this.ngModule)?function fb(s,o){return{get:(a,l,d)=>{const p=s.get(a,Pm,d);return p!==Pm||l===Pm?p:o.get(a,l,d)}}}(o,d.injector):o,v=p.get(Rm,Pa),w=p.get(cb,null),I=v.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",x=l?function CE(s,o,a){if(an(s))return s.selectRootElement(o,a===Ht.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(I,l,this.componentDef.encapsulation):Sd(v.createRenderer(null,this.componentDef),C,function hb(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(C)),O=this.componentDef.onPush?576:528,B=function WE(s,o){return{components:[],scheduler:s||Hy,clean:RE,playerHandler:o||null,flags:0}}(),Q=gf(0,null,null,1,0,null,null,null,null,null),me=lc(null,Q,B,O,null,null,v,I,w,p);let Fe,Ve;Ho(me);try{const tt=function b_(s,o,a,l,d,p){const v=a[1];a[20]=s;const I=cc(v,20,2,"#host",null),C=I.mergedAttrs=o.hostAttrs;null!==C&&(Fg(I,C,!0),null!==s&&(et(d,s,C),null!==I.classes&&bg(d,s,I.classes),null!==I.styles&&Nn(d,s,I.styles)));const x=l.createRenderer(s,o),O=lc(a,Nd(o),null,o.onPush?64:16,a[20],I,l,x,p||null,null);return v.firstCreatePass&&(ar(bn(I,a),v,o.type),ME(v,I),h_(I,a.length,1)),mf(a,O),a[20]=O}(x,this.componentDef,me,v,I);if(x)if(l)et(I,x,["ng-version",pl.full]);else{const{attrs:Te,classes:pt}=function lE(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let p=s[l];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++l]):8===d&&a.push(p);else{if(!bo(d))break;d=p}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Te&&et(I,x,Te),pt&&pt.length>0&&bg(I,x,pt.join(" "))}if(Ve=yn(Q,20),void 0!==a){const Te=Ve.projection=[];for(let pt=0;pt<this.ngContentSelectors.length;pt++){const yt=a[pt];Te.push(null!=yt?Array.from(yt):null)}}Fe=function zE(s,o,a,l,d){const p=a[1],v=function c_(s,o,a){const l=pn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),el(s,l,o,Rd(s,o,1,null),a));const d=Xo(o,s,l.directiveStart,l);ur(d,o);const p=sr(l,o);return p&&ur(p,o),d}(p,a,o);if(l.components.push(v),s[8]=v,d&&d.forEach(I=>I(v,o)),o.contentQueries){const I=pn();o.contentQueries(1,v,I.directiveStart)}const w=pn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Zi(w.index),dc(a[1],w,0,w.directiveStart,w.directiveEnd,o),qs(o,v)),v}(tt,this.componentDef,me,B,[aD]),ff(Q,me,null)}finally{qo()}return new Fv(this.componentType,Fe,Ec(Ve,me),me,Ve)}}class Fv extends class qf{}{constructor(o,a,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new db(d),this.componentType=o}get injector(){return new lo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class th{}class Lv{}const nh=new Map;class Om extends th{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Kf(this);const l=Bn(o);this._bootstrapComponents=gs(l.bootstrap),this._r3Injector=_f(o,a,[{provide:th,useValue:this},{provide:vc,useValue:this.componentFactoryResolver}],se(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=Co.THROW_IF_NOT_FOUND,l=gt.Default){return o===Co||o===th||o===Lg?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Uv extends Lv{constructor(o){super(),this.moduleType=o,null!==Bn(o)&&function gb(s){const o=new Set;!function a(l){const d=Bn(l,!0),p=d.id;null!==p&&(function pb(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${se(o)} vs ${se(o.name)}`)}(p,nh.get(p),l),nh.set(p,l));const v=gs(d.imports);for(const w of v)o.has(w)||(o.add(w),a(w))}(s)}(o)}create(o){return new Om(this.moduleType,o)}}function km(s){return o=>{setTimeout(s,void 0,o)}}const un=class rh extends g.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,p,v;let w=o,I=a||(()=>null),C=l;if(o&&"object"==typeof o){const O=o;w=null===(d=O.next)||void 0===d?void 0:d.bind(O),I=null===(p=O.error)||void 0===p?void 0:p.bind(O),C=null===(v=O.complete)||void 0===v?void 0:v.bind(O)}this.__isAsync&&(I=km(I),w&&(w=km(w)),C&&(C=km(C)));const x=super.subscribe({next:w,error:I,complete:C});return o instanceof X.w0&&o.add(x),x}};function Dt(){return this._results[Fd()]()}class Fm{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Fd(),l=Fm.prototype;l[a]||(l[a]=Dt)}get changes(){return this._changes||(this._changes=new un)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=oi(o);(this._changesDetected=!function Kl(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],p=o[l];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let So=(()=>{class s{}return s.__NG_ELEMENT_ID__=zt,s})();const bb=So,Yf=class extends bb{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=lc(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),ff(a,l,o),new eh(l)}};function zt(){return Lm(pn(),Ae())}function Lm(s,o){return 4&s.type?new Yf(o,s,Ec(s,o)):null}let Gn=(()=>{class s{}return s.__NG_ELEMENT_ID__=ih,s})();function ih(){return Fn(pn(),Ae())}const lT=Gn,hr=class extends lT{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Ec(this._hostTNode,this._hostLView)}get injector(){return new lo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Os(this._hostTNode,this._hostLView);if(od(o)){const a=cn(o,this._hostLView),l=Yi(o);return new lo(a[1].data[l+8],a)}return new lo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Ib(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,p){const v=o&&!function fo(s){return"function"==typeof s}(o);let w;if(v)w=a;else{const O=a||{};w=O.index,l=O.injector,d=O.projectableNodes,p=O.ngModuleRef}const I=v?o:new gl(Un(o)),C=l||this.parentInjector;if(!p&&null==I.ngModule){const B=(v?C:this.parentInjector).get(th,null);B&&(p=B)}const x=I.create(C,d,void 0,p);return this.insert(x.hostView,w),x}insert(o,a){const l=o._lView,d=l[1];if(function ka(s){return ji(s[3])}(l)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const O=l[3],B=new hr(O,O[6],O[3]);B.detach(B.indexOf(o))}}const p=this._adjustIndex(a),v=this._lContainer;!function sc(s,o,a,l){const d=10+l,p=a.length;l>0&&(a[d-1][4]=o),l<p-10?(o[4]=a[d],ta(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function Yu(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=128}(d,l,v,p);const w=Qy(p,v),I=l[11],C=lf(I,v[7]);return null!==C&&function sf(s,o,a,l,d,p){l[0]=d,l[6]=o,wg(s,l,a,1,d,p)}(d,v[6],I,l,C,w),o.attachToViewContainerRef(),ta(_a(v),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Ib(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=qy(this._lContainer,a);l&&(po(_a(this._lContainer),a),zy(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=qy(this._lContainer,a);return l&&null!=po(_a(this._lContainer),a)?new eh(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function Ib(s){return s[8]}function _a(s){return s[8]||(s[8]=[])}function Fn(s,o){let a;const l=o[s.index];if(ji(l))a=l;else{let d;if(8&s.type)d=Qt(l);else{const p=o[11];d=p.createComment("");const v=sr(s,o);ms(p,lf(p,v),d,function cC(s,o){return an(s)?s.nextSibling(o):o.nextSibling}(p,v),!1)}o[s.index]=a=f_(l,o,d,s),mf(o,a)}return new hr(a,s,o)}class Cc{constructor(o){this.queryList=o,this.matches=null}clone(){return new Cc(this.queryList)}setDirty(){this.queryList.setDirty()}}class Hv{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<l;p++){const v=a.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new Hv(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==zv(o,a).matches&&this.queries[a].setDirty()}}class va{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class Dc{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(o,d);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new Dc(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Tc{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Tc(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(o,a,Cb(a,p)),this.matchTNodeWithReadOption(o,a,Jo(a,o,p,!1,!1))}else l===So?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Jo(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===hu||d===Gn||d===So&&4&a.type)this.addMatch(a.index,-2);else{const p=Jo(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Cb(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function ml(s,o,a,l){return-1===a?function $e(s,o){return 11&s.type?Ec(s,o):4&s.type?Lm(s,o):null}(o,s):-2===a?function Vm(s,o,a){return a===hu?Ec(o,s):a===So?Lm(o,s):a===Gn?Fn(o,s):void 0}(s,o,l):Xo(s,s[1],a,o)}function yl(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const p=s.data,v=a.matches,w=[];for(let I=0;I<v.length;I+=2){const C=v[I];w.push(C<0?null:ml(o,p[C],v[I+1],a.metadata.read))}d.matches=w}return d.matches}function Ks(s,o,a,l){const d=s.queries.getByIndex(a),p=d.matches;if(null!==p){const v=yl(s,o,d,a);for(let w=0;w<p.length;w+=2){const I=p[w];if(I>0)l.push(v[w/2]);else{const C=p[w+1],x=o[-I];for(let O=10;O<x.length;O++){const B=x[O];B[17]===B[3]&&Ks(B[1],B,C,l)}if(null!==x[9]){const O=x[9];for(let B=0;B<O.length;B++){const Q=O[B];Ks(Q[1],Q,C,l)}}}}}return l}function sh(s){const o=Ae(),a=Lt(),l=$l();$a(l+1);const d=zv(a,l);if(s.dirty&&io(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?Ks(a,o,l,[]):yl(a,o,d,l);s.reset(p,ub),s.notifyOnChanges()}return!0}return!1}function Gv(s,o,a,l){const d=Lt();if(d.firstCreatePass){const p=pn();(function Um(s,o,a){null===s.queries&&(s.queries=new Dc),s.queries.track(new Tc(o,a))})(d,new va(o,a,l),p.index),function Qf(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function vl(s,o,a){const l=new Fm(4==(4&a));DE(s,o,l,l.destroy),null===o[19]&&(o[19]=new Hv),o[19].queries.push(new Cc(l))}(d,Ae(),a)}function Sc(){return function qv(s,o){return s[19].queries[o].queryList}(Ae(),$l())}function zv(s,o){return s.queries.getByIndex(o)}function lh(...s){}const Es=new gn("Application Initializer");let $m=(()=>{class s{constructor(a){this.appInits=a,this.resolve=lh,this.reject=lh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(L_(p))a.push(p);else if(AD(p)){const v=new Promise((w,I)=>{p.subscribe({complete:w,error:I})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Le(Es,8))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const ch=new gn("AppId",{providedIn:"root",factory:function e0(){return`${sp()}${sp()}${sp()}`}});function sp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const t0=new gn("Platform Initializer"),n0=new gn("Platform ID"),Vb=new gn("appBootstrapListener");let r0=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();const dh=new gn("LocaleId",{providedIn:"root",factory:()=>dt(dh,gt.Optional|gt.SkipSelf)||function Ub(){return"undefined"!=typeof $localize&&$localize.locale||Rf}()}),wT=new gn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Mc{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Bb=(()=>{class s{compileModuleSync(a){return new Uv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=gs(Bn(a).declarations).reduce((v,w)=>{const I=Un(w);return I&&v.push(new gl(I)),v},[]);return new Mc(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const hh=(()=>Promise.resolve(0))();function Hm(s){"undefined"==typeof Zone?hh.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ki{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new un(!1),this.onMicrotaskEmpty=new un(!1),this.onStable=new un(!1),this.onError=new un(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function jb(){let s=Bt.requestAnimationFrame,o=Bt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Gm(s){const o=()=>{!function pr(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Bt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,fh(s),s.isCheckStableRunning=!0,s0(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),fh(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,p,v,w)=>{try{return $b(s),a.invokeTask(d,p,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),qm(s)}},onInvoke:(a,l,d,p,v,w,I)=>{try{return $b(s),a.invoke(d,p,v,w,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),qm(s)}},onHasTask:(a,l,d,p)=>{a.hasTask(d,p),l===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,fh(s),s0(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,d,p)=>(a.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ki.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ki.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,o,CT,lh,lh);try{return p.runTask(v,a,l)}finally{p.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const CT={};function s0(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function fh(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function $b(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function qm(s){s._nesting--,s0(s)}class DT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new un,this.onMicrotaskEmpty=new un,this.onStable=new un,this.onError=new un}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let o0=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ki.assertNotInAngularZone(),Hm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Hm(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Le(ki))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})(),a0=(()=>{class s{constructor(){this._applications=new Map,zm.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return zm.findTestabilityInTree(this,a,l)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();class ap{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function Rc(s){zm=s}let Zs,zm=new ap;const Gb=new gn("AllowMultipleToken");class gr{constructor(o,a){this.name=o,this.token=a}}function l0(s,o,a=[]){const l=`Platform: ${o}`,d=new gn(l);return(p=[])=>{let v=zb();if(!v||v.injector.get(Gb,!1))if(s)s(a.concat(p).concat({provide:d,useValue:!0}));else{const w=a.concat(p).concat({provide:d,useValue:!0},{provide:kE,useValue:"platform"});!function Wt(s){if(Zs&&!Zs.destroyed&&!Zs.injector.get(Gb,!1))throw new Ne(400,"");Zs=s.get(ws);const o=s.get(t0,null);o&&o.forEach(a=>a())}(Co.create({providers:w,name:l}))}return function qb(s){const o=zb();if(!o)throw new Ne(401,"");return o}()}}function zb(){return Zs&&!Zs.destroyed?Zs:null}let ws=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function TT(s,o){let a;return a="noop"===s?new DT:("zone.js"===s?void 0:s)||new ki({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:ki,useValue:w}];return w.run(()=>{const C=Co.create({providers:I,parent:this.injector,name:a.moduleType.name}),x=a.create(C),O=x.injector.get(Cd,null);if(!O)throw new Ne(402,"");return w.runOutsideAngular(()=>{const B=w.onError.subscribe({next:Q=>{O.handleError(Q)}});x.onDestroy(()=>{h0(this._modules,x),B.unsubscribe()})}),function c0(s,o,a){try{const l=a();return L_(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(O,w,()=>{const B=x.injector.get($m);return B.runInitializers(),B.donePromise.then(()=>(function Gw(s){Ut(s,"Expected localeId to be defined"),"string"==typeof s&&(gm=s.toLowerCase().replace(/_/g,"-"))}(x.injector.get(dh,Rf)||Rf),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const d=ph({},l);return function Hb(s,o,a){const l=new Uv(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const l=a.injector.get(d0);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Ne(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Le(Co))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();function ph(s,o){return Array.isArray(o)?o.reduce(ph,s):Object.assign(Object.assign({},s),o)}let d0=(()=>{class s{constructor(a,l,d,p,v){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new k.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),I=new k.y(C=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{ki.assertNotInAngularZone(),Hm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const O=this._zone.onUnstable.subscribe(()=>{ki.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{x.unsubscribe(),O.unsubscribe()}});this.isStable=(0,ae.T)(w,I.pipe((0,re.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Ne(405,"");let d;d=a instanceof Rv?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const p=function u0(s){return s.isBoundToModule}(d)?void 0:this._injector.get(th),w=d.create(Co.NULL,[],l||d.selector,p),I=w.location.nativeElement,C=w.injector.get(o0,null),x=C&&w.injector.get(a0);return C&&x&&x.registerApplication(I,C),w.onDestroy(()=>{this.detachView(w.hostView),h0(this.components,w),x&&x.unregisterApplication(I)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Ne(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;h0(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Vb,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(Le(ki),Le(Co),Le(Cd),Le(vc),Le($m))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function h0(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let up=!0,gh=!1;function lp(){return gh=!0,up}function Km(){if(gh)throw new Error("Cannot enable prod mode after platform setup.");up=!1}let xT=(()=>{class s{}return s.__NG_ELEMENT_ID__=Wb,s})();function Wb(s){return function Kb(s,o,a){if($c(s)&&!a){const l=or(s.index,o);return new eh(l,l)}return 47&s.type?new eh(o[16],o):null}(pn(),Ae(),16==(16&s))}class g0{constructor(){}supports(o){return uu(o)}create(o){return new Xb(o)}}const Jb=(s,o)=>o;class Xb{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Jb}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,p=null;for(;a||l;){const v=!l||a&&a.currentIndex<nI(l,d,p)?a:l,w=nI(v,d,p),I=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{p||(p=[]);const C=w-d,x=I-d;if(C!=x){for(let B=0;B<C;B++){const Q=B<p.length?p[B]:p[B]=0,me=Q+B;x<=me&&me<C&&(p[B]=Q+1)}p[v.previousIndex]=x-C}}w!==I&&o(v,w,I)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!uu(o))throw new Ne(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)p=o[w],v=this._trackByFn(w,p),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,p,v,w)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,v,w),l=!0),a=a._next}else d=0,function $g(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Fd()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,w=>{v=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,w,v,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new PT(a,l),p,d),o}_verifyReinsertion(o,a,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new tI),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tI),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class PT{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class eI{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class tI{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new eI,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function nI(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class Oc{constructor(){}supports(o){return o instanceof Map||Hg(o)}create(){return new yh}}class yh{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Hg(o)))throw new Ne(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const l=new OT(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class OT{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function rI(){return new m0([new g0])}let m0=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||rI()),deps:[[s,new li,new ai]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Ne(901,"")}}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:rI}),s})();function wi(){return new y0([new Oc])}let y0=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||wi()),deps:[[s,new li,new ai]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new Ne(901,"")}}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:wi}),s})();const VT=l0(null,"core",[{provide:n0,useValue:"unknown"},{provide:ws,deps:[Co]},{provide:a0,deps:[]},{provide:r0,deps:[]}]);let UT=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Le(d0))},s.\u0275mod=Tr({type:s}),s.\u0275inj=qt({}),s})()},3942:(Je,we,P)=>{P.d(we,{Z:()=>Ne});var g=P(2090),X=P(4859),k=P(9681),ae=P(1877);class re{constructor(he,Ce){this._delegate=he,this.firebase=Ce,(0,k._addComponent)(he,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(he,Ce=k._DEFAULT_ENTRY_NAME){var Ge;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(he);return!Ze.isInitialized()&&"EXPLICIT"===(null===(Ge=Ze.getComponent())||void 0===Ge?void 0:Ge.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:Ce})}_removeServiceInstance(he,Ce=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(Ce)}_addComponent(he){(0,k._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,k._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function de(){const Ue=function se(Ue){const he={},Ce={__esModule:!0,initializeApp:function De(Be,$={}){const ve=k.initializeApp(Be,$);if((0,g.r3)(he,ve.name))return he[ve.name];const Z=new Ue(ve,Ce);return he[ve.name]=Z,Z},app:Ze,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function be(Be){const $=Be.name,ve=$.replace("-compat","");if(k._registerComponent(Be)&&"PUBLIC"===Be.type){const Z=(ie=Ze())=>{if("function"!=typeof ie[ve])throw ue.create("invalid-app-argument",{appName:$});return ie[ve]()};void 0!==Be.serviceProps&&(0,g.ZB)(Z,Be.serviceProps),Ce[ve]=Z,Ue.prototype[ve]=function(...ie){return this._getService.bind(this,$).apply(this,Be.multipleInstances?ie:[])}}return"PUBLIC"===Be.type?Ce[ve]:null},removeApp:function Ge(Be){delete he[Be]},useAsService:function je(Be,$){return"serverAuth"===$?null:$},modularAPIs:k}};function Ze(Be){if(!(0,g.r3)(he,Be=Be||k._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:Be});return he[Be]}return Ce.default=Ce,Object.defineProperty(Ce,"apps",{get:function Ee(){return Object.keys(he).map(Be=>he[Be])}}),Ze.App=Ue,Ce}(re);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:de,extendNamespace:function he(Ce){(0,g.ZB)(Ue,Ce)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Ue}(),j=new ae.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=H;!function Me(Ue){(0,k.registerVersion)("@firebase/app-compat","0.1.26",Ue)}()},9681:(Je,we,P)=>{P.r(we),P.d(we,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Li,_DEFAULT_ENTRY_NAME:()=>Ut,_addComponent:()=>sn,_addOrOverwriteComponent:()=>Yt,_apps:()=>Xt,_clearComponents:()=>ss,_components:()=>Sn,_getProvider:()=>qt,_registerComponent:()=>Cr,_removeServiceInstance:()=>Vt,deleteApp:()=>gt,getApp:()=>Yr,getApps:()=>Ci,initializeApp:()=>Ts,onLog:()=>An,registerVersion:()=>En,setLogLevel:()=>Qs});var g=P(5861),X=P(4859),k=P(1877),ae=P(2090),re=P(8766);class pe{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map(xe=>{if(function ue(G){const J=G.getComponent();return"VERSION"===(null==J?void 0:J.type)}(xe)){const Qe=xe.getImmediate();return`${Qe.library}/${Qe.version}`}return null}).filter(xe=>xe).join(" ")}}const se="@firebase/app",H=new k.Yd("@firebase/app"),Ut="[DEFAULT]",Ye={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Xt=new Map,Sn=new Map;function sn(G,J){try{G.container.addComponent(J)}catch(xe){H.debug(`Component ${J.name} failed to register with FirebaseApp ${G.name}`,xe)}}function Yt(G,J){G.container.addOrOverwriteComponent(J)}function Cr(G){const J=G.name;if(Sn.has(J))return H.debug(`There were multiple attempts to register component ${J}.`),!1;Sn.set(J,G);for(const xe of Xt.values())sn(xe,G);return!0}function qt(G,J){const xe=G.container.getProvider("heartbeat").getImmediate({optional:!0});return xe&&xe.triggerHeartbeat(),G.container.getProvider(J)}function Vt(G,J,xe=Ut){qt(G,J).clearInstance(xe)}function ss(){Sn.clear()}const mr=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Dr{constructor(J,xe,Qe){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},xe),this._name=xe.name,this._automaticDataCollectionEnabled=xe.automaticDataCollectionEnabled,this._container=Qe,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}const Li="9.8.2";function Ts(G,J={}){"object"!=typeof J&&(J={name:J});const xe=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},J),Qe=xe.name;if("string"!=typeof Qe||!Qe)throw mr.create("bad-app-name",{appName:String(Qe)});const ht=Xt.get(Qe);if(ht){if((0,ae.vZ)(G,ht.options)&&(0,ae.vZ)(xe,ht.config))return ht;throw mr.create("duplicate-app",{appName:Qe})}const It=new X.H0(Qe);for(const Et of Sn.values())It.addComponent(Et);const hn=new Dr(G,xe,It);return Xt.set(Qe,hn),hn}function Yr(G=Ut){const J=Xt.get(G);if(!J)throw mr.create("no-app",{appName:G});return J}function Ci(){return Array.from(Xt.values())}function gt(G){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,g.Z)(function*(G){const J=G.name;Xt.has(J)&&(Xt.delete(J),yield Promise.all(G.container.getProviders().map(xe=>xe.delete())),G.isDeleted=!0)})).apply(this,arguments)}function En(G,J,xe){var Qe;let ht=null!==(Qe=Ye[G])&&void 0!==Qe?Qe:G;xe&&(ht+=`-${xe}`);const It=ht.match(/\s|\//),hn=J.match(/\s|\//);if(It||hn){const Et=[`Unable to register library "${ht}" with version "${J}":`];return It&&Et.push(`library name "${ht}" contains illegal characters (whitespace or "/")`),It&&hn&&Et.push("and"),hn&&Et.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void H.warn(Et.join(" "))}Cr(new X.wA(`${ht}-version`,()=>({library:ht,version:J}),"VERSION"))}function An(G,J){if(null!==G&&"function"!=typeof G)throw mr.create("invalid-log-argument");(0,k.Am)(G,J)}function Qs(G){(0,k.Ub)(G)}const On="firebase-heartbeat-store";let Di=null;function No(){return Di||(Di=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(G,J)=>{0===J&&G.createObjectStore(On)}}).catch(G=>{throw mr.create("storage-open",{originalErrorMessage:G.message})})),Di}function ot(){return(ot=(0,g.Z)(function*(G){try{return(yield No()).transaction(On).objectStore(On).get(Xr(G))}catch(J){throw mr.create("storage-get",{originalErrorMessage:J.message})}})).apply(this,arguments)}function vt(G,J){return yr.apply(this,arguments)}function yr(){return(yr=(0,g.Z)(function*(G,J){try{const Qe=(yield No()).transaction(On,"readwrite");return yield Qe.objectStore(On).put(J,Xr(G)),Qe.done}catch(xe){throw mr.create("storage-set",{originalErrorMessage:xe.message})}})).apply(this,arguments)}function Xr(G){return`${G.name}!${G.options.appId}`}class _r{constructor(J){this.container=J,this._heartbeatsCache=null;const xe=this.container.getProvider("app").getImmediate();this._storage=new q(xe),this._heartbeatsCachePromise=this._storage.read().then(Qe=>(this._heartbeatsCache=Qe,Qe))}triggerHeartbeat(){var J=this;return(0,g.Z)(function*(){const Qe=J.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ht=vr();if(null===J._heartbeatsCache&&(J._heartbeatsCache=yield J._heartbeatsCachePromise),J._heartbeatsCache.lastSentHeartbeatDate!==ht&&!J._heartbeatsCache.heartbeats.some(It=>It.date===ht))return J._heartbeatsCache.heartbeats.push({date:ht,agent:Qe}),J._heartbeatsCache.heartbeats=J._heartbeatsCache.heartbeats.filter(It=>{const hn=new Date(It.date).valueOf();return Date.now()-hn<=2592e6}),J._storage.overwrite(J._heartbeatsCache)})()}getHeartbeatsHeader(){var J=this;return(0,g.Z)(function*(){if(null===J._heartbeatsCache&&(yield J._heartbeatsCachePromise),null===J._heartbeatsCache||0===J._heartbeatsCache.heartbeats.length)return"";const xe=vr(),{heartbeatsToSend:Qe,unsentEntries:ht}=function V(G,J=1024){const xe=[];let Qe=G.slice();for(const ht of G){const It=xe.find(hn=>hn.agent===ht.agent);if(It){if(It.dates.push(ht.date),W(xe)>J){It.dates.pop();break}}else if(xe.push({agent:ht.agent,dates:[ht.date]}),W(xe)>J){xe.pop();break}Qe=Qe.slice(1)}return{heartbeatsToSend:xe,unsentEntries:Qe}}(J._heartbeatsCache.heartbeats),It=(0,ae.L)(JSON.stringify({version:2,heartbeats:Qe}));return J._heartbeatsCache.lastSentHeartbeatDate=xe,ht.length>0?(J._heartbeatsCache.heartbeats=ht,yield J._storage.overwrite(J._heartbeatsCache)):(J._heartbeatsCache.heartbeats=[],J._storage.overwrite(J._heartbeatsCache)),It})()}}function vr(){return(new Date).toISOString().substring(0,10)}class q{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var J=this;return(0,g.Z)(function*(){return(yield J._canUseIndexedDBPromise)&&(yield function Ht(G){return ot.apply(this,arguments)}(J.app))||{heartbeats:[]}})()}overwrite(J){var xe=this;return(0,g.Z)(function*(){var Qe;if(yield xe._canUseIndexedDBPromise){const It=yield xe.read();return vt(xe.app,{lastSentHeartbeatDate:null!==(Qe=J.lastSentHeartbeatDate)&&void 0!==Qe?Qe:It.lastSentHeartbeatDate,heartbeats:J.heartbeats})}})()}add(J){var xe=this;return(0,g.Z)(function*(){var Qe;if(yield xe._canUseIndexedDBPromise){const It=yield xe.read();return vt(xe.app,{lastSentHeartbeatDate:null!==(Qe=J.lastSentHeartbeatDate)&&void 0!==Qe?Qe:It.lastSentHeartbeatDate,heartbeats:[...It.heartbeats,...J.heartbeats]})}})()}}function W(G){return(0,ae.L)(JSON.stringify({version:2,heartbeats:G})).length}!function Ie(G){Cr(new X.wA("platform-logger",J=>new pe(J),"PRIVATE")),Cr(new X.wA("heartbeat",J=>new _r(J),"PRIVATE")),En(se,"0.7.25",G),En(se,"0.7.25","esm2017"),En("fire-js","")}("")},4859:(Je,we,P)=>{P.d(we,{wA:()=>k,H0:()=>se});var g=P(5861),X=P(2090);class k{constructor(H,j,te){this.name=H,this.instanceFactory=j,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const ae="[DEFAULT]";class re{constructor(H,j){this.name=H,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const j=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(j)){const te=new X.BH;if(this.instancesDeferred.set(j,te),this.isInitialized(j)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:j});He&&te.resolve(He)}catch(He){}}return this.instancesDeferred.get(j).promise}getImmediate(H){var j;const te=this.normalizeInstanceIdentifier(null==H?void 0:H.identifier),He=null!==(j=null==H?void 0:H.optional)&&void 0!==j&&j;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Me){if(He)return null;throw Me}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function ue(de){return"EAGER"===de.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(j){}for(const[j,te]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(j);try{const Me=this.getOrInitializeService({instanceIdentifier:He});te.resolve(Me)}catch(Me){}}}}clearInstance(H=ae){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,g.Z)(function*(){const j=Array.from(H.instances.values());yield Promise.all([...j.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...j.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=ae){return this.instances.has(H)}getOptions(H=ae){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:j={}}=H,te=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:te,options:j});for(const[Me,Ne]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Me)&&Ne.resolve(He);return He}onInit(H,j){var te;const He=this.normalizeInstanceIdentifier(j),Me=null!==(te=this.onInitCallbacks.get(He))&&void 0!==te?te:new Set;Me.add(H),this.onInitCallbacks.set(He,Me);const Ne=this.instances.get(He);return Ne&&H(Ne,He),()=>{Me.delete(H)}}invokeOnInitCallbacks(H,j){const te=this.onInitCallbacks.get(j);if(te)for(const He of te)try{He(H,j)}catch(Me){}}getOrInitializeService({instanceIdentifier:H,options:j={}}){let te=this.instances.get(H);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(de=H,de===ae?void 0:de),options:j}),this.instances.set(H,te),this.instancesOptions.set(H,j),this.invokeOnInitCallbacks(te,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,te)}catch(He){}var de;return te||null}normalizeInstanceIdentifier(H=ae){return this.component?this.component.multipleInstances?H:ae:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class se{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const j=this.getProvider(H.name);if(j.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);j.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const j=new re(H,this);return this.providers.set(H,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(Je,we,P)=>{P.d(we,{in:()=>X,Yd:()=>ue,Ub:()=>se,Am:()=>de});const g=[];var X=(()=>{return(H=X||(X={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",X;var H})();const k={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ae=X.INFO,re={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},pe=(H,j,...te)=>{if(j<H.logLevel)return;const He=(new Date).toISOString(),Me=re[j];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Me](`[${He}]  ${H.name}:`,...te)};class ue{constructor(j){this.name=j,this._logLevel=ae,this._logHandler=pe,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in X))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?k[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...j),this._logHandler(this,X.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...j),this._logHandler(this,X.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,X.INFO,...j),this._logHandler(this,X.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,X.WARN,...j),this._logHandler(this,X.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...j),this._logHandler(this,X.ERROR,...j)}}function se(H){g.forEach(j=>{j.setLogLevel(H)})}function de(H,j){for(const te of g){let He=null;j&&j.level&&(He=k[j.level]),te.userLogHandler=null===H?null:(Me,Ne,...Ue)=>{const he=Ue.map(Ce=>{if(null==Ce)return null;if("string"==typeof Ce)return Ce;if("number"==typeof Ce||"boolean"==typeof Ce)return Ce.toString();if(Ce instanceof Error)return Ce.message;try{return JSON.stringify(Ce)}catch(Ge){return null}}).filter(Ce=>Ce).join(" ");Ne>=(null!=He?He:Me.logLevel)&&H({level:X[Ne].toLowerCase(),message:he,args:Ue,type:Me.name})}}}},8766:(Je,we,P)=>{P.d(we,{Lj:()=>De,X3:()=>Ze});var g=P(5861);let k,ae;const ue=new WeakMap,se=new WeakMap,de=new WeakMap,H=new WeakMap,j=new WeakMap;let Me={get($,ve,Z){if($ instanceof IDBTransaction){if("done"===ve)return se.get($);if("objectStoreNames"===ve)return $.objectStoreNames||de.get($);if("store"===ve)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return Ce($[ve])},set:($,ve,Z)=>($[ve]=Z,!0),has:($,ve)=>$ instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in $};function he($){return"function"==typeof $?function Ue($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($)?function(...ve){return $.apply(Ge(this),ve),Ce(ue.get(this))}:function(...ve){return Ce($.apply(Ge(this),ve))}:function(ve,...Z){const ie=$.call(Ge(this),ve,...Z);return de.set(ie,ve.sort?ve.sort():[ve]),Ce(ie)}}($):($ instanceof IDBTransaction&&function He($){if(se.has($))return;const ve=new Promise((Z,ie)=>{const ee=()=>{$.removeEventListener("complete",ye),$.removeEventListener("error",oe),$.removeEventListener("abort",oe)},ye=()=>{Z(),ee()},oe=()=>{ie($.error||new DOMException("AbortError","AbortError")),ee()};$.addEventListener("complete",ye),$.addEventListener("error",oe),$.addEventListener("abort",oe)});se.set($,ve)}($),(($,ve)=>ve.some(Z=>$ instanceof Z))($,function re(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy($,Me):$)}function Ce($){if($ instanceof IDBRequest)return function te($){const ve=new Promise((Z,ie)=>{const ee=()=>{$.removeEventListener("success",ye),$.removeEventListener("error",oe)},ye=()=>{Z(Ce($.result)),ee()},oe=()=>{ie($.error),ee()};$.addEventListener("success",ye),$.addEventListener("error",oe)});return ve.then(Z=>{Z instanceof IDBCursor&&ue.set(Z,$)}).catch(()=>{}),j.set(ve,$),ve}($);if(H.has($))return H.get($);const ve=he($);return ve!==$&&(H.set($,ve),j.set(ve,$)),ve}const Ge=$=>j.get($);function Ze($,ve,{blocked:Z,upgrade:ie,blocking:ee,terminated:ye}={}){const oe=indexedDB.open($,ve),Pe=Ce(oe);return ie&&oe.addEventListener("upgradeneeded",lt=>{ie(Ce(oe.result),lt.oldVersion,lt.newVersion,Ce(oe.transaction))}),Z&&oe.addEventListener("blocked",()=>Z()),Pe.then(lt=>{ye&&lt.addEventListener("close",()=>ye()),ee&&lt.addEventListener("versionchange",()=>ee())}).catch(()=>{}),Pe}function De($,{blocked:ve}={}){const Z=indexedDB.deleteDatabase($);return ve&&Z.addEventListener("blocked",()=>ve()),Ce(Z).then(()=>{})}const Ee=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],je=new Map;function Be($,ve){if(!($ instanceof IDBDatabase)||ve in $||"string"!=typeof ve)return;if(je.get(ve))return je.get(ve);const Z=ve.replace(/FromIndex$/,""),ie=ve!==Z,ee=be.includes(Z);if(!(Z in(ie?IDBIndex:IDBObjectStore).prototype)||!ee&&!Ee.includes(Z))return;const ye=function(){var oe=(0,g.Z)(function*(Pe,...lt){const $t=this.transaction(Pe,ee?"readwrite":"readonly");let Ut=$t.store;return ie&&(Ut=Ut.index(lt.shift())),(yield Promise.all([Ut[Z](...lt),ee&&$t.done]))[0]});return function(lt){return oe.apply(this,arguments)}}();return je.set(ve,ye),ye}!function Ne($){Me=$(Me)}($=>RO(xO({},$),{get:(ve,Z,ie)=>Be(ve,Z)||$.get(ve,Z,ie),has:(ve,Z)=>!!Be(ve,Z)||$.has(ve,Z)}))},5861:(Je,we,P)=>{function g(k,ae,re,pe,ue,se,de){try{var H=k[se](de),j=H.value}catch(te){return void re(te)}H.done?ae(j):Promise.resolve(j).then(pe,ue)}function X(k){return function(){var ae=this,re=arguments;return new Promise(function(pe,ue){var se=k.apply(ae,re);function de(j){g(se,pe,ue,de,H,"next",j)}function H(j){g(se,pe,ue,de,H,"throw",j)}de(void 0)})}}P.d(we,{Z:()=>X})}},Je=>{Je(Je.s=412)}]);