"use strict";var PU=Object.defineProperty,OU=Object.defineProperties,kU=Object.getOwnPropertyDescriptors,lP=Object.getOwnPropertySymbols,FU=Object.prototype.hasOwnProperty,LU=Object.prototype.propertyIsEnumerable,cP=(tt,we,P)=>we in tt?PU(tt,we,{enumerable:!0,configurable:!0,writable:!0,value:P}):tt[we]=P,dP=(tt,we)=>{for(var P in we||(we={}))FU.call(we,P)&&cP(tt,P,we[P]);if(lP)for(var P of lP(we))LU.call(we,P)&&cP(tt,P,we[P]);return tt},hP=(tt,we)=>OU(tt,kU(we));(self.webpackChunkangular_tour_of_heroes=self.webpackChunkangular_tour_of_heroes||[]).push([[179],{2011:(tt,we,P)=>{P.d(we,{hO:()=>qe,xv:()=>he,Dh:()=>se,GT:()=>ge,cc:()=>Me,on:()=>H,pX:()=>ne});var g=P(5e3),X=P(127),O=P(5813);tt=P.hmd(tt);const ae=["ngOnDestroy"],ne=(Ce,ze,Qe,De={})=>new Proxy(Ce,{get:(Ee,be)=>Qe.runOutsideAngular(()=>{var je;if(Ce[be])return(null===(je=null==De?void 0:De.spy)||void 0===je?void 0:je.get)&&De.spy.get(be,Ce[be]),Ce[be];if(ae.indexOf(be)>-1)return()=>{};const Be=ze.toPromise().then($=>{const ve=$&&$[be];return"function"==typeof ve?ve.bind($):ve&&ve.then?ve.then(Z=>Qe.run(()=>Z)):Qe.run(()=>ve)});return new Proxy(()=>{},{get:($,ve)=>Be[ve],apply:($,ve,Z)=>Be.then(re=>{var ee;const me=re&&re(...Z);return(null===(ee=null==De?void 0:De.spy)||void 0===ee?void 0:ee.apply)&&De.spy.apply(be,Z,me),me})})})}),ge=(Ce,ze)=>{ze.forEach(Qe=>{Object.getOwnPropertyNames(Qe.prototype||Qe).forEach(De=>{Object.defineProperty(Ce.prototype,De,Object.getOwnPropertyDescriptor(Qe.prototype||Qe,De))})})};class ue{constructor(ze){return ze}}const se=new g.OlP("angularfire2.app.options"),he=new g.OlP("angularfire2.app.name");function H(Ce,ze,Qe){const Ee="object"==typeof Qe&&Qe||{};Ee.name=Ee.name||"string"==typeof Qe&&Qe||"[DEFAULT]";const je=X.Z.apps.filter(Be=>Be&&Be.name===Ee.name)[0]||ze.runOutsideAngular(()=>X.Z.initializeApp(Ce,Ee));try{JSON.stringify(Ce)!==JSON.stringify(je.options)&&j("error",`${je.name} Firebase App already initialized with different options${tt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Be){}return new ue(je)}const j=(Ce,...ze)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Ce](...ze)},te={provide:ue,useFactory:H,deps:[se,g.R0b,[new g.FiY,he]]};let qe=(()=>{class Ce{constructor(Qe){X.Z.registerVersion("angularfire",O.q4.full,"core"),X.Z.registerVersion("angularfire",O.q4.full,"app-compat"),X.Z.registerVersion("angular",g.q4F.full,Qe.toString())}static initializeApp(Qe,De){return{ngModule:Ce,providers:[{provide:se,useValue:Qe},{provide:he,useValue:De}]}}}return Ce.\u0275fac=function(Qe){return new(Qe||Ce)(g.LFG(g.Lbi))},Ce.\u0275mod=g.oAB({type:Ce}),Ce.\u0275inj=g.cJS({providers:[te]}),Ce})();function Me(Ce,ze,Qe,De,Ee){const[,be,je]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===Ce)||[];if(be)return function Pe(Ce,ze){try{return Ce.toString()===ze.toString()}catch(Qe){return Ce===ze}}(Ee,je)||(pe("error",`${ze} was already initialized on the ${Qe} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:Ee,was:je})),be;{const Be=De();return globalThis.\u0275AngularfireInstanceCache.push([Ce,Be,Ee]),Be}}const Ue=!!tt.hot,pe=(Ce,...ze)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Ce](...ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(tt,we,P)=>{P.d(we,{q4:()=>ta,iC:()=>ra,fc:()=>di,HU:()=>ff,vb:()=>Bd,JM:()=>fg});var g=P(5e3),X=P(5867),O=P(5861),ae=P(9681),ne=P(2090),ge=P(4859),ue=P(1877),se=P(8766);const he="@firebase/installations",H="0.5.9",te=`w:${H}`,qe="FIS_v2",ze=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Qe(C){return C instanceof ne.ZR&&C.code.includes("request-failed")}function De({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Ee(C){return{token:C.token,requestStatus:2,expiresIn:re(C.expiresIn),creationTime:Date.now()}}function be(C,D){return je.apply(this,arguments)}function je(){return(je=(0,O.Z)(function*(C,D){const L=(yield D.json()).error;return ze.create("request-failed",{requestName:C,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Be({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function $(C,{refreshToken:D}){const R=Be(C);return R.append("Authorization",function ee(C){return`${qe} ${C}`}(D)),R}function ve(C){return Z.apply(this,arguments)}function Z(){return(Z=(0,O.Z)(function*(C){const D=yield C();return D.status>=500&&D.status<600?C():D})).apply(this,arguments)}function re(C){return Number(C.replace("s","000"))}function me(C,D){return oe.apply(this,arguments)}function oe(){return(oe=(0,O.Z)(function*({appConfig:C,heartbeatServiceProvider:D},{fid:R}){const L=De(C),Y=Be(C),ie=D.getImmediate({optional:!0});if(ie){const bt=yield ie.getHeartbeatsHeader();bt&&Y.append("x-firebase-client",bt)}const Ve={method:"POST",headers:Y,body:JSON.stringify({fid:R,authVersion:qe,appId:C.appId,sdkVersion:te})},wt=yield ve(()=>fetch(L,Ve));if(wt.ok){const bt=yield wt.json();return{fid:bt.fid||R,registrationStatus:2,refreshToken:bt.refreshToken,authToken:Ee(bt.authToken)}}throw yield be("Create Installation",wt)})).apply(this,arguments)}function Oe(C){return new Promise(D=>{setTimeout(D,C)})}const Ht=/^[cdef][\w-]{21}$/;function Je(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const R=function tn(C){return function ht(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Ht.test(R)?R:""}catch(C){return""}}function Pn(C){return`${C.appName}!${C.appId}`}const on=new Map;function Xt(C,D){const R=Pn(C);Vt(R,D),function ls(C,D){const R=function fr(){return!ti&&"BroadcastChannel"in self&&(ti=new BroadcastChannel("[Firebase] FID Change"),ti.onmessage=C=>{Vt(C.data.key,C.data.fid)}),ti}();R&&R.postMessage({key:C,fid:D}),function Ar(){0===on.size&&ti&&(ti.close(),ti=null)}()}(R,D)}function Vt(C,D){const R=on.get(C);if(R)for(const L of R)L(D)}let ti=null;const ni="firebase-installations-store";let bi=null;function mt(){return bi||(bi=(0,se.X3)("firebase-installations-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(ni)}})),bi}function ri(C,D){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,O.Z)(function*(C,D){const R=Pn(C),Y=(yield mt()).transaction(ni,"readwrite"),ie=Y.objectStore(ni),Ne=yield ie.get(R);return yield ie.put(D,R),yield Y.done,(!Ne||Ne.fid!==D.fid)&&Xt(C,D.fid),D})).apply(this,arguments)}function On(C){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,O.Z)(function*(C){const D=Pn(C),L=(yield mt()).transaction(ni,"readwrite");yield L.objectStore(ni).delete(D),yield L.done})).apply(this,arguments)}function ii(C,D){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,O.Z)(function*(C,D){const R=Pn(C),Y=(yield mt()).transaction(ni,"readwrite"),ie=Y.objectStore(ni),Ne=yield ie.get(R),Ve=D(Ne);return void 0===Ve?yield ie.delete(R):yield ie.put(Ve,R),yield Y.done,Ve&&(!Ne||Ne.fid!==Ve.fid)&&Xt(C,Ve.fid),Ve})).apply(this,arguments)}function Hn(C){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,O.Z)(function*(C){let D;const R=yield ii(C.appConfig,L=>{const Y=Lo(L),ie=Gt(C,Y);return D=ie.registrationPromise,ie.installationEntry});return""===R.fid?{installationEntry:yield D}:{installationEntry:R,registrationPromise:D}})).apply(this,arguments)}function Lo(C){return Ys(C||{fid:Je(),registrationStatus:0})}function Gt(C,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(ze.create("app-offline"))};const R={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},L=function ut(C,D){return Et.apply(this,arguments)}(C,R);return{installationEntry:R,registrationPromise:L}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:pr(C)}:{installationEntry:D}}function Et(){return(Et=(0,O.Z)(function*(C,D){try{const R=yield me(C,D);return ri(C.appConfig,R)}catch(R){throw Qe(R)&&409===R.customData.serverCode?yield On(C.appConfig):yield ri(C.appConfig,{fid:D.fid,registrationStatus:0}),R}})).apply(this,arguments)}function pr(C){return si.apply(this,arguments)}function si(){return(si=(0,O.Z)(function*(C){let D=yield Bt(C.appConfig);for(;1===D.registrationStatus;)yield Oe(100),D=yield Bt(C.appConfig);if(0===D.registrationStatus){const{installationEntry:R,registrationPromise:L}=yield Hn(C);return L||R}return D})).apply(this,arguments)}function Bt(C){return ii(C,D=>{if(!D)throw ze.create("installation-not-found");return Ys(D)})}function Ys(C){return function gr(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function mr(C,D){return V.apply(this,arguments)}function V(){return(V=(0,O.Z)(function*({appConfig:C,heartbeatServiceProvider:D},R){const L=q(C,R),Y=$(C,R),ie=D.getImmediate({optional:!0});if(ie){const bt=yield ie.getHeartbeatsHeader();bt&&Y.append("x-firebase-client",bt)}const Ve={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:te,appId:C.appId}})},wt=yield ve(()=>fetch(L,Ve));if(wt.ok)return Ee(yield wt.json());throw yield be("Generate Auth Token",wt)})).apply(this,arguments)}function q(C,{fid:D}){return`${De(C)}/${D}/authTokens:generate`}function W(C){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,O.Z)(function*(C,D=!1){let R;const L=yield ii(C.appConfig,ie=>{if(!Tt(ie))throw ze.create("not-registered");const Ne=ie.authToken;if(!D&&fn(Ne))return ie;if(1===Ne.requestStatus)return R=G(C,D),ie;{if(!navigator.onLine)throw ze.create("app-offline");const Ve=Kn(ie);return R=et(C,Ve),Ve}});return R?yield R:L.authToken})).apply(this,arguments)}function G(C,D){return J.apply(this,arguments)}function J(){return(J=(0,O.Z)(function*(C,D){let R=yield Re(C.appConfig);for(;1===R.authToken.requestStatus;)yield Oe(100),R=yield Re(C.appConfig);const L=R.authToken;return 0===L.requestStatus?W(C,D):L})).apply(this,arguments)}function Re(C){return ii(C,D=>{if(!Tt(D))throw ze.create("not-registered");return function Sr(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function et(C,D){return ft.apply(this,arguments)}function ft(){return(ft=(0,O.Z)(function*(C,D){try{const R=yield mr(C,D),L=Object.assign(Object.assign({},D),{authToken:R});return yield ri(C.appConfig,L),R}catch(R){if(!Qe(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const L=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield ri(C.appConfig,L)}else yield On(C.appConfig);throw R}})).apply(this,arguments)}function Tt(C){return void 0!==C&&2===C.registrationStatus}function fn(C){return 2===C.requestStatus&&!function Ct(C){const D=Date.now();return D<C.creationTime||C.creationTime+C.expiresIn<D+36e5}(C)}function Kn(C){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:D})}function Oa(){return(Oa=(0,O.Z)(function*(C){const D=C,{installationEntry:R,registrationPromise:L}=yield Hn(D);return L?L.catch(console.error):W(D).catch(console.error),R.fid})).apply(this,arguments)}function ka(){return(ka=(0,O.Z)(function*(C,D=!1){const R=C;return yield Zn(R),(yield W(R,D)).token})).apply(this,arguments)}function Zn(C){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,O.Z)(function*(C){const{registrationPromise:D}=yield Hn(C);D&&(yield D)})).apply(this,arguments)}function Vo(C){return ze.create("missing-app-config-values",{valueName:C})}const zr="installations",dt=C=>{const D=C.getProvider("app").getImmediate(),R=function sr(C){if(!C||!C.options)throw Vo("App Configuration");if(!C.name)throw Vo("App Name");const D=["projectId","apiKey","appId"];for(const R of D)if(!C.options[R])throw Vo(R);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(D);return{app:D,appConfig:R,heartbeatServiceProvider:(0,ae._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},nn=C=>{const D=C.getProvider("app").getImmediate(),R=(0,ae._getProvider)(D,zr).getImmediate();return{getId:()=>function Du(C){return Oa.apply(this,arguments)}(R),getToken:Y=>function Tu(C){return ka.apply(this,arguments)}(R,Y)}};(function Wr(){(0,ae._registerComponent)(new ge.wA(zr,dt,"PUBLIC")),(0,ae._registerComponent)(new ge.wA("installations-internal",nn,"PRIVATE"))})(),(0,ae.registerVersion)(he,H),(0,ae.registerVersion)(he,H,"esm2017");const Li="@firebase/remote-config",kn=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class eg{constructor(D,R,L,Y){this.client=D,this.storage=R,this.storageCache=L,this.logger=Y}isCachedDataFresh(D,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-R,Y=L<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Y}.`),Y}fetch(D){var R=this;return(0,O.Z)(function*(){const[L,Y]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Y&&R.isCachedDataFresh(D.cacheMaxAgeMillis,L))return Y;D.eTag=Y&&Y.eTag;const ie=yield R.client.fetch(D),Ne=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ie.status&&Ne.push(R.storage.setLastSuccessfulFetchResponse(ie)),yield Promise.all(Ne),ie})()}}function wd(C=navigator){return C.languages&&C.languages[0]||C.language}class yr{constructor(D,R,L,Y,ie,Ne){this.firebaseInstallations=D,this.sdkVersion=R,this.namespace=L,this.projectId=Y,this.apiKey=ie,this.appId=Ne}fetch(D){var R=this;return(0,O.Z)(function*(){const[L,Y]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Ne=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Ve={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},wt={sdk_version:R.sdkVersion,app_instance_id:L,app_instance_id_token:Y,app_id:R.appId,language_code:wd()},bt={method:"POST",headers:Ve,body:JSON.stringify(wt)},jt=fetch(Ne,bt),It=new Promise((Si,hi)=>{D.signal.addEventListener(()=>{const jd=new Error("The operation was aborted.");jd.name="AbortError",hi(jd)})});let lr;try{yield Promise.race([jt,It]),lr=yield jt}catch(Si){let hi="fetch-client-network";throw"AbortError"===Si.name&&(hi="fetch-timeout"),kn.create(hi,{originalErrorMessage:Si.message})}let qn=lr.status;const bn=lr.headers.get("ETag")||void 0;let dn,Lr;if(200===lr.status){let Si;try{Si=yield lr.json()}catch(hi){throw kn.create("fetch-client-parse",{originalErrorMessage:hi.message})}dn=Si.entries,Lr=Si.state}if("INSTANCE_STATE_UNSPECIFIED"===Lr?qn=500:"NO_CHANGE"===Lr?qn=304:("NO_TEMPLATE"===Lr||"EMPTY_CONFIG"===Lr)&&(dn={}),304!==qn&&200!==qn)throw kn.create("fetch-status",{httpStatus:qn});return{status:qn,eTag:bn,config:dn}})()}}class tg{constructor(D,R){this.client=D,this.storage=R}fetch(D){var R=this;return(0,O.Z)(function*(){const L=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(D,L)})()}attemptFetch(D,{throttleEndTimeMillis:R,backoffCount:L}){var Y=this;return(0,O.Z)(function*(){yield function ks(C,D){return new Promise((R,L)=>{const Y=Math.max(D-Date.now(),0),ie=setTimeout(R,Y);C.addEventListener(()=>{clearTimeout(ie),L(kn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,R);try{const ie=yield Y.client.fetch(D);return yield Y.storage.deleteThrottleMetadata(),ie}catch(ie){if(!function bd(C){if(!(C instanceof ne.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ie))throw ie;const Ne={throttleEndTimeMillis:Date.now()+(0,ne.$s)(L),backoffCount:L+1};return yield Y.storage.setThrottleMetadata(Ne),Y.attemptFetch(D,Ne)}})()}}class Id{constructor(D,R,L,Y,ie){this.app=D,this._client=R,this._storageCache=L,this._storage=Y,this._logger=ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Pl(C,D){const R=C.target.error||void 0;return kn.create(D,{originalErrorMessage:R&&R.message})}const Fs="app_namespace_store";class sg{constructor(D,R,L,Y=function ig(){return new Promise((C,D)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=L=>{D(Pl(L,"storage-open"))},R.onsuccess=L=>{C(L.target.result)},R.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(Fs,{keyPath:"compositeKey"})}}catch(R){D(kn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=D,this.appName=R,this.namespace=L,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var R=this;return(0,O.Z)(function*(){const L=yield R.openDbPromise;return new Promise((Y,ie)=>{const Ve=L.transaction([Fs],"readonly").objectStore(Fs),wt=R.createCompositeKey(D);try{const bt=Ve.get(wt);bt.onerror=jt=>{ie(Pl(jt,"storage-get"))},bt.onsuccess=jt=>{const It=jt.target.result;Y(It?It.value:void 0)}}catch(bt){ie(kn.create("storage-get",{originalErrorMessage:bt&&bt.message}))}})})()}set(D,R){var L=this;return(0,O.Z)(function*(){const Y=yield L.openDbPromise;return new Promise((ie,Ne)=>{const wt=Y.transaction([Fs],"readwrite").objectStore(Fs),bt=L.createCompositeKey(D);try{const jt=wt.put({compositeKey:bt,value:R});jt.onerror=It=>{Ne(Pl(It,"storage-set"))},jt.onsuccess=()=>{ie()}}catch(jt){Ne(kn.create("storage-set",{originalErrorMessage:jt&&jt.message}))}})})()}delete(D){var R=this;return(0,O.Z)(function*(){const L=yield R.openDbPromise;return new Promise((Y,ie)=>{const Ve=L.transaction([Fs],"readwrite").objectStore(Fs),wt=R.createCompositeKey(D);try{const bt=Ve.delete(wt);bt.onerror=jt=>{ie(Pl(jt,"storage-delete"))},bt.onsuccess=()=>{Y()}}catch(bt){ie(kn.create("storage-delete",{originalErrorMessage:bt&&bt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Dd{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const R=D.storage.getLastFetchStatus(),L=D.storage.getLastSuccessfulFetchTimestampMillis(),Y=D.storage.getActiveConfig(),ie=yield R;ie&&(D.lastFetchStatus=ie);const Ne=yield L;Ne&&(D.lastSuccessfulFetchTimestampMillis=Ne);const Ve=yield Y;Ve&&(D.activeConfig=Ve)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function xu(){return Td.apply(this,arguments)}function Td(){return(Td=(0,O.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(C){return!1}})).apply(this,arguments)}!function Uo(){(0,ae._registerComponent)(new ge.wA("remote-config",function C(D,{instanceIdentifier:R}){const L=D.getProvider("app").getImmediate(),Y=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw kn.create("registration-window");if(!(0,ne.hl)())throw kn.create("indexed-db-unavailable");const{projectId:ie,apiKey:Ne,appId:Ve}=L.options;if(!ie)throw kn.create("registration-project-id");if(!Ne)throw kn.create("registration-api-key");if(!Ve)throw kn.create("registration-app-id");const wt=new sg(Ve,L.name,R=R||"firebase"),bt=new Dd(wt),jt=new ue.Yd(Li);jt.logLevel=ue.in.ERROR;const It=new yr(Y,ae.SDK_VERSION,R,ie,Ne,Ve),lr=new tg(It,wt),qn=new eg(lr,wt,bt,jt),bn=new Id(L,qn,bt,wt,jt);return function an(C){const D=(0,ne.m9)(C);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(bn),bn},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Li,"0.3.8"),(0,ae.registerVersion)(Li,"0.3.8","esm2017")}();const Ad="/firebase-messaging-sw.js",_r="/firebase-cloud-messaging-push-scope",Xs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Bo="google.c.a.c_id",Sd="google.c.a.c_l",sf="google.c.a.ts",Md="google.c.a.e";var jo=(()=>{return(C=jo||(jo={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",jo;var C})();function xr(C){const D=new Uint8Array(C);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function xd(C){const R=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(R),Y=new Uint8Array(L.length);for(let ie=0;ie<L.length;++ie)Y[ie]=L.charCodeAt(ie);return Y}const Rr="fcm_token_details_db",oi="fcm_token_object_Store";function Ol(C){return Rd.apply(this,arguments)}function Rd(){return Rd=(0,O.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ie=>ie.name).includes(Rr))return null;let D=null;return(yield(0,se.X3)(Rr,5,{upgrade:(L=(0,O.Z)(function*(Y,ie,Ne,Ve){var wt;if(ie<2||!Y.objectStoreNames.contains(oi))return;const bt=Ve.objectStore(oi),jt=yield bt.index("fcmSenderId").get(C);if(yield bt.clear(),jt)if(2===ie){const It=jt;if(!It.auth||!It.p256dh||!It.endpoint)return;D={token:It.fcmToken,createTime:null!==(wt=It.createTime)&&void 0!==wt?wt:Date.now(),subscriptionOptions:{auth:It.auth,p256dh:It.p256dh,endpoint:It.endpoint,swScope:It.swScope,vapidKey:"string"==typeof It.vapidKey?It.vapidKey:xr(It.vapidKey)}}}else if(3===ie){const It=jt;D={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:xr(It.auth),p256dh:xr(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:xr(It.vapidKey)}}}else if(4===ie){const It=jt;D={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:xr(It.auth),p256dh:xr(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:xr(It.vapidKey)}}}}),function(ie,Ne,Ve,wt){return L.apply(this,arguments)})})).close(),yield(0,se.Lj)(Rr),yield(0,se.Lj)("fcm_vapid_details_db"),yield(0,se.Lj)("undefined"),kl(D)?D:null;var L}),Rd.apply(this,arguments)}function kl(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:D}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Gi="firebase-messaging-store";let af=null;function un(){return af||(af=(0,se.X3)("firebase-messaging-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(Gi)}})),af}function Ba(C){return to.apply(this,arguments)}function to(){return(to=(0,O.Z)(function*(C){const D=ar(C),L=yield(yield un()).transaction(Gi).objectStore(Gi).get(D);if(L)return L;{const Y=yield Ol(C.appConfig.senderId);if(Y)return yield en(C,Y),Y}})).apply(this,arguments)}function en(C,D){return ja.apply(this,arguments)}function ja(){return(ja=(0,O.Z)(function*(C,D){const R=ar(C),Y=(yield un()).transaction(Gi,"readwrite");return yield Y.objectStore(Gi).put(D,R),yield Y.done,D})).apply(this,arguments)}function Ru(C){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,O.Z)(function*(C){const D=ar(C),L=(yield un()).transaction(Gi,"readwrite");yield L.objectStore(Gi).delete(D),yield L.done})).apply(this,arguments)}function ar({appConfig:C}){return C.appId}const In=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function qi(C,D){return ur.apply(this,arguments)}function ur(){return(ur=(0,O.Z)(function*(C,D){const R=yield Go(C),L=qo(D),Y={method:"POST",headers:R,body:JSON.stringify(L)};let ie;try{ie=yield(yield fetch(zi(C.appConfig),Y)).json()}catch(Ne){throw In.create("token-subscribe-failed",{errorInfo:Ne})}if(ie.error)throw In.create("token-subscribe-failed",{errorInfo:ie.error.message});if(!ie.token)throw In.create("token-subscribe-no-token");return ie.token})).apply(this,arguments)}function no(C,D){return hs.apply(this,arguments)}function hs(){return(hs=(0,O.Z)(function*(C,D){const R=yield Go(C),L=qo(D.subscriptionOptions),Y={method:"PATCH",headers:R,body:JSON.stringify(L)};let ie;try{ie=yield(yield fetch(`${zi(C.appConfig)}/${D.token}`,Y)).json()}catch(Ne){throw In.create("token-update-failed",{errorInfo:Ne})}if(ie.error)throw In.create("token-update-failed",{errorInfo:ie.error.message});if(!ie.token)throw In.create("token-update-no-token");return ie.token})).apply(this,arguments)}function $a(C,D){return Di.apply(this,arguments)}function Di(){return(Di=(0,O.Z)(function*(C,D){const L={method:"DELETE",headers:yield Go(C)};try{const ie=yield(yield fetch(`${zi(C.appConfig)}/${D}`,L)).json();if(ie.error)throw In.create("token-unsubscribe-failed",{errorInfo:ie.error.message})}catch(Y){throw In.create("token-unsubscribe-failed",{errorInfo:Y})}})).apply(this,arguments)}function zi({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function Go(C){return pt.apply(this,arguments)}function pt(){return(pt=(0,O.Z)(function*({appConfig:C,installations:D}){const R=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function qo({p256dh:C,auth:D,endpoint:R,vapidKey:L}){const Y={web:{endpoint:R,auth:D,p256dh:C}};return L!==Xs&&(Y.web.applicationPubKey=L),Y}const Nu=6048e5;function Ha(C){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,O.Z)(function*(C){const D=yield gn(C.swRegistration,C.vapidKey),R={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:D.endpoint,auth:xr(D.getKey("auth")),p256dh:xr(D.getKey("p256dh"))},L=yield Ba(C.firebaseDependencies);if(L){if(ro(L.subscriptionOptions,R))return Date.now()>=L.createTime+Nu?Bl(C,{token:L.token,createTime:Date.now(),subscriptionOptions:R}):L.token;try{yield $a(C.firebaseDependencies,L.token)}catch(Y){console.warn(Y)}return Ft(C.firebaseDependencies,R)}return Ft(C.firebaseDependencies,R)})).apply(this,arguments)}function Ga(C){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,O.Z)(function*(C){const D=yield Ba(C.firebaseDependencies);D&&(yield $a(C.firebaseDependencies,D.token),yield Ru(C.firebaseDependencies));const R=yield C.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Bl(C,D){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,O.Z)(function*(C,D){try{const R=yield no(C.firebaseDependencies,D),L=Object.assign(Object.assign({},D),{token:R,createTime:Date.now()});return yield en(C.firebaseDependencies,L),R}catch(R){throw yield Ga(C),R}})).apply(this,arguments)}function Ft(C,D){return jl.apply(this,arguments)}function jl(){return(jl=(0,O.Z)(function*(C,D){const L={token:yield qi(C,D),createTime:Date.now(),subscriptionOptions:D};return yield en(C,L),L.token})).apply(this,arguments)}function gn(C,D){return zo.apply(this,arguments)}function zo(){return(zo=(0,O.Z)(function*(C,D){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:xd(D)})})).apply(this,arguments)}function ro(C,D){return D.vapidKey===C.vapidKey&&D.endpoint===C.endpoint&&D.auth===C.auth&&D.p256dh===C.p256dh}function ai(C){const D={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function qa(C,D){if(!D.notification)return;C.notification={};const R=D.notification.title;R&&(C.notification.title=R);const L=D.notification.body;L&&(C.notification.body=L);const Y=D.notification.image;Y&&(C.notification.image=Y)}(D,C),function $l(C,D){!D.data||(C.data=D.data)}(D,C),function og(C,D){if(!D.fcmOptions)return;C.fcmOptions={};const R=D.fcmOptions.link;R&&(C.fcmOptions.link=R);const L=D.fcmOptions.analytics_label;L&&(C.fcmOptions.analyticsLabel=L)}(D,C),D}function Pu(C){return"object"==typeof C&&!!C&&Bo in C}function za(C,D){const R=[];for(let L=0;L<C.length;L++)R.push(C.charAt(L)),L<D.length&&R.push(D.charAt(L));return R.join("")}function Fn(C){return In.create("missing-app-config-values",{valueName:C})}za("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),za("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class fs{constructor(D,R,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Ou(C){if(!C||!C.options)throw Fn("App Configuration Object");if(!C.name)throw Fn("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:R}=C;for(const L of D)if(!R[L])throw Fn(L);return{appName:C.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Y,installations:R,analyticsProvider:L}}_delete(){return Promise.resolve()}}function Wa(C){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,O.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(Ad,{scope:_r}),C.swRegistration.update().catch(()=>{})}catch(D){throw In.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function Ti(C,D){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,O.Z)(function*(C,D){if(!D&&!C.swRegistration&&(yield Wa(C)),D||!C.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw In.create("invalid-sw-registration");C.swRegistration=D}})).apply(this,arguments)}function ku(C,D){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,O.Z)(function*(C,D){D?C.vapidKey=D:C.vapidKey||(C.vapidKey=Xs)})).apply(this,arguments)}function Ka(){return(Ka=(0,O.Z)(function*(C,D){if(!navigator)throw In.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw In.create("permission-blocked");return yield ku(C,null==D?void 0:D.vapidKey),yield Ti(C,null==D?void 0:D.serviceWorkerRegistration),Ha(C)})).apply(this,arguments)}function Wo(C,D,R){return ql.apply(this,arguments)}function ql(){return(ql=(0,O.Z)(function*(C,D,R){const L=Za(D);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:R[Bo],message_name:R[Sd],message_time:R[sf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Za(C){switch(C){case jo.NOTIFICATION_CLICKED:return"notification_open";case jo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function zl(){return(zl=(0,O.Z)(function*(C,D){const R=D.data;if(!R.isFirebaseMessaging)return;C.onMessageHandler&&R.messageType===jo.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(ai(R)):C.onMessageHandler.next(ai(R)));const L=R.data;Pu(L)&&"1"===L[Md]&&(yield Wo(C,R.messageType,L))})).apply(this,arguments)}const Ko="@firebase/messaging",Nd=C=>{const D=new fs(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function ag(C,D){return zl.apply(this,arguments)}(D,R)),D},Zo=C=>{const D=C.getProvider("messaging").getImmediate();return{getToken:L=>function Fu(C,D){return Ka.apply(this,arguments)}(D,L)}};function Yo(){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,O.Z)(function*(){try{yield(0,ne.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Pd(){(0,ae._registerComponent)(new ge.wA("messaging",Nd,"PUBLIC")),(0,ae._registerComponent)(new ge.wA("messaging-internal",Zo,"PRIVATE")),(0,ae.registerVersion)(Ko,"0.9.13"),(0,ae.registerVersion)(Ko,"0.9.13","esm2017")}();const Od="analytics",ug="firebase_id",ps="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Qo="https://www.googletagmanager.com/gtag/js",tr=new ue.Yd("@firebase/analytics");function cf(C){return Promise.all(C.map(D=>D.catch(R=>R)))}function io(C,D){const R=document.createElement("script");R.src=`${Qo}?l=${C}&id=${D}`,R.async=!0,document.head.appendChild(R)}function Fd(C,D,R,L,Y,ie){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,O.Z)(function*(C,D,R,L,Y,ie){const Ne=L[Y];try{if(Ne)yield D[Ne];else{const wt=(yield cf(R)).find(bt=>bt.measurementId===Y);wt&&(yield D[wt.appId])}}catch(Ve){tr.error(Ve)}C("config",Y,ie)})).apply(this,arguments)}function Uu(C,D,R,L,Y){return so.apply(this,arguments)}function so(){return(so=(0,O.Z)(function*(C,D,R,L,Y){try{let ie=[];if(Y&&Y.send_to){let Ne=Y.send_to;Array.isArray(Ne)||(Ne=[Ne]);const Ve=yield cf(R);for(const wt of Ne){const bt=Ve.find(It=>It.measurementId===wt),jt=bt&&D[bt.appId];if(!jt){ie=[];break}ie.push(jt)}}0===ie.length&&(ie=Object.values(D)),yield Promise.all(ie),C("event",L,Y||{})}catch(ie){tr.error(ie)}})).apply(this,arguments)}function ye(){const C=window.document.getElementsByTagName("script");for(const D of Object.values(C))if(D.src&&D.src.includes(Qo))return D;return null}const mn=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),cn=new class at{constructor(D={},R=1e3){this.throttleMetadata=D,this.intervalMillis=R}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,R){this.throttleMetadata[D]=R}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Ja(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Zi(C){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,O.Z)(function*(C){var D;const{appId:R,apiKey:L}=C,Y={method:"GET",headers:Ja(L)},ie=ps.replace("{app-id}",R),Ne=yield fetch(ie,Y);if(200!==Ne.status&&304!==Ne.status){let Ve="";try{const wt=yield Ne.json();(null===(D=wt.error)||void 0===D?void 0:D.message)&&(Ve=wt.error.message)}catch(wt){}throw mn.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:Ve})}return Ne.json()})).apply(this,arguments)}function Lt(C){return Us.apply(this,arguments)}function Us(){return(Us=(0,O.Z)(function*(C,D=cn,R){const{appId:L,apiKey:Y,measurementId:ie}=C.options;if(!L)throw mn.create("no-app-id");if(!Y){if(ie)return{measurementId:ie,appId:L};throw mn.create("no-api-key")}const Ne=D.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ve=new eu;return setTimeout((0,O.Z)(function*(){Ve.abort()}),void 0!==R?R:6e4),Rn({appId:L,apiKey:Y,measurementId:ie},Ne,Ve,D)})).apply(this,arguments)}function Rn(C,D,R){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,O.Z)(function*(C,{throttleEndTimeMillis:D,backoffCount:R},L,Y=cn){const{appId:ie,measurementId:Ne}=C;try{yield Pt(L,D)}catch(Ve){if(Ne)return tr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${Ve.message}]`),{appId:ie,measurementId:Ne};throw Ve}try{const Ve=yield Zi(C);return Y.deleteThrottleMetadata(ie),Ve}catch(Ve){if(!Vd(Ve)){if(Y.deleteThrottleMetadata(ie),Ne)return tr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${Ve.message}]`),{appId:ie,measurementId:Ne};throw Ve}const wt=503===Number(Ve.customData.httpStatus)?(0,ne.$s)(R,Y.intervalMillis,30):(0,ne.$s)(R,Y.intervalMillis),bt={throttleEndTimeMillis:Date.now()+wt,backoffCount:R+1};return Y.setThrottleMetadata(ie,bt),tr.debug(`Calling attemptFetch again in ${wt} millis`),Rn(C,bt,L,Y)}})).apply(this,arguments)}function Pt(C,D){return new Promise((R,L)=>{const Y=Math.max(D-Date.now(),0),ie=setTimeout(R,Y);C.addEventListener(()=>{clearTimeout(ie),L(mn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Vd(C){if(!(C instanceof ne.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}class eu{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function Jo(){return ao.apply(this,arguments)}function ao(){return(ao=(0,O.Z)(function*(){if(!(0,ne.hl)())return tr.warn(mn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(C){return tr.warn(mn.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function Nr(){return(Nr=(0,O.Z)(function*(C,D,R,L,Y,ie,Ne){var Ve;const wt=Lt(C);wt.then(qn=>{R[qn.measurementId]=qn.appId,C.options.measurementId&&qn.measurementId!==C.options.measurementId&&tr.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${qn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(qn=>tr.error(qn)),D.push(wt);const bt=Jo().then(qn=>{if(qn)return L.getId()}),[jt,It]=yield Promise.all([wt,bt]);ye()||io(ie,jt.measurementId),Y("js",new Date);const lr=null!==(Ve=null==Ne?void 0:Ne.config)&&void 0!==Ve?Ve:{};return lr.origin="firebase",lr.update=!0,null!=It&&(lr[ug]=It),Y("config",jt.measurementId,lr),jt.measurementId})).apply(this,arguments)}class Cn{constructor(D){this.app=D}_delete(){return delete Pr[this.app.options.appId],Promise.resolve()}}let Pr={},Wl=[];const vr={};let yt,uo,Ai="dataLayer",li=!1;function Mt(C,D,R){!function lo(){const C=[];if((0,ne.ru)()&&C.push("This is a browser extension environment."),(0,ne.zI)()||C.push("Cookies are not available."),C.length>0){const D=C.map((L,Y)=>`(${Y+1}) ${L}`).join(" "),R=mn.create("invalid-analytics-context",{errorInfo:D});tr.warn(R.message)}}();const L=C.options.appId;if(!L)throw mn.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw mn.create("no-api-key");tr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Pr[L])throw mn.create("already-exists",{id:L});if(!li){!function Lu(C){let D=[];Array.isArray(window[C])?D=window[C]:window[C]=D}(Ai);const{wrappedGtag:ie,gtagCore:Ne}=function lg(C,D,R,L,Y){let ie=function(...Ne){window[L].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ie=window[Y]),window[Y]=function Ld(C,D,R,L){function ie(){return(ie=(0,O.Z)(function*(Ne,Ve,wt){try{"event"===Ne?yield Uu(C,D,R,Ve,wt):"config"===Ne?yield Fd(C,D,R,L,Ve,wt):C("set",Ve)}catch(bt){tr.error(bt)}})).apply(this,arguments)}return function Y(Ne,Ve,wt){return ie.apply(this,arguments)}}(ie,C,D,R),{gtagCore:ie,wrappedGtag:window[Y]}}(Pr,Wl,vr,Ai,"gtag");uo=ie,yt=Ne,li=!0}return Pr[L]=function Xo(C,D,R,L,Y,ie,Ne){return Nr.apply(this,arguments)}(C,Wl,vr,D,yt,Ai,R),new Cn(C)}function ea(){return(ea=(0,O.Z)(function*(C,D,R,L,Y){if(Y&&Y.global)C("event",R,L);else{const ie=yield D;C("event",R,Object.assign(Object.assign({},L),{send_to:ie}))}})).apply(this,arguments)}function cg(){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,O.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(C){return!1}})).apply(this,arguments)}const $u="@firebase/analytics";!function Or(){(0,ae._registerComponent)(new ge.wA(Od,(D,{options:R})=>Mt(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ae._registerComponent)(new ge.wA("analytics-internal",function C(D){try{const R=D.getProvider(Od).getImmediate();return{logEvent:(L,Y,ie)=>function Ud(C,D,R,L){C=(0,ne.m9)(C),function Yi(C,D,R,L,Y){return ea.apply(this,arguments)}(uo,Pr[C.app.options.appId],D,R,L).catch(Y=>tr.error(Y))}(R,L,Y,ie)}}catch(R){throw mn.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ae.registerVersion)($u,"0.7.9"),(0,ae.registerVersion)($u,"0.7.9","esm2017")}();var po=P(4408),Tn=P(7565);const ms=new class Hu extends Tn.v{}(class kr extends po.o{constructor(D,R){super(D,R),this.scheduler=D,this.work=R}schedule(D,R=0){return R>0?super.schedule(D,R):(this.delay=R,this.state=D,this.scheduler.flush(this),this)}execute(D,R){return R>0||this.closed?super.execute(D,R):this._execute(D,R)}requestAsyncId(D,R,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(D,R,L):D.flush(this)}});var Gu=P(4986),Yr=P(8505),Er=P(5363),nu=P(9468);const ta=new g.GfV("7.3.0"),ci="__angularfire_symbol__analyticsIsSupportedValue",go="__angularfire_symbol__analyticsIsSupported",ys="__angularfire_symbol__remoteConfigIsSupportedValue",Ji="__angularfire_symbol__remoteConfigIsSupported",qu="__angularfire_symbol__messagingIsSupportedValue",Yl="__angularfire_symbol__messagingIsSupported";function fg(C,D,R){if(D){if(1===D.length)return D[0];const ie=D.filter(Ne=>Ne.app===R);if(1===ie.length)return ie[0]}return R.container.getProvider(C).getImmediate({optional:!0})}globalThis[go]||(globalThis[go]=cg().then(C=>globalThis[ci]=C).catch(()=>globalThis[ci]=!1)),globalThis[Yl]||(globalThis[Yl]=Yo().then(C=>globalThis[qu]=C).catch(()=>globalThis[qu]=!1)),globalThis[Ji]||(globalThis[Ji]=xu().then(C=>globalThis[ys]=C).catch(()=>globalThis[ys]=!1));const Bd=(C,D)=>{const R=D?[D]:(0,X.C6)(),L=[];return R.forEach(Y=>{Y.container.getProvider(C).instances.forEach(Ne=>{L.includes(Ne)||L.push(Ne)})}),L};function Xi(){}class Ql{constructor(D,R=ms){this.zone=D,this.delegate=R}now(){return this.delegate.now()}schedule(D,R,L){const Y=this.zone;return this.delegate.schedule(function(Ne){Y.runGuarded(()=>{D.apply(this,[Ne])})},R,L)}}class Jl{constructor(D){this.zone=D,this.task=null}call(D,R){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xi,{},Xi,Xi)),R.pipe((0,Yr.b)({next:L,complete:L,error:L})).subscribe(D).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ff=(()=>{class C{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Ql(Zone.current)),this.insideAngular=R.run(()=>new Ql(Zone.current,Gu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(R){return new(R||C)(g.LFG(g.R0b))},C.\u0275prov=g.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function yn(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function di(C){return C.pipe((0,Er.Q)(yn().outsideAngular))}function ra(C){return yn(),function $s(C){return function(R){return(R=R.lift(new Jl(C.ngZone))).pipe((0,nu.R)(C.outsideAngular),(0,Er.Q)(C.insideAngular))}}(yn())(C)}},2090:(tt,we,P)=>{P.d(we,{BH:()=>qe,LL:()=>oe,ZR:()=>me,zI:()=>Z,US:()=>ge,tV:()=>he,L:()=>se,$s:()=>Bt,r3:()=>Tr,Sg:()=>Me,ne:()=>bi,vZ:()=>ti,ZB:()=>j,pd:()=>Rs,m9:()=>mr,z$:()=>Pe,jU:()=>Ce,ru:()=>ze,d:()=>De,xb:()=>Vt,w1:()=>Ee,hl:()=>$,uI:()=>Ue,UG:()=>pe,b$:()=>Qe,G6:()=>Be,Mn:()=>be,xO:()=>Ar,zd:()=>Fi,eu:()=>ve});const ae=function(V){const q=[];let W=0;for(let Ie=0;Ie<V.length;Ie++){let G=V.charCodeAt(Ie);G<128?q[W++]=G:G<2048?(q[W++]=G>>6|192,q[W++]=63&G|128):55296==(64512&G)&&Ie+1<V.length&&56320==(64512&V.charCodeAt(Ie+1))?(G=65536+((1023&G)<<10)+(1023&V.charCodeAt(++Ie)),q[W++]=G>>18|240,q[W++]=G>>12&63|128,q[W++]=G>>6&63|128,q[W++]=63&G|128):(q[W++]=G>>12|224,q[W++]=G>>6&63|128,q[W++]=63&G|128)}return q},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,q){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let G=0;G<V.length;G+=3){const J=V[G],Re=G+1<V.length,et=Re?V[G+1]:0,ft=G+2<V.length,Tt=ft?V[G+2]:0;let Kn=(15&et)<<2|Tt>>6,Sr=63&Tt;ft||(Sr=64,Re||(Kn=64)),Ie.push(W[J>>2],W[(3&J)<<4|et>>4],W[Kn],W[Sr])}return Ie.join("")},encodeString(V,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(V):this.encodeByteArray(ae(V),q)},decodeString(V,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(V):function(V){const q=[];let W=0,Ie=0;for(;W<V.length;){const G=V[W++];if(G<128)q[Ie++]=String.fromCharCode(G);else if(G>191&&G<224){const J=V[W++];q[Ie++]=String.fromCharCode((31&G)<<6|63&J)}else if(G>239&&G<365){const ft=((7&G)<<18|(63&V[W++])<<12|(63&V[W++])<<6|63&V[W++])-65536;q[Ie++]=String.fromCharCode(55296+(ft>>10)),q[Ie++]=String.fromCharCode(56320+(1023&ft))}else{const J=V[W++],Re=V[W++];q[Ie++]=String.fromCharCode((15&G)<<12|(63&J)<<6|63&Re)}}return q.join("")}(this.decodeStringToByteArray(V,q))},decodeStringToByteArray(V,q){this.init_();const W=q?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let G=0;G<V.length;){const J=W[V.charAt(G++)],et=G<V.length?W[V.charAt(G)]:0;++G;const Tt=G<V.length?W[V.charAt(G)]:64;++G;const Ct=G<V.length?W[V.charAt(G)]:64;if(++G,null==J||null==et||null==Tt||null==Ct)throw Error();Ie.push(J<<2|et>>4),64!==Tt&&(Ie.push(et<<4&240|Tt>>2),64!==Ct&&Ie.push(Tt<<6&192|Ct))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}},se=function(V){return function(V){const q=ae(V);return ge.encodeByteArray(q,!0)}(V).replace(/\./g,"")},he=function(V){try{return ge.decodeString(V,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function j(V,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return q}for(const W in q)!q.hasOwnProperty(W)||!te(W)||(V[W]=j(V[W],q[W]));return V}function te(V){return"__proto__"!==V}class qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,W)=>{this.resolve=q,this.reject=W})}wrapCallback(q){return(W,Ie)=>{W?this.reject(W):this.resolve(Ie),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(W):q(W,Ie))}}}function Me(V,q){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=q||"demo-project",G=V.iat||0,J=V.sub||V.user_id;if(!J)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Re=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:G,exp:G+3600,auth_time:G,sub:J,user_id:J,firebase:{sign_in_provider:"custom",identities:{}}},V);return[se(JSON.stringify({alg:"none",type:"JWT"})),se(JSON.stringify(Re)),""].join(".")}function Pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function pe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(V){return!1}}function Ce(){return"object"==typeof self&&self.self===self}function ze(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function Qe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function De(){return Pe().indexOf("Electron/")>=0}function Ee(){const V=Pe();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function be(){return Pe().indexOf("MSAppHost/")>=0}function Be(){return!pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $(){return"object"==typeof indexedDB}function ve(){return new Promise((V,q)=>{try{let W=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",G=self.indexedDB.open(Ie);G.onsuccess=()=>{G.result.close(),W||self.indexedDB.deleteDatabase(Ie),V(!0)},G.onupgradeneeded=()=>{W=!1},G.onerror=()=>{var J;q((null===(J=G.error)||void 0===J?void 0:J.message)||"")}}catch(W){q(W)}})}function Z(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class me extends Error{constructor(q,W,Ie){super(W),this.code=q,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oe.prototype.create)}}class oe{constructor(q,W,Ie){this.service=q,this.serviceName=W,this.errors=Ie}create(q,...W){const Ie=W[0]||{},G=`${this.service}/${q}`,J=this.errors[q],Re=J?function Oe(V,q){return V.replace(ht,(W,Ie)=>{const G=q[Ie];return null!=G?String(G):`<${Ie}?>`})}(J,Ie):"Error";return new me(G,`${this.serviceName}: ${Re} (${G}).`,Ie)}}const ht=/\{\$([^}]+)}/g;function Tr(V,q){return Object.prototype.hasOwnProperty.call(V,q)}function Vt(V){for(const q in V)if(Object.prototype.hasOwnProperty.call(V,q))return!1;return!0}function ti(V,q){if(V===q)return!0;const W=Object.keys(V),Ie=Object.keys(q);for(const G of W){if(!Ie.includes(G))return!1;const J=V[G],Re=q[G];if(fr(J)&&fr(Re)){if(!ti(J,Re))return!1}else if(J!==Re)return!1}for(const G of Ie)if(!W.includes(G))return!1;return!0}function fr(V){return null!==V&&"object"==typeof V}function Ar(V){const q=[];for(const[W,Ie]of Object.entries(V))Array.isArray(Ie)?Ie.forEach(G=>{q.push(encodeURIComponent(W)+"="+encodeURIComponent(G))}):q.push(encodeURIComponent(W)+"="+encodeURIComponent(Ie));return q.length?"&"+q.join("&"):""}function Fi(V){const q={};return V.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[G,J]=Ie.split("=");q[decodeURIComponent(G)]=decodeURIComponent(J)}}),q}function Rs(V){const q=V.indexOf("?");if(!q)return"";const W=V.indexOf("#",q);return V.substring(q,W>0?W:void 0)}function bi(V,q){const W=new mt(V,q);return W.subscribe.bind(W)}class mt{constructor(q,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{q(this)}).catch(Ie=>{this.error(Ie)})}next(q){this.forEachObserver(W=>{W.next(q)})}error(q){this.forEachObserver(W=>{W.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,W,Ie){let G;if(void 0===q&&void 0===W&&void 0===Ie)throw new Error("Missing Observer.");G=function Mn(V,q){if("object"!=typeof V||null===V)return!1;for(const W of q)if(W in V&&"function"==typeof V[W])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:W,complete:Ie},void 0===G.next&&(G.next=On),void 0===G.error&&(G.error=On),void 0===G.complete&&(G.complete=On);const J=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?G.error(this.finalError):G.complete()}catch(Re){}}),this.observers.push(G),J}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,q)}sendOne(q,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{W(this.observers[q])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function On(){}function Bt(V,q=1e3,W=2){const Ie=q*Math.pow(W,V),G=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+G)}function mr(V){return V&&V._delegate?V._delegate:V}},412:(tt,we,P)=>{var g=P(5e3);let X=null;function O(){return X}const ue=new g.OlP("DocumentToken");let se=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function he(){return(0,g.LFG)(j)}()},providedIn:"platform"}),n})();const H=new g.OlP("Location Initialized");let j=(()=>{class n extends se{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){te()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){te()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function qe(){return new j((0,g.LFG)(ue))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Pe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ce(n){const e=(0,g.LFG)(ue).location;return new Qe((0,g.LFG)(se),e&&e.origin||"")}()},providedIn:"root"}),n})();const ze=new g.OlP("appBaseHref");let Qe=(()=>{class n extends pe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+Ue(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+Ue(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(se),g.LFG(ze,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n extends pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+Ue(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+Ue(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(se),g.LFG(ze,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ee=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Pe(Be(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=Me,n.stripTrailingSlash=Pe,n.\u0275fac=function(t){return new(t||n)(g.LFG(pe),g.LFG(se))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function be(){return new Ee((0,g.LFG)(pe),(0,g.LFG)(se))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}let Ui=(()=>{class n{constructor(t,r,i,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})(),Xn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new an,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Su("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Su("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class an{constructor(){this.$implicit=null,this.ngIf=null}}function Su(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let Md=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function $o(n){return"server"===n}let kl=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new Ho((0,g.LFG)(ue),window)}),n})();class Ho{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Gi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Fl(this.window.history)||Fl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Fl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class to extends class Ba extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ne(n){X||(X=n)}(new to)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ja(){return en=en||document.querySelector("base"),en?en.getAttribute("href"):null}();return null==t?null:function Ls(n){Ru=Ru||document.createElement("a"),Ru.setAttribute("href",n);const e=Ru.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){en=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function La(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Ru,en=null;const ar=new g.OlP("TRANSITION_ID"),In=[{provide:g.ip1,useFactory:function Ll(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[ar,ue,g.zs3],multi:!0}];class qi{static init(){(0,g.VLi)(new qi)}addToWindow(e){g.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const i=g.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const f=function(_){c=c||_,u--,0==u&&r(c)};i.forEach(function(_){_.whenStable(f)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let ur=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const no=new g.OlP("EventManagerPlugins");let hs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(no),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class $a{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Di=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),zi=(()=>{class n extends Di{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Go),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Go))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Go(n){O().remove(n)}const pt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},qo=/%COMP%/g;function Ae(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ae(n,i,t):(i=i.replace(qo,n),t.push(i))}return t}function Ft(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let gn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new zo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new qa(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case g.ifc.ShadowDom:return new $l(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ae(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(hs),g.LFG(zi),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class zo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(pt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=pt[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=pt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,i&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ft(r)):this.eventManager.addEventListener(e,t,Ft(r))}}class qa extends zo{constructor(e,t,r,i){super(e),this.component=r;const u=Ae(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Ul(n){return"_ngcontent-%COMP%".replace(qo,n)}(i+"-"+r.id),this.hostAttr=function Bl(n){return"_nghost-%COMP%".replace(qo,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class $l extends zo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ae(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const f=document.createElement("style");f.textContent=u[c],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let og=(()=>{class n extends $a{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Pu=["alt","control","meta","shift"],Ou={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Fn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},fs={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Wa=(()=>{class n extends $a{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="";if(Pu.forEach(_=>{const b=r.indexOf(_);b>-1&&(r.splice(b,1),c+=_+".")}),c+=u,0!=r.length||0===u.length)return null;const f={};return f.domEventName=i,f.fullKey=c,f}static getEventFullKey(t){let r="",i=function Vs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Fn.hasOwnProperty(e)&&(e=Fn[e]))}return Ou[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Pu.forEach(u=>{u!=i&&fs[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Fu=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function Ti(){to.makeCurrent(),qi.init()},multi:!0},{provide:ue,useFactory:function ku(){return(0,g.RDi)(document),document},deps:[]}]),Ka=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Hl(){return new g.qLn},deps:[]},{provide:no,useClass:og,multi:!0,deps:[ue,g.R0b,g.Lbi]},{provide:no,useClass:Wa,multi:!0,deps:[ue]},{provide:gn,useClass:gn,deps:[hs,zi,g.AFp]},{provide:g.FYo,useExisting:gn},{provide:Di,useExisting:zi},{provide:zi,useClass:zi,deps:[ue]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:hs,useClass:hs,deps:[no,g.R0b]},{provide:class un{},useClass:ur,deps:[]}];let Wo=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:ar,useExisting:g.AFp},In]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:Ka,imports:[Md,g.hGG]}),n})();"undefined"!=typeof window&&window;var ye=P(5861),df=P(4986),mn=P(8306),Kt=P(8996),oo=P(7669);function at(...n){const e=(0,oo.yG)(n);return(0,Kt.D)(n,e)}var cn=P(5813),Ja=P(8189);function Xa(...n){return function Zi(){return(0,Ja.J)(1)}()((0,Kt.D)(n,(0,oo.yG)(n)))}var Lt=P(4482);function Us(...n){const e=(0,oo.yG)(n);return(0,Lt.e)((t,r)=>{(e?Xa(n,t,e):Xa(n,t)).subscribe(r)})}var Rn=P(5403);function Bu(){return(0,Lt.e)((n,e)=>{let t,r=!1;n.subscribe((0,Rn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}var Pt=P(4004);function Vd(n,e,t,r,i){return(u,c)=>{let f=t,_=e,b=0;u.subscribe((0,Rn.x)(c,S=>{const M=b++;_=f?n(_,S,M):(f=!0,S),r&&c.next(_)},i&&(()=>{f&&c.next(_),c.complete()})))}}function eu(n,e){return(0,Lt.e)(Vd(n,e,arguments.length>=2,!0))}var Jo=P(4671);function Xo(n,e){return n===e}function Nr(n,e){return(0,Lt.e)((t,r)=>{let i=0;t.subscribe((0,Rn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var Xe,Cn=P(2011),Wl=(P(8775),P(3942)),vr=P(9681),Ai=P(4859),ui=P(1877),yt=P(2090),uo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},li={},lo=lo||{},Mt=uo||self;function Yi(){}function ea(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Qi(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var co="closure_uid_"+(1e9*Math.random()>>>0),tu=0;function ho(n,e,t){return n.call.apply(n.bind,arguments)}function gs(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Dn(n,e,t){return(Dn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ho:gs).apply(null,arguments)}function fo(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Nn(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function Zr(){this.s=this.s,this.o=this.o}var Kl={};Zr.prototype.s=!1,Zr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function ju(n){return Object.prototype.hasOwnProperty.call(n,co)&&n[co]||(n[co]=++tu)}(this);delete Kl[n]}},Zr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const wn=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},hf=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function dg(n){return Array.prototype.concat.apply([],arguments)}function Ud(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function $u(n){return/^[\s\xa0]*$/.test(n)}var kr,Zl=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Or(n,e){return-1!=n.indexOf(e)}function po(n,e){return n<e?-1:n>e?1:0}e:{var Tn=Mt.navigator;if(Tn){var Hu=Tn.userAgent;if(Hu){kr=Hu;break e}}kr=""}function ms(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function hg(n){const e={};for(const t in n)e[t]=n[t];return e}var Gu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yr(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<Gu.length;u++)t=Gu[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Er(n){return Er[" "](n),n}Er[" "]=Yi;var mo,n,ta=Or(kr,"Opera"),ci=Or(kr,"Trident")||Or(kr,"MSIE"),go=Or(kr,"Edge"),ys=go||ci,Ji=Or(kr,"Gecko")&&!(Or(kr.toLowerCase(),"webkit")&&!Or(kr,"Edge"))&&!(Or(kr,"Trident")||Or(kr,"MSIE"))&&!Or(kr,"Edge"),qu=Or(kr.toLowerCase(),"webkit")&&!Or(kr,"Edge");function Yl(){var n=Mt.document;return n?n.documentMode:void 0}e:{var Fr="",na=(n=kr,Ji?/rv:([^\);]+)(\)|;)/.exec(n):go?/Edge\/([\d\.]+)/.exec(n):ci?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):qu?/WebKit\/(\S+)/.exec(n):ta?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(na&&(Fr=na?na[1]:""),ci){var Bs=Yl();if(null!=Bs&&Bs>parseFloat(Fr)){mo=String(Bs);break e}}mo=Fr}var fg={};var Jl=Mt.document&&ci&&(Yl()||parseInt(mo,10))||void 0,ff=function(){if(!Mt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Mt.addEventListener("test",Yi,e),Mt.removeEventListener("test",Yi,e)}catch(t){}return n}();function yn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function js(n,e){if(yn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Ji){e:{try{Er(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:_s[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&js.Z.h.call(this)}}yn.prototype.h=function(){this.defaultPrevented=!0},Nn(js,yn);var _s={2:"touch",3:"pen",4:"mouse"};js.prototype.h=function(){js.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var di="closure_listenable_"+(1e6*Math.random()|0),Cy=0;function ra(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++Cy,this.ca=this.fa=!1}function $s(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function vs(n){this.src=n,this.g={},this.h=0}function zu(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=wn(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&($s(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function C(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}vs.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=C(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new ra(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var D="closure_lm_"+(1e6*Math.random()|0),R={};function L(n,e,t,r,i){if(r&&r.once)return Ne(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)L(n,e[u],t,r,i);return null}return t=qn(t),n&&n[di]?n.N(e,t,Qi(r)?!!r.capture:!!r,i):Y(n,e,t,!1,r,i)}function Y(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=Qi(i)?!!i.capture:!!i,f=It(n);if(f||(n[D]=f=new vs(n)),(t=f.add(e,t,r,c,u)).proxy)return t;if(r=function ie(){var e=jt;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)ff||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(bt(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Ne(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Ne(n,e[u],t,r,i);return null}return t=qn(t),n&&n[di]?n.O(e,t,Qi(r)?!!r.capture:!!r,i):Y(n,e,t,!0,r,i)}function Ve(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)Ve(n,e[u],t,r,i);else r=Qi(r)?!!r.capture:!!r,t=qn(t),n&&n[di]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=C(u=n.g[e],t,r,i))&&($s(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=It(n))&&(e=n.g[e.toString()],n=-1,e&&(n=C(e,t,r,i)),(t=-1<n?e[n]:null)&&wt(t))}function wt(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[di])zu(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(bt(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=It(e))?(zu(t,n),0==t.h&&(t.src=null,e[D]=null)):$s(n)}}}function bt(n){return n in R?R[n]:R[n]="on"+n}function jt(n,e){if(n.ca)n=!0;else{e=new js(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&wt(n),n=t.call(r,e)}return n}function It(n){return(n=n[D])instanceof vs?n:null}var lr="__closure_events_fn_"+(1e9*Math.random()>>>0);function qn(n){return"function"==typeof n?n:(n[lr]||(n[lr]=function(e){return n.handleEvent(e)}),n[lr])}function bn(){Zr.call(this),this.i=new vs(this),this.P=this,this.I=null}function dn(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new yn(e,n);else if(e instanceof yn)e.target=e.target||n;else{var i=e;Yr(e=new yn(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=Lr(c,r,!0,e)&&i}if(i=Lr(c=e.g=n,r,!0,e)&&i,i=Lr(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=Lr(c=e.g=t[u],r,!1,e)&&i}function Lr(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var f=c.listener,_=c.ia||c.src;c.fa&&zu(n.i,c),i=!1!==f.call(_,r)&&i}}return i&&!r.defaultPrevented}Nn(bn,Zr),bn.prototype[di]=!0,bn.prototype.removeEventListener=function(n,e,t,r){Ve(this,n,e,t,r)},bn.prototype.M=function(){if(bn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)$s(t[r]);delete n.g[e],n.h--}}this.I=null},bn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},bn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Si=Mt.JSON.stringify;function hi(){var n=Wu;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var qd,$d=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Hd,n=>n.reset());class Hd{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Xl(n){Mt.setTimeout(()=>{throw n},0)}function Gd(n,e){qd||function pf(){var n=Mt.Promise.resolve(void 0);qd=function(){n.then(Dy)}}(),ia||(qd(),ia=!0),Wu.add(n,e)}var ia=!1,Wu=new class jd{constructor(){this.h=this.g=null}add(e,t){const r=$d.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Dy(){for(var n;n=hi();){try{n.h.call(n.g)}catch(t){Xl(t)}var e=$d;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ia=!1}function ec(n,e){bn.call(this),this.h=n||1,this.g=e||Mt,this.j=Dn(this.kb,this),this.l=Date.now()}function zd(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function gf(n,e,t){if("function"==typeof n)t&&(n=Dn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Dn(n.handleEvent,n)}return 2147483647<Number(e)?-1:Mt.setTimeout(n,e||0)}function pg(n){n.g=gf(()=>{n.g=null,n.i&&(n.i=!1,pg(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Nn(ec,bn),(Xe=ec.prototype).da=!1,Xe.S=null,Xe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),dn(this,"tick"),this.da&&(zd(this),this.start()))}},Xe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.M=function(){ec.Z.M.call(this),zd(this),delete this.g};class Ty extends Zr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:pg(this)}M(){super.M(),this.g&&(Mt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sa(n){Zr.call(this),this.h=n,this.g={}}Nn(sa,Zr);var gg=[];function tc(n,e,t,r){Array.isArray(t)||(t&&(gg[0]=t.toString()),t=gg);for(var i=0;i<t.length;i++){var u=L(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Wd(n){ms(n.g,function(e,t){this.g.hasOwnProperty(t)&&wt(e)},n),n.g={}}function yo(){this.g=!0}function nc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function rc(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return Si(t)}catch(f){return e}}(n,t)+(r?" "+r:"")})}sa.prototype.M=function(){sa.Z.M.call(this),Wd(this)},sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yo.prototype.Aa=function(){this.g=!1},yo.prototype.info=function(){};var oa={},mf=null;function ic(){return mf=mf||new bn}function yf(n){yn.call(this,oa.Ma,n)}function sc(n){const e=ic();dn(e,new yf(e,n))}function _f(n,e){yn.call(this,oa.STAT_EVENT,n),this.stat=e}function Qr(n){const e=ic();dn(e,new _f(e,n))}function mg(n,e){yn.call(this,oa.Na,n),this.size=e}function oc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Mt.setTimeout(function(){n()},e)}oa.Ma="serverreachability",Nn(yf,yn),oa.STAT_EVENT="statevent",Nn(_f,yn),oa.Na="timingevent",Nn(mg,yn);var Es={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},aa={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function vf(){}function My(){}vf.prototype.h=null;var Yd,ac={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function yg(){yn.call(this,"d")}function Zd(){yn.call(this,"c")}function uc(){}function Ku(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new sa(this),this.P=xy,this.W=new ec(n=ys?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new _g}function _g(){this.i=null,this.g="",this.h=!1}Nn(yg,yn),Nn(Zd,yn),Nn(uc,vf),uc.prototype.g=function(){return new XMLHttpRequest},uc.prototype.i=function(){return{}},Yd=new uc;var xy=45e3,vg={},wf={};function es(n,e,t){n.K=1,n.v=_n(vo(e)),n.s=t,n.U=!0,bf(n,null)}function bf(n,e){n.F=Date.now(),la(n),n.A=vo(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Df(t.h,"t",r),n.C=0,t=n.l.H,n.h=new _g,n.g=kf(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Ty(Dn(n.Ia,n,n.g),n.O)),tc(n.V,n.g,"readystatechange",n.gb),e=n.H?hg(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),sc(1),function Ay(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",f=u.split("&"),_=0;_<f.length;_++){var b=f[_].split("=");if(1<b.length){var S=b[0];b=b[1];var M=S.split("_");c=2<=M.length&&"type"==M[1]?c+(S+"=")+b+"&":c+(S+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function ws(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function ua(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Eg(n,t),i==wf){4==e&&(n.o=4,Qr(14),r=!1),nc(n.j,n.m,null,"[Incomplete Response]");break}if(i==vg){n.o=4,Qr(15),nc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}nc(n.j,n.m,i,null),lc(n,i)}ws(n)&&i!=wf&&i!=vg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Qr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Pf(e),e.L=!0,Qr(11))):(nc(n.j,n.m,t,"[Invalid Chunked Response]"),Yu(n),Zu(n))}function Eg(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?wf:(t=Number(e.substring(t,r)),isNaN(t)?vg:(r+=1)+t>e.length?wf:(e=e.substr(r,t),n.C=r+t,e))}function la(n){n.Y=Date.now()+n.P,If(n,n.P)}function If(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=oc(Dn(n.eb,n),e)}function Cf(n){n.B&&(Mt.clearTimeout(n.B),n.B=null)}function Zu(n){0==n.l.G||n.I||ih(n.l,n)}function Yu(n){Cf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,zd(n.W),Wd(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function lc(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Jr(t.i,n)))if(t.I=n.N,!n.J&&Jr(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=oc(Dn(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;au(t),N(t)}ou(t),Qr(18)}if(1>=Tf(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else Hs(t,11)}else if((n.J||t.g==n)&&au(t),!$u(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const S=b[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const M=b[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const F=b[5];null!=F&&"number"==typeof F&&0<F&&(t.K=r=1.5*F,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const z=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var u=r.i;!u.g&&(Or(z,"spdy")||Or(z,"quic")||Or(z,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(ha(u,u.h),u.h=null))}if(r.D){const ce=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;ce&&(r.sa=ce,An(r.F,r.D,ce))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=oh(r,r.H?r.la:null,r.W),c.J){Af(r.i,c);var f=c,_=r.K;_&&f.setTimeout(_),f.B&&(Cf(f),la(f)),r.g=c}else mi(r);0<t.l.length&&Fe(t)}else"stop"!=b[0]&&"close"!=b[0]||Hs(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Hs(t,7):T(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}sc(4)}catch(b){}}function dc(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ea(n)||"string"==typeof n)hf(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(ea(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function cc(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(ea(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function hc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof hc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function wg(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];ca(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)ca(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function ca(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Xe=Ku.prototype).setTimeout=function(n){this.P=n},Xe.gb=function(n){n=n.target;const e=this.L;e&&3==gi(n)?e.l():this.Ia(n)},Xe.Ia=function(n){try{if(n==this.g)e:{const S=gi(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>S)&&(3!=S||ys||this.g&&(this.h.h||this.g.ga()||bs(this.g)))){this.I||4!=S||7==e||sc(8==e||0>=M?3:2),Cf(this);var t=this.g.ba();this.N=t;t:if(ws(this)){var r=bs(this.g);n="";var i=r.length,u=4==gi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Yu(this),Zu(this);var c="";break t}this.h.i=new Mt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function Sy(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var f,_=this.g;if((f=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$u(f)){var b=f;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Qr(12),Yu(this),Zu(this);break e}nc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,lc(this,t)}this.U?(ua(this,S,c),ys&&this.i&&3==S&&(tc(this.V,this.W,"tick",this.fb),this.W.start())):(nc(this.j,this.m,c,null),lc(this,c)),4==S&&Yu(this),this.i&&!this.I&&(4==S?ih(this.l,this):(this.i=!1,la(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Qr(12)):(this.o=0,Qr(13)),Yu(this),Zu(this)}}}catch(S){}},Xe.fb=function(){if(this.g){var n=gi(this.g),e=this.g.ga();this.C<e.length&&(Cf(this),ua(this,n,e),this.i&&4!=n&&la(this))}},Xe.cancel=function(){this.I=!0,Yu(this)},Xe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Kd(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(sc(3),Qr(17)),Yu(this),this.o=2,Zu(this)):If(this,this.Y-n)},(Xe=hc.prototype).R=function(){wg(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Xe.T=function(){return wg(this),this.g.concat()},Xe.get=function(n,e){return ca(this.h,n)?this.h[n]:e},Xe.set=function(n,e){ca(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Xe.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var bg=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function _o(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof _o){this.g=void 0!==e?e:n.g,fc(this,n.j),this.s=n.s,Eo(this,n.i),Qu(this,n.m),this.l=n.l,e=n.h;var t=new gc;t.i=e.i,e.g&&(t.g=new hc(e.g),t.h=e.h),Qd(this,t),this.o=n.o}else n&&(t=String(n).match(bg))?(this.g=!!e,fc(this,t[1]||"",!0),this.s=ru(t[2]||""),Eo(this,t[3]||"",!0),Qu(this,t[4]),this.l=ru(t[5]||"",!0),Qd(this,t[6]||"",!0),this.o=ru(t[7]||"")):(this.g=!!e,this.h=new gc(null,this.g))}function vo(n){return new _o(n)}function fc(n,e,t){n.j=t?ru(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Eo(n,e,t){n.i=t?ru(e,!0):e}function Qu(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Qd(n,e,t){e instanceof gc?(n.h=e,function cr(n,e){e&&!n.j&&(ts(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Vr(this,r),Df(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=iu(e,pc)),n.h=new gc(e,n.g))}function An(n,e,t){n.h.set(e,t)}function _n(n){return An(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ru(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function iu(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Py),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Py(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}_o.prototype.toString=function(){var n=[],e=this.j;e&&n.push(iu(e,Cg,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(iu(e,Cg,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(iu(t,"/"==t.charAt(0)?ky:Oy,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",iu(t,H0)),n.join("")};var Cg=/[#\/\?@]/g,Oy=/[#\?:]/g,ky=/[#\?]/g,pc=/[#\?@]/g,H0=/#/g;function gc(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ts(n){n.g||(n.g=new hc,n.h=0,n.i&&function Ig(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Vr(n,e){ts(n),e=da(n,e),ca(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,ca((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&wg(n)))}function Jd(n,e){return ts(n),e=da(n,e),ca(n.g.h,e)}function Df(n,e,t){Vr(n,e),0<t.length&&(n.i=null,n.g.set(da(n,e),Ud(t)),n.h+=t.length)}function da(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function mc(n){this.l=n||Fy,n=Mt.PerformanceNavigationTiming?0<(n=Mt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Mt.g&&Mt.g.Ea&&Mt.g.Ea()&&Mt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xe=gc.prototype).add=function(n,e){ts(this),this.i=null,n=da(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Xe.forEach=function(n,e){ts(this),this.g.forEach(function(t,r){hf(t,function(i){n.call(e,i,r,this)},this)},this)},Xe.T=function(){ts(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},Xe.R=function(n){ts(this);var e=[];if("string"==typeof n)Jd(this,n)&&(e=dg(e,this.g.get(da(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=dg(e,n[t])}return e},Xe.set=function(n,e){return ts(this),this.i=null,Jd(this,n=da(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Xe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=i;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var Fy=10;function Xd(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Tf(n){return n.h?1:n.g?n.g.size:0}function Jr(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function ha(n,e){n.g?n.g.add(e):n.h=e}function Af(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Sf(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Ud(n.i)}function yc(){}function Mf(){this.g=new yc}function xf(n,e,t){const r=t||"";try{dc(n,function(i,u){let c=i;Qi(i)&&(c=Si(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function eh(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function fi(n){this.l=n.$b||null,this.j=n.ib||!1}function _c(n,e){bn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Rf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mc.prototype.cancel=function(){if(this.i=Sf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},yc.prototype.stringify=function(n){return Mt.JSON.stringify(n,void 0)},yc.prototype.parse=function(n){return Mt.JSON.parse(n,void 0)},Nn(fi,vf),fi.prototype.g=function(){return new _c(this.l,this.j)},fi.prototype.i=function(n){return function(){return n}}({}),Nn(_c,bn);var Rf=0;function vc(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Ec(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ju(n)}function Ju(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Xe=_c.prototype).open=function(n,e){if(this.readyState!=Rf)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ju(this)},Xe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Mt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ec(this)),this.readyState=Rf},Xe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ju(this)),this.g&&(this.readyState=3,Ju(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Mt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vc(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Xe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ec(this):Ju(this),3==this.readyState&&vc(this)}},Xe.Ua=function(n){this.g&&(this.response=this.responseText=n,Ec(this))},Xe.Ta=function(n){this.g&&(this.response=n,Ec(this))},Xe.ha=function(){this.g&&Ec(this)},Xe.setRequestHeader=function(n,e){this.v.append(n,e)},Xe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(_c.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var pi=Mt.JSON.parse;function Ln(n){bn.call(this),this.headers=new hc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=th,this.K=this.L=!1}Nn(Ln,bn);var th="",Tg=/^https?$/i,wo=["POST","PUT"];function Ag(n){return"content-type"==n.toLowerCase()}function Nf(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Sg(n),rh(n)}function Sg(n){n.D||(n.D=!0,dn(n,"complete"),dn(n,"error"))}function nh(n){if(n.h&&void 0!==lo&&(!n.C[1]||4!=gi(n)||2!=n.ba()))if(n.v&&4==gi(n))gf(n.Fa,0,n);else if(dn(n,"readystatechange"),4==gi(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(bg)[1]||null;if(!i&&Mt.self&&Mt.self.location){var u=Mt.self.location.protocol;i=u.substr(0,u.length-1)}r=!Tg.test(i?i.toLowerCase():"")}t=r}if(t)dn(n,"complete"),dn(n,"success");else{n.m=6;try{var c=2<gi(n)?n.g.statusText:""}catch(_){c=""}n.j=c+" ["+n.ba()+"]",Sg(n)}}finally{rh(n)}}}function rh(n,e){if(n.g){Mg(n);const t=n.g,r=n.C[0]?Yi:null;n.g=null,n.C=null,e||dn(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function Mg(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Mt.clearTimeout(n.A),n.A=null)}function gi(n){return n.g?n.g.readyState:0}function bs(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case th:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function h(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function y(n){let e="";return ms(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):An(n,e,t))}function m(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function E(n){this.za=0,this.l=[],this.h=new yo,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=m("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=m("baseRetryDelayMs",5e3,n),this.$a=m("retryDelaySeedMs",1e4,n),this.Ya=m("forwardChannelMaxRetries",2,n),this.ra=m("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new mc(n&&n.concurrentRequestLimit),this.Ca=new Mf,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function T(n){if(K(n),3==n.G){var e=n.V++,t=vo(n.F);An(t,"SID",n.J),An(t,"RID",e),An(t,"TYPE","terminate"),lt(n,t),(e=new Ku(n,n.h,e,void 0)).K=2,e.v=_n(vo(t)),t=!1,Mt.navigator&&Mt.navigator.sendBeacon&&(t=Mt.navigator.sendBeacon(e.v.toString(),"")),!t&&Mt.Image&&((new Image).src=e.v,t=!0),t||(e.g=kf(e.l,null),e.g.ea(e.v)),e.F=Date.now(),la(e)}Of(n)}function N(n){n.g&&(Pf(n),n.g.cancel(),n.g=null)}function K(n){N(n),n.u&&(Mt.clearTimeout(n.u),n.u=null),au(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Mt.clearTimeout(n.m),n.m=null)}function fe(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Fe(n)}function Fe(n){Xd(n.i)||n.m||(n.m=!0,Gd(n.Ha,n),n.C=0)}function gt(n,e){var t;t=e?e.m:n.V++;const r=vo(n.F);An(r,"SID",n.J),An(r,"RID",t),An(r,"AID",n.U),lt(n,r),n.o&&n.s&&h(r,n.o,n.s),t=new Ku(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Vn(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),ha(n.i,t),es(t,r,e)}function lt(n,e){n.j&&dc({},function(t,r){An(e,r,t)})}function Vn(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Dn(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let f=!0;for(let _=0;_<t;_++){let b=i[_].h;const S=i[_].g;if(b-=u,0>b)u=Math.max(0,i[_].h-100),f=!1;else try{xf(S,c,"req"+b+"_")}catch(M){r&&r(S)}}if(f){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function mi(n){n.g||n.u||(n.Y=1,Gd(n.Ga,n),n.A=0)}function ou(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=oc(Dn(n.Ga,n),sh(n,n.A)),n.A++,0))}function Pf(n){null!=n.B&&(Mt.clearTimeout(n.B),n.B=null)}function bo(n){n.g=new Ku(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=vo(n.oa);An(e,"RID","rpc"),An(e,"SID",n.J),An(e,"CI",n.N?"0":"1"),An(e,"AID",n.U),lt(n,e),An(e,"TYPE","xmlhttp"),n.o&&n.s&&h(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=_n(vo(e)),t.s=null,t.U=!0,bf(t,n)}function au(n){null!=n.v&&(Mt.clearTimeout(n.v),n.v=null)}function ih(n,e){var t=null;if(n.g==e){au(n),Pf(n),n.g=null;var r=2}else{if(!Jr(n.i,e))return;t=e.D,Af(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;dn(r=ic(),new mg(r,t,e,i)),Fe(n)}else mi(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function Ye(n,e){return!(Tf(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=oc(Dn(n.Ha,n,e),sh(n,n.C)),n.C++,0)))}(n,e)||2==r&&ou(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Hs(n,5);break;case 4:Hs(n,10);break;case 3:Hs(n,6);break;default:Hs(n,2)}}function sh(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Hs(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Dn(n.jb,n);t||(t=new _o("//www.google.com/images/cleardot.gif"),Mt.location&&"http"==Mt.location.protocol||fc(t,"https"),_n(t)),function Dg(n,e){const t=new yo;if(Mt.Image){const r=new Image;r.onload=fo(eh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=fo(eh,t,r,"TestLoadImage: error",!1,e),r.onabort=fo(eh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=fo(eh,t,r,"TestLoadImage: timeout",!1,e),Mt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Qr(2);n.G=0,n.j&&n.j.va(e),Of(n),K(n)}function Of(n){n.G=0,n.I=-1,n.j&&((0!=Sf(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Ud(n.l),n.l.length=0),n.j.ua())}function oh(n,e,t){let r=function Ry(n){return n instanceof _o?vo(n):new _o(n,void 0)}(t);if(""!=r.i)e&&Eo(r,e+"."+r.i),Qu(r,r.m);else{const i=Mt.location;r=function Ny(n,e,t,r){var i=new _o(null,void 0);return n&&fc(i,n),e&&Eo(i,e),t&&Qu(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&ms(n.aa,function(i,u){An(r,u,i)}),t=n.sa,(e=n.D)&&t&&An(r,e,t),An(r,"VER",n.ma),lt(n,r),r}function kf(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ln(t&&n.Ba&&!n.qa?new fi({ib:!0}):n.qa)).L=n.H,e}function xg(){}function Xu(){if(ci&&!(10<=Number(Jl)))throw Error("Environmental error: no available transport.")}function Mi(n,e){bn.call(this),this.g=new E(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!$u(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$u(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new bc(this)}function Ly(n){yg.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Rg(){Zd.call(this),this.status=1}function bc(n){this.g=n}(Xe=Ln.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Yd.g(),this.C=function Ef(n){return n.h||(n.h=n.i())}(this.u?this.u:Yd),this.g.onreadystatechange=Dn(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Nf(this,u)}n=t||"";const i=new hc(this.headers);r&&dc(r,function(u,c){i.set(c,u)}),r=function Iy(n){e:{var e=Ag;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Mt.FormData&&n instanceof Mt.FormData,!(0<=wn(wo,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Mg(this),0<this.B&&((this.K=function wc(n){return ci&&function Bd(){return function nu(n){var e=fg;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Zl(String(mo)).split("."),t=Zl("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=po(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||po(0==i[2].length,0==u[2].length)||po(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dn(this.pa,this)):this.A=gf(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Nf(this,u)}},Xe.pa=function(){void 0!==lo&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,dn(this,"timeout"),this.abort(8))},Xe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,dn(this,"complete"),dn(this,"abort"),rh(this))},Xe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),rh(this,!0)),Ln.Z.M.call(this)},Xe.Fa=function(){this.s||(this.F||this.v||this.l?nh(this):this.cb())},Xe.cb=function(){nh(this)},Xe.ba=function(){try{return 2<gi(this)?this.g.status:-1}catch(n){return-1}},Xe.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Xe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),pi(e)}},Xe.Da=function(){return this.m},Xe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=E.prototype).ma=8,Xe.G=1,Xe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Xe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Ku(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=hg(u),Yr(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Vn(this,i,e),An(t=vo(this.F),"RID",n),An(t,"CVER",22),this.D&&An(t,"X-HTTP-Session-Id",this.D),lt(this,t),this.o&&u&&h(t,this.o,u),ha(this.i,i),this.Ra&&An(t,"TYPE","init"),this.ja?(An(t,"$req",e),An(t,"SID","null"),i.$=!0,es(i,t,null)):es(i,t,e),this.G=2}}else 3==this.G&&(n?gt(this,n):0==this.l.length||Xd(this.i)||gt(this))},Xe.Ga=function(){if(this.u=null,bo(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=oc(Dn(this.bb,this),n)}},Xe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Qr(10),N(this),bo(this))},Xe.ab=function(){null!=this.v&&(this.v=null,N(this),ou(this),Qr(19))},Xe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Qr(2)):(this.h.info("Failed to ping google.com"),Qr(1))},(Xe=xg.prototype).xa=function(){},Xe.wa=function(){},Xe.va=function(){},Xe.ua=function(){},Xe.Oa=function(){},Xu.prototype.g=function(n,e){return new Mi(n,e)},Nn(Mi,bn),Mi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Gd(Dn(n.hb,n,e))),Qr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=oh(n,null,n.W),Fe(n)},Mi.prototype.close=function(){T(this.g)},Mi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,fe(this.g,e)}else this.v?((e={}).__data__=Si(n),fe(this.g,e)):fe(this.g,n)},Mi.prototype.M=function(){this.g.j=null,delete this.j,T(this.g),delete this.g,Mi.Z.M.call(this)},Nn(Ly,yg),Nn(Rg,Zd),Nn(bc,xg),bc.prototype.xa=function(){dn(this.g,"a")},bc.prototype.wa=function(n){dn(this.g,new Ly(n))},bc.prototype.va=function(n){dn(this.g,new Rg(n))},bc.prototype.ua=function(){dn(this.g,"b")},Xu.prototype.createWebChannel=Xu.prototype.g,Mi.prototype.send=Mi.prototype.u,Mi.prototype.open=Mi.prototype.m,Mi.prototype.close=Mi.prototype.close,Es.NO_ERROR=0,Es.TIMEOUT=8,Es.HTTP_ERROR=6,aa.COMPLETE="complete",My.EventType=ac,ac.OPEN="a",ac.CLOSE="b",ac.ERROR="c",ac.MESSAGE="d",bn.prototype.listen=bn.prototype.N,Ln.prototype.listenOnce=Ln.prototype.O,Ln.prototype.getLastError=Ln.prototype.La,Ln.prototype.getLastErrorCode=Ln.prototype.Da,Ln.prototype.getStatus=Ln.prototype.ba,Ln.prototype.getResponseJson=Ln.prototype.Qa,Ln.prototype.getResponseText=Ln.prototype.ga,Ln.prototype.send=Ln.prototype.ea;var Vy=li.createWebChannelTransport=function(){return new Xu},gC=li.getStatEventTarget=function(){return ic()},Uy=li.ErrorCode=Es,G0=li.EventType=aa,q0=li.Event=oa,el=li.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},z0=li.FetchXmlHttpFactory=fi,Ff=li.WebChannel=My,mC=li.XhrIo=Ln;const Lf="@firebase/firestore";class Xr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xr.UNAUTHENTICATED=new Xr(null),Xr.GOOGLE_CREDENTIALS=new Xr("google-credentials-uid"),Xr.FIRST_PARTY=new Xr("first-party-uid"),Xr.MOCK_USER=new Xr("mock-user");let Ic="9.8.0";const uu=new ui.Yd("@firebase/firestore");function Ng(){return uu.logLevel}function ke(n,...e){if(uu.logLevel<=ui.in.DEBUG){const t=e.map(Pg);uu.debug(`Firestore (${Ic}): ${n}`,...t)}}function zn(n,...e){if(uu.logLevel<=ui.in.ERROR){const t=e.map(Pg);uu.error(`Firestore (${Ic}): ${n}`,...t)}}function tl(n,...e){if(uu.logLevel<=ui.in.WARN){const t=e.map(Pg);uu.warn(`Firestore (${Ic}): ${n}`,...t)}}function Pg(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${Ic}) INTERNAL ASSERTION FAILED: `+n;throw zn(e),new Error(e)}function xt(n,e){n||rt()}function Ge(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends yt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ur{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class W0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class K0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Xr.UNAUTHENTICATED))}shutdown(){}}class $y{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Z0{constructor(e){this.t=e,this.currentUser=Xr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let c=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ur,e.enqueueRetryable(()=>u(this.currentUser))};const f=()=>{const b=c;e.enqueueRetryable((0,ye.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},_=b=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(b=>_(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?_(b):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ur)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xt("string"==typeof r.accessToken),new W0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xt(null===e||"string"==typeof e),new Xr(e)}}class vS{constructor(e,t,r){this.type="FirstParty",this.user=Xr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Y0{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new vS(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Xr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Q0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class J0{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?i(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xt("string"==typeof t.token),this.p=t.token,new Q0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Is{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Io(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Is.A=-1;class X0{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Io(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function kt(n,e){return n<e?-1:n>e?1:0}function ah(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function eE(n){return n+"\0"}class nr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nr.fromMillis(Date.now())}static fromDate(e){return nr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new nr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new nr(0,0))}static max(){return new At(new nr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Hy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Cc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function tE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Vf{constructor(e,t,r){void 0===t?t=0:t>e.length&&rt(),void 0===r?r=e.length-t:r>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Vf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ke extends Vf{construct(e,t,r){return new Ke(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ke(t)}static emptyPath(){return new Ke([])}}const nE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dr extends Vf{construct(e,t,r){return new dr(e,t,r)}static isValidIdentifier(e){return nE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new dr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new xe(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new xe(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new xe(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(u(),i++)}if(u(),c)throw new xe(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dr(t)}static emptyPath(){return new dr([])}}class Dc{constructor(e){this.fields=e,e.sort(dr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ah(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new hn(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new hn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const rE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nl(n){if(xt(!!n),"string"==typeof n){let e=0;const t=rE.exec(n);if(xt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Un(n.seconds),nanos:Un(n.nanos)}}function Un(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function xi(n){return"string"==typeof n?hn.fromBase64String(n):hn.fromUint8Array(n)}function Uf(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Gy(n){const e=n.mapValue.fields.__previous_value__;return Uf(e)?Gy(e):e}function Tc(n){const e=nl(n.mapValue.fields.__local_write_time__.timestampValue);return new nr(e.seconds,e.nanos)}class wS{constructor(e,t,r,i,u,c,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.useFetchStreams=_}}class fa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new fa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof fa&&e.projectId===this.projectId&&e.database===this.database}}function kg(n){return null==n}function rl(n){return 0===n&&1/n==-1/0}function Bf(n){return"number"==typeof n&&Number.isInteger(n)&&!rl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class He{constructor(e){this.path=e}static fromPath(e){return new He(Ke.fromString(e))}static fromName(e){return new He(Ke.fromString(e).popFirst(5))}static empty(){return new He(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ke.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new Ke(e.slice()))}}const pa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},uh={nullValue:"NULL_VALUE"};function lh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Uf(n)?4:yC(n)?9007199254740991:10:rt()}function ga(n,e){if(n===e)return!0;const t=lh(n);if(t!==lh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Tc(n).isEqual(Tc(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=nl(r.timestampValue),c=nl(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,xi(n.bytesValue).isEqual(xi(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Un(r.geoPointValue.latitude)===Un(i.geoPointValue.latitude)&&Un(r.geoPointValue.longitude)===Un(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Un(r.integerValue)===Un(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=Un(r.doubleValue),c=Un(i.doubleValue);return u===c?rl(u)===rl(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return ah(n.arrayValue.values||[],e.arrayValue.values||[],ga);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Hy(u)!==Hy(c))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(void 0===c[f]||!ga(u[f],c[f])))return!1;return!0}(n,e);default:return rt()}var i}function jf(n,e){return void 0!==(n.values||[]).find(t=>ga(t,e))}function il(n,e){if(n===e)return 0;const t=lh(n),r=lh(e);if(t!==r)return kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return kt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=Un(i.integerValue||i.doubleValue),f=Un(u.integerValue||u.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return iE(n.timestampValue,e.timestampValue);case 4:return iE(Tc(n),Tc(e));case 5:return kt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=xi(i),f=xi(u);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),f=u.split("/");for(let _=0;_<c.length&&_<f.length;_++){const b=kt(c[_],f[_]);if(0!==b)return b}return kt(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=kt(Un(i.latitude),Un(u.latitude));return 0!==c?c:kt(Un(i.longitude),Un(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],f=u.values||[];for(let _=0;_<c.length&&_<f.length;++_){const b=il(c[_],f[_]);if(b)return b}return kt(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===pa.mapValue&&u===pa.mapValue)return 0;if(i===pa.mapValue)return 1;if(u===pa.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),_=u.fields||{},b=Object.keys(_);f.sort(),b.sort();for(let S=0;S<f.length&&S<b.length;++S){const M=kt(f[S],b[S]);if(0!==M)return M;const F=il(c[f[S]],_[b[S]]);if(0!==F)return F}return kt(f.length,b.length)}(n.mapValue,e.mapValue);default:throw rt()}}function iE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return kt(n,e);const t=nl(n),r=nl(e),i=kt(t.seconds,r.seconds);return 0!==i?i:kt(t.nanos,r.nanos)}function Ac(n){return sE(n)}function sE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=nl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?xi(n.bytesValue).toBase64():"referenceValue"in n?He.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=sE(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const f of i)c?c=!1:u+=",",u+=`${f}:${sE(r.fields[f])}`;return u+"}"}(n.mapValue):rt();var e}function Sc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function oE(n){return!!n&&"integerValue"in n}function ch(n){return!!n&&"arrayValue"in n}function qy(n){return!!n&&"nullValue"in n}function aE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dh(n){return!!n&&"mapValue"in n}function Fg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Cc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Fg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function yC(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function bS(n){return"nullValue"in n?uh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Sc(fa.empty(),He.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:rt()}function IS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Sc(fa.empty(),He.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?pa:rt()}function _C(n,e){const t=il(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function vC(n,e){const t=il(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ri{constructor(e){this.value=e}static empty(){return new Ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!dh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fg(t)}setAll(e){let t=dr.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=Fg(c):i.push(f.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());dh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ga(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];dh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Cc(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new Ri(Fg(this.value))}}function EC(n){const e=[];return Cc(n.fields,(t,r)=>{const i=new dr([t]);if(dh(r)){const u=EC(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new Dc(e)}class Bn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Bn(e,0,At.min(),At.min(),Ri.empty(),0)}static newFoundDocument(e,t,r){return new Bn(e,1,t,At.min(),r,0)}static newNoDocument(e,t){return new Bn(e,2,t,At.min(),Ri.empty(),0)}static newUnknownDocument(e,t){return new Bn(e,3,t,At.min(),Ri.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zy{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function ma(n){return n.fields.find(e=>2===e.kind)}function lu(n){return n.fields.filter(e=>2!==e.kind)}zy.UNKNOWN_ID=-1;class Lg{constructor(e,t){this.fieldPath=e,this.kind=t}}class hh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new hh(0,Cs.min())}}function Vg(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=At.fromTimestamp(1e9===r?new nr(t+1,0):new nr(t,r));return new Cs(i,He.empty(),e)}function uE(n){return new Cs(n.readTime,n.key,-1)}class Cs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Cs(At.min(),He.empty(),-1)}static max(){return new Cs(At.max(),He.empty(),-1)}}function lE(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=He.comparator(n.documentKey,e.documentKey),0!==t?t:kt(n.largestBatchId,e.largestBatchId))}class vn{constructor(e,t){this.comparator=e,this.root=t||ei.EMPTY}insert(e,t){return new vn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ei.BLACK,null,null))}remove(e){return new vn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ei.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $f(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $f(this.root,e,this.comparator,!1)}getReverseIterator(){return new $f(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $f(this.root,e,this.comparator,!0)}}class $f{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ei{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:ei.RED,this.left=null!=i?i:ei.EMPTY,this.right=null!=u?u:ei.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new ei(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ei.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ei.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ei.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ei.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}ei.EMPTY=null,ei.RED=!0,ei.BLACK=!1,ei.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ei(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class En{constructor(e){this.comparator=e,this.data=new vn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cE(this.data.getIterator())}getIteratorFrom(e){return new cE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new En(this.comparator);return t.data=e,t}}class cE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Mc(n){return n.hasNext()?n.getNext():void 0}class wC{constructor(e,t=null,r=[],i=[],u=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=f,this.P=null}}function dE(n,e=null,t=[],r=[],i=null,u=null,c=null){return new wC(n,e,t,r,i,u,c)}function Co(n){const e=Ge(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Ac(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),kg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ac(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ac(r)).join(",")),e.P=t}return e.P}function xc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!IC(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ga(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!gE(n.startAt,e.startAt)&&gE(n.endAt,e.endAt)}function cu(n){return He.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function sl(n,e){return n.filters.filter(t=>t instanceof Br&&t.field.isEqual(e))}function Rc(n,e,t){let r=uh,i=!0;for(const u of sl(n,e)){let c=uh,f=!0;switch(u.op){case"<":case"<=":c=bS(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,f=!1;break;case"!=":case"not-in":c=uh}_C({value:r,inclusive:i},{value:c,inclusive:f})<0&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];_C({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function hE(n,e,t){let r=pa,i=!0;for(const u of sl(n,e)){let c=pa,f=!0;switch(u.op){case">=":case">":c=IS(u.value),f=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,f=!1;break;case"!=":case"not-in":c=pa}vC({value:r,inclusive:i},{value:c,inclusive:f})>0&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];vC({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Br extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new fE(e,t,r):"array-contains"===t?new Ug(e,r):"in"===t?new bC(e,r):"not-in"===t?new pE(e,r):"array-contains-any"===t?new CS(e,r):new Br(e,t,r)}static V(e,t,r){return"in"===t?new Wy(e,r):new Ky(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(il(t,this.value)):null!==t&&lh(this.value)===lh(t)&&this.v(il(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class fE extends Br{constructor(e,t,r){super(e,t,r),this.key=He.fromName(r.referenceValue)}matches(e){const t=He.comparator(e.key,this.key);return this.v(t)}}class Wy extends Br{constructor(e,t){super(e,"in",t),this.keys=Zy(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ky extends Br{constructor(e,t){super(e,"not-in",t),this.keys=Zy(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Zy(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>He.fromName(r.referenceValue))}class Ug extends Br{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ch(t)&&jf(t.arrayValue,this.value)}}class bC extends Br{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&jf(this.value.arrayValue,t)}}class pE extends Br{constructor(e,t){super(e,"not-in",t)}matches(e){if(jf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!jf(this.value.arrayValue,t)}}class CS extends Br{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ch(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>jf(this.value.arrayValue,r))}}class du{constructor(e,t){this.position=e,this.inclusive=t}}class Nc{constructor(e,t="asc"){this.field=e,this.dir=t}}function IC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Yy(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?He.comparator(He.fromName(c.referenceValue),t.key):il(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function gE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ga(n.position[t],e.position[t]))return!1;return!0}class hu{constructor(e,t=null,r=[],i=[],u=null,c="F",f=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=f,this.endAt=_,this.D=null,this.C=null}}function ns(n,e,t,r,i,u,c,f){return new hu(n,e,t,r,i,u,c,f)}function ph(n){return new hu(n)}function mE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function yE(n){for(const e of n.filters)if(e.S())return e.field;return null}function Bg(n){return null!==n.collectionGroup}function Hf(n){const e=Ge(n);if(null===e.D){e.D=[];const t=yE(e),r=mE(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Nc(t)),e.D.push(new Nc(dr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Nc(dr.keyField(),u))}}}return e.D}function Gs(n){const e=Ge(n);if(!e.C)if("F"===e.limitType)e.C=dE(e.path,e.collectionGroup,Hf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Hf(e))t.push(new Nc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new du(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new du(e.startAt.position,e.startAt.inclusive):null;e.C=dE(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function jg(n,e,t){return new hu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gh(n,e){return xc(Gs(n),Gs(e))&&n.limitType===e.limitType}function _E(n){return`${Co(Gs(n))}|lt:${n.limitType}`}function Qy(n){return`Query(target=${function fh(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Ac(r.value)}`;var r}).join(", ")}]`),kg(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Ac(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Ac(t)).join(",")),`Target(${e})`}(Gs(n))}; limitType=${n.limitType})`}function Jy(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):He.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const f=Yy(i,u,c);return i.inclusive?f<=0:f<0}(t.startAt,Hf(t),r)||t.endAt&&!function(i,u,c){const f=Yy(i,u,c);return i.inclusive?f>=0:f>0}(t.endAt,Hf(t),r)));var t,r}function Xy(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vE(n){return(e,t)=>{let r=!1;for(const i of Hf(n)){const u=EE(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function EE(n,e,t){const r=n.field.isKeyField()?He.comparator(e.key,t.key):function(i,u,c){const f=u.data.field(i),_=c.data.field(i);return null!==f&&null!==_?il(f,_):rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}function wE(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rl(e)?"-0":e}}function bE(n){return{integerValue:""+n}}function e_(n,e){return Bf(e)?bE(e):wE(n,e)}class Gf{constructor(){this._=void 0}}function DC(n,e,t){return n instanceof mh?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Pc?TC(n,e):n instanceof ol?IE(n,e):function(r,i){const u=$g(r,i),c=CE(u)+CE(r.k);return oE(u)&&oE(r.k)?bE(c):wE(r.M,c)}(n,e)}function ya(n,e,t){return n instanceof Pc?TC(n,e):n instanceof ol?IE(n,e):t}function $g(n,e){return n instanceof yh?oE(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class mh extends Gf{}class Pc extends Gf{constructor(e){super(),this.elements=e}}function TC(n,e){const t=Hg(e);for(const r of n.elements)t.some(i=>ga(i,r))||t.push(r);return{arrayValue:{values:t}}}class ol extends Gf{constructor(e){super(),this.elements=e}}function IE(n,e){let t=Hg(e);for(const r of n.elements)t=t.filter(i=>!ga(i,r));return{arrayValue:{values:t}}}class yh extends Gf{constructor(e,t){super(),this.M=e,this.k=t}}function CE(n){return Un(n.integerValue||n.doubleValue)}function Hg(n){return ch(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class qf{constructor(e,t){this.field=e,this.transform=t}}class Gg{constructor(e,t){this.version=e,this.transformResults=t}}class Qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class _h{}function t_(n,e,t){n instanceof Kg?function(r,i,u){const c=r.value.clone(),f=r_(r.fieldTransforms,i,u.transformResults);c.setAll(f),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Oc?function(r,i,u){if(!qg(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=r_(r.fieldTransforms,i,u.transformResults),f=i.data;f.setAll(n_(r)),f.setAll(c),i.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function zg(n,e,t){var i;n instanceof Kg?function(r,i,u){if(!qg(r.precondition,i))return;const c=r.value.clone(),f=i_(r.fieldTransforms,u,i);c.setAll(f),i.convertToFoundDocument(Wg(i),c).setHasLocalMutations()}(n,e,t):n instanceof Oc?function(r,i,u){if(!qg(r.precondition,i))return;const c=i_(r.fieldTransforms,u,i),f=i.data;f.setAll(n_(r)),f.setAll(c),i.convertToFoundDocument(Wg(i),f).setHasLocalMutations()}(n,e,t):qg(n.precondition,i=e)&&i.convertToNoDocument(At.min())}function SC(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=$g(r.transform,i||null);null!=u&&(null==t&&(t=Ri.empty()),t.set(r.field,u))}return t||null}function DE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ah(t,r,(i,u)=>function AC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Pc&&r instanceof Pc||t instanceof ol&&r instanceof ol?ah(t.elements,r.elements,ga):t instanceof yh&&r instanceof yh?ga(t.k,r.k):t instanceof mh&&r instanceof mh);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Wg(n){return n.isFoundDocument()?n.version:At.min()}class Kg extends _h{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Oc extends _h{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}}function n_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function r_(n,e,t){const r=new Map;xt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,f=e.data.field(u.field);r.set(u.field,ya(c,f,t[i]))}return r}function i_(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,DC(u,c,e))}return r}class vh extends _h{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Zg extends _h{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class fu{constructor(e){this.count=e}}var Wn,Zt;function TE(n){switch(n){default:return rt();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function MC(n){if(void 0===n)return zn("GRPC error has no .code"),de.UNKNOWN;switch(n){case Wn.OK:return de.OK;case Wn.CANCELLED:return de.CANCELLED;case Wn.UNKNOWN:return de.UNKNOWN;case Wn.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case Wn.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case Wn.INTERNAL:return de.INTERNAL;case Wn.UNAVAILABLE:return de.UNAVAILABLE;case Wn.UNAUTHENTICATED:return de.UNAUTHENTICATED;case Wn.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case Wn.NOT_FOUND:return de.NOT_FOUND;case Wn.ALREADY_EXISTS:return de.ALREADY_EXISTS;case Wn.PERMISSION_DENIED:return de.PERMISSION_DENIED;case Wn.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case Wn.ABORTED:return de.ABORTED;case Wn.OUT_OF_RANGE:return de.OUT_OF_RANGE;case Wn.UNIMPLEMENTED:return de.UNIMPLEMENTED;case Wn.DATA_LOSS:return de.DATA_LOSS;default:return rt()}}(Zt=Wn||(Wn={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";class _a{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Cc(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return tE(this.inner)}size(){return this.innerSize}}const AE=new vn(He.comparator);function rs(){return AE}const zf=new vn(He.comparator);function s_(...n){let e=zf;for(const t of n)e=e.insert(t.key,t);return e}function kc(){return new _a(n=>n.toString(),(n,e)=>n.isEqual(e))}const SE=new vn(He.comparator),ME=new En(He.comparator);function rn(...n){let e=ME;for(const t of n)e=e.add(t);return e}const xC=new En(kt);function Eh(){return xC}class Wf{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Kf.createSynthesizedTargetChangeForCurrentChange(e,t)),new Wf(At.min(),r,Eh(),rs(),rn())}}class Kf{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Kf(hn.EMPTY_BYTE_STRING,t,rn(),rn(),rn())}}class Zf{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class Fc{constructor(e,t){this.targetId=e,this.$=t}}class o_{constructor(e,t,r=hn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class xE{constructor(){this.B=0,this.L=RE(),this.U=hn.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=rn(),t=rn(),r=rn();return this.L.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:rt()}}),new Kf(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=RE()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class RC{constructor(e){this.nt=e,this.st=new Map,this.it=rs(),this.rt=Lc(),this.ot=new En(kt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const u=i.target;if(cu(u))if(0===r){const c=new He(u.path);this.ct(t,c,Bn.newNoDocument(c,At.min()))}else xt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const f=this.wt(c);if(f){if(u.current&&cu(f.target)){const _=new He(f.target.path);null!==this.it.get(_)||this.It(c,_)||this.ct(c,_,Bn.newNoDocument(_,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=rn();this.rt.forEach((u,c)=>{let f=!0;c.forEachWhile(_=>{const b=this.wt(_);return!b||2===b.purpose||(f=!1,!1)}),f&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const i=new Wf(e,t,this.ot,this.it,r);return this.it=rs(),this.rt=Lc(),this.ot=new En(kt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new xE,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new En(kt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new xE),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Lc(){return new vn(He.comparator)}function RE(){return new vn(He.comparator)}const NC={asc:"ASCENDING",desc:"DESCENDING"},PC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class OC{constructor(e,t){this.databaseId=e,this.N=t}}function Ni(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Yg(n,e){return n.N?e.toBase64():e.toUint8Array()}function NE(n,e){return Ni(n,e.toTimestamp())}function wr(n){return xt(!!n),At.fromTimestamp(function(e){const t=nl(e);return new nr(t.seconds,t.nanos)}(n))}function Qg(n,e){return(t=n,new Ke(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function a_(n){const e=Ke.fromString(n);return xt(Xg(e)),e}function Yf(n,e){return Qg(n.databaseId,e.path)}function va(n,e){const t=a_(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new He(kC(t))}function u_(n,e){return Qg(n.databaseId,e)}function PE(n){const e=a_(n);return 4===e.length?Ke.emptyPath():kC(e)}function wh(n){return new Ke(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function kC(n){return xt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function l_(n,e,t){return{name:Yf(n,e),fields:t.value.mapValue.fields}}function OE(n,e,t){const r=va(n,e.name),i=wr(e.updateTime),u=new Ri({mapValue:{fields:e.fields}}),c=Bn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Jg(n,e){let t;if(e instanceof Kg)t={update:l_(n,e.key,e.value)};else if(e instanceof vh)t={delete:Yf(n,e.key)};else if(e instanceof Oc)t={update:l_(n,e.key,e.data),updateMask:FE(e.fieldMask)};else{if(!(e instanceof Zg))return rt();t={verify:Yf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof mh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Pc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ol)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof yh)return{fieldPath:u.field.canonicalString(),increment:c.k};throw rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:NE(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:rt()),t;var i}function Qf(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Qn.updateTime(wr(i.updateTime)):void 0!==i.exists?Qn.exists(i.exists):Qn.none():Qn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let f=null;"setToServerValue"in c?(xt("REQUEST_TIME"===c.setToServerValue),f=new mh):"appendMissingElements"in c?f=new Pc(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new ol(c.removeAllFromArray.values||[]):"increment"in c?f=new yh(u,c.increment):rt();const _=dr.fromServerFormat(c.fieldPath);return new qf(_,f)}(n,i)):[];var i;if(e.update){const i=va(n,e.update.name),u=new Ri({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Dc((e.updateMask.fieldPaths||[]).map(b=>dr.fromServerFormat(b)));return new Oc(i,u,c,t,r)}return new Kg(i,u,t,r)}if(e.delete){const i=va(n,e.delete);return new vh(i,t)}if(e.verify){const i=va(n,e.verify);return new Zg(i,t)}return rt()}function c_(n,e){return{documents:[u_(n,e.path)]}}function d_(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=u_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=u_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const b=_.map(S=>function(M){if("=="===M.op){if(aE(M.value))return{unaryFilter:{field:Vc(M.field),op:"IS_NAN"}};if(qy(M.value))return{unaryFilter:{field:Vc(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(aE(M.value))return{unaryFilter:{field:Vc(M.field),op:"IS_NOT_NAN"}};if(qy(M.value))return{unaryFilter:{field:Vc(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vc(M.field),op:kE(M.op),value:M.value}}}(S));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(_){if(0!==_.length)return _.map(b=>{return{field:Vc((S=b).field),direction:TS(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.N||kg(b)?b:{value:b});var b,f,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function VC(n){let e=PE(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){xt(1===r);const S=t.from[0];S.allDescendants?i=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=UC(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new Nc(Uc((M=S).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let f=null;t.limit&&(f=function(S){let M;return M="object"==typeof S?S.value:S,kg(M)?null:M}(t.limit));let _=null;var S;t.startAt&&(_=new du((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new du(S.values||[],!S.before)}(t.endAt)),ns(e,i,c,u,f,"F",_,b)}function UC(n){return n?void 0!==n.unaryFilter?[AS(n)]:void 0!==n.fieldFilter?[BC(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>UC(e)).reduce((e,t)=>e.concat(t)):rt():[]}function TS(n){return NC[n]}function kE(n){return PC[n]}function Vc(n){return{fieldPath:n.canonicalString()}}function Uc(n){return dr.fromServerFormat(n.fieldPath)}function BC(n){return Br.create(Uc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(n.fieldFilter.op),n.fieldFilter.value)}function AS(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Uc(n.unaryFilter.field);return Br.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Uc(n.unaryFilter.field);return Br.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Uc(n.unaryFilter.field);return Br.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Uc(n.unaryFilter.field);return Br.create(i,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}function FE(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Xg(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Pi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=LE(e)),e=h_(n.get(t),e);return LE(e)}function h_(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function LE(n){return n+"\x01\x01"}function Ea(n){const e=n.length;if(xt(e>=2),2===e)return xt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ke.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&rt(),n.charAt(c+1)){case"\x01":const f=n.substring(u,c);let _;0===i.length?_=f:(i+=f,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:rt()}u=c+2}return new Ke(r)}const VE=["userId","batchId"];function em(n,e){return[n,Pi(e)]}function UE(n,e,t){return[n,Pi(e),t]}const jC={},tm=["prefixPath","collectionGroup","readTime","documentId"],bh=["prefixPath","collectionGroup","documentId"],$C=["collectionGroup","readTime","prefixPath","documentId"],Jf=["canonicalId","targetId"],HC=["targetId","path"],GC=["path","targetId"],f_=["collectionId","parent"],wa=["indexId","uid"],Xf=["uid","sequenceNumber"],yi=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Bc=["indexId","uid","orderedDocumentKey"],nm=["userId","collectionPath","documentId"],qs=["userId","collectionPath","largestBatchId"],p_=["userId","collectionGroup","largestBatchId"],jc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ih=[...jc,"documentOverlays"],$c=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ch=[...$c,"indexConfiguration","indexState","indexEntries"],Hc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,u=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++u,c&&u===i&&t()},_=>r(_))}),c=!0,u===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}}class pu{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Ur,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Dh(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=rm(r.target.error);this.At.reject(new Dh(e,i))}}static open(e,t,r,i){try{return new pu(t,e.transaction(i,r))}catch(u){throw new Dh(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new jE(t)}}class _i{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===_i.Vt((0,yt.z$)())&&zn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),ul(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,yt.hl)())return!1;if(_i.St())return!0;const e=(0,yt.z$)(),t=_i.Vt(e),r=0<t&&t<10,i=_i.Dt(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ye.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new Dh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new xe(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new xe(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Dh(e,f))},u.onupgradeneeded=c=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,ye.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{u.db=yield u.Nt(e);const _=pu.open(u.db,e,c?"readonly":"readwrite",r),b=i(_).next(S=>(_.bt(),S)).catch(S=>(_.abort(S),le.reject(S))).toPromise();return b.catch(()=>{}),yield _.Rt,b}catch(_){const b="FirebaseError"!==_.name&&f<3;if(ke("SimpleDb","Transaction failed with error:",_.message,"Retrying:",b),u.close(),!b)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class BE{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return ul(this.Ft.delete())}}class Dh extends xe{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function al(n){return"IndexedDbTransactionError"===n.name}class jE{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ul(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),ul(this.store.add(e))}get(e){return ul(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),ul(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),ul(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.Kt(i,(c,f)=>{u.push(f)}).next(()=>u)}{const i=this.store.getAll(r.range);return new le((u,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{u(f.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(u,c,f)=>f.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new le((r,i)=>{t.onerror=u=>{const c=rm(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new le((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const _=new BE(f),b=t(f.primaryKey,f.value,_);if(b instanceof le){const S=b.catch(M=>(_.done(),le.reject(M)));r.push(S)}_.isDone?i():null===_.Lt?f.continue():f.continue(_.Lt)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ul(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=rm(r.target.error);t(i)}})}let g_=!1;function rm(n){const e=_i.Vt((0,yt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return g_||(g_=!0,setTimeout(()=>{throw r},0)),r}}return n}class m_ extends Gc{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function br(n,e){const t=Ge(n);return _i.xt(t.Ht,e)}class y_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&t_(u,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&zg(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&zg(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(At.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),rn())}isEqual(e){return this.batchId===e.batchId&&ah(this.mutations,e.mutations,(t,r)=>DE(t,r))&&ah(this.baseMutations,e.baseMutations,(t,r)=>DE(t,r))}}class im{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){xt(e.mutations.length===r.length);let i=SE;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new im(e,t,r,i)}}class __{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ll{constructor(e,t,r,i,u=At.min(),c=At.min(),f=hn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f}withSequenceNumber(e){return new ll(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ll(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ll(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class v_{constructor(e){this.Jt=e}}function $E(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ep(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Yf(i=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Ni(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:qc(e.version)};else{if(!e.isUnknownDocument())return rt();r.unknownDocument={path:t.path.toArray(),version:qc(e.version)}}var i,u;return r}function ep(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function qc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function cl(n){const e=new nr(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function Th(n,e){const t=(e.baseMutations||[]).map(u=>Qf(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Qf(n.Jt,u)),i=nr.fromMillis(e.localWriteTimeMs);return new y_(e.batchId,i,t,r)}function tp(n){const e=cl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?cl(n.lastLimboFreeSnapshotVersion):At.min();let r;var i;return void 0!==n.query.documents?(xt(1===(i=n.query).documents.length),r=Gs(ph(PE(i.documents[0])))):r=Gs(VC(n.query)),new ll(r,n.targetId,0,n.lastListenSequenceNumber,e,t,hn.fromBase64String(n.resumeToken))}function zC(n,e){const t=qc(e.snapshotVersion),r=qc(e.lastLimboFreeSnapshotVersion);let i;i=cu(e.target)?c_(n.Jt,e.target):d_(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Co(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function E_(n){const e=VC({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?jg(e,e.limit,"L"):e}function np(n,e){return new __(e.largestBatchId,Qf(n.Jt,e.overlayMutation))}function sm(n,e){const t=e.path.lastSegment();return[n,Pi(e.path.popLast()),t]}class WC{getBundleMetadata(e,t){return KC(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:cl(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return KC(e).put({bundleId:(r=t).id,createTime:qc(wr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return ZC(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:E_(i.bundledQuery),readTime:cl(i.readTime)};var i})}saveNamedQuery(e,t){return ZC(e).put({name:(r=t).name,readTime:qc(wr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function KC(n){return br(n,"bundles")}function ZC(n){return br(n,"namedQueries")}class HE{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new HE(e,t.uid||"")}getOverlay(e,t){return rp(e).get(sm(this.userId,t)).next(r=>r?np(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const f=new __(t,c);i.push(this.Xt(e,f))}),le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Pi(c.getCollectionPath())));const u=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(rp(e).Qt("collectionPathOverlayIndex",f))}),le.waitFor(u)}getOverlaysForCollection(e,t,r){const i=kc(),u=Pi(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return rp(e).qt("collectionPathOverlayIndex",c).next(f=>{for(const _ of f){const b=np(this.M,_);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=kc();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return rp(e).Wt({index:"collectionGroupOverlayIndex",range:f},(_,b,S)=>{const M=np(this.M,b);u.size()<i||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):S.done()}).next(()=>u)}Xt(e,t){return rp(e).put(function(r,i,u){const[c,f,_]=sm(i,u.mutation.key);return{userId:i,collectionPath:f,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Jg(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function rp(n){return br(n,"documentOverlays")}class dl{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Un(e.integerValue));else if("doubleValue"in e){const r=Un(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),rl(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(xi(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?yC(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):rt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),He.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function SS(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function GE(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=SS(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}dl.fe=new dl;class Ah{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=GE(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=GE(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class YC{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class qE{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class ip{constructor(){this.De=new Ah,this.Ce=new YC(this.De),this.xe=new qE(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class hl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new hl(this.indexId,this.documentKey,this.arrayValue,r)}}function ba(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=zE(n.arrayValue,e.arrayValue),0!==t?t:(t=zE(n.directionalValue,e.directionalValue),0!==t?t:He.comparator(n.documentKey,e.documentKey)))}function zE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class WE{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=ma(e);if(void 0!==t&&!this.Be(t))return!1;const r=lu(e);let i=0,u=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class QC{constructor(){this.qe=new w_}addToCollectionParentIndex(e,t){return this.qe.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Cs.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class w_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new En(Ke.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new En(Ke.comparator)).toArray()}}const om=new Uint8Array(0);class JC{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new w_,this.Ge=new _a(r=>Co(r),(r,i)=>xc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Pi(i)};return KE(e).put(u)}return le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[eE(t),""],!1,!0);return KE(e).qt(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Ea(c.parent))}return r})}addFieldIndex(e,t){const r=am(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=am(e),i=sp(e),u=Sh(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Sh(e);let i=!0;const u=new Map;return le.forEach(this.Qe(t),c=>this.je(e,c).next(f=>{i&&(i=!!f),u.set(c,f)})).next(()=>{if(i){let c=rn();const f=[];return le.forEach(u,(_,b)=>{var S;ke("IndexedDbIndexManager",`Using index ${S=_,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(nt=>`${nt.fieldPath}:${nt.kind}`).join(",")}`} to execute ${Co(t)}`);const M=function(nt,Ze){const St=ma(Ze);if(void 0===St)return null;for(const Rt of sl(nt,St.fieldPath))switch(Rt.op){case"array-contains-any":return Rt.value.arrayValue.values||[];case"array-contains":return[Rt.value]}return null}(b,_),F=function(nt,Ze){const St=new Map;for(const Rt of lu(Ze))for(const Jt of sl(nt,Rt.fieldPath))switch(Jt.op){case"==":case"in":St.set(Rt.fieldPath.canonicalString(),Jt.value);break;case"not-in":case"!=":return St.set(Rt.fieldPath.canonicalString(),Jt.value),Array.from(St.values())}return null}(b,_),B=function(nt,Ze){const St=[];let Rt=!0;for(const Jt of lu(Ze)){const Dr=0===Jt.kind?Rc(nt,Jt.fieldPath,nt.startAt):hE(nt,Jt.fieldPath,nt.startAt);St.push(Dr.value),Rt&&(Rt=Dr.inclusive)}return new du(St,Rt)}(b,_),z=function(nt,Ze){const St=[];let Rt=!0;for(const Jt of lu(Ze)){const Dr=0===Jt.kind?hE(nt,Jt.fieldPath,nt.endAt):Rc(nt,Jt.fieldPath,nt.endAt);St.push(Dr.value),Rt&&(Rt=Dr.inclusive)}return new du(St,Rt)}(b,_),ce=this.We(_,b,B),Te=this.We(_,b,z),it=this.ze(_,b,F),ot=this.He(_.indexId,M,ce,B.inclusive,Te,z.inclusive,it);return le.forEach(ot,nt=>r.Gt(nt,t.limit).next(Ze=>{Ze.forEach(St=>{const Rt=He.fromSegments(St.documentKey);c.has(Rt)||(c=c.add(Rt),f.push(Rt))})}))}).next(()=>f)}return le.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,u,c,f){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),b=_/(null!=t?t.length:1),S=[];for(let M=0;M<_;++M){const F=t?this.Je(t[M/b]):om,B=this.Ye(e,F,r[M%b],i),z=this.Xe(e,F,u[M%b],c),ce=f.map(Te=>this.Ye(e,F,Te,!0));S.push(...this.createRange(B,z,ce))}return S}Ye(e,t,r,i){const u=new hl(e,He.empty(),t,r);return i?u:u.ke()}Xe(e,t,r,i){const u=new hl(e,He.empty(),t,r);return i?u.ke():u}je(e,t){const r=new WE(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const f of u)r.$e(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;return le.forEach(this.Qe(t),i=>this.je(e,i).next(u=>{u?0!==r&&u.fields.length<function(c){let f=new En(dr.comparator),_=!1;for(const b of c.filters){const S=b;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?_=!0:f=f.add(S.field))}for(const b of c.orderBy)b.field.isKeyField()||(f=f.add(b.field));return f.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new ip;for(const i of lu(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.Ne(i.kind);dl.fe.Zt(u,c)}return r.Se()}Je(e){const t=new ip;return dl.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new ip;return dl.fe.Zt(Sc(this.databaseId,t),r.Ne(function(i){const u=lu(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new ip);let u=0;for(const c of lu(e)){const f=r[u++];for(const _ of i)if(this.en(t,c.fieldPath)&&ch(f))i=this.nn(i,c,f);else{const b=_.Ne(c.kind);dl.fe.Zt(f,b)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const f of i){const _=new ip;_.seed(f.Se()),dl.fe.Zt(c,_.Ne(t.kind)),u.push(_)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Br&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=am(e),i=sp(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return le.forEach(u,f=>i.get([f.indexId,this.uid]).next(_=>{c.push(function(b,S){const M=S?new hh(S.sequenceNumber,new Cs(cl(S.readTime),new He(Ea(S.documentKey)),S.largestBatchId)):hh.empty(),F=b.fields.map(([B,z])=>new Lg(dr.fromServerFormat(B),z));return new zy(b.indexId,b.collectionGroup,F,M)}(f,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:kt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=am(e),u=sp(e);return this.rn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>le.forEach(f,_=>{return u.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:qc((F=r).readTime),documentKey:Pi(F.documentKey.path),largestBatchId:F.largestBatchId});var F})))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?le.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),le.forEach(f,_=>this.on(e,i,_).next(b=>{const S=this.un(u,_);return b.isEqual(S)?le.resolve():this.an(e,u,_,b,S)}))))})}cn(e,t,r,i){return Sh(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return Sh(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=Sh(e);let u=new En(ba);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,f)=>{u=u.add(new hl(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>u)}un(e,t){let r=new En(ba);const i=this.Ze(t,e);if(null==i)return r;const u=ma(t);if(null!=u){const c=e.data.field(u.fieldPath);if(ch(c))for(const f of c.arrayValue.values||[])r=r.add(new hl(t.indexId,e.key,this.Je(f),i))}else r=r.add(new hl(t.indexId,e.key,om,i));return r}an(e,t,r,i,u){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,_,b,S,M){const F=f.getIterator(),B=_.getIterator();let z=Mc(F),ce=Mc(B);for(;z||ce;){let Te=!1,it=!1;if(z&&ce){const ot=b(z,ce);ot<0?it=!0:ot>0&&(Te=!0)}else null!=z?it=!0:Te=!0;Te?(S(ce),ce=Mc(B)):it?(M(z),z=Mc(F)):(z=Mc(F),ce=Mc(B))}}(i,u,ba,f=>{c.push(this.cn(e,t,r,f))},f=>{c.push(this.hn(e,t,r,f))}),le.waitFor(c)}rn(e){let t=1;return sp(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>ba(c,f)).filter((c,f,_)=>!f||0!==ba(c,_[f-1]));const i=[];i.push(e);for(const c of r){const f=ba(c,e),_=ba(c,t);if(0===f)i[0]=e.ke();else if(f>0&&_<0)i.push(c),i.push(c.ke());else if(_>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,om,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,om,[]]));return u}getMinOffset(e,t){let r;return le.forEach(this.Qe(t),i=>this.je(e,i).next(u=>{u?(!r||lE(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Cs.min()})).next(()=>r)}}function KE(n){return br(n,"collectionParents")}function Sh(n){return br(n,"indexEntries")}function am(n){return br(n,"indexConfiguration")}function sp(n){return br(n,"indexState")}const b_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class vi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new vi(e,vi.DEFAULT_COLLECTION_PERCENTILE,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function XC(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let f=0;const _=r.Wt({range:c},(S,M,F)=>(f++,F.delete()));u.push(_.next(()=>{xt(1===f)}));const b=[];for(const S of t.mutations){const M=UE(e,S.key.path,t.batchId);u.push(i.delete(M)),b.push(S.key)}return le.waitFor(u).next(()=>b)}function Mh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}vi.DEFAULT_COLLECTION_PERCENTILE=10,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vi.DEFAULT=new vi(41943040,vi.DEFAULT_COLLECTION_PERCENTILE,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vi.DISABLED=new vi(-1,0,0);class I_{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){xt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new I_(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zs(e).Wt({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=zc(e),c=zs(e);return c.add({}).next(f=>{xt("number"==typeof f);const _=new y_(f,t,r,i),b=function(F,B,z){const ce=z.baseMutations.map(it=>Jg(F.Jt,it)),Te=z.mutations.map(it=>Jg(F.Jt,it));return{userId:B,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:ce,mutations:Te}}(this.M,this.userId,_),S=[];let M=new En((F,B)=>kt(F.canonicalString(),B.canonicalString()));for(const F of i){const B=UE(this.userId,F.key.path,f);M=M.add(F.key.path.popLast()),S.push(c.put(b)),S.push(u.put(B,jC))}return M.forEach(F=>{S.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.ln[f]=_.keys()}),le.waitFor(S).next(()=>_)})}lookupMutationBatch(e,t){return zs(e).get(t).next(r=>r?(xt(r.userId===this.userId),Th(this.M,r)):null)}fn(e,t){return this.ln[t]?le.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return zs(e).Wt({index:"userMutationsIndex",range:i},(c,f,_)=>{f.userId===this.userId&&(xt(f.batchId>=r),u=Th(this.M,f)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return zs(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zs(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Th(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=em(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return zc(e).Wt({range:i},(c,f,_)=>{const[b,S,M]=c,F=Ea(S);if(b===this.userId&&t.path.isEqual(F))return zs(e).get(M).next(B=>{if(!B)throw rt();xt(B.userId===this.userId),u.push(Th(this.M,B))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(kt);const i=[];return t.forEach(u=>{const c=em(this.userId,u.path),f=IDBKeyRange.lowerBound(c),_=zc(e).Wt({range:f},(b,S,M)=>{const[F,B,z]=b,ce=Ea(B);F===this.userId&&u.path.isEqual(ce)?r=r.add(z):M.done()});i.push(_)}),le.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=em(this.userId,r),c=IDBKeyRange.lowerBound(u);let f=new En(kt);return zc(e).Wt({range:c},(_,b,S)=>{const[M,F,B]=_,z=Ea(F);M===this.userId&&r.isPrefixOf(z)?z.length===i&&(f=f.add(B)):S.done()}).next(()=>this.dn(e,f))}dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(zs(e).get(u).next(c=>{if(null===c)throw rt();xt(c.userId===this.userId),r.push(Th(this.M,c))}))}),le.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return XC(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),le.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return zc(e).Wt({range:r},(u,c,f)=>{if(u[0]===this.userId){const _=Ea(u[1]);i.push(_)}else f.done()}).next(()=>{xt(0===i.length)})})}containsKey(e,t){return eD(e,this.userId,t)}wn(e){return um(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function eD(n,e,t){const r=em(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return zc(n).Wt({range:u,jt:!0},(f,_,b)=>{const[S,M,F]=f;S===e&&M===i&&(c=!0),b.done()}).next(()=>c)}function zs(n){return br(n,"mutations")}function zc(n){return br(n,"documentMutations")}function um(n){return br(n,"mutationQueues")}class gu{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new gu(0)}static yn(){return new gu(-1)}}class tD{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new gu(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>At.fromTimestamp(new nr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>mu(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(xt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return mu(e).Wt((c,f)=>{const _=tp(f);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,u.push(this.removeTargetData(e,_)))}).next(()=>le.waitFor(u)).next(()=>i)}forEachTarget(e,t){return mu(e).Wt((r,i)=>{const u=tp(i);t(u)})}pn(e){return op(e).get("targetGlobalKey").next(t=>(xt(null!==t),t))}In(e,t){return op(e).put("targetGlobalKey",t)}Tn(e,t){return mu(e).put(zC(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Co(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return mu(e).Wt({range:i,index:"queryTargetsIndex"},(c,f,_)=>{const b=tp(f);xc(t,b.target)&&(u=b,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Ia(e);return t.forEach(c=>{const f=Pi(c.path);i.push(u.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),le.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ia(e);return le.forEach(t,u=>{const c=Pi(u.path);return le.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Ia(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ia(e);let u=rn();return i.Wt({range:r,jt:!0},(c,f,_)=>{const b=Ea(c[1]),S=new He(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Pi(t.path),i=IDBKeyRange.bound([r],[eE(r)],!1,!0);let u=0;return Ia(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,f],_,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return mu(e).get(t).next(r=>r?tp(r):null)}}function mu(n){return br(n,"targets")}function op(n){return br(n,"targetGlobal")}function Ia(n){return br(n,"targetDocuments")}function xh(n){return C_.apply(this,arguments)}function C_(){return C_=(0,ye.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==Hc)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),C_.apply(this,arguments)}function lm([n,e],[t,r]){const i=kt(n,t);return 0===i?kt(e,r):i}class D_{constructor(e){this.An=e,this.buffer=new En(lm),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();lm(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ZE{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;ke("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ye.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){al(i)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield xh(i)}yield t.Sn(e)}))}}class nD{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(Is.A);const r=new D_(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(b_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),b_):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,u,c,f,_,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,f=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(b=Date.now(),Ng()<=ui.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${u} targets in `+(_-f)+`ms\n\tRemoved ${M} documents in `+(b-_)+`ms\nTotal Duration: ${b-S}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class T_{constructor(e,t){this.db=e,this.garbageCollector=new nD(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return ap(e,r)}removeReference(e,t,r){return ap(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ap(e,t)}On(e,t){return function(r,i){let u=!1;return um(r).zt(c=>eD(r,c,i).next(f=>(f&&(u=!0),le.resolve(!f)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Mn(e,(c,f)=>{if(f<=t){const _=this.On(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,At.min()),Ia(e).delete([0,Pi(c.path)])))});i.push(_)}}).next(()=>le.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ap(e,t)}Mn(e,t){const r=Ia(e);let i,u=Is.A;return r.Wt({index:"documentTargetsIndex"},([c,f],{path:_,sequenceNumber:b})=>{0===c?(u!==Is.A&&t(new He(Ea(i)),u),u=b,i=_):u=Is.A}).next(()=>{u!==Is.A&&t(new He(Ea(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ap(n,e){return Ia(n).put((r=n.currentSequenceNumber,{targetId:0,path:Pi(e.path),sequenceNumber:r}));var r}class A_{constructor(){this.changes=new _a(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class S_{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return fl(e).put(r)}removeEntry(e,t,r){return fl(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],ep(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Bn.newInvalidDocument(t);return fl(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Rh(t))},(i,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:Bn.newInvalidDocument(t)};return fl(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Rh(t))},(i,u)=>{r={document:this.$n(t,u),size:Mh(u)}}).next(()=>r)}getEntries(e,t){let r=rs();return this.Ln(e,t,(i,u)=>{const c=this.$n(i,u);r=r.insert(i,c)}).next(()=>r)}Un(e,t){let r=rs(),i=new vn(He.comparator);return this.Ln(e,t,(u,c)=>{const f=this.$n(u,c);r=r.insert(u,f),i=i.insert(u,Mh(c))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return le.resolve();let i=new En(M_);t.forEach(_=>i=i.add(_));const u=IDBKeyRange.bound(Rh(i.first()),Rh(i.last())),c=i.getIterator();let f=c.getNext();return fl(e).Wt({index:"documentKeyIndex",range:u},(_,b,S)=>{const M=He.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;f&&M_(f,M)<0;)r(f,null),f=c.getNext();f&&f.isEqual(M)&&(r(f,b),f=c.hasNext()?c.getNext():null),f?S.Ut(Rh(f)):S.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),ep(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fl(e).qt(IDBKeyRange.bound(i,u,!0)).next(c=>{let f=rs();for(const _ of c){const b=this.$n(He.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);f=f.insert(b.key,b)}return f})}getAllFromCollectionGroup(e,t,r,i){let u=rs();const c=cm(t,r),f=cm(t,Cs.max());return fl(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(_,b,S)=>{const M=this.$n(He.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(M.key,M),u.size===i&&S.done()}).next(()=>u)}newChangeBuffer(e){return new YE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return QE(e).get("remoteDocumentGlobalKey").next(t=>(xt(!!t),t))}Fn(e,t){return QE(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function qC(n,e){let t;if(e.document)t=OE(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=He.fromSegments(e.noDocument.path),i=cl(e.noDocument.readTime);t=Bn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const r=He.fromSegments(e.unknownDocument.path),i=cl(e.unknownDocument.version);t=Bn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new nr(r[0],r[1]);return At.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return Bn.newInvalidDocument(e)}}class YE extends A_{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new _a(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new En((u,c)=>kt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const f=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,f.readTime)),c.isValidDocument()){const _=$E(this.Kn.M,c);i=i.add(u.path.popLast()),r+=Mh(_)-f.size,t.push(this.Kn.addEntry(e,u,_))}else if(r-=f.size,this.trackRemovals){const _=$E(this.Kn.M,c.convertToNoDocument(At.min()));t.push(this.Kn.addEntry(e,u,_))}}),i.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function QE(n){return br(n,"remoteDocumentGlobal")}function fl(n){return br(n,"remoteDocumentsV14")}function Rh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function cm(n,e){const t=e.documentKey.path.toArray();return[n,ep(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function M_(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=kt(t[u],r[u]),i)return i;return i=kt(t.length,r.length),i||(i=kt(t[t.length-2],r[r.length-2]),i||kt(t[t.length-1],r[r.length-1]))}class rD{constructor(e){this.M=e}kt(e,t,r,i){const u=new pu("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",VE,{unique:!0}),f.createObjectStore("documentMutations"),JE(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=le.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),JE(e)),c=c.next(()=>function(f){const _=f.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",b)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,_){return _.store("mutations").qt().next(b=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",VE,{unique:!0});const S=_.store("mutations"),M=b.map(F=>S.put(F));return le.waitFor(M)})}(e,u))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Qn(u))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&i>=7&&(c=c.next(()=>this.Wn(u))),r<8&&i>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Hn(u))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const _=f.createObjectStore("documentOverlays",{keyPath:nm});_.createIndex("collectionPathOverlayIndex",qs,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",p_,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const _=f.createObjectStore("remoteDocumentsV14",{keyPath:tm});_.createIndex("documentKeyIndex",bh),_.createIndex("collectionGroupIndex",$C)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:wa}).createIndex("sequenceNumberIndex",Xf,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:yi}).createIndex("documentKeyIndex",Bc,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=Mh(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>le.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(f=>le.forEach(f,_=>{xt(_.userId===u.userId);const b=Th(this.M,_);return XC(e,u.userId,b).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Wt((c,f)=>{const _=new Ke(c),b=[0,Pi(_)];u.push(t.get(b).next(S=>S?le.resolve():t.put({targetId:0,path:Pi(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>le.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:f_});const r=t.store("collectionParents"),i=new w_,u=c=>{if(i.add(c)){const f=c.lastSegment(),_=c.popLast();return r.put({collectionId:f,parent:Pi(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,f)=>{const _=new Ke(c);return u(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,f,_],b)=>{const S=Ea(f);return u(S.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const u=tp(i),c=zC(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((u,c)=>{const f=t.store("remoteDocumentsV14"),_=(b=c,b.document?new He(Ke.fromString(b.document.name).popFirst(5)):b.noDocument?He.fromSegments(b.noDocument.path):b.unknownDocument?He.fromSegments(b.unknownDocument.path):rt()).path.toArray();var b;const S={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(S))}).next(()=>le.waitFor(i))}}function JE(n){n.createObjectStore("targetDocuments",{keyPath:HC}).createIndex("documentTargetsIndex",GC,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Jf,{unique:!0}),n.createObjectStore("targetGlobal")}const x_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class dm{constructor(e,t,r,i,u,c,f,_,b,S,M=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=f,this.Xn=b,this.Zn=S,this.ts=M,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=F=>Promise.resolve(),!dm.vt())throw new xe(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new T_(this,i),this.hs=t+"main",this.M=new v_(_),this.ls=new _i(this.hs,this.ts,new rD(this.M)),this.fs=new tD(this.referenceDelegate,this.M),this.ds=new S_(this.M),this._s=new WC,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===S&&zn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(de.FAILED_PRECONDITION,x_);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Is(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,ye.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>up(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(al(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Wc(e).get("owner").next(t=>le.resolve(this.Ps(t)))}Vs(e){return up(e).delete(this.clientId)}vs(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=br(r,"clientMetadata");return i.qt().next(u=>{const c=e.Ds(u,18e5),f=u.filter(_=>-1===c.indexOf(_));return le.forEach(f,_=>i.delete(_.clientId)).next(()=>f)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?le.resolve(!0):Wc(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new xe(de.FAILED_PRECONDITION,x_);return!1}}return!(!this.networkEnabled||!this.inForeground)||up(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new m_(t,Is.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>up(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return I_.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new JC(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return HE.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?Ch:13===c?$c:12===c?Ih:11===c?jc:void rt();var c;let f;return this.ls.runTransaction(e,i,u,_=>(f=new m_(_,this.es?this.es.next():Is.A),"readwrite-primary"===t?this.Es(f).next(b=>!!b||this.As(f)).next(b=>{if(!b)throw zn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new xe(de.FAILED_PRECONDITION,Hc);return r(f)}).next(b=>this.bs(f).next(()=>b)):this.$s(f).next(()=>r(f)))).then(_=>(f.raiseOnCommittedEvent(),_))}$s(e){return Wc(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(de.FAILED_PRECONDITION,x_)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wc(e).put("owner",t)}static vt(){return _i.vt()}Rs(e){const t=Wc(e);return t.get("owner").next(r=>this.Ps(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(zn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,yt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return zn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){zn("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Wc(n){return br(n,"owner")}function up(n){return br(n,"clientMetadata")}function hm(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class XE{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const u of r)u.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const u of t)u.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return He.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):Bg(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new He(t)).next(r=>{let i=s_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let u=s_();return this.indexManager.getCollectionParents(e,i).next(c=>le.forEach(c,f=>{const _=(b=t,S=f.child(i),new hu(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.zs(e,_,r).next(b=>{b.forEach((S,M)=>{u=u.insert(S,M)})})}).next(()=>u))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const f of c.mutations){const _=f.key;let b=i.get(_);null==b&&(b=Bn.newInvalidDocument(_),i=i.insert(_,b)),zg(f,b,c.localWriteTime),b.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((u,c)=>{Jy(t,c)||(i=i.remove(u))}),i))}}class fm{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=rn(),i=rn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new fm(e,t.fromCache,r,i)}}class R_{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(u=>u||this.ei(e,t,i,r)).next(u=>u||this.ni(e,t))}ti(e,t){return le.resolve(null)}ei(e,t,r,i){return function CC(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(At.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const c=this.si(t,u);return this.ii(t,c,r,i)?this.ni(e,t):(Ng()<=ui.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qy(t)),this.ri(e,c,t,Vg(i,-1)))})}si(e,t){let r=new En(vE(e));return t.forEach((i,u)=>{Jy(e,u)&&(r=r.add(u))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}ni(e,t){return Ng()<=ui.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",Qy(t)),this.Zs.Qs(e,t,Cs.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class ew{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new vn(kt),this.ai=new _a(u=>Co(u),xc),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new XE(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function N_(n,e,t,r){return new ew(n,e,t,r)}function P_(n,e){return tw.apply(this,arguments)}function tw(){return tw=(0,ye.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(u=>(i=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],f=[];let _=rn();for(const b of i){c.push(b.batchId);for(const S of b.mutations)_=_.add(S.key)}for(const b of u){f.push(b.batchId);for(const S of b.mutations)_=_.add(S.key)}return t.fi.Ks(r,_).next(b=>({di:b,removedBatchIds:c,addedBatchIds:f}))})})}),tw.apply(this,arguments)}function iD(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(c,f,_,b){const S=_.batch,M=S.keys();let F=le.resolve();return M.forEach(B=>{F=F.next(()=>b.getEntry(f,B)).next(z=>{const ce=_.docVersions.get(B);xt(null!==ce),z.version.compareTo(ce)<0&&(S.applyToRemoteDocument(z,_),z.isValidDocument()&&(z.setReadTime(_.commitVersion),b.addEntry(z)))})}),F.next(()=>c.Bs.removeMutationBatch(f,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function nw(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function rw(n,e){const t=Ge(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const f=[];e.targetChanges.forEach((b,S)=>{const M=i.get(S);if(!M)return;f.push(t.fs.removeMatchingKeys(u,b.removedDocuments,S).next(()=>t.fs.addMatchingKeys(u,b.addedDocuments,S)));let F=M.withSequenceNumber(u.currentSequenceNumber);var B,z,ce;e.targetMismatches.has(S)?F=F.withResumeToken(hn.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):b.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(b.resumeToken,r)),i=i.insert(S,F),z=F,ce=b,(0===(B=M).resumeToken.approximateByteSize()||z.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0)&&f.push(t.fs.updateTargetData(u,F))});let _=rs();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),f.push(iw(u,c,e.documentUpdates).next(b=>{_=b})),!r.isEqual(At.min())){const b=t.fs.getLastRemoteSnapshotVersion(u).next(S=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));f.push(b)}return le.waitFor(f).next(()=>c.apply(u)).next(()=>t.fi.Gs(u,_)).next(()=>_)}).then(u=>(t.ui=i,u))}function iw(n,e,t){let r=rn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let u=rs();return t.forEach((c,f)=>{const _=i.get(c);f.isNoDocument()&&f.version.isEqual(At.min())?(e.removeEntry(c,f.readTime),u=u.insert(c,f)):!_.isValidDocument()||f.version.compareTo(_.version)>0||0===f.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(f),u=u.insert(c,f)):ke("LocalStore","Ignoring outdated watch update for ",c,". Current version:",_.version," Watch version:",f.version)}),u})}function Ir(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Kc(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(u=>u?(i=u,le.resolve(i)):t.fs.allocateTargetId(r).next(c=>(i=new ll(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function Nh(n,e,t){return O_.apply(this,arguments)}function O_(){return O_=(0,ye.Z)(function*(n,e,t){const r=Ge(n),i=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!al(c))throw c;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),O_.apply(this,arguments)}function lp(n,e,t){const r=Ge(n);let i=At.min(),u=rn();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,_,b){const S=Ge(f),M=S.ai.get(b);return void 0!==M?le.resolve(S.ui.get(M)):S.fs.getTargetData(_,b)}(r,c,Gs(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,f.targetId).next(_=>{u=_})}).next(()=>r.oi.Qs(c,e,t?i:At.min(),t?u:rn())).next(f=>(F_(r,Xy(e),f),{documents:f,_i:u})))}function sw(n,e){const t=Ge(n),r=Ge(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function k_(n,e){const t=Ge(n),r=t.ci.get(e)||At.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,Vg(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(F_(t,e,i),i))}function F_(n,e,t){let r=At.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function L_(){return L_=(0,ye.Z)(function*(n,e,t,r){const i=Ge(n);let u=rn(),c=rs();for(const b of t){const S=e.wi(b.metadata.name);b.document&&(u=u.add(S));const M=e.mi(b);M.setReadTime(e.gi(b.metadata.readTime)),c=c.insert(S,M)}const f=i.hi.newChangeBuffer({trackRemovals:!0}),_=yield Kc(i,(b=r,Gs(ph(Ke.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>iw(b,f,c).next(S=>(f.apply(b),S)).next(S=>i.fs.removeMatchingKeysForTargetId(b,_.targetId).next(()=>i.fs.addMatchingKeys(b,u,_.targetId)).next(()=>i.fi.Gs(b,S)).next(()=>S)))}),L_.apply(this,arguments)}function sD(n,e){return pm.apply(this,arguments)}function pm(){return pm=(0,ye.Z)(function*(n,e,t=rn()){const r=yield Kc(n,Gs(E_(e.bundledQuery))),i=Ge(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=wr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i._s.saveNamedQuery(u,e);const f=r.withResumeToken(hn.EMPTY_BYTE_STRING,c);return i.ui=i.ui.insert(f.targetId,f),i.fs.updateTargetData(u,f).next(()=>i.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.fs.addMatchingKeys(u,t,r.targetId)).next(()=>i._s.saveNamedQuery(u,e))})}),pm.apply(this,arguments)}class oD{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return le.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:wr(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:E_(r.bundledQuery),readTime:wr(r.readTime)}),le.resolve();var r}}class ow{constructor(){this.overlays=new vn(He.comparator),this.Ii=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.Xt(e,t,u)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=kc(),u=t.length+1,c=new He(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const _=f.getNext().value,b=_.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&_.largestBatchId>r&&i.set(_.getKey(),_)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new vn((b,S)=>b-S);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=kc(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const f=kc(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((b,S)=>f.set(b,S)),!(f.size()>=i)););return le.resolve(f)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new __(t,r));let u=this.Ii.get(t);void 0===u&&(u=rn(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class aw{constructor(){this.Ti=new En(Cr.Ei),this.Ai=new En(Cr.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Cr(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Cr(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new He(new Ke([])),r=new Cr(t,e),i=new Cr(t,e+1),u=[];return this.Ai.forEachInRange([r,i],c=>{this.Pi(c),u.push(c.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new He(new Ke([])),r=new Cr(t,e),i=new Cr(t,e+1);let u=rn();return this.Ai.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Cr(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Cr{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return He.comparator(e.key,t.key)||kt(e.Ci,t.Ci)}static Ri(e,t){return kt(e.Ci,t.Ci)||He.comparator(e.key,t.key)}}class V_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new En(Cr.Ei)}checkEmpty(e){return le.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const u=this.xi;this.xi++;const c=new y_(u,t,r,i);this.Bs.push(c);for(const f of i)this.Ni=this.Ni.add(new Cr(f.key,u)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return le.resolve(c)}lookupMutationBatch(e,t){return le.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),u=i<0?0:i;return le.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return le.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Cr(t,0),i=new Cr(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,i],c=>{const f=this.ki(c.Ci);u.push(f)}),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(kt);return t.forEach(i=>{const u=new Cr(i,0),c=new Cr(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,c],f=>{r=r.add(f.Ci)})}),le.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;He.isDocumentKey(u)||(u=u.child(""));const c=new Cr(new He(u),0);let f=new En(kt);return this.Ni.forEachWhile(_=>{const b=_.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(f=f.add(_.Ci)),!0)},c),le.resolve(this.Oi(f))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){xt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return le.forEach(t.mutations,i=>{const u=new Cr(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Cr(t,0),i=this.Ni.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class Ca{constructor(e){this.$i=e,this.docs=new vn(He.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():Bn.newInvalidDocument(t))}getEntries(e,t){let r=rs();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Bn.newInvalidDocument(i))}),le.resolve(r)}getAllFromCollection(e,t,r){let i=rs();const u=new He(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:_}}=c.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||lE(uE(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return le.resolve(i)}getAllFromCollectionGroup(e,t,r,i){rt()}Bi(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new aD(this)}getSize(e){return le.resolve(this.size)}}class aD extends A_{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class uD{constructor(e){this.persistence=e,this.Li=new _a(t=>Co(t),xc),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.Ui=0,this.qi=new aw,this.targetCount=0,this.Ki=gu.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),le.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new gu(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Tn(t),le.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Li.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Li.delete(c),u.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),le.waitFor(u).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),le.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.qi.containsKey(t))}}class Da{constructor(e,t){this.Gi={},this.overlays={},this.es=new Is(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new uD(this),this.indexManager=new QC,this.ds=new Ca(r=>this.referenceDelegate.Qi(r)),this.M=new v_(t),this._s=new oD(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ow,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new V_(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const i=new To(this.es.next());return this.referenceDelegate.ji(),r(i).next(u=>this.referenceDelegate.Wi(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}zi(e,t){return le.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class To extends Gc{constructor(e){super(),this.currentSequenceNumber=e}}class Ds{constructor(e){this.persistence=e,this.Hi=new aw,this.Ji=null}static Yi(e){return new Ds(e)}get Xi(){if(this.Ji)return this.Ji;throw rt()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),le.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Xi,r=>{const i=He.fromPath(r);return this.Zi(e,i).next(u=>{u||t.removeEntry(i,At.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return le.or([()=>le.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function U_(n,e){return`firestore_clients_${n}_${e}`}function B_(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function j_(n,e){return`firestore_targets_${n}_${e}`}class gm{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new xe(i.error.code,i.error.message))),c?new gm(e,t,i.state,u):(zn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new xe(r.error.code,r.error.message))),u?new cp(e,r.state,i):(zn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=Eh();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=Bf(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new mm(e,u):(zn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class dp{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new dp(t.clientId,t.onlineState):(zn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Zc{constructor(){this.activeTargetIds=Eh()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $_{constructor(e,t,r,i,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new vn(kt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=U_(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new Zc),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const u=e.getItem(U_(e.persistenceKey,i));if(u){const c=mm.tr(i,u);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(j_(this.persistenceKey,e));if(r){const i=cp.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(j_(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void zn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(u){let c=Is.A;if(null!=u)try{const f=JSON.parse(u);xt("number"==typeof f),c=f}catch(f){zn("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==Is.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new gm(this.currentUser,e,t,r),u=B_(this.persistenceKey,this.currentUser,e);this.setItem(u,i.er())}Ar(e){const t=B_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=j_(this.persistenceKey,e),u=new cp(e,t,r);this.setItem(i,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return mm.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return gm.tr(new Xr(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return cp.tr(i,t)}pr(e){return dp.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),u=this.Tr(r),c=[],f=[];return u.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{u.has(_)||f.push(_)}),this.syncEngine.Lr(c,f).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Eh();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class H_{constructor(){this.Ur=new Zc,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Zc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class lD{Kr(e){}shutdown(){}}class G_{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const uw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class ym{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class cD extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,u){const c=this.ho(e,t);ke("RestConnection","Sending: ",c,r);const f={};return this.lo(f,i,u),this.fo(e,c,f,r).then(_=>(ke("RestConnection","Received: ",_),_),_=>{throw tl("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}_o(e,t,r,i,u){return this.co(e,t,r,i,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ic,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ho(e,t){return`${this.uo}/v1/${t}:${uw[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((u,c)=>{const f=new mC;f.listenOnce(G0.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Uy.NO_ERROR:const b=f.getResponseJson();ke("Connection","XHR received:",JSON.stringify(b)),u(b);break;case Uy.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),c(new xe(de.DEADLINE_EXCEEDED,"Request time out"));break;case Uy.HTTP_ERROR:const S=f.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',S,"response text:",f.getResponseText()),S>0){const M=f.getResponseJson().error;if(M&&M.status&&M.message){const F=function(B){const z=B.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(z)>=0?z:de.UNKNOWN}(M.status);c(new xe(F,M.message))}else c(new xe(de.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new xe(de.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);f.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Vy(),c=gC(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new z0({})),this.lo(f.initMessageHeaders,t,r),(0,yt.uI)()||(0,yt.b$)()||(0,yt.d)()||(0,yt.w1)()||(0,yt.Mn)()||(0,yt.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");ke("Connection","Creating WebChannel: "+_,f);const b=u.createWebChannel(_,f);let S=!1,M=!1;const F=new ym({Jr:z=>{M?ke("Connection","Not sending because WebChannel is closed:",z):(S||(ke("Connection","Opening WebChannel transport."),b.open(),S=!0),ke("Connection","WebChannel sending:",z),b.send(z))},Yr:()=>b.close()}),B=(z,ce,Te)=>{z.listen(ce,it=>{try{Te(it)}catch(ot){setTimeout(()=>{throw ot},0)}})};return B(b,Ff.EventType.OPEN,()=>{M||ke("Connection","WebChannel transport opened.")}),B(b,Ff.EventType.CLOSE,()=>{M||(M=!0,ke("Connection","WebChannel transport closed"),F.ro())}),B(b,Ff.EventType.ERROR,z=>{M||(M=!0,tl("Connection","WebChannel transport errored:",z),F.ro(new xe(de.UNAVAILABLE,"The operation could not be completed")))}),B(b,Ff.EventType.MESSAGE,z=>{var ce;if(!M){const Te=z.data[0];xt(!!Te);const it=Te,ot=it.error||(null===(ce=it[0])||void 0===ce?void 0:ce.error);if(ot){ke("Connection","WebChannel received error:",ot);const nt=ot.status;let Ze=function(Rt){const Jt=Wn[Rt];if(void 0!==Jt)return MC(Jt)}(nt),St=ot.message;void 0===Ze&&(Ze=de.INTERNAL,St="Unknown error status: "+nt+" with message "+ot.message),M=!0,F.ro(new xe(Ze,St)),b.close()}else ke("Connection","WebChannel received:",Te),F.oo(Te)}}),B(c,q0.STAT_EVENT,z=>{z.stat===el.PROXY?ke("Connection","Detected buffering proxy"):z.stat===el.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.io()},0),F}}function q_(){return"undefined"!=typeof window?window:null}function hp(){return"undefined"!=typeof document?document:null}function Yc(n){return new OC(n,!0)}class fp{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class z_{constructor(e,t,r,i,u,c,f,_){this.Yn=e,this.Vo=r,this.vo=i,this.So=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=_,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new fp(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ye.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,ye.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(zn(t.toString()),zn("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new xe(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,ye.Z)(function*(){e.state=0,e.start()}))}jo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lw extends z_{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function DS(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:rt(),i=e.targetChange.targetIds||[],u=function(_,b){return _.N?(xt(void 0===b||"string"==typeof b),hn.fromBase64String(b||"")):(xt(void 0===b||b instanceof Uint8Array),hn.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(_){const b=void 0===_.code?de.UNKNOWN:MC(_.code);return new xe(b,_.message||"")}(c);t=new o_(r,i,u,f||null)}else if("documentChange"in e){const r=e.documentChange,i=va(n,r.document.name),u=wr(r.document.updateTime),c=new Ri({mapValue:{fields:r.document.fields}}),f=Bn.newFoundDocument(i,u,c);t=new Zf(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=va(n,r.document),u=r.readTime?wr(r.readTime):At.min(),c=Bn.newNoDocument(i,u);t=new Zf([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=va(n,r.document);t=new Zf([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return rt();{const r=e.filter,u=new fu(r.count||0);t=new Fc(r.targetId,u)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return At.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?At.min():u.readTime?wr(u.readTime):At.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=wh(this.M),t.addTarget=function(i,u){let c;const f=u.target;return c=cu(f)?{documents:c_(i,f)}:{query:d_(i,f)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=Yg(i,u.resumeToken):u.snapshotVersion.compareTo(At.min())>0&&(c.readTime=Ni(i,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function Do(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=wh(this.M),t.removeTarget=e,this.Lo(t)}}class cw extends z_{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(xt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function LC(n,e){return n&&n.length>0?(xt(void 0!==e),n.map(t=>function(r,i){let u=wr(r.updateTime?r.updateTime:i);return u.isEqual(At.min())&&(u=wr(i)),new Gg(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=wr(e.commitTime);return this.listener.tu(r,t)}return xt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=wh(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Jg(this.M,r))};this.Lo(t)}}class dw extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new xe(de.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So.co(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(de.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So._o(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(de.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class hw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(zn(t),this.uu=!1):ke("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class fw{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(f=>{r.enqueueAndForget((0,ye.Z)(function*(){var _;pl(c)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ye.Z)(function*(b){const S=Ge(b);S.wu.add(4),yield kh(S),S.yu.set("Unknown"),S.wu.delete(4),yield Oh(S)}),function(b){return _.apply(this,arguments)})(c))}))}),this.yu=new hw(r,i)}}function Oh(n){return _m.apply(this,arguments)}function _m(){return _m=(0,ye.Z)(function*(n){if(pl(n))for(const e of n.mu)yield e(!0)}),_m.apply(this,arguments)}function kh(n){return W_.apply(this,arguments)}function W_(){return W_=(0,ye.Z)(function*(n){for(const e of n.mu)yield e(!1)}),W_.apply(this,arguments)}function vm(n,e){const t=Ge(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),Y_(t)?Z_(t):Xc(t).Mo()&&K_(t,e))}function pp(n,e){const t=Ge(n),r=Xc(t);t._u.delete(e),r.Mo()&&pw(t,e),0===t._u.size&&(r.Mo()?r.$o():pl(t)&&t.yu.set("Unknown"))}function K_(n,e){n.pu.Z(e.targetId),Xc(n).Ho(e)}function pw(n,e){n.pu.Z(e),Xc(n).Jo(e)}function Z_(n){n.pu=new RC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Xc(n).start(),n.yu.au()}function Y_(n){return pl(n)&&!Xc(n).ko()&&n._u.size>0}function pl(n){return 0===Ge(n).wu.size}function gw(n){n.pu=void 0}function dD(n){return Q_.apply(this,arguments)}function Q_(){return Q_=(0,ye.Z)(function*(n){n._u.forEach((e,t)=>{K_(n,e)})}),Q_.apply(this,arguments)}function hD(n,e){return J_.apply(this,arguments)}function J_(){return J_=(0,ye.Z)(function*(n,e){gw(n),Y_(n)?(n.yu.lu(e),Z_(n)):n.yu.set("Unknown")}),J_.apply(this,arguments)}function fD(n,e,t){return X_.apply(this,arguments)}function X_(){return X_=(0,ye.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof o_&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(i,u){const c=u.cause;for(const f of u.targetIds)i._u.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i._u.delete(f),i.pu.removeTarget(f))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Em(n,r)}else if(e instanceof Zf?n.pu.ut(e):e instanceof Fc?n.pu._t(e):n.pu.ht(e),!t.isEqual(At.min()))try{const r=yield nw(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.pu.yt(u);return c.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const b=i._u.get(_);b&&i._u.set(_,b.withResumeToken(f.resumeToken,u))}}),c.targetMismatches.forEach(f=>{const _=i._u.get(f);if(!_)return;i._u.set(f,_.withResumeToken(hn.EMPTY_BYTE_STRING,_.snapshotVersion)),pw(i,f);const b=new ll(_.target,f,1,_.sequenceNumber);K_(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield Em(n,r)}var r}),X_.apply(this,arguments)}function Em(n,e,t){return ev.apply(this,arguments)}function ev(){return ev=(0,ye.Z)(function*(n,e,t){if(!al(e))throw e;n.wu.add(1),yield kh(n),n.yu.set("Offline"),t||(t=()=>nw(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Oh(n)}))}),ev.apply(this,arguments)}function tv(n,e){return e().catch(t=>Em(n,t,e))}function Qc(n){return wm.apply(this,arguments)}function wm(){return wm=(0,ye.Z)(function*(n){const e=Ge(n),t=ed(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;mw(e);)try{const i=yield Ir(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,yw(e,i)}catch(i){yield Em(e,i)}nv(e)&&rv(e)}),wm.apply(this,arguments)}function mw(n){return pl(n)&&n.du.length<10}function yw(n,e){n.du.push(e);const t=ed(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function nv(n){return pl(n)&&!ed(n).ko()&&n.du.length>0}function rv(n){ed(n).start()}function _w(n){return bm.apply(this,arguments)}function bm(){return bm=(0,ye.Z)(function*(n){ed(n).nu()}),bm.apply(this,arguments)}function vw(n){return Im.apply(this,arguments)}function Im(){return Im=(0,ye.Z)(function*(n){const e=ed(n);for(const t of n.du)e.Zo(t.mutations)}),Im.apply(this,arguments)}function Jc(n,e,t){return iv.apply(this,arguments)}function iv(){return iv=(0,ye.Z)(function*(n,e,t){const r=n.du.shift(),i=im.from(r,e,t);yield tv(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Qc(n)}),iv.apply(this,arguments)}function pD(n,e){return gl.apply(this,arguments)}function gl(){return gl=(0,ye.Z)(function*(n,e){var t;e&&ed(n).Xo&&(yield(t=(0,ye.Z)(function*(r,i){if(TE(u=i.code)&&u!==de.ABORTED){const c=r.du.shift();ed(r).Fo(),yield tv(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Qc(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),nv(n)&&rv(n)}),gl.apply(this,arguments)}function gD(n,e){return gp.apply(this,arguments)}function gp(){return gp=(0,ye.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=pl(t);t.wu.add(3),yield kh(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Oh(t)}),gp.apply(this,arguments)}function Ew(n,e){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,ye.Z)(function*(n,e){const t=Ge(n);e?(t.wu.delete(2),yield Oh(t)):e||(t.wu.add(2),yield kh(t),t.yu.set("Unknown"))}),Cm.apply(this,arguments)}function Xc(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ge(e);return i.iu(),new lw(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:dD.bind(null,n),eo:hD.bind(null,n),zo:fD.bind(null,n)}),n.mu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Iu.Fo(),Y_(n)?Z_(n):n.yu.set("Unknown")):(yield n.Iu.stop(),gw(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function ed(n){return n.Tu||(n.Tu=function(e,t,r){const i=Ge(e);return i.iu(),new cw(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:_w.bind(null,n),eo:pD.bind(null,n),eu:vw.bind(null,n),tu:Jc.bind(null,n)}),n.mu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Tu.Fo(),yield Qc(n)):(yield n.Tu.stop(),n.du.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class _t{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,f=new _t(e,t,c,i,u);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fh(n,e){if(zn("AsyncQueue",`${e}: ${n}`),al(n))return new xe(de.UNAVAILABLE,`${e}: ${n}`);throw n}class Lh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||He.comparator(t.key,r.key):(t,r)=>He.comparator(t.key,r.key),this.keyedMap=s_(),this.sortedSet=new vn(this.comparator)}static emptySet(e){return new Lh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Lh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Lh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ww{constructor(){this.Eu=new vn(He.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):rt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class yu{constructor(e,t,r,i,u,c,f,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new yu(e,t,Lh.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class mD{constructor(){this.Ru=void 0,this.listeners=[]}}class Dm{constructor(){this.queries=new _a(e=>_E(e),gh),this.onlineState="Unknown",this.bu=new Set}}function Vh(n,e){return jn.apply(this,arguments)}function jn(){return jn=(0,ye.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new mD),i)try{u.Ru=yield t.onListen(r)}catch(c){const f=Fh(c,`Initialization of query '${Qy(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&Am(t)}),jn.apply(this,arguments)}function bw(n,e){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,ye.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Tm.apply(this,arguments)}function yD(n,e){const t=Ge(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.Vu(i)&&(r=!0);c.Ru=i}}r&&Am(t)}function _D(n,e,t){const r=Ge(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function Am(n){n.bu.forEach(e=>{e.next()})}class Sm{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new yu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=yu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class Iw{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class sv{constructor(e){this.M=e}wi(e){return va(this.M,e)}mi(e){return e.metadata.exists?OE(this.M,e.document,!1):Bn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return wr(e)}}class vD{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Cw(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Ke.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new sv(this.M);for(const i of e)if(i.metadata.queries){const u=r.wi(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||rn()).add(u);t.set(c,f)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function Ph(n,e,t,r){return L_.apply(this,arguments)}(e.localStore,new sv(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield sD(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Cw(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Dw{constructor(e){this.key=e}}class Uh{constructor(e){this.key=e}}class Tw{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=rn(),this.mutatedKeys=rn(),this.Gu=vE(e),this.Qu=new Lh(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new ww,i=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,b="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((S,M)=>{const F=i.get(S),B=Jy(this.query,M)?M:null,z=!!F&&this.mutatedKeys.has(F.key),ce=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let Te=!1;F&&B?F.data.isEqual(B.data)?z!==ce&&(r.track({type:3,doc:B}),Te=!0):this.Hu(F,B)||(r.track({type:2,doc:B}),Te=!0,(_&&this.Gu(B,_)>0||b&&this.Gu(B,b)<0)&&(f=!0)):!F&&B?(r.track({type:0,doc:B}),Te=!0):F&&!B&&(r.track({type:1,doc:F}),Te=!0,(_||b)&&(f=!0)),Te&&(B?(c=c.add(B),u=ce?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const S="F"===this.query.limitType?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Qu:c,zu:r,ii:f,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((b,S)=>function(M,F){const B=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return B(M)-B(F)}(b.type,S.type)||this.Gu(b.doc,S.doc)),this.Ju(r);const c=t?this.Yu():[],f=0===this.Ku.size&&this.current?1:0,_=f!==this.qu;return this.qu=f,0!==u.length||_?{snapshot:new yu(this.query,e.Qu,i,u,e.mutatedKeys,0===f,_,!1),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new ww,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=rn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new Uh(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new Dw(r))}),t}ta(e){this.Uu=e._i,this.Ku=rn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return yu.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class ED{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class wD{constructor(e){this.key=e,this.na=!1}}class Mm{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new _a(f=>_E(f),gh),this.ra=new Map,this.oa=new Set,this.ua=new vn(He.comparator),this.aa=new Map,this.ca=new aw,this.ha={},this.la=new Map,this.fa=gu.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function Aw(n,e){return xm.apply(this,arguments)}function xm(){return xm=(0,ye.Z)(function*(n,e){const t=yv(n);let r,i;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.ea();else{const c=yield Kc(t.localStore,Gs(e));t.isPrimaryClient&&vm(t.remoteStore,c);const f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield Rm(t,e,r,"current"===f)}return i}),xm.apply(this,arguments)}function Rm(n,e,t,r){return ov.apply(this,arguments)}function ov(){return ov=(0,ye.Z)(function*(n,e,t,r){n._a=(S,M,F)=>{return(B=(0,ye.Z)(function*(z,ce,Te,it){let ot=ce.view.Wu(Te);ot.ii&&(ot=yield lp(z.localStore,ce.query,!1).then(({documents:St})=>ce.view.Wu(St,ot)));const nt=it&&it.targetChanges.get(ce.targetId),Ze=ce.view.applyChanges(ot,z.isPrimaryClient,nt);return dv(z,ce.targetId,Ze.Xu),Ze.snapshot}),function(z,ce,Te,it){return B.apply(this,arguments)})(n,S,M,F);var B};const i=yield lp(n.localStore,e,!0),u=new Tw(e,i._i),c=u.Wu(i.documents),f=Kf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=u.applyChanges(c,n.isPrimaryClient,f);dv(n,t,_.Xu);const b=new ED(e,t,u);return n.ia.set(e,b),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),_.snapshot}),ov.apply(this,arguments)}function mp(n,e){return td.apply(this,arguments)}function td(){return td=(0,ye.Z)(function*(n,e){const t=Ge(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(u=>!gh(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Nh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),pp(t.remoteStore,r.targetId),_u(t,r.targetId)}).catch(xh))):(_u(t,r.targetId),yield Nh(t.localStore,r.targetId,!0))}),td.apply(this,arguments)}function av(){return av=(0,ye.Z)(function*(n,e,t){const r=_v(n);try{const i=yield function(u,c){const f=Ge(u),_=nr.now(),b=c.reduce((M,F)=>M.add(F.key),rn());let S;return f.persistence.runTransaction("Locally write mutations","readwrite",M=>f.fi.Ks(M,b).next(F=>{S=F;const B=[];for(const z of c){const ce=SC(z,S.get(z.key));null!=ce&&B.push(new Oc(z.key,ce,EC(ce.value.mapValue),Qn.exists(!0)))}return f.Bs.addMutationBatch(M,_,B,c)})).then(M=>(M.applyToLocalDocumentSet(S),{batchId:M.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,f){let _=u.ha[u.currentUser.toKey()];_||(_=new vn(kt)),_=_.insert(c,f),u.ha[u.currentUser.toKey()]=_}(r,i.batchId,t),yield vu(r,i.changes),yield Qc(r.remoteStore)}catch(i){const u=Fh(i,"Failed to persist write");t.reject(u)}}),av.apply(this,arguments)}function Sw(n,e){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,ye.Z)(function*(n,e){const t=Ge(n);try{const r=yield rw(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.aa.get(u);c&&(xt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.na=!0:i.modifiedDocuments.size>0?xt(c.na):i.removedDocuments.size>0&&(xt(c.na),c.na=!1))}),yield vu(t,r,e)}catch(r){yield xh(r)}}),Nm.apply(this,arguments)}function uv(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((u,c)=>{const f=c.view.Pu(e);f.snapshot&&i.push(f.snapshot)}),function(u,c){const f=Ge(u);f.onlineState=c;let _=!1;f.queries.forEach((b,S)=>{for(const M of S.listeners)M.Pu(c)&&(_=!0)}),_&&Am(f)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Mw(n,e,t){return lv.apply(this,arguments)}function lv(){return lv=(0,ye.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),u=i&&i.key;if(u){let c=new vn(He.comparator);c=c.insert(u,Bn.newNoDocument(u,At.min()));const f=rn().add(u),_=new Wf(At.min(),new Map,new En(kt),c,f);yield Sw(r,_),r.ua=r.ua.remove(u),r.aa.delete(e),nd(r)}else yield Nh(r.localStore,e,!1).then(()=>_u(r,e,t)).catch(xh)}),lv.apply(this,arguments)}function xw(n,e){return cv.apply(this,arguments)}function cv(){return cv=(0,ye.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const i=yield iD(t.localStore,e);Pm(t,r,null),Pw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield vu(t,i)}catch(i){yield xh(i)}}),cv.apply(this,arguments)}function ID(n,e,t){return Rw.apply(this,arguments)}function Rw(){return Rw=(0,ye.Z)(function*(n,e,t){const r=Ge(n);try{const i=yield function(u,c){const f=Ge(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let b;return f.Bs.lookupMutationBatch(_,c).next(S=>(xt(null!==S),b=S.keys(),f.Bs.removeMutationBatch(_,S))).next(()=>f.Bs.performConsistencyCheck(_)).next(()=>f.fi.Ks(_,b))})}(r.localStore,e);Pm(r,e,t),Pw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield vu(r,i)}catch(i){yield xh(i)}}),Rw.apply(this,arguments)}function Nw(){return Nw=(0,ye.Z)(function*(n,e){const t=Ge(n);pl(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ge(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.Bs.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=Fh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Nw.apply(this,arguments)}function Pw(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function Pm(n,e,t){const r=Ge(n);let i=r.ha[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function _u(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||Ow(n,r)})}function Ow(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(pp(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),nd(n))}function dv(n,e,t){for(const r of t)r instanceof Dw?(n.ca.addReference(r.key,e),kw(n,r)):r instanceof Uh?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||Ow(n,r.key)):rt()}function kw(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.oa.add(r),nd(n))}function nd(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new He(Ke.fromString(e)),r=n.fa.next();n.aa.set(r,new wD(t)),n.ua=n.ua.insert(t,r),vm(n.remoteStore,new ll(Gs(ph(t.path)),r,2,Is.A))}}function vu(n,e,t){return hv.apply(this,arguments)}function hv(){return hv=(0,ye.Z)(function*(n,e,t){const r=Ge(n),i=[],u=[],c=[];var f;r.ia.isEmpty()||(r.ia.forEach((f,_)=>{c.push(r._a(_,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,b.fromCache?"not-current":"current"),i.push(b);const S=fm.Ys(_.targetId,b);u.push(S)}}))}),yield Promise.all(c),r.sa.zo(i),yield(f=(0,ye.Z)(function*(_,b){const S=Ge(_);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>le.forEach(b,F=>le.forEach(F.Hs,B=>S.persistence.referenceDelegate.addReference(M,F.targetId,B)).next(()=>le.forEach(F.Js,B=>S.persistence.referenceDelegate.removeReference(M,F.targetId,B)))))}catch(M){if(!al(M))throw M;ke("LocalStore","Failed to update sequence numbers: "+M)}for(const M of b){const F=M.targetId;if(!M.fromCache){const B=S.ui.get(F),ce=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);S.ui=S.ui.insert(F,ce)}}}),function(_,b){return f.apply(this,arguments)})(r.localStore,u))}),hv.apply(this,arguments)}function CD(n,e){return fv.apply(this,arguments)}function fv(){return fv=(0,ye.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield P_(t.localStore,e);t.currentUser=e,(i=t).la.forEach(c=>{c.forEach(f=>{f.reject(new xe(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield vu(t,r.di)}var i}),fv.apply(this,arguments)}function DD(n,e){const t=Ge(n),r=t.aa.get(e);if(r&&r.na)return rn().add(r.key);{let i=rn();const u=t.ra.get(e);if(!u)return i;for(const c of u){const f=t.ia.get(c);i=i.unionWith(f.view.ju)}return i}}function Fw(n,e){return pv.apply(this,arguments)}function pv(){return pv=(0,ye.Z)(function*(n,e){const t=Ge(n),r=yield lp(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&dv(t,e.targetId,i.Xu),i}),pv.apply(this,arguments)}function TD(n,e){return ml.apply(this,arguments)}function ml(){return ml=(0,ye.Z)(function*(n,e){const t=Ge(n);return k_(t.localStore,e).then(r=>vu(t,r))}),ml.apply(this,arguments)}function AD(n,e,t,r){return Om.apply(this,arguments)}function Om(){return Om=(0,ye.Z)(function*(n,e,t,r){const i=Ge(n),u=yield function(c,f){const _=Ge(c),b=Ge(_.Bs);return _.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.fn(S,f).next(M=>M?_.fi.Ks(S,M):le.resolve(null)))}(i.localStore,e);var f;null!==u?("pending"===t?yield Qc(i.remoteStore):"acknowledged"===t||"rejected"===t?(Pm(i,e,r||null),Pw(i,e),f=e,Ge(Ge(i.localStore).Bs)._n(f)):rt(),yield vu(i,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),Om.apply(this,arguments)}function km(){return km=(0,ye.Z)(function*(n,e){const t=Ge(n);if(yv(t),_v(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Lw(t,r.toArray());t.da=!0,yield Ew(t.remoteStore,!0);for(const u of i)vm(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(_u(t,c),Nh(t.localStore,c,!0))),pp(t.remoteStore,c)}),yield i,yield Lw(t,r),function(u){const c=Ge(u);c.aa.forEach((f,_)=>{pp(c.remoteStore,_)}),c.ca.Si(),c.aa=new Map,c.ua=new vn(He.comparator)}(t),t.da=!1,yield Ew(t.remoteStore,!1)}}),km.apply(this,arguments)}function Lw(n,e,t){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,ye.Z)(function*(n,e,t){const r=Ge(n),i=[],u=[];for(const c of e){let f;const _=r.ra.get(c);if(_&&0!==_.length){f=yield Kc(r.localStore,Gs(_[0]));for(const b of _){const S=r.ia.get(b),M=yield Fw(r,S);M.snapshot&&u.push(M.snapshot)}}else{const b=yield sw(r.localStore,c);f=yield Kc(r.localStore,b),yield Rm(r,Vw(b),c,!1)}i.push(f)}return r.sa.zo(u),i}),Fm.apply(this,arguments)}function Vw(n){return ns(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function gv(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).Fs()}function MD(n,e,t,r){return Lm.apply(this,arguments)}function Lm(){return Lm=(0,ye.Z)(function*(n,e,t,r){const i=Ge(n);if(i.da)return void ke("SyncEngine","Ignoring unexpected query state notification.");const u=i.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield k_(i.localStore,Xy(u[0])),f=Wf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield vu(i,c,f);break}case"rejected":yield Nh(i.localStore,e,!0),_u(i,e,r);break;default:rt()}}),Lm.apply(this,arguments)}function Uw(n,e,t){return mv.apply(this,arguments)}function mv(){return mv=(0,ye.Z)(function*(n,e,t){const r=yv(n);if(r.da){for(const i of e){if(r.ra.has(i)){ke("SyncEngine","Adding an already active target "+i);continue}const u=yield sw(r.localStore,i),c=yield Kc(r.localStore,u);yield Rm(r,Vw(u),c.targetId,!1),vm(r.remoteStore,c)}for(const i of t)r.ra.has(i)&&(yield Nh(r.localStore,i,!1).then(()=>{pp(r.remoteStore,i),_u(r,i)}).catch(xh))}}),mv.apply(this,arguments)}function yv(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Sw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mw.bind(null,e),e.sa.zo=yD.bind(null,e.eventManager),e.sa.wa=_D.bind(null,e.eventManager),e}function _v(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xw.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ID.bind(null,e),e}class Bw{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.M=Yc(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return N_(this.persistence,new R_,e.initialUser,this.M)}ya(e){return new Da(Ds.Yi,this.M)}ga(e){return new H_}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ev extends Bw{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield _v(r.Ta.syncEngine),yield Qc(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return N_(this.persistence,new R_,e.initialUser,this.M)}pa(e){return new ZE(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=hm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?vi.withCacheSize(this.cacheSizeBytes):vi.DEFAULT;return new dm(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,q_(),hp(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new H_}}class xD extends Ev{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof $_&&(r.sharedClientState.syncEngine={$r:AD.bind(null,i),Br:MD.bind(null,i),Lr:Uw.bind(null,i),Fs:gv.bind(null,i),Fr:TD.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,ye.Z)(function*(c){yield function SD(n,e){return km.apply(this,arguments)}(r.Ta.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}ga(e){const t=q_();if(!$_.vt(t))throw new xe(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=hm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $_(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class wv{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>uv(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=CD.bind(null,r.syncEngine),yield Ew(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Dm}createDatastore(e){const t=Yc(e.databaseInfo.databaseId),r=new cD(e.databaseInfo);return new dw(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=f=>uv(this.syncEngine,f,0),c=G_.vt()?new G_:new lD,new fw(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,f,_,b){const S=new Mm(r,i,u,c,f,_);return b&&(S.da=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=Ge(t);ke("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield kh(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function jw(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Vm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class RD{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Ur,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(i);return new Iw(JSON.parse(u),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,ye.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class ND{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ye.Z)(function*(u,c){const f=Ge(u),_=wh(f.M)+"/documents",b={documents:c.map(B=>Yf(f.M,B))},S=yield f._o("BatchGetDocuments",_,b),M=new Map;S.forEach(B=>{const z=function FC(n,e){return"found"in e?function(t,r){xt(!!r.found);const i=va(t,r.found.name),u=wr(r.found.updateTime),c=new Ri({mapValue:{fields:r.found.fields}});return Bn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){xt(!!r.missing),xt(!!r.readTime);const i=va(t,r.missing),u=wr(r.readTime);return Bn.newNoDocument(i,u)}(n,e):rt()}(f.M,B);M.set(z.key.toString(),z)});const F=[];return c.forEach(B=>{const z=M.get(B.toString());xt(!!z),F.push(z)}),F}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new vh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=He.fromPath(i);e.mutations.push(new Zg(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(i,u){const c=Ge(i),f=wh(c.M)+"/documents",_={writes:u.map(b=>Jg(c.M,b))};yield c.co("Commit",f,_)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=At.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Qn.updateTime(t):Qn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new xe(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qn.updateTime(t)}return Qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class PD{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.xa=r.maxAttempts,this.No=new fp(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,ye.Z)(function*(){const t=new ND(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Ma(u)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!kg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!TE(t)}return!1}}class OD{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Xr.UNAUTHENTICATED,this.clientId=X0.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ye.Z)(function*(f){ke("FirestoreClient","Received user=",f.uid),yield u.authCredentialListener(f),u.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(ke("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Fh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function bv(n,e){return Um.apply(this,arguments)}function Um(){return Um=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ye.Z)(function*(u){r.isEqual(u)||(yield P_(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Um.apply(this,arguments)}function $w(n,e){return Iv.apply(this,arguments)}function Iv(){return Iv=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Bm(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>gD(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>gD(e.remoteStore,u)),n.onlineComponents=e}),Iv.apply(this,arguments)}function Bm(n){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,ye.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield bv(n,new Bw)),n.offlineComponents}),Cv.apply(this,arguments)}function jm(n){return Dv.apply(this,arguments)}function Dv(){return Dv=(0,ye.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield $w(n,new wv)),n.onlineComponents}),Dv.apply(this,arguments)}function $m(n){return Bm(n).then(e=>e.persistence)}function yp(n){return Bm(n).then(e=>e.localStore)}function Tv(n){return jm(n).then(e=>e.remoteStore)}function _p(n){return jm(n).then(e=>e.syncEngine)}function Bh(n){return Av.apply(this,arguments)}function Av(){return Av=(0,ye.Z)(function*(n){const e=yield jm(n),t=e.eventManager;return t.onListen=Aw.bind(null,e.syncEngine),t.onUnlisten=mp.bind(null,e.syncEngine),t}),Av.apply(this,arguments)}function Gw(n,e,t={}){const r=new Ur;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,u,c,f,_){const b=new Vm({next:M=>{u.enqueueAndForget(()=>bw(i,S));const F=M.docs.has(c);!F&&M.fromCache?_.reject(new xe(de.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&M.fromCache&&f&&"server"===f.source?_.reject(new xe(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(M)},error:M=>_.reject(M)}),S=new Sm(ph(c.path),b,{includeMetadataChanges:!0,ku:!0});return Vh(i,S)}(yield Bh(n),n.asyncQueue,e,t,r)})),r.promise}function zw(n,e,t={}){const r=new Ur;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,u,c,f,_){const b=new Vm({next:M=>{u.enqueueAndForget(()=>bw(i,S)),M.fromCache&&"server"===f.source?_.reject(new xe(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(M)},error:M=>_.reject(M)}),S=new Sm(c,b,{includeMetadataChanges:!0,ku:!0});return Vh(i,S)}(yield Bh(n),n.asyncQueue,e,t,r)})),r.promise}const Kw=new Map;function yl(n,e,t){if(!t)throw new xe(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function jh(n,e,t,r){if(!0===e&&!0===r)throw new xe(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Zw(n){if(!He.isDocumentKey(n))throw new xe(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function LD(n){if(He.isDocumentKey(n))throw new xe(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vp(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":rt()}function Wt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vp(n);throw new xe(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Yw(n,e){if(e<=0)throw new xe(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Qw{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,jh("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ep{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qw({}),this._settingsFrozen=!1,e instanceof fa?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new xe(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fa(i.options.projectId)}(e))}get app(){if(!this._app)throw new xe(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qw(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new K0;switch(t.type){case"gapi":const r=t.client;return xt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Y0(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Kw.get(e);t&&(ke("ComponentProvider","Removing Datastore"),Kw.delete(e),t.terminate())}(this),Promise.resolve()}}class Sn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sn(this.firestore,e,this._key)}}class jr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new jr(this.firestore,e,this._query)}}class Ts extends jr{constructor(e,t,r){super(e,t,ph(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new He(e))}withConverter(e){return new Ts(this.firestore,e,this._path)}}function $h(n,e,...t){if(n=(0,yt.m9)(n),yl("collection","path",e),n instanceof Ep){const r=Ke.fromString(e,...t);return LD(r),new Ts(n,null,r)}{if(!(n instanceof Sn||n instanceof Ts))throw new xe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ke.fromString(e,...t));return LD(r),new Ts(n.firestore,null,r)}}function wp(n,e,...t){if(n=(0,yt.m9)(n),1===arguments.length&&(e=X0.R()),yl("doc","path",e),n instanceof Ep){const r=Ke.fromString(e,...t);return Zw(r),new Sn(n,null,new He(r))}{if(!(n instanceof Sn||n instanceof Ts))throw new xe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ke.fromString(e,...t));return Zw(r),new Sn(n.firestore,n instanceof Ts?n.converter:null,new He(r))}}function Mv(n,e){return n=(0,yt.m9)(n),e=(0,yt.m9)(e),(n instanceof Sn||n instanceof Ts)&&(e instanceof Sn||e instanceof Ts)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Xw(n,e){return n=(0,yt.m9)(n),e=(0,yt.m9)(e),n instanceof jr&&e instanceof jr&&n.firestore===e.firestore&&gh(n._query,e._query)&&n.converter===e.converter}class UD{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new fp(this,"async_queue_retry"),this.Qa=()=>{const t=hp();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=hp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=hp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Ur;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,ye.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!al(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,zn("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=_t.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(i),i}ja(){this.Ua&&rt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function bp(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class BD{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ur,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class $n extends Ep{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new UD,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||rd(this),this._firestoreClient.terminate()}}function rr(n){return n._firestoreClient||rd(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function rd(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new wS(n._databaseId,u,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var u,f;n._firestoreClient=new OD(n._authCredentials,n._appCheckCredentials,n._queue,r)}function tb(n,e,t){const r=new Ur;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield bv(n,t),yield $w(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(u=i).name?u.code===de.FAILED_PRECONDITION||u.code===de.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var u})).then(()=>r.promise)}function sb(n){if(n._initialized||n._terminated)throw new xe(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Eu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ta{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ta(hn.fromBase64String(e))}catch(t){throw new xe(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ta(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class id{constructor(e){this._methodName=e}}class Gm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}}const HD=/^__.*__$/;class GD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Oc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kg(e,this.data,t,this.fieldTransforms)}}class Hh{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Oc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xv(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class Cp{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new Cp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return zm(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(xv(this.ec)&&HD.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class ob{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Yc(e)}lc(e,t,r,i=!1){return new Cp({ec:e,methodName:t,hc:r,path:dr.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function _l(n){const e=n._freezeSettings(),t=Yc(n._databaseId);return new ob(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Dp(n,e,t,r,i,u={}){const c=n.lc(u.merge||u.mergeFields?2:0,e,t,i);Ap("Data must be an object, but it was:",c,r);const f=Ao(r,c);let _,b;if(u.merge)_=new Dc(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const S=[];for(const M of u.mergeFields){const F=od(e,M,t);if(!c.contains(F))throw new xe(de.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);Sp(S,F)||S.push(F)}_=new Dc(S),b=c.fieldTransforms.filter(M=>_.covers(M.field))}else _=null,b=c.fieldTransforms;return new GD(new Ri(f),_,b)}class Tp extends id{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tp}}function ab(n,e,t){return new Cp({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class Rv extends id{_toFieldTransform(e){return new qf(e.path,new mh)}isEqual(e){return e instanceof Rv}}class qD extends id{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=ab(this,e,!0),r=this.fc.map(u=>wu(u,t)),i=new Pc(r);return new qf(e.path,i)}isEqual(e){return this===e}}class zD extends id{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=ab(this,e,!0),r=this.fc.map(u=>wu(u,t)),i=new ol(r);return new qf(e.path,i)}isEqual(e){return this===e}}class WD extends id{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new yh(e.M,e_(e.M,this.dc));return new qf(e.path,t)}isEqual(e){return this===e}}function Nv(n,e,t,r){const i=n.lc(1,e,t);Ap("Data must be an object, but it was:",i,r);const u=[],c=Ri.empty();Cc(r,(_,b)=>{const S=qm(e,_,t);b=(0,yt.m9)(b);const M=i.oc(S);if(b instanceof Tp)u.push(S);else{const F=wu(b,M);null!=F&&(u.push(S),c.set(S,F))}});const f=new Dc(u);return new Hh(c,f,i.fieldTransforms)}function sd(n,e,t,r,i,u){const c=n.lc(1,e,t),f=[od(e,r,t)],_=[i];if(u.length%2!=0)throw new xe(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)f.push(od(e,u[F])),_.push(u[F+1]);const b=[],S=Ri.empty();for(let F=f.length-1;F>=0;--F)if(!Sp(b,f[F])){const B=f[F];let z=_[F];z=(0,yt.m9)(z);const ce=c.oc(B);if(z instanceof Tp)b.push(B);else{const Te=wu(z,ce);null!=Te&&(b.push(B),S.set(B,Te))}}const M=new Dc(b);return new Hh(S,M,c.fieldTransforms)}function ub(n,e,t,r=!1){return wu(t,n.lc(r?4:3,e))}function wu(n,e){if(lb(n=(0,yt.m9)(n)))return Ap("Unsupported field value:",e,n),Ao(n,e);if(n instanceof id)return function(t,r){if(!xv(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let f=wu(c,r.uc(u));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,yt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return e_(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=nr.fromDate(t);return{timestampValue:Ni(r.M,i)}}if(t instanceof nr){const i=new nr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ni(r.M,i)}}if(t instanceof Gm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ta)return{bytesValue:Yg(r.M,t._byteString)};if(t instanceof Sn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Qg(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${vp(t)}`)}(n,e)}function Ao(n,e){const t={};return tE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cc(n,(r,i)=>{const u=wu(i,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function lb(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof nr||n instanceof Gm||n instanceof Ta||n instanceof Sn||n instanceof id)}function Ap(n,e,t){if(!lb(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=vp(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function od(n,e,t){if((e=(0,yt.m9)(e))instanceof Eu)return e._internalPath;if("string"==typeof e)return qm(n,e);throw zm("Field path arguments must be of type string or ",n,!1,void 0,t)}const KD=new RegExp("[~\\*/\\[\\]]");function qm(n,e,t){if(e.search(KD)>=0)throw zm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Eu(...e.split("."))._internalPath}catch(r){throw zm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zm(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let _="";return(u||c)&&(_+=" (found",u&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new xe(de.INVALID_ARGUMENT,f+n+_)}function Sp(n,e){return n.some(t=>t.isEqual(e))}class vl{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ZD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ZD extends vl{data(){return super.data()}}function Wm(n,e){return"string"==typeof e?qm(n,e):e instanceof Eu?e._internalPath:e._delegate._internalPath}class El{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Aa extends vl{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ad(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Wm("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ad extends Aa{data(e={}){return super.data(e)}}class bu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new El(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ad(this._firestore,this._userDataWriter,r.key,r,new El(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new ad(r._firestore,r._userDataWriter,c.doc.key,c.doc,new El(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new ad(r._firestore,r._userDataWriter,c.doc.key,c.doc,new El(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,b=-1;return 0!==c.type&&(_=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:YD(c.type),doc:f,oldIndex:_,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function YD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function cb(n,e){return n instanceof Aa&&e instanceof Aa?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof bu&&e instanceof bu&&n._firestore===e._firestore&&Xw(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function QD(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ud{}function Sa(n,...e){for(const t of e)n=t._apply(n);return n}class db extends ud{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=_l(e.firestore),r=function(i,u,c,f,_,b,S){let M;if(_.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new xe(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){Vv(S,b);const B=[];for(const z of S)B.push(Lv(f,i,z));M={arrayValue:{values:B}}}else M=Lv(f,i,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||Vv(S,b),M=ub(c,"where",S,"in"===b||"not-in"===b);const F=Br.create(_,b,M);return function(B,z){if(z.S()){const Te=yE(B);if(null!==Te&&!Te.isEqual(z.field))throw new xe(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Te.toString()}' and '${z.field.toString()}'`);const it=mE(B);null!==it&&_b(0,z.field,it)}const ce=function(Te,it){for(const ot of Te.filters)if(it.indexOf(ot.op)>=0)return ot.op;return null}(B,function(Te){switch(Te){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(z.op));if(null!==ce)throw new xe(de.INVALID_ARGUMENT,ce===z.op?`Invalid query. You cannot use more than one '${z.op.toString()}' filter.`:`Invalid query. You cannot use '${z.op.toString()}' filters with '${ce.toString()}' filters.`)}(i,F),F}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new jr(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new hu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class Ov extends ud{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new xe(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Nc(i,u);return function(f,_){if(null===mE(f)){const b=yE(f);null!==b&&_b(0,b,_.field)}}(r,c),c}(e._query,this._c,this.gc);return new jr(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new hu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class hb extends ud{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new jr(e.firestore,e.converter,jg(e._query,this.yc,this.Ic))}}class kv extends ud{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=yb(e,this.type,this.Tc,this.Ec);return new jr(e.firestore,e.converter,(i=t,new hu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class pb extends ud{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=yb(e,this.type,this.Tc,this.Ec);return new jr(e.firestore,e.converter,(i=t,new hu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function yb(n,e,t,r){if(t[0]=(0,yt.m9)(t[0]),t[0]instanceof vl)return function(i,u,c,f,_){if(!f)throw new xe(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const S of Hf(i))if(S.field.isKeyField())b.push(Sc(u,f.key));else{const M=f.data.field(S.field);if(Uf(M))throw new xe(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const F=S.field.canonicalString();throw new xe(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}b.push(M)}return new du(b,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=_l(n.firestore);return function(u,c,f,_,b,S){const M=u.explicitOrderBy;if(b.length>M.length)throw new xe(de.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let B=0;B<b.length;B++){const z=b[B];if(M[B].field.isKeyField()){if("string"!=typeof z)throw new xe(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof z}`);if(!Bg(u)&&-1!==z.indexOf("/"))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${z}' contains a slash.`);const ce=u.path.child(Ke.fromString(z));if(!He.isDocumentKey(ce))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ce}' is not because it contains an odd number of segments.`);const Te=new He(ce);F.push(Sc(c,Te))}else{const ce=ub(f,_,z);F.push(ce)}}return new du(F,S)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Lv(n,e,t){if("string"==typeof(t=(0,yt.m9)(t))){if(""===t)throw new xe(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bg(e)&&-1!==t.indexOf("/"))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ke.fromString(t));if(!He.isDocumentKey(r))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sc(n,new He(r))}if(t instanceof Sn)return Sc(n,t._key);throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vp(t)}.`)}function Vv(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function _b(n,e,t){if(!t.isEqual(e))throw new xe(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const vb={maxAttempts:5};class Uv{convertValue(e,t="none"){switch(lh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Un(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rt()}}convertObject(e,t){const r={};return Cc(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Gm(Un(e.latitude),Un(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Gy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Tc(e));default:return null}}convertTimestamp(e){const t=nl(e);return new nr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ke.fromString(e);xt(Xg(r));const i=new fa(r.get(1),r.get(3)),u=new He(r.popFirst(5));return i.isEqual(t)||zn(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function $r(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Gh extends Uv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ta(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,t)}}class Eb{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=_l(e)}set(e,t,r){this._verifyNotCommitted();const i=wl(e,this._firestore),u=$r(i.converter,t,r),c=Dp(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Qn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=wl(e,this._firestore);let c;return c="string"==typeof(t=(0,yt.m9)(t))||t instanceof Eu?sd(this._dataReader,"WriteBatch.update",u._key,t,r,i):Nv(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=wl(e,this._firestore);return this._mutations=this._mutations.concat(new vh(t._key,Qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wl(n,e){if((n=(0,yt.m9)(n)).firestore!==e)throw new xe(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class So extends Uv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ta(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,t)}}function bb(n,e,t){n=Wt(n,Sn);const r=Wt(n.firestore,$n),i=$r(n.converter,e,t);return xp(r,[Dp(_l(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Qn.none())])}function Km(n,e,t,...r){n=Wt(n,Sn);const i=Wt(n.firestore,$n),u=_l(i);let c;return c="string"==typeof(e=(0,yt.m9)(e))||e instanceof Eu?sd(u,"updateDoc",n._key,e,t,r):Nv(u,"updateDoc",n._key,e),xp(i,[c.toMutation(n._key,Qn.exists(!0))])}function Mp(n,...e){var t,r,i;n=(0,yt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||bp(e[c])||(u=e[c],c++);const f={includeMetadataChanges:u.includeMetadataChanges};if(bp(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let _,b,S;if(n instanceof Sn)b=Wt(n.firestore,$n),S=ph(n._key.path),_={next:M=>{e[c]&&e[c](Zm(b,n,M))},error:e[c+1],complete:e[c+2]};else{const M=Wt(n,jr);b=Wt(M.firestore,$n),S=M._query;const F=new So(b);_={next:B=>{e[c]&&e[c](new bu(b,F,M,B))},error:e[c+1],complete:e[c+2]},QD(n._query)}return function(M,F,B,z){const ce=new Vm(z),Te=new Sm(F,ce,B);return M.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return Vh(yield Bh(M),Te)})),()=>{ce.Aa(),M.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return bw(yield Bh(M),Te)}))}}(rr(b),S,f,_)}function xp(n,e){return function(t,r){const i=new Ur;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function bD(n,e,t){return av.apply(this,arguments)}(yield _p(t),r,i)})),i.promise}(rr(n),e)}function Zm(n,e,t){const r=t.docs.get(e._key),i=new So(n);return new Aa(n,i,e._key,r,new El(t.hasPendingWrites,t.fromCache),e.converter)}class iT extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=_l(e)}get(e){const t=wl(e,this._firestore),r=new Gh(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return rt();const u=i[0];if(u.isFoundDocument())return new vl(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new vl(this._firestore,r,t._key,null,t.converter);throw rt()})}set(e,t,r){const i=wl(e,this._firestore),u=$r(i.converter,t,r),c=Dp(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=wl(e,this._firestore);let c;return c="string"==typeof(t=(0,yt.m9)(t))||t instanceof Eu?sd(this._dataReader,"Transaction.update",u._key,t,r,i):Nv(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=wl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=wl(e,this._firestore),r=new So(this._firestore);return super.get(e).then(i=>new Aa(this._firestore,r,t._key,i._document,new El(!1,!1),t.converter))}}function Gv(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function qv(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function zv(){if(!function Og(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ic=vr.SDK_VERSION,(0,vr._registerComponent)(new Ai.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),u=new $n(i,new Z0(t.getProvider("auth-internal")),new J0(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,vr.registerVersion)(Lf,"3.4.9",n),(0,vr.registerVersion)(Lf,"3.4.9","esm2017")}();class Rp{constructor(e){this._delegate=e}static fromBase64String(e){return zv(),new Rp(Ta.fromBase64String(e))}static fromUint8Array(e){return qv(),new Rp(Ta.fromUint8Array(e))}toBase64(){return zv(),this._delegate.toBase64()}toUint8Array(){return qv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Wv(n){return function xb(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class oT{enableIndexedDbPersistence(e,t){return function PS(n,e){sb(n=Wt(n,$n));const t=rr(n),r=n._freezeSettings(),i=new wv;return tb(t,i,new Ev(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function eb(n){sb(n=Wt(n,$n));const e=rr(n),t=n._freezeSettings(),r=new wv;return tb(e,r,new xD(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function OS(n){if(n._initialized&&!n._terminated)throw new xe(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ur;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!_i.vt())return Promise.resolve();const i=r+"main";yield _i.delete(i)}),function(r){return t.apply(this,arguments)})(hm(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Kv{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof fa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&tl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Jw(n,e,t,r={}){var i;const u=(n=Wt(n,Ep))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&tl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,f;if("string"==typeof r.mockUserToken)c=r.mockUserToken,f=Xr.MOCK_USER;else{c=(0,yt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new xe(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Xr(_)}n._authCredentials=new $y(new W0(c,f))}}(this._delegate,e,t,r)}enableNetwork(){return function kS(n){return function Sv(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield $m(n),t=yield Tv(n);return e.setNetworkEnabled(!0),function(r){const i=Ge(r);return i.wu.delete(0),Oh(i)}(t)}))}(rr(n=Wt(n,$n)))}(this._delegate)}disableNetwork(){return function rb(n){return function kD(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield $m(n),t=yield Tv(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(i){const u=Ge(i);u.wu.add(0),yield kh(u),u.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(rr(n=Wt(n,$n)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,jh("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function nb(n){return function(e){const t=new Ur;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function MS(n,e){return Nw.apply(this,arguments)}(yield _p(e),t)})),t.promise}(rr(n=Wt(n,$n)))}(this._delegate)}onSnapshotsInSync(e){return function jv(n,e){return function Ww(n,e){const t=new Vm(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Bh(n),i=t,Ge(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Bh(n),i=t,void Ge(r).bu.delete(i);var r,i}))}}(rr(n=Wt(n,$n)),bp(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Pp(this,$h(this._delegate,e))}catch(t){throw Ei(t,"collection()","Firestore.collection()")}}doc(e){try{return new Mo(this,wp(this._delegate,e))}catch(t){throw Ei(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new is(this,function VD(n,e){if(n=Wt(n,Ep),yl("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new jr(n,null,(t=e,new hu(Ke.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ei(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Db(n,e,t){n=Wt(n,$n);const r=Object.assign(Object.assign({},vb),t);return function(i){if(i.maxAttempts<1)throw new xe(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function xS(n,e,t){const r=new Ur;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const i=yield(u=n,jm(u).then(c=>c.datastore));var u;new PD(n.asyncQueue,i,t,e,r).run()})),r.promise}(rr(n),i=>e(new iT(n,i)),r)}(this._delegate,t=>e(new Zv(this,t)))}batch(){return rr(this._delegate),new Nb(new Eb(this._delegate,e=>xp(this._delegate,e)))}loadBundle(e){return function jD(n,e){const t=rr(n=Wt(n,$n)),r=new BD;return function FD(n,e,t,r){const i=function(u,c){let f;return f="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,b){if(_ instanceof Uint8Array)return jw(_,b);if(_ instanceof ArrayBuffer)return jw(new Uint8Array(_),b);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new RD(_,c);var _}(t,Yc(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function vv(n,e,t){const r=Ge(n);var i;(i=(0,ye.Z)(function*(u,c,f){try{const _=yield c.getMetadata();if(yield function(F,B){const z=Ge(F),ce=wr(B.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",Te=>z._s.getBundleMetadata(Te,B.id)).then(Te=>!!Te&&Te.createTime.compareTo(ce)>=0)}(u.localStore,_))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(F=_).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);f._updateProgress(Cw(_));const b=new vD(_,u.localStore,c.M);let S=yield c.ma();for(;S;){const F=yield b.Fu(S);F&&f._updateProgress(F),S=yield c.ma()}const M=yield b.complete();return yield vu(u,M.Lu,void 0),yield function(F,B){const z=Ge(F);return z.persistence.runTransaction("Save bundle","readwrite",ce=>z._s.saveBundleMetadata(ce,B))}(u.localStore,_),f._completeWith(M.progress),Promise.resolve(M.Bu)}catch(_){return tl("SyncEngine",`Loading bundle failed with ${_}`),f._failWith(_),Promise.resolve(new Set)}var F}),function(u,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield _p(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function $D(n,e){return function Hm(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const i=Ge(t);return i.persistence.runTransaction("Get named query","readonly",u=>i._s.getNamedQuery(u,r))}(yield yp(n),e)}))}(rr(n=Wt(n,$n)),e).then(t=>t?new jr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new is(this,t):null)}}class Np extends Uv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rp(new Ta(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Mo.forKey(t,this.firestore,null)}}class Zv{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Np(e)}get(e){const t=Ma(e);return this._delegate.get(t).then(r=>new Qm(this._firestore,new Aa(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Ma(e);return r?(Gv("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Ma(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Ma(e);return this._delegate.delete(t),this}}class Nb{constructor(e){this._delegate=e}set(e,t,r){const i=Ma(e);return r?(Gv("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Ma(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Ma(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ld{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new ad(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Jm(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ld.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new ld(e,new Np(e),t),i.set(t,u)),u}}ld.INSTANCES=new WeakMap;class Mo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Np(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Mo(t,new Sn(t._delegate,r,new He(e)))}static forKey(e,t,r){return new Mo(t,new Sn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Pp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Pp(this.firestore,$h(this._delegate,e))}catch(t){throw Ei(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,yt.m9)(e))instanceof Sn&&Mv(this._delegate,e)}set(e,t){t=Gv("DocumentReference.set",t);try{return t?bb(this._delegate,e,t):bb(this._delegate,e)}catch(r){throw Ei(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Km(this._delegate,e):Km(this._delegate,e,t,...r)}catch(i){throw Ei(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Ib(n){return xp(Wt(n.firestore,$n),[new vh(n._key,Qn.none())])}(this._delegate)}onSnapshot(...e){const t=aT(e),r=uT(e,i=>new Qm(this.firestore,new Aa(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Mp(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function tT(n){n=Wt(n,Sn);const e=Wt(n.firestore,$n),t=rr(e),r=new So(e);return function Hw(n,e){const t=new Ur;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,u,c){try{const f=yield function(_,b){const S=Ge(_);return S.persistence.runTransaction("read document","readonly",M=>S.fi.Ls(M,b))}(i,u);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new xe(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const _=Fh(f,`Failed to get document '${u} from cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield yp(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Aa(e,r,n._key,i,new El(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Bv(n){n=Wt(n,Sn);const e=Wt(n.firestore,$n);return Gw(rr(e),n._key,{source:"server"}).then(t=>Zm(e,n,t))}(this._delegate):function LS(n){n=Wt(n,Sn);const e=Wt(n.firestore,$n);return Gw(rr(e),n._key).then(t=>Zm(e,n,t))}(this._delegate),t.then(r=>new Qm(this.firestore,new Aa(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Mo(this.firestore,this._delegate.withConverter(e?ld.getInstance(this.firestore,e):null))}}function Ei(n,e,t){return n.message=n.message.replace(e,t),n}function aT(n){for(const e of n)if("object"==typeof e&&!Wv(e))return e;return{}}function uT(n,e){var t,r;let i;return i=Wv(n[0])?n[0]:Wv(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Qm{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Mo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return cb(this._delegate,e._delegate)}}class Jm extends Qm{data(e){const t=this._delegate.data(e);return function jy(n,e){n||rt()}(void 0!==t),t}}class is{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Np(e)}where(e,t,r){try{return new is(this.firestore,Sa(this._delegate,function Pv(n,e,t){const r=e,i=Wm("where",n);return new db(i,r,t)}(e,t,r)))}catch(i){throw Ei(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new is(this.firestore,Sa(this._delegate,function JD(n,e="asc"){const t=e,r=Wm("orderBy",n);return new Ov(r,t)}(e,t)))}catch(r){throw Ei(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new is(this.firestore,Sa(this._delegate,function XD(n){return Yw("limit",n),new hb("limit",n,"F")}(e)))}catch(t){throw Ei(t,"limit()","Query.limit()")}}limitToLast(e){try{return new is(this.firestore,Sa(this._delegate,function eT(n){return Yw("limitToLast",n),new hb("limitToLast",n,"L")}(e)))}catch(t){throw Ei(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new is(this.firestore,Sa(this._delegate,function Fv(...n){return new kv("startAt",n,!0)}(...e)))}catch(t){throw Ei(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new is(this.firestore,Sa(this._delegate,function fb(...n){return new kv("startAfter",n,!1)}(...e)))}catch(t){throw Ei(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new is(this.firestore,Sa(this._delegate,function gb(...n){return new pb("endBefore",n,!1)}(...e)))}catch(t){throw Ei(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new is(this.firestore,Sa(this._delegate,function mb(...n){return new pb("endAt",n,!0)}(...e)))}catch(t){throw Ei(t,"endAt()","Query.endAt()")}}isEqual(e){return Xw(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function wb(n){n=Wt(n,jr);const e=Wt(n.firestore,$n),t=rr(e),r=new So(e);return function qw(n,e){const t=new Ur;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,u,c){try{const f=yield lp(i,u,!0),_=new Tw(u,f._i),b=_.Wu(f.documents),S=_.applyChanges(b,!1);c.resolve(S.snapshot)}catch(f){const _=Fh(f,`Failed to execute query '${u} against cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield yp(n),e,t);var r})),t.promise}(t,n._query).then(i=>new bu(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function rT(n){n=Wt(n,jr);const e=Wt(n.firestore,$n),t=rr(e),r=new So(e);return zw(t,n._query,{source:"server"}).then(i=>new bu(e,r,n,i))}(this._delegate):function nT(n){n=Wt(n,jr);const e=Wt(n.firestore,$n),t=rr(e),r=new So(e);return QD(n._query),zw(t,n._query).then(i=>new bu(e,r,n,i))}(this._delegate),t.then(r=>new Pb(this.firestore,new bu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=aT(e),r=uT(e,i=>new Pb(this.firestore,new bu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Mp(this._delegate,t,r)}withConverter(e){return new is(this.firestore,this._delegate.withConverter(e?ld.getInstance(this.firestore,e):null))}}class US{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Jm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Pb{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new is(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Jm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new US(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Jm(this._firestore,r))})}isEqual(e){return cb(this._delegate,e._delegate)}}class Pp extends is{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Mo(this.firestore,e):null}doc(e){try{return new Mo(this.firestore,void 0===e?wp(this._delegate):wp(this._delegate,e))}catch(t){throw Ei(t,"doc()","CollectionReference.doc()")}}add(e){return function Cb(n,e){const t=Wt(n.firestore,$n),r=wp(n),i=$r(n.converter,e);return xp(t,[Dp(_l(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Qn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Mo(this.firestore,t))}isEqual(e){return Mv(this._delegate,e._delegate)}withConverter(e){return new Pp(this.firestore,this._delegate.withConverter(e?ld.getInstance(this.firestore,e):null))}}function Ma(n){return Wt(n,Sn)}class Ob{constructor(...e){this._delegate=new Eu(...e)}static documentId(){return new Ob(dr.keyField().canonicalString())}isEqual(e){return(e=(0,yt.m9)(e))instanceof Eu&&this._delegate._internalPath.isEqual(e._internalPath)}}class bl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Tb(){return new Rv("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new bl(e)}static delete(){const e=function Ym(){return new Tp("deleteField")}();return e._methodName="FieldValue.delete",new bl(e)}static arrayUnion(...e){const t=function sT(...n){return new qD("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new bl(t)}static arrayRemove(...e){const t=function $v(...n){return new zD("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new bl(t)}static increment(e){const t=function Hv(n){return new WD("increment",n)}(e);return t._methodName="FieldValue.increment",new bl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Yv={Firestore:Kv,GeoPoint:Gm,Timestamp:nr,Blob:Rp,Transaction:Zv,WriteBatch:Nb,DocumentReference:Mo,DocumentSnapshot:Qm,Query:is,QueryDocumentSnapshot:Jm,QuerySnapshot:Pb,CollectionReference:Pp,FieldPath:Ob,FieldValue:bl,setLogLevel:function Rb(n){!function By(n){uu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function Fb(n){(function kb(n,e){n.INTERNAL.registerComponent(new Ai.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Yv)))})(n,(e,t)=>new Kv(e,t,new oT)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(Wl.Z);var cd=P(7579),Qv=P(6451),Op=P(5363),kp=P(8421);function Hr(n,e){return(0,Lt.e)((t,r)=>{let i=null,u=0,c=!1;const f=()=>c&&!i&&r.complete();t.subscribe((0,Rn.x)(r,_=>{null==i||i.unsubscribe();let b=0;const S=u++;(0,kp.Xf)(n(_,S)).subscribe(i=(0,Rn.x)(r,M=>r.next(e?e(_,M,S,b++):M),()=>{i=null,f()}))},()=>{c=!0,f()}))})}var BS=P(6063);class Lb extends cd.x{constructor(e=1/0,t=1/0,r=BS.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let f=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)f=_;f&&r.splice(0,f+1)}}}var lT=P(3099);function Xm(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,lT.B)({connector:()=>new Lb(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const Jv=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Vb=P(5698);function dT(n){return(0,Lt.e)((e,t)=>{let r=!1;e.subscribe((0,Rn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ub(n=hT){return(0,Lt.e)((e,t)=>{let r=!1;e.subscribe((0,Rn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function hT(){return new Jv}function dd(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Nr((i,u)=>n(i,u,r)):Jo.y,(0,Vb.q)(1),t?dT(e):Ub(()=>new Jv))}var Bb=P(576);function jb(n,e){return(0,Bb.m)(e)?Hr(()=>n,e):Hr(()=>n)}var Fp=P(9468);P(5867);const Wb=new Map,Kb={activated:!1,tokenObservers:[]},vT={initialized:!1,enabled:!1};function Gr(n){return Wb.get(n)||Kb}function Ws(n,e){Wb.set(n,e)}function ey(){return vT}class e0{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new yt.BH,yield function t0(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new yt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Oi=new yt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function n0(n){if(!Gr(n).activated)throw Oi.create("use-before-activation",{appName:n.name})}function tI(n,e){return ty.apply(this,arguments)}function ty(){return ty=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const M=yield i.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,f;try{c=yield fetch(n,u)}catch(M){throw Oi.create("fetch-network-error",{originalErrorMessage:M.message})}if(200!==c.status)throw Oi.create("fetch-status-error",{httpStatus:c.status});try{f=yield c.json()}catch(M){throw Oi.create("fetch-parse-error",{originalErrorMessage:M.message})}const _=f.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Oi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const b=1e3*Number(_[1]),S=Date.now();return{token:f.token,expireTimeMillis:S+b,issuedAtTimeMillis:S}}),ty.apply(this,arguments)}function CT(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const ny="firebase-app-check-store";let o0=null;function nI(){return o0||(o0=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Oi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ny,{keyPath:"compositeKey"})}}catch(t){e(Oi.create("storage-open",{originalErrorMessage:t.message}))}}),o0)}function iy(){return iy=(0,ye.Z)(function*(n,e){const r=(yield nI()).transaction(ny,"readwrite"),u=r.objectStore(ny).put({compositeKey:n,value:e});return new Promise((c,f)=>{u.onsuccess=_=>{c()},r.onerror=_=>{var b;f(Oi.create("storage-set",{originalErrorMessage:null===(b=_.target.error)||void 0===b?void 0:b.message}))}})}),iy.apply(this,arguments)}const hd=new ui.Yd("@firebase/app-check");function ST(n,e){return(0,yt.hl)()?function TT(n,e){return function Il(n,e){return iy.apply(this,arguments)}(function iI(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{hd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function MT(){return ey().enabled}function u0(){return l0.apply(this,arguments)}function l0(){return l0=(0,ye.Z)(function*(){const n=ey();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),l0.apply(this,arguments)}const RT={error:"UNKNOWN_ERROR"};function NT(n){return yt.US.encodeString(JSON.stringify(n),!1)}function Up(n){return oy.apply(this,arguments)}function oy(){return oy=(0,ye.Z)(function*(n,e=!1){const t=n.app;n0(t);const r=Gr(t);let u,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&d0(_)&&(i=_)}if(!e&&i&&d0(i))return{token:i.token};let f,c=!1;if(MT()){r.exchangeTokenPromise||(r.exchangeTokenPromise=tI(CT(t,yield u0()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const _=yield r.exchangeTokenPromise;return yield ST(t,_),Ws(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),c=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?hd.warn(_.message):hd.error(_),u=_}return i?(f={token:i.token},Ws(t,Object.assign(Object.assign({},r),{token:i})),yield ST(t,i)):f=uI(u),c&&uy(t,f),f}),oy.apply(this,arguments)}function c0(n,e){const t=Gr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ws(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function oI(n){const{app:e}=n,t=Gr(e);let r=t.tokenRefresher;r||(r=function aI(n){const{app:e}=n;return new e0((0,ye.Z)(function*(){let r;if(r=Gr(e).token?yield Up(n,!0):yield Up(n),r.error)throw r.error}),()=>!0,()=>{const t=Gr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ws(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function uy(n,e){const t=Gr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function d0(n){return n.expireTimeMillis-Date.now()>0}function uI(n){return{token:NT(RT),error:n}}class h0{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Gr(this.app);for(const t of e)c0(this.app,t.next);return Promise.resolve()}}const x="app-check-internal";!function k(){(0,vr._registerComponent)(new Ai.wA("app-check",n=>function PT(n,e){return new h0(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(x).initialize()})),(0,vr._registerComponent)(new Ai.wA(x,n=>function OT(n){return{getToken:e=>Up(n,e),addTokenListener:e=>function ay(n,e,t,r){const{app:i}=n,u=Gr(i),c={next:t,error:r,type:e};if(Ws(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&d0(u.token)){const f=u.token;Promise.resolve().then(()=>{t({token:f.token}),oI(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>oI(n))}(n,"INTERNAL",e),removeTokenListener:e=>c0(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,vr.registerVersion)("@firebase/app-check","0.5.8")}();class _e{constructor(){return(0,cn.vb)("app-check")}}"undefined"!=typeof window&&window;var ly=P(127);const cy=new g.OlP("angularfire2.auth.use-emulator"),XS=new g.OlP("angularfire2.auth.settings"),eM=new g.OlP("angularfire2.auth.tenant-id"),tM=new g.OlP("angularfire2.auth.langugage-code"),nM=new g.OlP("angularfire2.auth.use-device-language"),rM=new g.OlP("angularfire.auth.persistence"),iM=(n,e,t,r,i,u,c,f)=>(0,Cn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,u&&_.useDeviceLanguage(),c)for(const[b,S]of Object.entries(c))_.settings[b]=S;return f&&_.setPersistence(f),_},[t,r,i,u,c,f]);let sM=(()=>{class n{constructor(t,r,i,u,c,f,_,b,S,M,F,B){const z=new cd.x,ce=at(void 0).pipe((0,Op.Q)(c.outsideAngular),Hr(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,8775)))),(0,Pt.U)(()=>(0,Cn.on)(t,u,r)),(0,Pt.U)(Te=>iM(Te,u,f,b,S,M,_,F)),Xm({bufferSize:1,refCount:!1}));if($o(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=at(null);else{ce.pipe(dd()).subscribe();const it=ce.pipe(Hr(Ze=>Ze.getRedirectResult().then(St=>St,()=>null)),cn.iC,Xm({bufferSize:1,refCount:!1})),ot=ce.pipe(Hr(Ze=>new mn.y(St=>({unsubscribe:u.runOutsideAngular(()=>Ze.onAuthStateChanged(Rt=>St.next(Rt),Rt=>St.error(Rt),()=>St.complete()))})))),nt=ce.pipe(Hr(Ze=>new mn.y(St=>({unsubscribe:u.runOutsideAngular(()=>Ze.onIdTokenChanged(Rt=>St.next(Rt),Rt=>St.error(Rt),()=>St.complete()))}))));this.authState=it.pipe(jb(ot),(0,Fp.R)(c.outsideAngular),(0,Op.Q)(c.insideAngular)),this.user=it.pipe(jb(nt),(0,Fp.R)(c.outsideAngular),(0,Op.Q)(c.insideAngular)),this.idToken=this.user.pipe(Hr(Ze=>Ze?(0,Kt.D)(Ze.getIdToken()):at(null))),this.idTokenResult=this.user.pipe(Hr(Ze=>Ze?(0,Kt.D)(Ze.getIdTokenResult()):at(null))),this.credential=(0,Qv.T)(it,z,this.authState.pipe(Nr(Ze=>!Ze))).pipe((0,Pt.U)(Ze=>(null==Ze?void 0:Ze.user)?Ze:null),(0,Fp.R)(c.outsideAngular),(0,Op.Q)(c.insideAngular))}return(0,Cn.pX)(this,ce,u,{spy:{apply:(Te,it,ot)=>{(Te.startsWith("signIn")||Te.startsWith("createUser"))&&ot.then(nt=>z.next(nt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Cn.Dh),g.LFG(Cn.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(cn.HU),g.LFG(cy,8),g.LFG(XS,8),g.LFG(eM,8),g.LFG(tM,8),g.LFG(nM,8),g.LFG(rM,8),g.LFG(_e,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function oM(n,e){return function gP(n,e=df.z){return new mn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function $T(n,e){return oM(n,e).pipe((0,Pt.U)(t=>({payload:t,type:"query"})))}function gI(n,e){return $T(n,e).pipe(Us(void 0),Bu(),(0,Pt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const _=i.find(S=>S.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),u}))}function aM(n,e,t){return gI(n,t).pipe(eu((r,i)=>function yP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function _P(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return HT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return HT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return HT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function ao(n,e=Jo.y){return n=null!=n?n:Xo,(0,Lt.e)((t,r)=>{let i,u=!0;t.subscribe((0,Rn.x)(r,c=>{const f=e(c);(u||!n(i,f))&&(u=!1,i=f,r.next(c))}))})}(),(0,Pt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function HT(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function uM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class lM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=gI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Pt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Us(void 0),Bu(),Nr(([r,i])=>i.length>0||!r),(0,Pt.U)(([r,i])=>i),cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(eu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uM(e);return aM(this.query,t,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return $T(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),cn.iC)}get(e){return(0,Kt.D)(this.query.get(e)).pipe(cn.iC)}add(e){return this.ref.add(e)}doc(e){return new cM(this.ref.doc(e),this.afs)}}class cM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=fM(r,t);return new lM(i,u,this.afs)}snapshotChanges(){return function mP(n,e){return oM(n,e).pipe(Us(void 0),Bu(),(0,Pt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Pt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Kt.D)(this.ref.get(e)).pipe(cn.iC)}}class vP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?gI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Nr(t=>t.length>0),cn.iC):gI(this.query,this.afs.schedulers.outsideAngular).pipe(cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(eu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uM(e);return aM(this.query,t,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return $T(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),cn.iC)}get(e){return(0,Kt.D)(this.query.get(e)).pipe(cn.iC)}}const dM=new g.OlP("angularfire2.enableFirestorePersistence"),hM=new g.OlP("angularfire2.firestore.persistenceSettings"),EP=new g.OlP("angularfire2.firestore.settings"),wP=new g.OlP("angularfire2.firestore.use-emulator");function fM(n,e=(t=>t)){return{query:e(n),ref:n}}let GT=(()=>{class n{constructor(t,r,i,u,c,f,_,b,S,M,F,B,z,ce,Te,it,ot){this.schedulers=_;const nt=(0,Cn.on)(t,f,r),Ze=S;M&&iM(nt,f,F,z,ce,Te,B,it),[this.firestore,this.persistenceEnabled$]=(0,Cn.cc)(`${nt.name}.firestore`,"AngularFirestore",nt.name,()=>{const St=f.runOutsideAngular(()=>nt.firestore());if(u&&St.settings(u),Ze&&St.useEmulator(...Ze),i&&!$o(c)){const Rt=()=>{try{return(0,Kt.D)(St.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Jt){return"undefined"!=typeof console&&console.warn(Jt),at(!1)}};return[St,f.runOutsideAngular(Rt)]}return[St,at(!1)]},[u,Ze,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=fM(i,r),f=this.schedulers.ngZone.run(()=>u);return new lM(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new vP(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new cM(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Cn.Dh),g.LFG(Cn.xv,8),g.LFG(dM,8),g.LFG(EP,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(cn.HU),g.LFG(hM,8),g.LFG(wP,8),g.LFG(sM,8),g.LFG(cy,8),g.LFG(XS,8),g.LFG(eM,8),g.LFG(tM,8),g.LFG(nM,8),g.LFG(rM,8),g.LFG(_e,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),bP=(()=>{class n{constructor(){ly.Z.registerVersion("angularfire",cn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:dM,useValue:!0},{provide:hM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[GT]}),n})();const pM="firebasestorage.googleapis.com",gM="storageBucket";class hr extends yt.ZR{constructor(e,t){super(qT(e),`Firebase Storage: ${t} (${qT(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hr.prototype)}_codeEquals(e){return qT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function qT(n){return"storage/"+n}function zT(){return new hr("unknown","An unknown error occurred, please check the error payload for server response.")}function mM(){return new hr("canceled","User canceled the upload/download.")}function yM(){return new hr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function dy(n){return new hr("invalid-argument",n)}function _M(){return new hr("app-deleted","The Firebase app was deleted.")}function vM(n){return new hr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function m0(n,e){return new hr("invalid-format","String does not match format '"+n+"': "+e)}function y0(n){throw new hr("internal-error","Internal error: "+n)}class os{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=os.makeFromUrl(e,t)}catch(i){return new os(e,"")}if(""===r.path)return r;throw function PP(n){return new hr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function b(Ze){Ze.path_=decodeURIComponent(Ze.path)}const M=t.replace(/[.]/g,"\\."),nt=[{regex:f,indices:{bucket:1,path:3},postModify:function u(Ze){"/"===Ze.path.charAt(Ze.path.length-1)&&(Ze.path_=Ze.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${M}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===pM?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let Ze=0;Ze<nt.length;Ze++){const St=nt[Ze],Rt=St.regex.exec(e);if(Rt){let Dr=Rt[St.indices.path];Dr||(Dr=""),r=new os(Rt[St.indices.bucket],Dr),St.postModify(r);break}}if(null==r)throw function NP(n){return new hr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class LP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function mI(n){return"string"==typeof n||n instanceof String}function EM(n){return WT()&&n instanceof Blob}function WT(){return"undefined"!=typeof Blob}function KT(n,e,t,r){if(r<e)throw dy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw dy(`Invalid value for '${n}'. Expected ${t} or less.`)}function fd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function wM(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Wh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Wh||(Wh={})),Wh))();class HP{constructor(e,t,r,i,u,c,f,_,b,S,M){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=_,this.timeout_=b,this.progressCallback_=S,this.connectionFactory_=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,B)=>{this.resolve_=F,this.reject_=B,this.start_()})}start_(){const t=(r,i)=>{const u=this.resolve_,c=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(f,f.getResponse());!function BP(n){return void 0!==n}(_)?u():u(_)}catch(_){c(_)}else if(null!==f){const _=zT();_.serverResponse=f.getErrorText(),c(this.errorCallback_?this.errorCallback_(f,_):_)}else c(i.canceled?this.appDelete_?_M():mM():function RP(){return new hr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new yI(!1,null,!0)):this.backoffId_=function VP(n,e,t){let r=1,i=null,u=null,c=!1,f=0;function _(){return 2===f}let b=!1;function S(...Te){b||(b=!0,e.apply(null,Te))}function M(Te){i=setTimeout(()=>{i=null,n(B,_())},Te)}function F(){u&&clearTimeout(u)}function B(Te,...it){if(b)return void F();if(Te)return F(),void S.call(null,Te,...it);if(_()||c)return F(),void S.call(null,Te,...it);let nt;r<64&&(r*=2),1===f?(f=2,nt=0):nt=1e3*(r+Math.random()),M(nt)}let z=!1;function ce(Te){z||(z=!0,F(),!b&&(null!==i?(Te||(f=2),clearTimeout(i),M(0)):Te||(f=1)))}return M(0),u=setTimeout(()=>{c=!0,ce(!0)},t),ce}((r,i)=>{if(i)return void r(!1,new yI(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const f=u.getErrorCode()===Wh.NO_ERROR,_=u.getStatus();if(!f||this.isRetryStatusCode_(_)){const S=u.getErrorCode()===Wh.ABORT;return void r(!1,new yI(!1,null,S))}const b=-1!==this.successCodes_.indexOf(_);r(!0,new yI(b,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function UP(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||u}}class yI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function YP(...n){const e=function ZP(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(WT())return new Blob(n);throw new hr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const xo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ZT{constructor(e,t){this.data=e,this.contentType=t||null}}function YT(n,e){switch(n){case xo.RAW:return new ZT(bM(e));case xo.BASE64:case xo.BASE64URL:return new ZT(IM(n,e));case xo.DATA_URL:return new ZT(function eO(n){const e=new CM(n);return e.base64?IM(xo.BASE64,e.rest):function XP(n){let e;try{e=decodeURIComponent(n)}catch(t){throw m0(xo.DATA_URL,"Malformed data URL.")}return bM(e)}(e.rest)}(e),function tO(n){return new CM(n).contentType}(e))}throw zT()}function bM(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function IM(n,e){switch(n){case xo.BASE64:{const i=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(i||u)throw m0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case xo.BASE64URL:{const i=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(i||u)throw m0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function JP(n){return atob(n)}(e)}catch(i){throw m0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class CM{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw m0(xo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function nO(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Cl{constructor(e,t){let r=0,i="";EM(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(EM(this.data_)){const i=function QP(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Cl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Cl(r,!0)}}static getBlob(...e){if(WT()){const t=e.map(r=>r instanceof Cl?r.data_:r);return new Cl(YP.apply(null,t))}{const t=e.map(c=>mI(c)?YT(xo.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let f=0;f<c.length;f++)i[u++]=c[f]}),new Cl(i,!0)}}uploadData(){return this.data_}}function QT(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function $P(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function DM(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function sO(n,e){return e}class As{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||sO}}let _I=null;function _0(){if(_I)return _I;const n=[];n.push(new As("bucket")),n.push(new As("generation")),n.push(new As("metageneration")),n.push(new As("name","fullPath",!0));const t=new As("name");t.xform=function e(u,c){return function oO(n){return!mI(n)||n.length<2?n:DM(n)}(c)},n.push(t);const i=new As("size");return i.xform=function r(u,c){return void 0!==c?Number(c):c},n.push(i),n.push(new As("timeCreated")),n.push(new As("updated")),n.push(new As("md5Hash",null,!0)),n.push(new As("cacheControl",null,!0)),n.push(new As("contentDisposition",null,!0)),n.push(new As("contentEncoding",null,!0)),n.push(new As("contentLanguage",null,!0)),n.push(new As("contentType",null,!0)),n.push(new As("metadata","customMetadata",!0)),_I=n,_I}function TM(n,e,t){const r=QT(e);return null===r?null:function uO(n,e,t){const r={type:"file"},i=t.length;for(let u=0;u<i;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function aO(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new os(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function JT(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const u=e[i];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const AM="prefixes";class Dl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Tl(n){if(!n)throw zT()}function vI(n,e){return function t(r,i){const u=TM(n,i,e);return Tl(null!==u),u}}function hy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function MP(){return new hr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function SP(){return new hr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function AP(n){return new hr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function xP(n){return new hr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function v0(n){const e=hy(n);return function t(r,i){let u=e(r,i);return 404===r.getStatus()&&(u=function TP(n){return new hr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=i.serverResponse,u}}function MM(n,e,t){const i=fd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new Dl(i,"GET",vI(n,t),c);return f.errorHandler=v0(e),f}function pO(n,e,t,r,i){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),i&&(u.maxResults=i);const f=fd(e.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,S=new Dl(f,"GET",function hO(n,e){return function t(r,i){const u=function dO(n,e,t){const r=QT(t);return null===r?null:function cO(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[AM])for(const i of t[AM]){const u=i.replace(/\/$/,""),c=n._makeStorageReference(new os(e,u));r.prefixes.push(c)}if(t.items)for(const i of t.items){const u=n._makeStorageReference(new os(e,i.name));r.items.push(u)}return r}(n,e,r)}(n,e,i);return Tl(null!==u),u}}(n,e.bucket),b);return S.urlParams=u,S.errorHandler=hy(e),S}function RM(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function _O(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class EI{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function XT(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Tl(!1)}return Tl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const bO={STATE_CHANGED:"state_changed"},Ss={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function eA(n){switch(n){case"running":case"pausing":case"canceling":return Ss.RUNNING;case"paused":return Ss.PAUSED;case"success":return Ss.SUCCESS;case"canceled":return Ss.CANCELED;default:return Ss.ERROR}}class IO{constructor(e,t,r){if(function jP(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function fy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class DO extends class CO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw y0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const u in i)i.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,i[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw y0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw y0("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw y0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw y0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Iu(){return new DO}class kM{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=_0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,u)=>{this._resolve=i,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function vO(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c=RM(e,r,i),f={name:c.fullPath},_=fd(u,n.host,n._protocol),S={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},M=JT(c,t),z=new Dl(_,"POST",function B(ce){let Te;XT(ce);try{Te=ce.getResponseHeader("X-Goog-Upload-URL")}catch(it){Tl(!1)}return Tl(mI(Te)),Te},n.maxUploadRetryTime);return z.urlParams=f,z.headers=S,z.body=M,z.errorHandler=hy(e),z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Iu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function EO(n,e,t,r){const _=new Dl(t,"POST",function u(b){const S=XT(b,["active","final"]);let M=null;try{M=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch(B){Tl(!1)}M||Tl(!1);const F=Number(M);return Tl(!isNaN(F)),new EI(F,r.size(),"final"===S)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=hy(e),_}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(i,Iu,t,r);this._request=u,u.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new EI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,u)=>{let c;try{c=function wO(n,e,t,r,i,u,c,f){const _=new EI(0,0);if(c?(_.current=c.current,_.total=c.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function kP(){return new hr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const b=_.total-_.current;let S=b;i>0&&(S=Math.min(S,i));const M=_.current,z={"X-Goog-Upload-Command":S===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},ce=r.slice(M,M+S);if(null===ce)throw yM();const nt=new Dl(t,"POST",function Te(Ze,St){const Rt=XT(Ze,["active","final"]),Jt=_.current+S,Dr=r.size();let ko;return ko="final"===Rt?vI(e,u)(Ze,St):null,new EI(Jt,Dr,"final"===Rt,ko)},e.maxUploadRetryTime);return nt.headers=z,nt.body=ce.uploadData(),nt.progressCallback=f||null,nt.errorHandler=hy(n),nt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const f=this._ref.storage._makeRequest(c,Iu,i,u);this._request=f,f.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=MM(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Iu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function NM(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},_=function f(){let nt="";for(let Ze=0;Ze<2;Ze++)nt+=Math.random().toString().slice(2);return nt}();c["Content-Type"]="multipart/related; boundary="+_;const b=RM(e,r,i),S=JT(b,t),B=Cl.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+S+"\r\n--"+_+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===B)throw yM();const z={name:b.fullPath},ce=fd(u,n.host,n._protocol),it=n.maxUploadRetryTime,ot=new Dl(ce,"POST",vI(n,t),it);return ot.urlParams=z,ot.headers=c,ot.body=B.uploadData(),ot.errorHandler=hy(e),ot}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Iu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=mM(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=eA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const u=new IO(t||void 0,r||void 0,i||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(eA(this._state)){case Ss.SUCCESS:fy(this._resolve.bind(null,this.snapshot))();break;case Ss.CANCELED:case Ss.ERROR:fy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(eA(this._state)){case Ss.RUNNING:case Ss.PAUSED:e.next&&fy(e.next.bind(e,this.snapshot))();break;case Ss.SUCCESS:e.complete&&fy(e.complete.bind(e))();break;default:e.error&&fy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Bp{constructor(e,t){this._service=e,this._location=t instanceof os?t:os.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Bp(e,t)}get root(){const e=new os(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return DM(this._location.path)}get storage(){return this._service}get parent(){const e=function rO(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new os(this._location.bucket,e);return new Bp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw vM(e)}}function LM(n,e,t){return tA.apply(this,arguments)}function tA(){return tA=(0,ye.Z)(function*(n,e,t){const i=yield VM(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield LM(n,e,i.nextPageToken))}),tA.apply(this,arguments)}function VM(n,e){null!=e&&"number"==typeof e.maxResults&&KT("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=pO(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Iu)}function LO(n){n._throwIfRoot("getDownloadURL");const e=function gO(n,e,t){const i=fd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new Dl(i,"GET",function fO(n,e){return function t(r,i){const u=TM(n,i,e);return Tl(null!==u),function lO(n,e,t,r){const i=QT(e);if(null===i||!mI(i.downloadTokens))return null;const u=i.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(b=>{const M=n.fullPath;return fd("/b/"+c(n.bucket)+"/o/"+c(M),t,r)+wM({alt:"media",token:b})})[0]}(u,i,n.host,n._protocol)}}(n,t),c);return f.errorHandler=v0(e),f}(n.storage,n._location,_0());return n.storage.makeRequestWithTokens(e,Iu).then(t=>{if(null===t)throw function FP(){return new hr("no-download-url","The given file does not have any download URLs.")}();return t})}function UM(n,e){const t=function iO(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new os(n._location.bucket,t);return new Bp(n.storage,r)}function BM(n,e){if(n instanceof nA){const t=n;if(null==t._bucket)throw function OP(){return new hr("no-default-bucket","No default bucket found. Did you set the '"+gM+"' property when initializing the app?")}();const r=new Bp(t,t._bucket);return null!=e?BM(r,e):r}return void 0!==e?UM(n,e):n}function jO(n,e){if(e&&function UO(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof nA)return function BO(n,e){return new Bp(n,e)}(n,e);throw dy("To use ref(service, url), the first argument must be a Storage instance.")}return BM(n,e)}function jM(n,e){const t=null==e?void 0:e[gM];return null==t?null:os.makeFromBucketSpec(t,n)}class nA{constructor(e,t,r,i,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=u,this._bucket=null,this._host=pM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?os.makeFromBucketSpec(i,this._host):jM(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?os.makeFromBucketSpec(this._url,e):jM(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){KT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){KT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ye.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ye.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bp(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new LP(_M());{const u=function KP(n,e,t,r,i,u){const c=wM(n.urlParams),f=n.url+c,_=Object.assign({},n.headers);return function zP(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function GP(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function qP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,u),function WP(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new HP(f,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,ye.Z)(function*(){const[i,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,u).getPromise()})()}}const $M="@firebase/storage";function qM(n,e){return jO(n=(0,yt.m9)(n),e)}function JO(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new nA(t,r,i,e,vr.SDK_VERSION)}!function XO(){(0,vr._registerComponent)(new Ai.wA("storage",JO,"PUBLIC").setMultipleInstances(!0)),(0,vr.registerVersion)($M,"0.9.6",""),(0,vr.registerVersion)($M,"0.9.6","esm2017")}();class wI{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class zM{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new wI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new wI(r,this,this._ref))},t)}on(e,t,r,i){let u;return t&&(u="function"==typeof t?c=>t(new wI(c,this,this._ref)):{next:t.next?c=>t.next(new wI(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,i||void 0)}}class WM{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new pd(e,this._service))}get items(){return this._delegate.items.map(e=>new pd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class pd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function YO(n,e){return UM(n,e)}(this._delegate,e);return new pd(t,this.storage)}get root(){return new pd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new pd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new zM(function HO(n,e,t){return function NO(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new kM(n,new Cl(e),t)}(n=(0,yt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=xo.RAW,r){this._throwIfRoot("putString");const i=YT(t,e),u=Object.assign({},r);return null==u.contentType&&null!=i.contentType&&(u.contentType=i.contentType),new zM(new kM(this._delegate,new Cl(i.data,!0),u),this)}listAll(){return function WO(n){return function OO(n){const e={prefixes:[],items:[]};return LM(n,e).then(()=>e)}(n=(0,yt.m9)(n))}(this._delegate).then(e=>new WM(e,this.storage))}list(e){return function zO(n,e){return VM(n=(0,yt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new WM(t,this.storage))}getMetadata(){return function GO(n){return function kO(n){n._throwIfRoot("getMetadata");const e=MM(n.storage,n._location,_0());return n.storage.makeRequestWithTokens(e,Iu)}(n=(0,yt.m9)(n))}(this._delegate)}updateMetadata(e){return function qO(n,e){return function FO(n,e){n._throwIfRoot("updateMetadata");const t=function mO(n,e,t,r){const u=fd(e.fullServerUrl(),n.host,n._protocol),f=JT(t,r),b=n.maxOperationRetryTime,S=new Dl(u,"PATCH",vI(n,r),b);return S.headers={"Content-Type":"application/json; charset=utf-8"},S.body=f,S.errorHandler=v0(e),S}(n.storage,n._location,e,_0());return n.storage.makeRequestWithTokens(t,Iu)}(n=(0,yt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function KO(n){return LO(n=(0,yt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function ZO(n){return function VO(n){n._throwIfRoot("deleteObject");const e=function yO(n,e){const r=fd(e.fullServerUrl(),n.host,n._protocol),f=new Dl(r,"DELETE",function c(_,b){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=v0(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Iu)}(n=(0,yt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw vM(e)}}class KM{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(ZM(e))throw dy("ref() expected a child path but got a URL, use refFromURL instead.");return new pd(qM(this._delegate,e),this)}refFromURL(e){if(!ZM(e))throw dy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{os.makeFromUrl(e,this._delegate.host)}catch(t){throw dy("refFromUrl() expected a valid full URL but got an invalid one.")}return new pd(qM(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function QO(n,e,t,r={}){!function $O(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,yt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function ZM(n){return/^[A-Za-z]+:\/\//.test(n)}function r1(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new KM(t,r)}function YM(n){const e=function s1(n){return new mn.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function IP(n,e=df.z){return(0,Lt.e)((t,r)=>{let i=null,u=null,c=null;const f=()=>{if(i){i.unsubscribe(),i=null;const b=u;u=null,r.next(b)}};function _(){const b=c+n,S=e.now();if(S<b)return i=this.schedule(void 0,b-S),void r.add(i);f()}t.subscribe((0,Rn.x)(r,b=>{u=b,c=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{u=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Pt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function bI(n){return{getDownloadURL:()=>at(void 0).pipe(cn.fc,Hr(()=>n.getDownloadURL()),cn.iC),getMetadata:()=>at(void 0).pipe(cn.fc,Hr(()=>n.getMetadata()),cn.iC),delete:()=>(0,Kt.D)(n.delete()),child:e=>bI(n.child(e)),updateMetadata:e=>(0,Kt.D)(n.updateMetadata(e)),put:(e,t)=>YM(n.put(e,t)),putString:(e,t,r)=>YM(n.putString(e,t,r)),list:e=>(0,Kt.D)(n.list(e)),listAll:()=>(0,Kt.D)(n.listAll())}}!function i1(n){const e={TaskState:Ss,TaskEvent:bO,StringFormat:xo,Storage:KM,Reference:pd};n.INTERNAL.registerComponent(new Ai.wA("storage-compat",r1,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(Wl.Z);const o1=new g.OlP("angularfire2.storageBucket"),a1=new g.OlP("angularfire2.storage.maxUploadRetryTime"),u1=new g.OlP("angularfire2.storage.maxOperationRetryTime"),l1=new g.OlP("angularfire2.storage.use-emulator");let QM=(()=>{class n{constructor(t,r,i,u,c,f,_,b,S,M){const F=(0,Cn.on)(t,c,r);this.storage=(0,Cn.cc)(`${F.name}.storage.${i}`,"AngularFireStorage",F.name,()=>{const B=c.runOutsideAngular(()=>F.storage(i||void 0)),z=S;return z&&B.useEmulator(...z),_&&B.setMaxUploadRetryTime(_),b&&B.setMaxOperationRetryTime(b),B},[_,b])}ref(t){return bI(this.storage.ref(t))}refFromURL(t){return bI(this.storage.refFromURL(t))}upload(t,r,i){return bI(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Cn.Dh),g.LFG(Cn.xv,8),g.LFG(o1,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(cn.HU),g.LFG(a1,8),g.LFG(u1,8),g.LFG(l1,8),g.LFG(_e,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),c1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),d1=(()=>{class n{constructor(){ly.Z.registerVersion("angularfire",cn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[QM],imports:[c1]}),n})();const{isArray:h1}=Array,{getPrototypeOf:f1,prototype:p1,keys:g1}=Object;function JM(n){if(1===n.length){const e=n[0];if(h1(e))return{args:e,keys:null};if(function m1(n){return n&&"object"==typeof n&&f1(n)===p1}(e)){const t=g1(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:y1}=Array;function XM(n){return(0,Pt.U)(e=>function _1(n,e){return y1(e)?n(...e):n(e)}(n,e))}function ex(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let tx=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),jp=(()=>{class n extends tx{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Al=new g.OlP("NgValueAccessor"),w1={provide:Al,useExisting:(0,g.Gpc)(()=>E0),multi:!0},I1=new g.OlP("CompositionEventMode");let E0=(()=>{class n extends tx{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function b1(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(I1,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[g._Bn([w1]),g.qOj]}),n})();const as=new g.OlP("NgValidators"),Zh=new g.OlP("NgAsyncValidators");function hx(n){return null!=n}function fx(n){const e=(0,g.QGY)(n)?(0,Kt.D)(n):n;return(0,g.CqO)(e),e}function px(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function gx(n,e){return e.map(t=>t(n))}function mx(n){return n.map(e=>function D1(n){return!n.validate}(e)?e:t=>e.validate(t))}function rA(n){return null!=n?function yx(n){if(!n)return null;const e=n.filter(hx);return 0==e.length?null:function(t){return px(gx(t,e))}}(mx(n)):null}function iA(n){return null!=n?function _x(n){if(!n)return null;const e=n.filter(hx);return 0==e.length?null:function(t){return function v1(...n){const e=(0,oo.jO)(n),{args:t,keys:r}=JM(n),i=new mn.y(u=>{const{length:c}=t;if(!c)return void u.complete();const f=new Array(c);let _=c,b=c;for(let S=0;S<c;S++){let M=!1;(0,kp.Xf)(t[S]).subscribe((0,Rn.x)(u,F=>{M||(M=!0,b--),f[S]=F},()=>_--,void 0,()=>{(!_||!M)&&(b||u.next(r?ex(r,f):f),u.complete())}))}});return e?i.pipe(XM(e)):i}(gx(t,e).map(fx)).pipe((0,Pt.U)(px))}}(mx(n)):null}function vx(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function sA(n){return n?Array.isArray(n)?n:[n]:[]}function CI(n,e){return Array.isArray(n)?n.includes(e):n===e}function bx(n,e){const t=sA(e);return sA(n).forEach(i=>{CI(t,i)||t.push(i)}),t}function Ix(n,e){return sA(e).filter(t=>!CI(n,t))}class Cx{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=rA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=iA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Yh extends Cx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ms extends Cx{get formDirective(){return null}get path(){return null}}class Dx{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let oA=(()=>{class n extends Dx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Yh,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[g.qOj]}),n})(),Tx=(()=>{class n extends Dx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ms,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[g.qOj]}),n})();function w0(n,e){lA(n,e),e.valueAccessor.writeValue(n.value),function P1(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Sx(n,e)})}(n,e),function k1(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function O1(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Sx(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function N1(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function SI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function lA(n,e){const t=function Ex(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(vx(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function wx(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(vx(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();SI(e._rawValidators,i),SI(e._rawAsyncValidators,i)}function Sx(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function hA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const b0="VALID",xI="INVALID",py="PENDING",I0="DISABLED";function pA(n){return(RI(n)?n.validators:n)||null}function Nx(n){return Array.isArray(n)?rA(n):n||null}function gA(n,e){return(RI(e)?e.asyncValidators:n)||null}function Px(n){return Array.isArray(n)?iA(n):n||null}function RI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const mA=n=>n instanceof _A;function kx(n){return(n=>n instanceof Vx)(n)?n.value:n.getRawValue()}function Fx(n,e){const t=mA(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[e])throw new g.vHH(1001,"")}function Lx(n,e){mA(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new g.vHH(1002,"")})}class yA{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Nx(this._rawValidators),this._composedAsyncValidatorFn=Px(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===b0}get invalid(){return this.status===xI}get pending(){return this.status==py}get disabled(){return this.status===I0}get enabled(){return this.status!==I0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Nx(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Px(e)}addValidators(e){this.setValidators(bx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(bx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ix(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ix(e,this._rawAsyncValidators))}hasValidator(e){return CI(this._rawValidators,e)}hasAsyncValidator(e){return CI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=py,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=I0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=b0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===b0||this.status===py)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?I0:b0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=py,this._hasOwnPendingAsyncValidator=!0;const t=fx(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function U1(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=mA(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof j1)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?I0:this.errors?xI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(py)?py:this._anyControlsHaveStatus(xI)?xI:b0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){RI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Vx extends yA{constructor(e=null,t,r){super(pA(t),gA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),RI(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){hA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){hA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class _A extends yA{constructor(e,t,r){super(pA(t),gA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Lx(this,e),Object.keys(e).forEach(r=>{Fx(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=kx(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class j1 extends yA{constructor(e,t,r){super(pA(t),gA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Lx(this,e),e.forEach((r,i)=>{Fx(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>kx(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const $1={provide:Ms,useExisting:(0,g.Gpc)(()=>NI)},C0=(()=>Promise.resolve(null))();let NI=(()=>{class n extends Ms{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new _A({},rA(t),iA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){C0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),w0(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){C0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){C0.then(()=>{const r=this._findContainer(t.path),i=new _A({});(function Mx(n,e){lA(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){C0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){C0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Rx(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(as,10),g.Y36(Zh,10))},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([$1]),g.qOj]}),n})();const G1={provide:Yh,useExisting:(0,g.Gpc)(()=>PI)},jx=(()=>Promise.resolve(null))();let PI=(()=>{class n extends Yh{constructor(t,r,i,u,c){super(),this._changeDetectorRef=c,this.control=new Vx,this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function dA(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===E0?t=u:function V1(n){return Object.getPrototypeOf(n.constructor)===jp}(u)?r=u:i=u}),i||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function cA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){w0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){jx.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;jx.then(()=>{var u;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function TI(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ms,9),g.Y36(as,10),g.Y36(Zh,10),g.Y36(Al,10),g.Y36(g.sBO,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([G1]),g.qOj,g.TTD]}),n})(),$x=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Gx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();const ek={provide:Al,useExisting:(0,g.Gpc)(()=>OI),multi:!0};function Qx(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let OI=(()=>{class n extends jp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=Qx(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function tk(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&g.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[g._Bn([ek]),g.qOj]}),n})(),bA=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Qx(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(OI,9))},n.\u0275dir=g.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const nk={provide:Al,useExisting:(0,g.Gpc)(()=>IA),multi:!0};function Jx(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let IA=(()=>{class n extends jp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(u=>this._getOptionId(u));r=(u,c)=>{u._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,u)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],u=r.selectedOptions;if(void 0!==u){const c=u;for(let f=0;f<c.length;f++){const b=this._getOptionValue(c[f].value);i.push(b)}}else{const c=r.options;for(let f=0;f<c.length;f++){const _=c[f];if(_.selected){const b=this._getOptionValue(_.value);i.push(b)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function rk(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&g.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[g._Bn([nk]),g.qOj]}),n})(),CA=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Jx(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Jx(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(IA,9))},n.\u0275dir=g.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),fk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[Gx]]}),n})(),pk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[fk]}),n})();function gk(n,e){1&n&&(g.TgZ(0,"div",30)(1,"div",27),g._uU(2,"Uploading certificate..."),g.qZA()())}function mk(n,e){if(1&n&&(g.TgZ(0,"span",31),g._uU(1),g.qZA()),2&n){const t=g.oxw();g.Q6J("ngClass",t.success?"text-success":"text-danger"),g.xp6(1),g.Oqu(t.alert)}}let uR=(()=>{class n{constructor(t,r){this.afStorage=r,this.eventId=1,this.success=!1,this.loading=!1,this.itemsCollection=t.collection("certificate")}ngOnInit(){}onSelectFile(t){var r=this;return(0,ye.Z)(function*(){if(r.event=t,t.target.files&&t.target.files[0]){var i=new FileReader;i.readAsDataURL(t.target.files[0]),i.onload=u=>{r.url=u.target.result}}})()}uploadImage(){var t=this;return(0,ye.Z)(function*(){if(!t.aadharNumber)return t.alert="*Please enter aadhar number",void t.clearError();if(12!=t.aadharNumber.toString().length)return t.alert="*Please enter valid aadhar number",void t.clearError();if(!t.event)return t.alert="*Please select certificate to upload",void t.clearError();if(t.loading=!0,t.event.target.files&&t.event.target.files[0]){const i=t.event.target.files[0],u=new FileReader;u.onload=c=>t.imageSrc=u.result,u.readAsDataURL(i)}const r=Math.random().toString(36).substring(2);t.ref=t.afStorage.ref(r),t.task=t.ref.put(t.event.target.files[0]).then(i=>{}),yield t.task,t.ref.getDownloadURL().subscribe(i=>{t.image=i,t.addDataToDB()})})()}addDataToDB(){this.itemsCollection.add({aadhaarNumber:this.aadharNumber,certificateUrl:this.image,eventId:this.eventId}).then(r=>{r&&(this.loading=!1,this.aadharNumber=null,this.eventId=1,this.image=null,this.url=null,this.alert="Certificate Uploaded successfully",this.success=!0,this.clearError())},r=>{console.log("Fail to add data",r),this.alert="*Unable to upload certificate. Please try again later."})}clearError(){setTimeout(()=>{this.alert="",this.success=!1},2e3)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(GT),g.Y36(QM))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-upload-certificate"]],decls:49,vars:5,consts:[["class","loading",4,"ngIf"],[1,"container","bg-border","mt-20"],[1,"bold","text-danger"],[1,"text-danger"],[1,"shadow"],[1,"upload-title","mt-20"],[1,"col-12","col-lg-6","offset-lg-3"],[1,"row","mt-20"],[1,"col-12","col-lg-6","margin-auto","title"],[1,"col-12","col-lg-6"],["type","text",1,"box-border",3,"ngModel","ngModelChange"],[1,"pointer"],[1,"box-border",3,"ngModel","ngModelChange"],["value","1"],["value","2"],["value","3"],["value","'4"],["value","5"],[1,"row","mt-20","mb-20"],["id","drop-area",1,"col-12","col-lg-6","drop-it-hot"],["height","200",3,"src"],[1,"choose-files"],[1,"button-wrapper"],["type","button",1,"btn"],["type","file","id","fileElem","multiple","","accept","image/*",3,"change"],["id","gallery"],[3,"ngClass",4,"ngIf"],[1,"row"],[1,"col-12","text-center"],["type","button",1,"btn","btn-blue",3,"click"],[1,"loading"],[3,"ngClass"]],template:function(t,r){1&t&&(g.YNc(0,gk,3,0,"div",0),g.TgZ(1,"section",1)(2,"div",2),g._uU(3,"*Note"),g.qZA(),g.TgZ(4,"div",3),g._uU(5,"1. Upload Clear photo or certificate make sure that all letters are visible"),g.qZA(),g.TgZ(6,"div",3),g._uU(7,"2. File type must be in (ipg/jpeg/png)."),g.qZA(),g.TgZ(8,"div",3),g._uU(9,"3. File size must be below amh"),g.qZA(),g.TgZ(10,"div",4)(11,"div",5),g._uU(12,"Upload certificate"),g.qZA(),g.TgZ(13,"div",6)(14,"div",7)(15,"div",8),g._uU(16," *Aadhar card number "),g.qZA(),g.TgZ(17,"div",9)(18,"input",10),g.NdJ("ngModelChange",function(u){return r.aadharNumber=u}),g.qZA()()(),g.TgZ(19,"div",7)(20,"div",8),g._uU(21," *Event Name "),g.qZA(),g.TgZ(22,"div",9)(23,"span",11)(24,"select",12),g.NdJ("ngModelChange",function(u){return r.eventId=u}),g.TgZ(25,"option",13),g._uU(26,"Master royal cup 2022"),g.qZA(),g.TgZ(27,"option",14),g._uU(28,"Grand Prix international 2022"),g.qZA(),g.TgZ(29,"option",15),g._uU(30,"State level silambam Tournament"),g.qZA(),g.TgZ(31,"option",16),g._uU(32,"TN open championship 2021"),g.qZA(),g.TgZ(33,"option",17),g._uU(34,"Silimbam Interdistrict 2021"),g.qZA()()()()(),g.TgZ(35,"div",18)(36,"div",19),g._UZ(37,"img",20),g.TgZ(38,"form",21)(39,"div",22)(40,"button",23),g._uU(41,"Choose image"),g.qZA(),g.TgZ(42,"input",24),g.NdJ("change",function(u){return r.onSelectFile(u)}),g.qZA()()(),g._UZ(43,"div",25),g.qZA()(),g.YNc(44,mk,2,2,"span",26),g.TgZ(45,"div",27)(46,"div",28)(47,"button",29),g.NdJ("click",function(){return r.uploadImage()}),g._uU(48,"Submit"),g.qZA()()()()()()),2&t&&(g.Q6J("ngIf",r.loading),g.xp6(18),g.Q6J("ngModel",r.aadharNumber),g.xp6(6),g.Q6J("ngModel",r.eventId),g.xp6(13),g.Q6J("src",r.url,g.LSH),g.xp6(7),g.Q6J("ngIf",r.alert))},directives:[Xn,E0,oA,PI,OI,bA,CA,$x,Tx,NI,Ui],styles:['.drop-it-hot[_ngcontent-%COMP%]{background-color:#fff;border-radius:15px;margin-top:20px;height:186px;margin-left:auto;margin-right:auto;position:relative;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 15px #0000001a;overflow:hidden}.drop-it-hot[_ngcontent-%COMP%]:after{content:"";position:absolute;width:calc(100% - 20px);height:calc(100% - 20px);border:none;border-radius:5px;z-index:0}.drop-it-hot[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:50%;position:absolute;color:var(--accent);background-color:#0586d7;border:3px solid #eae4e4;width:100px;height:100px;top:12px}.circle[_ngcontent-%COMP%]{transition:transform .15s ease-in;z-index:10}.circle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:40px;height:40px;color:#fff}.circle[_ngcontent-%COMP%]:before{content:"";background-color:var(--accent);width:130px;height:130px;border-radius:50%;position:absolute;opacity:0;transition:transform .25s ease-in,opacity .2s ease-in;z-index:0}.circle[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100px;height:100px;border-radius:50%}.circle[_ngcontent-%COMP%]:hover{transform:scale(1.2);opacity:.9}.circle[_ngcontent-%COMP%]:hover:before{transform:scale(8);opacity:1}.circle[_ngcontent-%COMP%]:hover:after{border:3px solid white}.circle[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{color:#fff;z-index:1}.highlight[_ngcontent-%COMP%]:before{transform:scale(8);opacity:1}.highlight[_ngcontent-%COMP%]:after{border:3px solid white}.highlight[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#fff;z-index:1}.choose-files[_ngcontent-%COMP%]{align-self:flex-end;z-index:10}.button-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:40px;position:relative;overflow:hidden;top:26px;cursor:pointer}.button-wrapper[_ngcontent-%COMP%]:hover   .btn[_ngcontent-%COMP%]{background-color:#0986d9}.label[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--dark-gray);font-size:18px}.button-wrapper[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{font-size:100px;position:absolute;left:0;top:0;opacity:0}.btn[_ngcontent-%COMP%]{border:none;padding:10px 20px;border-radius:50px;background-color:#0986d9;color:#fff;font-size:16px;cursor:pointer;transition:background-color .2s ease-in}#gallery[_ngcontent-%COMP%]{position:absolute;height:100%;top:0;left:0;z-index:100}#gallery[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;filter:contrast(var(--contrast)) brightness(var(--brightness)) sepia(var(--sepia)) hue-rotate(var(--hue-rotate))}.editor[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;width:700px;padding:20px;box-sizing:border-box;background-color:#fff;margin-top:-10px;z-index:100;opacity:0;transform:translateY(50px)}.is-visible[_ngcontent-%COMP%]{transition:transform .5s ease-in-out,opacity .5s ease-in-out;opacity:1;transform:translateY(0)}.range-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:20%}.range[_ngcontent-%COMP%]{-webkit-appearance:none;height:2px;border-radius:5px;background:var(--gray);outline:none;padding:0;margin:10px 0}[_ngcontent-%COMP%]::-moz-range-track{background:var(--gray);border:0}input[_ngcontent-%COMP%]::-moz-focus-inner, input[_ngcontent-%COMP%]::-moz-focus-outer{border:0}input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;height:12px;width:12px;border-radius:8px;background-color:var(--accent);cursor:pointer}input[type=range][_ngcontent-%COMP%]::-moz-range-thumb{-webkit-appearance:none;height:12px;width:12px;border-radius:8px;background-color:var(--accent);cursor:pointer}input[type=range][_ngcontent-%COMP%]::-ms-thumb{-webkit-appearance:none;height:12px;width:12px;border-radius:8px;background-color:var(--accent);cursor:pointer}.loading[_ngcontent-%COMP%]{position:fixed;z-index:999;overflow:show;margin:auto;top:0;left:0;bottom:0;right:0;width:50px;height:50px}.loading[_ngcontent-%COMP%]:before{content:"";display:block;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#ffffff80}.loading[_ngcontent-%COMP%]:not(:required):after{content:"";display:block;font-size:10px;width:90px;height:90px;margin-top:-.5em;border:5px solid #c6a9e4;border-radius:100%;border-bottom-color:transparent;animation:spinner 1s linear 0s infinite}']}),n})(),yk=(()=>{class n{constructor(){this.title="angular-tour-of-heroes"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:29,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-static"],[1,"container","sub-logo"],[1,"fw-300","white","justify-content-between","align-items-center","mb-display"],[1,"flex"],["href","#home","title","Logo",1,"logo","scroll"],["src","assets/img/logo.jpeg","alt","logo","width","100px",1,"logo-dark","default"],[1,"text-center","ml-10"],[1,"vks"],["src","assets/img/profile-img.png",1,"logo-dark","ml-10"],[1,"font-14","text-center"],["id","ntg",1,"row","fw-500","white","justify-content-between","align-items-center","lg-display"],[1,"col-2","text-center"],[1,"col-8","font-30","text-center"],[1,"ml-20"],[1,"font-16"],["src","assets/img/profile-img.png",1,"logo-dark"]],template:function(t,r){1&t&&(g.TgZ(0,"header")(1,"nav",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"a",4),g._UZ(6,"img",5),g.qZA(),g.TgZ(7,"div",6)(8,"span",7),g._uU(9,"V.K.S"),g.qZA()(),g._UZ(10,"img",8),g.qZA(),g.TgZ(11,"div",9)(12,"div"),g._uU(13," SILAMBAM & YOGA MARTIALARTS TRUST"),g.qZA(),g._uU(14," SOUTH INDIAN TRADITIONAL SILIMBAM SPORTS ASSOCIATION "),g.qZA()(),g.TgZ(15,"div",10)(16,"div",11)(17,"a",4),g._UZ(18,"img",5),g.qZA()(),g.TgZ(19,"div",12)(20,"div",13),g._uU(21," V.K.S.SILAMBAM & YOGA MARTIALARTS TRUST "),g.TgZ(22,"div",14),g._uU(23," SOUTH INDIAN TRADITIONAL SILIMBAM SPORTS ASSOCIATION"),g.qZA()()(),g.TgZ(24,"div",11),g._UZ(25,"img",15),g.qZA()()()()(),g.TgZ(26,"div"),g._uU(27," hi this is angular\n"),g.qZA(),g._UZ(28,"app-upload-certificate"))},directives:[uR],styles:[".vks[_ngcontent-%COMP%]{font-size:3rem;font-weight:300}.sub-logo[_ngcontent-%COMP%]{position:relative;top:-18px}.ml-10[_ngcontent-%COMP%]{margin-left:10px}"]}),n})();class Cu extends cd.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var _k=P(9672);function lR(n,e,t){n?(0,_k.f)(t,n,e):e()}function kI(n,e){const t=(0,Bb.m)(n)?n:()=>n,r=i=>i.error(t());return new mn.y(e?i=>e.schedule(r,0,i):r)}function cR(n){return new mn.y(e=>{(0,kp.Xf)(n()).subscribe(e)})}var gy=P(515),dR=P(727);function hR(){return(0,Lt.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Rn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class wk extends mn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Lt.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new dR.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Rn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=dR.w0.EMPTY)}return e}refCount(){return hR()(this)}}function Qh(n){return(0,Lt.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,Rn.x)(t,void 0,void 0,c=>{u=(0,kp.Xf)(n(c,Qh(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}var us=P(5577);function D0(n,e){return(0,Bb.m)(e)?(0,us.z)(n,e,1):(0,us.z)(n,1)}function TA(n){return n<=0?()=>gy.E:(0,Lt.e)((e,t)=>{let r=[];e.subscribe((0,Rn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}var Ro=P(8505);class gd{constructor(e,t){this.id=e,this.url=t}}class AA extends gd{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class T0 extends gd{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fR extends gd{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ck extends gd{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Dk extends gd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tk extends gd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ak extends gd{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Sk extends gd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mk extends gd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pR{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class gR{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class xk{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rk{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nk{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pk{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mR{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const qt="primary";class Ok{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function my(n){return new Ok(n)}const yR="ngNavigationCancelingError";function SA(n){const e=Error("NavigationCancelingError: "+n);return e[yR]=!0,e}function Fk(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],f=n[u];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Sl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!_R(n[i],e[i]))return!1;return!0}function _R(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function vR(n){return Array.prototype.concat.apply([],n)}function ER(n){return n.length>0?n[n.length-1]:null}function ki(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ml(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,Kt.D)(Promise.resolve(n)):at(n)}const Uk={exact:function IR(n,e,t){if(!Gp(n.segments,e.segments)||!FI(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!IR(n.children[r],e.children[r],t))return!1;return!0},subset:CR},wR={exact:function Bk(n,e){return Sl(n,e)},subset:function jk(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>_R(n[t],e[t]))},ignored:()=>!0};function bR(n,e,t){return Uk[t.paths](n.root,e.root,t.matrixParams)&&wR[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function CR(n,e,t){return DR(n,e,e.segments,t)}function DR(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Gp(i,t)||e.hasChildren()||!FI(i,t,r))}if(n.segments.length===t.length){if(!Gp(n.segments,t)||!FI(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!CR(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Gp(n.segments,i)&&FI(n.segments,i,r)&&n.children[qt])&&DR(n.children[qt],e,u,r)}}function FI(n,e,t){return e.every((r,i)=>wR[t](n[i].parameters,r.parameters))}class Hp{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=my(this.queryParams)),this._queryParamMap}toString(){return Gk.serialize(this)}}class Yt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ki(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return LI(this)}}class A0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=my(this.parameters)),this._parameterMap}toString(){return xR(this)}}function Gp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class TR{}class AR{parse(e){const t=new Xk(e);return new Hp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${S0(e.root,!0)}`,r=function Wk(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${VI(t)}=${VI(i)}`).join("&"):`${VI(t)}=${VI(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function qk(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const Gk=new AR;function LI(n){return n.segments.map(e=>xR(e)).join("/")}function S0(n,e){if(!n.hasChildren())return LI(n);if(e){const t=n.children[qt]?S0(n.children[qt],!1):"",r=[];return ki(n.children,(i,u)=>{u!==qt&&r.push(`${u}:${S0(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Hk(n,e){let t=[];return ki(n.children,(r,i)=>{i===qt&&(t=t.concat(e(r,i)))}),ki(n.children,(r,i)=>{i!==qt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===qt?[S0(n.children[qt],!1)]:[`${i}:${S0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[qt]?`${LI(n)}/${t[0]}`:`${LI(n)}/(${t.join("//")})`}}function SR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function VI(n){return SR(n).replace(/%3B/gi,";")}function MA(n){return SR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function UI(n){return decodeURIComponent(n)}function MR(n){return UI(n.replace(/\+/g,"%20"))}function xR(n){return`${MA(n.path)}${function zk(n){return Object.keys(n).map(e=>`;${MA(e)}=${MA(n[e])}`).join("")}(n.parameters)}`}const Kk=/^[^\/()?;=#]+/;function BI(n){const e=n.match(Kk);return e?e[0]:""}const Zk=/^[^=?&#]+/,Qk=/^[^&#]+/;class Xk{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yt([],{}):new Yt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[qt]=new Yt(e,t)),r}parseSegment(){const e=BI(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new A0(UI(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=BI(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=BI(this.remaining);i&&(r=i,this.capture(r))}e[UI(t)]=UI(r)}parseQueryParam(e){const t=function Yk(n){const e=n.match(Zk);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Jk(n){const e=n.match(Qk);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=MR(t),u=MR(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=BI(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=qt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[qt]:new Yt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class RR{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=xA(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=xA(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=RA(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return RA(e,this._root).map(t=>t.value)}}function xA(n,e){if(n===e.value)return e;for(const t of e.children){const r=xA(n,t);if(r)return r}return null}function RA(n,e){if(n===e.value)return[e];for(const t of e.children){const r=RA(n,t);if(r.length)return r.unshift(e),r}return[]}class md{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function yy(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class NR extends RR{constructor(e,t){super(e),this.snapshot=t,NA(this,e)}toString(){return this.snapshot.toString()}}function PR(n,e){const t=function eF(n,e){const c=new jI([],{},{},"",{},qt,e,null,n.root,-1,{});return new kR("",new md(c,[]))}(n,e),r=new Cu([new A0("",{})]),i=new Cu({}),u=new Cu({}),c=new Cu({}),f=new Cu(""),_=new _y(r,i,c,f,u,qt,e,t.root);return _.snapshot=t.root,new NR(new md(_,[]),t)}class _y{constructor(e,t,r,i,u,c,f,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Pt.U)(e=>my(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Pt.U)(e=>my(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function OR(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function tF(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class jI{constructor(e,t,r,i,u,c,f,_,b,S,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this.routeConfig=_,this._urlSegment=b,this._lastPathIndex=S,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=my(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=my(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kR extends RR{constructor(e,t){super(t),this.url=e,NA(this,t)}toString(){return FR(this._root)}}function NA(n,e){e.value._routerState=n,e.children.forEach(t=>NA(n,t))}function FR(n){const e=n.children.length>0?` { ${n.children.map(FR).join(", ")} } `:"";return`${n.value}${e}`}function PA(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Sl(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Sl(e.params,t.params)||n.params.next(t.params),function Lk(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Sl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Sl(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function OA(n,e){const t=Sl(n.params,e.params)&&function $k(n,e){return Gp(n,e)&&n.every((t,r)=>Sl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||OA(n.parent,e.parent))}function M0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function rF(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return M0(n,r,i);return M0(n,r)})}(n,e,t);return new md(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>M0(n,f)),c}}const r=function iF(n){return new _y(new Cu(n.url),new Cu(n.params),new Cu(n.queryParams),new Cu(n.fragment),new Cu(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>M0(n,u));return new md(r,i)}}function $I(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function x0(n){return"object"==typeof n&&null!=n&&n.outlets}function kA(n,e,t,r,i){let u={};if(r&&ki(r,(f,_)=>{u[_]=Array.isArray(f)?f.map(b=>`${b}`):`${f}`}),n===e)return new Hp(t,u,i);const c=LR(n,e,t);return new Hp(c,u,i)}function LR(n,e,t){const r={};return ki(n.children,(i,u)=>{r[u]=i===e?t:LR(i,e,t)}),new Yt(n.segments,r)}class VR{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&$I(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(x0);if(i&&i!==ER(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class FA{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function UR(n,e,t){if(n||(n=new Yt([],{})),0===n.segments.length&&n.hasChildren())return HI(n,e,t);const r=function cF(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],f=t[r];if(x0(f))break;const _=`${f}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&b&&"object"==typeof b&&void 0===b.outlets){if(!jR(_,b,c))return u;r+=2}else{if(!jR(_,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Yt(n.segments.slice(0,r.pathIndex),{});return u.children[qt]=new Yt(n.segments.slice(r.pathIndex),n.children),HI(u,0,i)}return r.match&&0===i.length?new Yt(n.segments,{}):r.match&&!n.hasChildren()?LA(n,e,t):r.match?HI(n,0,i):LA(n,e,t)}function HI(n,e,t){if(0===t.length)return new Yt(n.segments,{});{const r=function lF(n){return x0(n[0])?n[0].outlets:{[qt]:n}}(t),i={};return ki(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=UR(n.children[c],e,u))}),ki(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new Yt(n.segments,i)}}function LA(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(x0(u)){const _=dF(u.outlets);return new Yt(r,_)}if(0===i&&$I(t[0])){r.push(new A0(n.segments[e].path,BR(t[0]))),i++;continue}const c=x0(u)?u.outlets[qt]:`${u}`,f=i<t.length-1?t[i+1]:null;c&&f&&$I(f)?(r.push(new A0(c,BR(f))),i+=2):(r.push(new A0(c,{})),i++)}return new Yt(r,{})}function dF(n){const e={};return ki(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=LA(new Yt([],{}),0,t))}),e}function BR(n){const e={};return ki(n,(t,r)=>e[r]=`${t}`),e}function jR(n,e,t){return n==t.path&&Sl(e,t.parameters)}class fF{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),PA(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=yy(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),ki(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=yy(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=yy(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=yy(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new Pk(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Rk(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(PA(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),PA(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=function pF(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=f?f.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=_,c.outlet&&c.outlet.activateWith(i,_),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class VA{constructor(e,t){this.routes=e,this.module=t}}function Jh(n){return"function"==typeof n}function qp(n){return n instanceof Hp}const R0=Symbol("INITIAL_VALUE");function N0(){return Hr(n=>function vk(...n){const e=(0,oo.yG)(n),t=(0,oo.jO)(n),{args:r,keys:i}=JM(n);if(0===r.length)return(0,Kt.D)([],e);const u=new mn.y(function Ek(n,e,t=Jo.y){return r=>{lR(e,()=>{const{length:i}=n,u=new Array(i);let c=i,f=i;for(let _=0;_<i;_++)lR(e,()=>{const b=(0,Kt.D)(n[_],e);let S=!1;b.subscribe((0,Rn.x)(r,M=>{u[_]=M,S||(S=!0,f--),f||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>ex(i,c):Jo.y));return t?u.pipe(XM(t)):u}(n.map(e=>e.pipe((0,Vb.q)(1),Us(R0)))).pipe(eu((e,t)=>{let r=!1;return t.reduce((i,u,c)=>i!==R0?i:(u===R0&&(r=!0),r||!1!==u&&c!==t.length-1&&!qp(u)?i:u),e)},R0),Nr(e=>e!==R0),(0,Pt.U)(e=>qp(e)?e:!0===e),(0,Vb.q)(1)))}class EF{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new P0,this.attachRef=null}}class P0{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new EF,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let $R=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=u||qt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,_=new wF(t,f,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(P0),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class wF{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===_y?this.route:e===P0?this.childContexts:this.parent.get(e,t)}}let HR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[$R],encapsulation:2}),n})();function GR(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];bF(r,IF(e,r))}}function bF(n,e){n.children&&GR(n.children,e)}function IF(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function UA(n){const e=n.children&&n.children.map(UA),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==qt&&(t.component=HR),t}function Ra(n){return n.outlet||qt}function qR(n,e){const t=n.filter(r=>Ra(r)===e);return t.push(...n.filter(r=>Ra(r)!==e)),t}const zR={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function GI(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},zR):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Fk)(t,n,e);if(!u)return Object.assign({},zR);const c={};ki(u.posParams,(_,b)=>{c[b]=_.path});const f=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:f,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function qI(n,e,t,r,i="corrected"){if(t.length>0&&function TF(n,e,t){return t.some(r=>zI(n,e,r)&&Ra(r)!==qt)}(n,t,r)){const c=new Yt(e,function DF(n,e,t,r){const i={};i[qt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Ra(u)!==qt){const c=new Yt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Ra(u)]=c}return i}(n,e,r,new Yt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function AF(n,e,t){return t.some(r=>zI(n,e,r))}(n,t,r)){const c=new Yt(n.segments,function CF(n,e,t,r,i,u){const c={};for(const f of r)if(zI(n,t,f)&&!i[Ra(f)]){const _=new Yt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[Ra(f)]=_}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Yt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function zI(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function WR(n,e,t,r){return!!(Ra(n)===r||r!==qt&&zI(e,t,n))&&("**"===n.path||GI(e,n,t).matched)}function KR(n,e,t){return 0===e.length&&!n.children[t]}class WI{constructor(e){this.segmentGroup=e||null}}class ZR{constructor(e){this.urlTree=e}}function O0(n){return kI(new WI(n))}function YR(n){return kI(new ZR(n))}function SF(n){return kI(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class RF{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=qI(this.urlTree.root,[],[],this.config).segmentGroup,t=new Yt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,qt).pipe((0,Pt.U)(u=>this.createUrlTree(BA(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Qh(u=>{if(u instanceof ZR)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof WI?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,qt).pipe((0,Pt.U)(i=>this.createUrlTree(BA(i),e.queryParams,e.fragment))).pipe(Qh(i=>{throw i instanceof WI?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Yt([],{[qt]:e}):e;return new Hp(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Pt.U)(u=>new Yt([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,Kt.D)(i).pipe(D0(u=>{const c=r.children[u],f=qR(t,u);return this.expandSegmentGroup(e,f,c,u).pipe((0,Pt.U)(_=>({segment:_,outlet:u})))}),eu((u,c)=>(u[c.outlet]=c.segment,u),{}),function bk(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Nr((i,u)=>n(i,u,r)):Jo.y,TA(1),t?dT(e):Ub(()=>new Jv))}())}expandSegment(e,t,r,i,u,c){return(0,Kt.D)(r).pipe(D0(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,u,c).pipe(Qh(b=>{if(b instanceof WI)return at(null);throw b}))),dd(f=>!!f),Qh((f,_)=>{if(f instanceof Jv||"EmptyError"===f.name)return KR(t,i,u)?at(new Yt([],{})):O0(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,u,c,f){return WR(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):O0(t):O0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?YR(u):this.lineralizeSegments(r,u).pipe((0,us.z)(c=>{const f=new Yt(c,{});return this.expandSegment(e,f,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:f,consumedSegments:_,remainingSegments:b,positionalParamSegments:S}=GI(t,i,u);if(!f)return O0(t);const M=this.applyRedirectCommands(_,i.redirectTo,S);return i.redirectTo.startsWith("/")?YR(M):this.lineralizeSegments(i,M).pipe((0,us.z)(F=>this.expandSegment(e,t,r,F.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?at(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Pt.U)(M=>(r._loadedConfig=M,new Yt(i,{})))):at(new Yt(i,{}));const{matched:c,consumedSegments:f,remainingSegments:_}=GI(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,us.z)(S=>{const M=S.module,F=S.routes,{segmentGroup:B,slicedSegments:z}=qI(t,f,_,F),ce=new Yt(B.segments,B.children);if(0===z.length&&ce.hasChildren())return this.expandChildren(M,F,ce).pipe((0,Pt.U)(nt=>new Yt(f,nt)));if(0===F.length&&0===z.length)return at(new Yt(f,{}));const Te=Ra(r)===u;return this.expandSegment(M,ce,F,z,Te?qt:u,!0).pipe((0,Pt.U)(ot=>new Yt(f.concat(ot.segments),ot.children)))})):O0(t)}getChildConfig(e,t,r){return t.children?at(new VA(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?at(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,us.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Pt.U)(u=>(t._loadedConfig=u,u))):function MF(n){return kI(SA(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):at(new VA([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return at(!0);const u=i.map(c=>{const f=e.get(c);let _;if(function mF(n){return n&&Jh(n.canLoad)}(f))_=f.canLoad(t,r);else{if(!Jh(f))throw new Error("Invalid CanLoad guard");_=f(t,r)}return Ml(_)});return at(u).pipe(N0(),(0,Ro.b)(c=>{if(!qp(c))return;const f=SA(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw f.url=c,f}),(0,Pt.U)(c=>!0===c))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return at(r);if(i.numberOfChildren>1||!i.children[qt])return SF(e.redirectTo);i=i.children[qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new Hp(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ki(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[u]=t[f]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return ki(t.children,(f,_)=>{c[_]=this.createSegmentGroup(e,f,r,i)}),new Yt(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function BA(n){const e={};for(const r of Object.keys(n.children)){const u=BA(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function NF(n){if(1===n.numberOfChildren&&n.children[qt]){const e=n.children[qt];return new Yt(n.segments.concat(e.segments),e.children)}return n}(new Yt(n.segments,e))}class QR{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class KI{constructor(e,t){this.component=e,this.route=t}}function OF(n,e,t){const r=n._root;return k0(r,e?e._root:null,t,[r.value])}function ZI(n,e,t){const r=function FF(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function k0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=yy(e);return n.children.forEach(c=>{(function LF(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const _=function VF(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Gp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Gp(n.url,e.url)||!Sl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!OA(n,e)||!Sl(n.queryParams,e.queryParams);default:return!OA(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new QR(r)):(u.data=c.data,u._resolvedData=c._resolvedData),k0(n,e,u.component?f?f.children:null:t,r,i),_&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new KI(f.outlet.component,c))}else c&&F0(e,f,i),i.canActivateChecks.push(new QR(r)),k0(n,null,u.component?f?f.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),ki(u,(c,f)=>F0(c,t.getContext(f),i)),i}function F0(n,e,t){const r=yy(n),i=n.value;ki(r,(u,c)=>{F0(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new KI(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class WF{}function JR(n){return new mn.y(e=>e.error(n))}class ZF{constructor(e,t,r,i,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=qI(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,qt);if(null===t)return null;const r=new jI([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new md(r,t),u=new kR(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=OR(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],f=qR(e,u),_=this.processSegmentGroup(f,c,u);if(null===_)return null;r.push(..._)}const i=XR(r);return function YF(n){n.sort((e,t)=>e.value.outlet===qt?-1:t.value.outlet===qt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,i);if(null!==c)return c}return KR(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!WR(e,t,r,i))return null;let u,c=[],f=[];if("**"===e.path){const B=r.length>0?ER(r).parameters:{};u=new jI(r,B,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,nN(e),Ra(e),e.component,e,eN(t),tN(t)+r.length,rN(e))}else{const B=GI(t,e,r);if(!B.matched)return null;c=B.consumedSegments,f=B.remainingSegments,u=new jI(c,B.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,nN(e),Ra(e),e.component,e,eN(t),tN(t)+c.length,rN(e))}const _=function QF(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:S}=qI(t,c,f,_.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);if(0===S.length&&b.hasChildren()){const B=this.processChildren(_,b);return null===B?null:[new md(u,B)]}if(0===_.length&&0===S.length)return[new md(u,[])];const M=Ra(e)===i,F=this.processSegment(_,b,S,M?qt:i);return null===F?null:[new md(u,F)]}}function JF(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function XR(n){const e=[],t=new Set;for(const r of n){if(!JF(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=XR(r.children);e.push(new md(r.value,i))}return e.filter(r=>!t.has(r))}function eN(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function tN(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function nN(n){return n.data||{}}function rN(n){return n.resolve||{}}function iN(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function jA(n){return Hr(e=>{const t=n(e);return t?(0,Kt.D)(t).pipe((0,Pt.U)(()=>e)):at(e)})}class oL extends class sL{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const $A=new g.OlP("ROUTES");class sN{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Pt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new VA(vR(c.injector.get($A,void 0,g.XFs.Self|g.XFs.Optional)).map(UA),c)}),Qh(u=>{throw t._loader$=void 0,u}));return t._loader$=new wk(i,()=>new cd.x).pipe(hR()),t._loader$}loadModuleFactory(e){return Ml(e()).pipe((0,us.z)(t=>t instanceof g.YKP?at(t):(0,Kt.D)(this.compiler.compileModuleAsync(t))))}}class uL{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function lL(n){throw n}function cL(n,e,t){return e.parse("/")}function oN(n,e){return at(null)}const dL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let No=(()=>{class n{constructor(t,r,i,u,c,f,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new cd.x,this.errorHandler=lL,this.malformedUriErrorHandler=cL,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:oN,afterPreactivation:oN},this.urlHandlingStrategy=new uL,this.routeReuseStrategy=new oL,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(g.h0i),this.console=c.get(g.c2e);const M=c.get(g.R0b);this.isNgZoneEnabled=M instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function Vk(){return new Hp(new Yt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new sN(c,f,F=>this.triggerEvent(new pR(F)),F=>this.triggerEvent(new gR(F))),this.routerState=PR(this.currentUrlTree,this.rootComponentType),this.transitions=new Cu({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Nr(i=>0!==i.id),(0,Pt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Hr(i=>{let u=!1,c=!1;return at(i).pipe((0,Ro.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Hr(f=>{const _=this.browserUrlTree.toString(),b=!this.navigated||f.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return aN(f.source)&&(this.browserUrlTree=f.extractedUrl),at(f).pipe(Hr(M=>{const F=this.transitions.getValue();return r.next(new AA(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),F!==this.transitions.getValue()?gy.E:Promise.resolve(M)}),function PF(n,e,t,r){return Hr(i=>function xF(n,e,t,r,i){return new RF(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Pt.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ro.b)(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function XF(n,e,t,r,i){return(0,us.z)(u=>function KF(n,e,t,r,i="emptyOnly",u="legacy"){try{const c=new ZF(n,e,t,r,i,u).recognize();return null===c?JR(new WF):at(c)}catch(c){return JR(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,Pt.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ro.b)(M=>{if("eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const B=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(B,M)}this.browserUrlTree=M.urlAfterRedirects}const F=new Dk(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(F)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:B,source:z,restoredState:ce,extras:Te}=f,it=new AA(F,this.serializeUrl(B),z,ce);r.next(it);const ot=PR(B,this.rootComponentType).snapshot;return at(Object.assign(Object.assign({},f),{targetSnapshot:ot,urlAfterRedirects:B,extras:Object.assign(Object.assign({},Te),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,f.resolve(null),gy.E}),jA(f=>{const{targetSnapshot:_,id:b,extractedUrl:S,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:B}}=f;return this.hooks.beforePreactivation(_,{navigationId:b,appliedUrlTree:S,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!B})}),(0,Ro.b)(f=>{const _=new Tk(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(_)}),(0,Pt.U)(f=>Object.assign(Object.assign({},f),{guards:OF(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function UF(n,e){return(0,us.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?at(Object.assign(Object.assign({},t),{guardsResult:!0})):function BF(n,e,t,r){return(0,Kt.D)(n).pipe((0,us.z)(i=>function zF(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?at(u.map(f=>{const _=ZI(f,e,i);let b;if(function vF(n){return n&&Jh(n.canDeactivate)}(_))b=Ml(_.canDeactivate(n,e,t,r));else{if(!Jh(_))throw new Error("Invalid CanDeactivate guard");b=Ml(_(n,e,t,r))}return b.pipe(dd())})).pipe(N0()):at(!0)}(i.component,i.route,t,e,r)),dd(i=>!0!==i,!0))}(c,r,i,n).pipe((0,us.z)(f=>f&&function gF(n){return"boolean"==typeof n}(f)?function jF(n,e,t,r){return(0,Kt.D)(e).pipe(D0(i=>Xa(function HF(n,e){return null!==n&&e&&e(new xk(n)),at(!0)}(i.route.parent,r),function $F(n,e){return null!==n&&e&&e(new Nk(n)),at(!0)}(i.route,r),function qF(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function kF(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>cR(()=>at(c.guards.map(_=>{const b=ZI(_,c.node,t);let S;if(function _F(n){return n&&Jh(n.canActivateChild)}(b))S=Ml(b.canActivateChild(r,n));else{if(!Jh(b))throw new Error("Invalid CanActivateChild guard");S=Ml(b(r,n))}return S.pipe(dd())})).pipe(N0())));return at(u).pipe(N0())}(n,i.path,t),function GF(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return at(!0);const i=r.map(u=>cR(()=>{const c=ZI(u,e,t);let f;if(function yF(n){return n&&Jh(n.canActivate)}(c))f=Ml(c.canActivate(e,n));else{if(!Jh(c))throw new Error("Invalid CanActivate guard");f=Ml(c(e,n))}return f.pipe(dd())}));return at(i).pipe(N0())}(n,i.route,t))),dd(i=>!0!==i,!0))}(r,u,n,e):at(f)),(0,Pt.U)(f=>Object.assign(Object.assign({},t),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,Ro.b)(f=>{if(qp(f.guardsResult)){const b=SA(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw b.url=f.guardsResult,b}const _=new Ak(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(_)}),Nr(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),jA(f=>{if(f.guards.canActivateChecks.length)return at(f).pipe((0,Ro.b)(_=>{const b=new Sk(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}),Hr(_=>{let b=!1;return at(_).pipe(function eL(n,e){return(0,us.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return at(t);let u=0;return(0,Kt.D)(i).pipe(D0(c=>function tL(n,e,t,r){return function nL(n,e,t,r){const i=iN(n);if(0===i.length)return at({});const u={};return(0,Kt.D)(i).pipe((0,us.z)(c=>function rL(n,e,t,r){const i=ZI(n,e,r);return Ml(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,Ro.b)(f=>{u[c]=f}))),TA(1),(0,us.z)(()=>iN(u).length===i.length?at(u):gy.E))}(n._resolve,n,e,r).pipe((0,Pt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),OR(n,t).resolve),null)))}(c.route,r,n,e)),(0,Ro.b)(()=>u++),TA(1),(0,us.z)(c=>u===i.length?at(t):gy.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ro.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,Ro.b)(_=>{const b=new Mk(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}))}),jA(f=>{const{targetSnapshot:_,id:b,extractedUrl:S,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:B}}=f;return this.hooks.afterPreactivation(_,{navigationId:b,appliedUrlTree:S,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!B})}),(0,Pt.U)(f=>{const _=function nF(n,e,t){const r=M0(n,e._root,t?t._root:void 0);return new NR(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:_})}),(0,Ro.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,Pt.U)(r=>(new fF(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,Ro.b)({next(){u=!0},complete(){u=!0}}),function Ik(n){return(0,Lt.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var f;u||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),Qh(f=>{if(c=!0,function kk(n){return n&&n[yR]}(f)){const _=qp(f.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const b=new fR(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(b),_?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),M={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||aN(i.source)};this.scheduleNavigation(S,"imperative",null,M,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new Ck(i.id,this.serializeUrl(i.extractedUrl),f);r.next(_);try{i.resolve(this.errorHandler(f))}catch(b){i.reject(b)}}return gy.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const _=Object.assign({},c);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const f=this.parseUrl(t.url);this.scheduleNavigation(f,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){GR(t),this.config=t.map(UA),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:f,preserveFragment:_}=r,b=i||this.routerState.root,S=_?this.currentUrlTree.fragment:c;let M=null;switch(f){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),function sF(n,e,t,r,i){if(0===t.length)return kA(e.root,e.root,e.root,r,i);const u=function oF(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new VR(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const f={};return ki(u.outlets,(_,b)=>{f[b]="string"==typeof _?_.split("/"):_}),[...i,{outlets:f}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((f,_)=>{0==_&&"."===f||(0==_&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,u]},[]);return new VR(t,e,r)}(t);if(u.toRoot())return kA(e.root,e.root,new Yt([],{}),r,i);const c=function aF(n,e,t){if(n.isAbsolute)return new FA(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new FA(u,u===e.root,0)}const r=$I(n.commands[0])?0:1;return function uF(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new FA(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),f=c.processChildren?HI(c.segmentGroup,c.index,u.commands):UR(c.segmentGroup,c.index,u.commands);return kA(e.root,c.segmentGroup,f,r,i)}(b,this.currentUrlTree,t,M,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=qp(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function fL(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},dL):!1===r?Object.assign({},hL):r,qp(t))return bR(this.currentUrlTree,t,i);const u=this.parseUrl(t);return bR(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new T0(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){var f,_;if(this.disposed)return Promise.resolve(!1);let b,S,M;c?(b=c.resolve,S=c.reject,M=c.promise):M=new Promise((z,ce)=>{b=z,S=ce});const F=++this.navigationId;let B;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),B=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):B=0,this.setTransition({id:F,targetPageId:B,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:S,promise:M,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),M.catch(z=>Promise.reject(z))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new fR(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function aN(n){return"imperative"!==n}class uN{}class lN{preload(e,t){return at(null)}}let cN=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new sN(i,r,_=>t.triggerEvent(new pR(_)),_=>t.triggerEvent(new gR(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(Nr(t=>t instanceof T0),D0(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,Kt.D)(i).pipe((0,Ja.J)(),(0,Pt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?at(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,us.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(No),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(uN))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),qA=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof AA?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof T0&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof mR&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new mR(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const zp=new g.OlP("ROUTER_CONFIGURATION"),dN=new g.OlP("ROUTER_FORROOT_GUARD"),yL=[Ee,{provide:TR,useClass:AR},{provide:No,useFactory:function bL(n,e,t,r,i,u,c={},f,_){const b=new No(null,n,e,t,r,i,vR(u));return f&&(b.urlHandlingStrategy=f),_&&(b.routeReuseStrategy=_),function IL(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,b),c.enableTracing&&b.events.subscribe(S=>{var M,F;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(F=console.groupEnd)||void 0===F||F.call(console)}),b},deps:[TR,P0,Ee,g.zs3,g.Sil,$A,zp,[class aL{},new g.FiY],[class iL{},new g.FiY]]},P0,{provide:_y,useFactory:function CL(n){return n.routerState.root},deps:[No]},cN,lN,class mL{preload(e,t){return t().pipe(Qh(()=>at(null)))}},{provide:zp,useValue:{enableTracing:!1}}];function _L(){return new g.PXZ("Router",No)}let hN=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[yL,fN(t),{provide:dN,useFactory:wL,deps:[[No,new g.FiY,new g.tp0]]},{provide:zp,useValue:r||{}},{provide:pe,useFactory:EL,deps:[se,[new g.tBr(ze),new g.FiY],zp]},{provide:qA,useFactory:vL,deps:[No,kl,zp]},{provide:uN,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:lN},{provide:g.PXZ,multi:!0,useFactory:_L},[zA,{provide:g.ip1,multi:!0,useFactory:DL,deps:[zA]},{provide:pN,useFactory:TL,deps:[zA]},{provide:g.tb,multi:!0,useExisting:pN}]]}}static forChild(t){return{ngModule:n,providers:[fN(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(dN,8),g.LFG(No,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function vL(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new qA(n,e,t)}function EL(n,e,t={}){return t.useHash?new De(n,e):new Qe(n,e)}function wL(n){return"guarded"}function fN(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:$A,multi:!0,useValue:n}]}let zA=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new cd.x}appInitializer(){return this.injector.get(H,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),u=this.injector.get(No),c=this.injector.get(zp);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?at(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(zp),i=this.injector.get(cN),u=this.injector.get(qA),c=this.injector.get(No),f=this.injector.get(g.z2F);t===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),u.init(),c.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function DL(n){return n.appInitializer.bind(n)}function TL(n){return n.bootstrapListener.bind(n)}const pN=new g.OlP("Router Initializer");function SL(n,e){1&n&&(g.TgZ(0,"div",21)(1,"div",17),g._uU(2,"Getting certificate..."),g.qZA()())}function ML(n,e){if(1&n&&(g.TgZ(0,"div",22),g._uU(1),g.qZA()),2&n){const t=g.oxw();g.Q6J("ngClass",t.success?"text-success":"text-danger"),g.xp6(1),g.Oqu(t.alert)}}let xL=(()=>{class n{constructor(t){this.firestore=t,this.eventId=1,this.success=!1,this.loading=!1,this.itemsCollection=t.collection("certificate")}ngOnInit(){this.generateCAPTCHA()}getCertificate(){return this.aadharNumber?12!=this.aadharNumber.toString().length?(this.alert="*Please enter valid aadhar number",void this.clearError()):this.generatedCaptcha!=this.captcha?(this.alert="Invalid Captcha....",void this.clearError()):(this.loading=!0,void this.firestore.collection("certificate",t=>t.where("aadhaarNumber","==",this.aadharNumber)).valueChanges().subscribe(t=>{this.loading=!1,this.success=!0,this.items=t,this.captcha="",this.generateCAPTCHA()})):(this.alert="*Please enter aadhar number",void this.clearError())}generateCAPTCHA(){this.generatedCaptcha=Math.random().toString(36).substring(7)}clearError(){setTimeout(()=>{this.alert="",this.success=!1},2e3)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(GT))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-download-certificate"]],decls:41,vars:5,consts:[["class","loading",4,"ngIf"],[1,"container","bg-border","mt-20"],[1,"bold"],[1,"shadow"],[1,"upload-title","mt-20"],[1,"col-12","col-lg-6","offset-lg-3"],[1,"row","mt-20"],[1,"col-12","col-lg-6","margin-auto","title"],[1,"col-12","col-lg-6"],["type","text",1,"box-border",3,"ngModel","ngModelChange"],[1,"pointer"],[1,"box-border"],[1,"row","mt-20","mb-20"],[1,"col-12","col-lg-6","margin-auto","mb-center"],["type","button","id","show_captcha_button",1,"button","captcha"],[1,"col-12","col-lg-6","margin-auto"],["type","text","placeholder","Enter captcha",1,"box-border",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-12","text-center"],[3,"ngClass",4,"ngIf"],["type","button",1,"btn","btn-blue",3,"click"],[1,"loading"],[3,"ngClass"]],template:function(t,r){1&t&&(g.YNc(0,SL,3,0,"div",0),g.TgZ(1,"section",1)(2,"div",2),g._uU(3,"*Note"),g.qZA(),g._uU(4," Enter your aadhar card number and select the event name of the certificate to be downloaded "),g.TgZ(5,"div",3)(6,"div",4),g._uU(7,"Certificate center"),g.qZA(),g.TgZ(8,"div",5)(9,"div",6)(10,"div",7),g._uU(11," Aadhar card number "),g.qZA(),g.TgZ(12,"div",8)(13,"input",9),g.NdJ("ngModelChange",function(u){return r.aadharNumber=u}),g.qZA()()(),g.TgZ(14,"div",6)(15,"div",7),g._uU(16," Event Name "),g.qZA(),g.TgZ(17,"div",8)(18,"span",10)(19,"select",11)(20,"option"),g._uU(21,"Master royal cup 2022"),g.qZA(),g.TgZ(22,"option"),g._uU(23,"Grand Prix international 2022"),g.qZA(),g.TgZ(24,"option"),g._uU(25,"State level silambam Tournament"),g.qZA(),g.TgZ(26,"option"),g._uU(27,"TN open championship 2021"),g.qZA(),g.TgZ(28,"option"),g._uU(29,"Silimbam Interdistrict 2021"),g.qZA()()()()(),g.TgZ(30,"div",12)(31,"div",13)(32,"button",14),g._uU(33),g.qZA()(),g.TgZ(34,"div",15)(35,"input",16),g.NdJ("ngModelChange",function(u){return r.captcha=u}),g.qZA()()(),g.TgZ(36,"div",17)(37,"div",18),g.YNc(38,ML,2,2,"div",19),g.TgZ(39,"button",20),g.NdJ("click",function(){return r.getCertificate()}),g._uU(40,"Download"),g.qZA()()()()()()),2&t&&(g.Q6J("ngIf",r.loading),g.xp6(13),g.Q6J("ngModel",r.aadharNumber),g.xp6(20),g.Oqu(r.generatedCaptcha),g.xp6(2),g.Q6J("ngModel",r.captcha),g.xp6(3),g.Q6J("ngIf",r.alert))},directives:[Xn,E0,oA,PI,bA,CA,Ui],styles:['.button[_ngcontent-%COMP%]{background:#efefef;border:none;width:200px;padding:20px;border-radius:45px;color:#6495ed;font-size:1rem;letter-spacing:.1rem;text-align:center;outline:none;cursor:pointer;transition:.4s ease-in-out;font-style:italic;box-shadow:-6px -6px 14px #ffffffb3,-6px -6px 10px #ffffff80,6px 6px 8px #ffffff14,6px 6px 10px #00000026}.button[_ngcontent-%COMP%]:hover{box-shadow:var(--main-box-shadow-hover)}.captcha_textfield[_ngcontent-%COMP%]{border-radius:10px;border:none;background:var(--main-bg-color);box-shadow:var(--main-textfield-focus-shadow);margin:10px 10px 10px 0;padding:10px;color:var(--main-text-color);font-size:1rem;transition:.4s ease-in-out}.captcha_textfield[_ngcontent-%COMP%]:focus{box-shadow:var(--main-textfield-enabled-shadow);outline:none}.verify_button[_ngcontent-%COMP%]{background:var(--main-bg-color);border:none;width:auto;padding:10px;border-radius:45px;color:var(--main-text-color);font-size:1rem;letter-spacing:.1rem;text-align:center;outline:none;cursor:pointer;transition:.4s ease-in-out;box-shadow:var(--main-box-shadow);margin-left:15px}.verify_button[_ngcontent-%COMP%]:hover{box-shadow:var(--main-box-shadow-hover)}.btn-blue[_ngcontent-%COMP%]{border-radius:10px!important;padding:10px!important;width:120px;margin-bottom:20px;background:#0786d9;color:#fff}.red[_ngcontent-%COMP%]{color:red}.loading[_ngcontent-%COMP%]{position:fixed;z-index:999;overflow:show;margin:auto;top:0;left:0;bottom:0;right:0;width:50px;height:50px}.loading[_ngcontent-%COMP%]:before{content:"";display:block;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#ffffff80}.loading[_ngcontent-%COMP%]:not(:required):after{content:"";display:block;font-size:10px;width:90px;height:90px;margin-top:-.5em;border:5px solid #c6a9e4;border-radius:100%;border-bottom-color:transparent;animation:spinner 1s linear 0s infinite}']}),n})();const gN_firebase={apiKey:"AIzaSyDMfqjZ6Fo4O8dv7Z79pMN64REi7talV5A",authDomain:"vks-trust.firebaseapp.com",projectId:"vks-trust",storageBucket:"vks-trust.appspot.com",messagingSenderId:"15646034500",appId:"1:15646034500:web:00998a1ca3f439a8554a11",measurementId:"G-6CD7LB5R1G"},RL=[{path:"",component:uR},{path:"download-certificate",component:xL}];let NL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[hN.forRoot(RL),Cn.hO.initializeApp(gN_firebase),bP,d1],hN]}),n})();class mN{}const yd="*";function yN(n,e=null){return{type:2,steps:n,options:e}}function _N(n){return{type:6,styles:n,offset:null}}function vN(n){Promise.resolve(null).then(n)}class L0{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){vN(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class EN{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?vN(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,f)=>Math.max(c,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const Qt=!1;function wN(n){return new g.vHH(3e3,Qt)}function fV(){return"undefined"!=typeof window&&void 0!==window.document}function KA(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Xh(n){switch(n.length){case 0:return new L0;case 1:return n[0];default:return new EN(n)}}function bN(n,e,t,r,i={},u={}){const c=[],f=[];let _=-1,b=null;if(r.forEach(S=>{const M=S.offset,F=M==_,B=F&&b||{};Object.keys(S).forEach(z=>{let ce=z,Te=S[z];if("offset"!==z)switch(ce=e.normalizePropertyName(ce,c),Te){case"!":Te=i[z];break;case yd:Te=u[z];break;default:Te=e.normalizeStyleValue(z,ce,Te,c)}B[ce]=Te}),F||f.push(B),b=B,_=M}),c.length)throw function nV(n){return new g.vHH(3502,Qt)}();return f}function ZA(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&YA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&YA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&YA(t,"destroy",n)))}}function YA(n,e,t){const r=t.totalTime,u=QA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function QA(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function Po(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function IN(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let JA=(n,e)=>!1,CN=(n,e,t)=>[],DN=null;function XA(n){const e=n.parentNode||n.host;return e===DN?null:e}(KA()||"undefined"!=typeof Element)&&(fV()?(DN=(()=>document.documentElement)(),JA=(n,e)=>{for(;e;){if(e===n)return!0;e=XA(e)}return!1}):JA=(n,e)=>n.contains(e),CN=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Wp=null,TN=!1;function AN(n){Wp||(Wp=function gV(){return"undefined"!=typeof document?document.body:null}()||{},TN=!!Wp.style&&"WebkitAppearance"in Wp.style);let e=!0;return Wp.style&&!function pV(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Wp.style,!e&&TN&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Wp.style)),e}const SN=JA,MN=CN;let xN=(()=>{class n{validateStyleProperty(t){return AN(t)}matchesElement(t,r){return!1}containsElement(t,r){return SN(t,r)}getParentElement(t){return XA(t)}query(t,r,i){return MN(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,f=[],_){return new L0(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),eS=(()=>{class n{}return n.NOOP=new xN,n})();const tS="ng-enter",QI="ng-leave",JI="ng-trigger",XI=".ng-trigger",NN="ng-animating",nS=".ng-animating";function Kp(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:rS(parseFloat(e[1]),e[2])}function rS(n,e){return"s"===e?1e3*n:n}function eC(n,e,t){return n.hasOwnProperty("duration")?n:function _V(n,e,t){let i,u=0,c="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(wN()),{duration:0,delay:0,easing:""};i=rS(parseFloat(f[1]),f[2]);const _=f[3];null!=_&&(u=rS(parseFloat(_),f[4]));const b=f[5];b&&(c=b)}else i=n;if(!t){let f=!1,_=e.length;i<0&&(e.push(function OL(){return new g.vHH(3100,Qt)}()),f=!0),u<0&&(e.push(function kL(){return new g.vHH(3101,Qt)}()),f=!0),f&&e.splice(_,0,wN())}return{duration:i,delay:u,easing:c}}(n,e,t)}function Ey(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function ef(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Ey(n,t);return t}function ON(n,e,t){return t?e+":"+t+";":""}function kN(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=ON(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=ON(0,wV(t),n.style[t]));n.setAttribute("style",e)}function xl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=sS(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),KA()&&kN(n))}function Zp(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=sS(t);n.style[r]=""}),KA()&&kN(n))}function V0(n){return Array.isArray(n)?1==n.length?n[0]:yN(n):n}const iS=new RegExp("{{\\s*(.+?)\\s*}}","g");function FN(n){let e=[];if("string"==typeof n){let t;for(;t=iS.exec(n);)e.push(t[1]);iS.lastIndex=0}return e}function tC(n,e,t){const r=n.toString(),i=r.replace(iS,(u,c)=>{let f=e[c];return e.hasOwnProperty(c)||(t.push(function LL(n){return new g.vHH(3003,Qt)}()),f=""),f.toString()});return i==r?n:i}function nC(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const EV=/-+([a-z0-9])/g;function sS(n){return n.replace(EV,(...e)=>e[1].toUpperCase())}function wV(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Oo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function VL(n){return new g.vHH(3004,Qt)}()}}function LN(n,e){return window.getComputedStyle(n)[e]}function AV(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function SV(n,e,t){if(":"==n[0]){const _=function MV(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function JL(n){return new g.vHH(3016,Qt)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function QL(n){return new g.vHH(3015,Qt)}()),e;const i=r[1],u=r[2],c=r[3];e.push(VN(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(VN(c,i))}(r,t,e)):t.push(n),t}const oC=new Set(["true","1"]),aC=new Set(["false","0"]);function VN(n,e){const t=oC.has(n)||aC.has(n),r=oC.has(e)||aC.has(e);return(i,u)=>{let c="*"==n||n==i,f="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?oC.has(n):aC.has(n)),!f&&r&&"boolean"==typeof u&&(f=u?oC.has(e):aC.has(e)),c&&f}}const xV=new RegExp("s*:selfs*,?","g");function oS(n,e,t,r){return new RV(n).build(e,t,r)}class RV{constructor(e){this._driver=e}build(e,t,r){const i=new OV(t);this._resetContextStyleTimingState(i);const u=Oo(this,V0(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function BL(){return new g.vHH(3006,Qt)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const _=f,b=_.name;b.toString().split(/\s*,\s*/).forEach(S=>{_.name=S,u.push(this.visitState(_,t))}),_.name=b}else if(1==f.type){const _=this.visitTransition(f,t);r+=_.queryCount,i+=_.depCount,c.push(_)}else t.errors.push(function jL(){return new g.vHH(3007,Qt)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(f=>{if(uC(f)){const _=f;Object.keys(_).forEach(b=>{FN(_[b]).forEach(S=>{c.hasOwnProperty(S)||u.add(S)})})}}),u.size&&(nC(u.values()),t.errors.push(function $L(n,e){return new g.vHH(3008,Qt)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Oo(this,V0(e.animation),t);return{type:1,matchers:AV(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Yp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Oo(this,r,t)),options:Yp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const f=Oo(this,c,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:u,options:Yp(e.options)}}visitAnimate(e,t){const r=function FV(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return aS(eC(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=aS(0,0,"");return u.dynamic=!0,u.strValue=r,u}return t=t||eC(r,e),aS(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:_N({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,f=!1;if(!c){f=!0;const b={};r.easing&&(b.easing=r.easing),c=_N(b)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(c,t);_.isEmptyStep=f,i=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==yd?r.push(c):t.errors.push(function HL(n){return new g.vHH(3002,Qt)}()):r.push(c)}):r.push(e.styles);let i=!1,u=null;return r.forEach(c=>{if(uC(c)){const f=c,_=f.easing;if(_&&(u=_,delete f.easing),!i)for(let b in f)if(f[b].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(f=>{if(!this._driver.validateStyleProperty(f))return delete c[f],void t.unsupportedCSSPropertiesFound.add(f);const _=t.collectedStyles[t.currentQuerySelector],b=_[f];let S=!0;b&&(u!=i&&u>=b.startTime&&i<=b.endTime&&(t.errors.push(function GL(n,e,t,r,i){return new g.vHH(3010,Qt)}()),S=!1),u=b.startTime),S&&(_[f]={startTime:u,endTime:i}),t.options&&function vV(n,e,t){const r=e.params||{},i=FN(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function FL(n){return new g.vHH(3001,Qt)}())})}(c[f],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function qL(){return new g.vHH(3011,Qt)}()),r;let u=0;const c=[];let f=!1,_=!1,b=0;const S=e.steps.map(it=>{const ot=this._makeStyleAst(it,t);let nt=null!=ot.offset?ot.offset:function kV(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(uC(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(uC(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(ot.styles),Ze=0;return null!=nt&&(u++,Ze=ot.offset=nt),_=_||Ze<0||Ze>1,f=f||Ze<b,b=Ze,c.push(Ze),ot});_&&t.errors.push(function zL(){return new g.vHH(3012,Qt)}()),f&&t.errors.push(function WL(){return new g.vHH(3200,Qt)}());const M=e.steps.length;let F=0;u>0&&u<M?t.errors.push(function KL(){return new g.vHH(3202,Qt)}()):0==u&&(F=1/(M-1));const B=M-1,z=t.currentTime,ce=t.currentAnimateTimings,Te=ce.duration;return S.forEach((it,ot)=>{const nt=F>0?ot==B?1:F*ot:c[ot],Ze=nt*Te;t.currentTime=z+ce.delay+Ze,ce.duration=Ze,this._validateStyleAst(it,t),it.offset=nt,r.styles.push(it)}),r}visitReference(e,t){return{type:8,animation:Oo(this,V0(e.animation),t),options:Yp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Yp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Yp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function NV(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(xV,"")),n=n.replace(/@\*/g,XI).replace(/@\w+/g,t=>XI+"-"+t.substr(1)).replace(/:animating/g,nS),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Po(t.collectedStyles,t.currentQuerySelector,{});const f=Oo(this,V0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:f,originalSelector:e.selector,options:Yp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function ZL(){return new g.vHH(3013,Qt)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:eC(e.timings,t.errors,!0);return{type:12,animation:Oo(this,V0(e.animation),t),timings:r,options:null}}}class OV{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function uC(n){return!Array.isArray(n)&&"object"==typeof n}function Yp(n){return n?(n=Ey(n)).params&&(n.params=function PV(n){return n?Ey(n):null}(n.params)):n={},n}function aS(n,e,t){return{duration:n,delay:e,easing:t}}function uS(n,e,t,r,i,u,c=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:f}}class lC{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const UV=new RegExp(":enter","g"),jV=new RegExp(":leave","g");function lS(n,e,t,r,i,u={},c={},f,_,b=[]){return(new $V).buildKeyframes(n,e,t,r,i,u,c,f,_,b)}class $V{buildKeyframes(e,t,r,i,u,c,f,_,b,S=[]){b=b||new lC;const M=new cS(e,t,b,i,u,S,[]);M.options=_,M.currentTimeline.setStyles([c],null,M.errors,_),Oo(this,r,M);const F=M.timelines.filter(B=>B.containsAnimation());if(Object.keys(f).length){let B;for(let z=F.length-1;z>=0;z--){const ce=F[z];if(ce.element===t){B=ce;break}}B&&!B.allowOnlyTimelineStyles()&&B.setStyles([f],null,M.errors,_)}return F.length?F.map(B=>B.buildKeyframes()):[uS(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?Kp(r.duration):null,f=null!=r.delay?Kp(r.delay):null;return 0!==c&&e.forEach(_=>{const b=t.appendInstructionToTimeline(_,c,f);u=Math.max(u,b.duration+b.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Oo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=cC);const c=Kp(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Oo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?Kp(e.options.delay):0;e.steps.forEach(c=>{const f=t.createSubContext(e.options);u&&f.delayNextStep(u),Oo(this,c,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return eC(t.params?tC(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(_=>{f.forwardTime((_.offset||0)*u),f.setStyles(_.styles,_.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?Kp(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=cC);let c=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let _=null;f.forEach((b,S)=>{t.currentQueryIndex=S;const M=t.createSubContext(e.options,b);u&&M.delayNextStep(u),b===t.element&&(_=M.currentTimeline),Oo(this,e.animation,M),M.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,M.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),f=c*(t.currentQueryTotal-1);let _=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":_=f-_;break;case"full":_=r.currentStaggerTime}const S=t.currentTimeline;_&&S.delayNextStep(_);const M=S.currentTime;Oo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-M+(i.startTime-r.currentTimeline.startTime)}}const cC={};class cS{constructor(e,t,r,i,u,c,f,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=cC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new dC(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Kp(r.duration)),null!=r.delay&&(i.delay=Kp(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(f=>{(!t||!c.hasOwnProperty(f))&&(c[f]=tC(u[f],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new cS(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=cC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new HV(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(UV,"."+this._enterClassName)).replace(jV,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),f.push(...b)}return!u&&0==f.length&&c.push(function YL(n){return new g.vHH(3014,Qt)}()),f}}class dC{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new dC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||yd,this._currentKeyframe[t]=yd}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const u=i&&i.params||{},c=function GV(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(u=>{t[u]=yd})):ef(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(f=>{const _=tC(c[f],u,r);this._pendingStyles[f]=_,this._localTimelineStyles.hasOwnProperty(f)||(this._backFill[f]=this._globalTimelineStyles.hasOwnProperty(f)?this._globalTimelineStyles[f]:yd),this._updateStyle(f,_)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,_)=>{const b=ef(f,!0);Object.keys(b).forEach(S=>{const M=b[S];"!"==M?e.add(S):M==yd&&t.add(S)}),r||(b.offset=_/this.duration),i.push(b)});const u=e.size?nC(e.values()):[],c=t.size?nC(t.values()):[];if(r){const f=i[0],_=Ey(f);f.offset=0,_.offset=1,i=[f,_]}return uS(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class HV extends dC{constructor(e,t,r,i,u,c,f=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=f,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,f=t/c,_=ef(e[0],!1);_.offset=0,u.push(_);const b=ef(e[0],!1);b.offset=jN(f),u.push(b);const S=e.length-1;for(let M=1;M<=S;M++){let F=ef(e[M],!1);F.offset=jN((t+F.offset*r)/c),u.push(F)}r=c,t=0,i="",e=u}return uS(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function jN(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class dS{}class qV extends dS{normalizePropertyName(e,t){return sS(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(zV[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function UL(n,e){return new g.vHH(3005,Qt)}())}return c+u}}const zV=(()=>function WV(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function $N(n,e,t,r,i,u,c,f,_,b,S,M,F){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:f,queriedElements:_,preStyleProps:b,postStyleProps:S,totalTime:M,errors:F}}const hS={};class HN{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function KV(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],u=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,i,u,c,f,_,b,S){const M=[],F=this.ast.options&&this.ast.options.params||hS,z=this.buildStyles(r,f&&f.params||hS,M),ce=_&&_.params||hS,Te=this.buildStyles(i,ce,M),it=new Set,ot=new Map,nt=new Map,Ze="void"===i,St={params:Object.assign(Object.assign({},F),ce)},Rt=S?[]:lS(e,t,this.ast.animation,u,c,z,Te,St,b,M);let Jt=0;if(Rt.forEach(ko=>{Jt=Math.max(ko.duration+ko.delay,Jt)}),M.length)return $N(t,this._triggerName,r,i,Ze,z,Te,[],[],ot,nt,Jt,M);Rt.forEach(ko=>{const _d=ko.element,sP=Po(ot,_d,{});ko.preStyleProps.forEach(Qp=>sP[Qp]=!0);const B0=Po(nt,_d,{});ko.postStyleProps.forEach(Qp=>B0[Qp]=!0),_d!==t&&it.add(_d)});const Dr=nC(it.values());return $N(t,this._triggerName,r,i,Ze,z,Te,Rt,Dr,ot,nt,Jt)}}class ZV{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Ey(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(i[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(f=>{let _=c[f];_.length>1&&(_=tC(_,i,t));const b=this.normalizer.normalizePropertyName(f,t);_=this.normalizer.normalizeStyleValue(f,b,_,t),r[b]=_})}}),r}}class QV{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new ZV(i.style,i.options&&i.options.params||{},r)}),GN(this.states,"true","1"),GN(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new HN(e,i,this.states))}),this.fallbackTransition=function JV(n,e,t){return new HN(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function GN(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const XV=new lC;class eU{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=oS(this._driver,t,r,[]);if(r.length)throw function rV(n){return new g.vHH(3503,Qt)}();this._animations[e]=u}_buildPlayer(e,t,r){const i=e.element,u=bN(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations[e];let c;const f=new Map;if(u?(c=lS(this._driver,t,u,tS,QI,{},{},r,XV,i),c.forEach(S=>{const M=Po(f,S.element,{});S.postStyleProps.forEach(F=>M[F]=null)})):(i.push(function iV(){return new g.vHH(3300,Qt)}()),c=[]),i.length)throw function sV(n){return new g.vHH(3504,Qt)}();f.forEach((S,M)=>{Object.keys(S).forEach(F=>{S[F]=this._driver.computeStyle(M,F,yd)})});const b=Xh(c.map(S=>{const M=f.get(S.element);return this._buildPlayer(S,{},M)}));return this._playersById[e]=b,b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function oV(n){return new g.vHH(3301,Qt)}();return t}listen(e,t,r,i){const u=QA(t,"","","");return ZA(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const qN="ng-animate-queued",fS="ng-animate-disabled",sU=[],zN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},oU={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Na="__ng_removed";class pS{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function cU(n){return null!=n?n:null}(r?e.value:e),r){const u=Ey(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const U0="void",gS=new pS(U0);class aU{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Pa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function aV(n,e){return new g.vHH(3302,Qt)}();if(null==r||0==r.length)throw function uV(n){return new g.vHH(3303,Qt)}();if(!function dU(n){return"start"==n||"done"==n}(r))throw function lV(n,e){return new g.vHH(3400,Qt)}();const u=Po(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const f=Po(this._engine.statesByElement,e,{});return f.hasOwnProperty(t)||(Pa(e,JI),Pa(e,JI+"-"+t),f[t]=gS),()=>{this._engine.afterFlush(()=>{const _=u.indexOf(c);_>=0&&u.splice(_,1),this._triggers[t]||delete f[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function cV(n){return new g.vHH(3401,Qt)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new mS(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(Pa(e,JI),Pa(e,JI+"-"+t),this._engine.statesByElement.set(e,f={}));let _=f[t];const b=new pS(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&b.absorbOptions(_.options),f[t]=b,_||(_=gS),b.value!==U0&&_.value===b.value){if(!function pU(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(_.params,b.params)){const ce=[],Te=u.matchStyles(_.value,_.params,ce),it=u.matchStyles(b.value,b.params,ce);ce.length?this._engine.reportError(ce):this._engine.afterFlush(()=>{Zp(e,Te),xl(e,it)})}return}const F=Po(this._engine.playersByElement,e,[]);F.forEach(ce=>{ce.namespaceId==this.id&&ce.triggerName==t&&ce.queued&&ce.destroy()});let B=u.matchTransition(_.value,b.value,e,b.params),z=!1;if(!B){if(!i)return;B=u.fallbackTransition,z=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:B,fromState:_,toState:b,player:c,isFallbackTransition:z}),z||(Pa(e,qN),c.onStart(()=>{wy(e,qN)})),c.onDone(()=>{let ce=this.players.indexOf(c);ce>=0&&this.players.splice(ce,1);const Te=this._engine.playersByElement.get(e);if(Te){let it=Te.indexOf(c);it>=0&&Te.splice(it,1)}}),this.players.push(c),F.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,XI,!0);r.forEach(i=>{if(i[Na])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const f=[];if(Object.keys(u).forEach(_=>{if(c.set(_,u[_].value),this._triggers[_]){const b=this.trigger(e,_,U0,i);b&&f.push(b)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Xh(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const _=this._triggers[c].fallbackTransition,b=r[c]||gS,S=new pS(U0),M=new mS(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:_,fromState:b,toState:S,player:M,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[Na];(!u||u===zN)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Pa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(f=>{if(f.name==r.triggerName){const _=QA(u,r.triggerName,r.fromState.value,r.toState.value);_._data=e,ZA(r.player,f.phase,_,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class uU{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new aU(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let f=this.driver.getParentElement(t);for(;f;){const _=i.get(f);if(_){const b=r.indexOf(_);r.splice(b+1,0,e),c=!0;break}f=this.driver.getParentElement(f)}}else for(let f=u;f>=0;f--)if(this.driver.containsElement(r[f].hostElement,t)){r.splice(f+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let u=0;u<i.length;u++){const c=r[i[u]].namespaceId;if(c){const f=this._fetchNamespace(c);f&&t.add(f)}}}return t}trigger(e,t,r,i){if(hC(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!hC(t))return;const u=t[Na];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Pa(e,fS)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),wy(e,fS))}removeNode(e,t,r,i){if(hC(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[Na]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return hC(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,XI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,nS,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Xh(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Na];if(r&&r.setForRemoval){if(e[Na]=zN,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(fS))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Pa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Xh(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function dV(n){return new g.vHH(3402,Qt)}()}_flushAnimations(e,t){const r=new lC,i=[],u=new Map,c=[],f=new Map,_=new Map,b=new Map,S=new Set;this.disabledNodes.forEach(ct=>{S.add(ct);const Dt=this.driver.query(ct,".ng-animate-queued",!0);for(let Ot=0;Ot<Dt.length;Ot++)S.add(Dt[Ot])});const M=this.bodyNode,F=Array.from(this.statesByElement.keys()),B=ZN(F,this.collectedEnterElements),z=new Map;let ce=0;B.forEach((ct,Dt)=>{const Ot=tS+ce++;z.set(Dt,Ot),ct.forEach(sn=>Pa(sn,Ot))});const Te=[],it=new Set,ot=new Set;for(let ct=0;ct<this.collectedLeaveElements.length;ct++){const Dt=this.collectedLeaveElements[ct],Ot=Dt[Na];Ot&&Ot.setForRemoval&&(Te.push(Dt),it.add(Dt),Ot.hasAnimation?this.driver.query(Dt,".ng-star-inserted",!0).forEach(sn=>it.add(sn)):ot.add(Dt))}const nt=new Map,Ze=ZN(F,Array.from(it));Ze.forEach((ct,Dt)=>{const Ot=QI+ce++;nt.set(Dt,Ot),ct.forEach(sn=>Pa(sn,Ot))}),e.push(()=>{B.forEach((ct,Dt)=>{const Ot=z.get(Dt);ct.forEach(sn=>wy(sn,Ot))}),Ze.forEach((ct,Dt)=>{const Ot=nt.get(Dt);ct.forEach(sn=>wy(sn,Ot))}),Te.forEach(ct=>{this.processLeaveNode(ct)})});const St=[],Rt=[];for(let ct=this._namespaceList.length-1;ct>=0;ct--)this._namespaceList[ct].drainQueuedTransitions(t).forEach(Ot=>{const sn=Ot.player,wi=Ot.element;if(St.push(sn),this.collectedEnterElements.length){const xs=wi[Na];if(xs&&xs.setForMove){if(xs.previousTriggersValues&&xs.previousTriggersValues.has(Ot.triggerName)){const Jp=xs.previousTriggersValues.get(Ot.triggerName),nf=this.statesByElement.get(Ot.element);nf&&nf[Ot.triggerName]&&(nf[Ot.triggerName].value=Jp)}return void sn.destroy()}}const Rl=!M||!this.driver.containsElement(M,wi),Fo=nt.get(wi),tf=z.get(wi),ir=this._buildInstruction(Ot,r,tf,Fo,Rl);if(ir.errors&&ir.errors.length)return void Rt.push(ir);if(Rl)return sn.onStart(()=>Zp(wi,ir.fromStyles)),sn.onDestroy(()=>xl(wi,ir.toStyles)),void i.push(sn);if(Ot.isFallbackTransition)return sn.onStart(()=>Zp(wi,ir.fromStyles)),sn.onDestroy(()=>xl(wi,ir.toStyles)),void i.push(sn);const uP=[];ir.timelines.forEach(xs=>{xs.stretchStartingKeyframe=!0,this.disabledNodes.has(xs.element)||uP.push(xs)}),ir.timelines=uP,r.append(wi,ir.timelines),c.push({instruction:ir,player:sn,element:wi}),ir.queriedElements.forEach(xs=>Po(f,xs,[]).push(sn)),ir.preStyleProps.forEach((xs,Jp)=>{const nf=Object.keys(xs);if(nf.length){let Xp=_.get(Jp);Xp||_.set(Jp,Xp=new Set),nf.forEach(_S=>Xp.add(_S))}}),ir.postStyleProps.forEach((xs,Jp)=>{const nf=Object.keys(xs);let Xp=b.get(Jp);Xp||b.set(Jp,Xp=new Set),nf.forEach(_S=>Xp.add(_S))})});if(Rt.length){const ct=[];Rt.forEach(Dt=>{ct.push(function hV(n,e){return new g.vHH(3505,Qt)}())}),St.forEach(Dt=>Dt.destroy()),this.reportError(ct)}const Jt=new Map,Dr=new Map;c.forEach(ct=>{const Dt=ct.element;r.has(Dt)&&(Dr.set(Dt,Dt),this._beforeAnimationBuild(ct.player.namespaceId,ct.instruction,Jt))}),i.forEach(ct=>{const Dt=ct.element;this._getPreviousPlayers(Dt,!1,ct.namespaceId,ct.triggerName,null).forEach(sn=>{Po(Jt,Dt,[]).push(sn),sn.destroy()})});const ko=Te.filter(ct=>QN(ct,_,b)),_d=new Map;KN(_d,this.driver,ot,b,yd).forEach(ct=>{QN(ct,_,b)&&ko.push(ct)});const B0=new Map;B.forEach((ct,Dt)=>{KN(B0,this.driver,new Set(ct),_,"!")}),ko.forEach(ct=>{const Dt=_d.get(ct),Ot=B0.get(ct);_d.set(ct,Object.assign(Object.assign({},Dt),Ot))});const Qp=[],oP=[],aP={};c.forEach(ct=>{const{element:Dt,player:Ot,instruction:sn}=ct;if(r.has(Dt)){if(S.has(Dt))return Ot.onDestroy(()=>xl(Dt,sn.toStyles)),Ot.disabled=!0,Ot.overrideTotalTime(sn.totalTime),void i.push(Ot);let wi=aP;if(Dr.size>1){let Fo=Dt;const tf=[];for(;Fo=Fo.parentNode;){const ir=Dr.get(Fo);if(ir){wi=ir;break}tf.push(Fo)}tf.forEach(ir=>Dr.set(ir,wi))}const Rl=this._buildAnimation(Ot.namespaceId,sn,Jt,u,B0,_d);if(Ot.setRealPlayer(Rl),wi===aP)Qp.push(Ot);else{const Fo=this.playersByElement.get(wi);Fo&&Fo.length&&(Ot.parentPlayer=Xh(Fo)),i.push(Ot)}}else Zp(Dt,sn.fromStyles),Ot.onDestroy(()=>xl(Dt,sn.toStyles)),oP.push(Ot),S.has(Dt)&&i.push(Ot)}),oP.forEach(ct=>{const Dt=u.get(ct.element);if(Dt&&Dt.length){const Ot=Xh(Dt);ct.setRealPlayer(Ot)}}),i.forEach(ct=>{ct.parentPlayer?ct.syncPlayerEvents(ct.parentPlayer):ct.destroy()});for(let ct=0;ct<Te.length;ct++){const Dt=Te[ct],Ot=Dt[Na];if(wy(Dt,QI),Ot&&Ot.hasAnimation)continue;let sn=[];if(f.size){let Rl=f.get(Dt);Rl&&Rl.length&&sn.push(...Rl);let Fo=this.driver.query(Dt,nS,!0);for(let tf=0;tf<Fo.length;tf++){let ir=f.get(Fo[tf]);ir&&ir.length&&sn.push(...ir)}}const wi=sn.filter(Rl=>!Rl.destroyed);wi.length?hU(this,Dt,wi):this.processLeaveNode(Dt)}return Te.length=0,Qp.forEach(ct=>{this.players.push(ct),ct.onDone(()=>{ct.destroy();const Dt=this.players.indexOf(ct);this.players.splice(Dt,1)}),ct.play()}),Qp}elementContainsData(e,t){let r=!1;const i=t[Na];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(c=f)}else{const f=this.playersByElement.get(e);if(f){const _=!u||u==U0;f.forEach(b=>{b.queued||!_&&b.triggerName!=i||c.push(b)})}}return(r||i)&&(c=c.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const b=_.element,S=b!==u,M=Po(r,b,[]);this._getPreviousPlayers(b,S,c,f,t.toState).forEach(B=>{const z=B.getRealPlayer();z.beforeDestroy&&z.beforeDestroy(),B.destroy(),M.push(B)})}Zp(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const f=t.triggerName,_=t.element,b=[],S=new Set,M=new Set,F=t.timelines.map(z=>{const ce=z.element;S.add(ce);const Te=ce[Na];if(Te&&Te.removedBeforeQueried)return new L0(z.duration,z.delay);const it=ce!==_,ot=function fU(n){const e=[];return YN(n,e),e}((r.get(ce)||sU).map(Jt=>Jt.getRealPlayer())).filter(Jt=>!!Jt.element&&Jt.element===ce),nt=u.get(ce),Ze=c.get(ce),St=bN(0,this._normalizer,0,z.keyframes,nt,Ze),Rt=this._buildPlayer(z,St,ot);if(z.subTimeline&&i&&M.add(ce),it){const Jt=new mS(e,f,ce);Jt.setRealPlayer(Rt),b.push(Jt)}return Rt});b.forEach(z=>{Po(this.playersByQueriedElement,z.element,[]).push(z),z.onDone(()=>function lU(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,z.element,z))}),S.forEach(z=>Pa(z,NN));const B=Xh(F);return B.onDestroy(()=>{S.forEach(z=>wy(z,NN)),xl(_,t.toStyles)}),M.forEach(z=>{Po(i,z,[]).push(B)}),B}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new L0(e.duration,e.delay)}}class mS{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new L0,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>ZA(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Po(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function hC(n){return n&&1===n.nodeType}function WN(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function KN(n,e,t,r,i){const u=[];t.forEach(_=>u.push(WN(_)));const c=[];r.forEach((_,b)=>{const S={};_.forEach(M=>{const F=S[M]=e.computeStyle(b,M,i);(!F||0==F.length)&&(b[Na]=oU,c.push(b))}),n.set(b,S)});let f=0;return t.forEach(_=>WN(_,u[f++])),c}function ZN(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(f){if(!f)return 1;let _=u.get(f);if(_)return _;const b=f.parentNode;return _=t.has(b)?b:i.has(b)?1:c(b),u.set(f,_),_}return e.forEach(f=>{const _=c(f);1!==_&&t.get(_).push(f)}),t}function Pa(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function wy(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function hU(n,e,t){Xh(t).onDone(()=>n.processLeaveNode(e))}function YN(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof EN?YN(r.players,e):e.push(r)}}function QN(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class fC{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new uU(e,t,r),this._timelineEngine=new eU(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let f=this._triggerCache[c];if(!f){const _=[],S=oS(this._driver,u,_,[]);if(_.length)throw function tV(n,e){return new g.vHH(3404,Qt)}();f=function YV(n,e,t){return new QV(n,e,t)}(i,S,this._normalizer),this._triggerCache[c]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=IN(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,f]=IN(r);return this._timelineEngine.listen(c,t,f,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let mU=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&xl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(xl(this._element,this._initialStyles),this._endStyles&&(xl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Zp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Zp(this._element,this._endStyles),this._endStyles=null),xl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function yS(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];yU(i)&&(e=e||{},e[i]=n[i])}return e}function yU(n){return"display"===n||"position"===n}class JN{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:LN(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class _U{validateStyleProperty(e){return AN(e)}matchesElement(e,t){return!1}containsElement(e,t){return SN(e,t)}getParentElement(e){return XA(e)}query(e,t,r){return MN(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const _={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(_.easing=u);const b={},S=c.filter(F=>F instanceof JN);(function bV(n,e){return 0===n||0===e})(r,i)&&S.forEach(F=>{let B=F.currentSnapshot;Object.keys(B).forEach(z=>b[z]=B[z])}),t=function IV(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(f=>{u.hasOwnProperty(f)||c.push(f),u[f]=t[f]}),c.length)for(var i=1;i<e.length;i++){let f=e[i];c.forEach(function(_){f[_]=LN(n,_)})}}return e}(e,t=t.map(F=>ef(F,!1)),b);const M=function gU(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=yS(e[0]),e.length>1&&(r=yS(e[e.length-1]))):e&&(t=yS(e)),t||r?new mU(n,t,r):null}(e,t);return new JN(e,t,_,M)}}let vU=(()=>{class n extends mN{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:g.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?yN(t):t;return XN(this._renderer,null,r,"register",[i]),new EU(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.FYo),g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class EU extends class PL{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new wU(this._id,e,t||{},this._renderer)}}class wU{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return XN(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function XN(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const eP="@.disabled";let bU=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const f=null==c?void 0:c.parentNode(u);f&&c.removeChild(f,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let S=this._rendererCache.get(u);return S||(S=new tP("",u,this.engine),this._rendererCache.set(u,S)),S}const c=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const _=S=>{Array.isArray(S)?S.forEach(_):this.engine.registerTrigger(c,f,t,S.name,S)};return r.data.animation.forEach(_),new IU(this,f,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,f]=u;c(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.FYo),g.LFG(fC),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class tP{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==eP?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class IU extends tP{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==eP?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function CU(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function DU(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let TU=(()=>{class n extends fC{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue),g.LFG(eS),g.LFG(dS))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const nP=new g.OlP("AnimationModuleType"),rP=[{provide:mN,useClass:vU},{provide:dS,useFactory:function AU(){return new qV}},{provide:fC,useClass:TU},{provide:g.FYo,useFactory:function SU(n,e,t){return new bU(n,e,t)},deps:[gn,fC,g.R0b]}],iP=[{provide:eS,useFactory:()=>new _U},{provide:nP,useValue:"BrowserAnimations"},...rP],MU=[{provide:eS,useClass:xN},{provide:nP,useValue:"NoopAnimations"},...rP];let xU=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?MU:iP}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:iP,imports:[Wo]}),n})(),RU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[yk]}),n.\u0275inj=g.cJS({providers:[],imports:[[Wo,NL,pk,xU]]}),n})();(0,g.G48)(),Fu().bootstrapModule(RU).catch(n=>console.error(n))},5867:(tt,we,P)=>{P.d(we,{Mq:()=>g.getApp,C6:()=>g.getApps});var g=P(9681);(0,g.registerVersion)("firebase","9.8.2","app")},127:(tt,we,P)=>{P.d(we,{Z:()=>g.Z});var g=P(3942);g.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(tt,we,P)=>{P.r(we);var g=P(5861),X=P(3942),O=P(2090),ae=P(9681),ne=P(655),ge=P(1877),ue=P(4859);const Pe=function qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ue=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pe=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ze=new ge.Yd("@firebase/auth");function Qe(y,...h){ze.logLevel<=ge.in.ERROR&&ze.error(`Auth (${ae.SDK_VERSION}): ${y}`,...h)}function De(y,...h){throw Be(y,...h)}function Ee(y,...h){return Be(y,...h)}function be(y,h,m){const E=Object.assign(Object.assign({},Ue()),{[h]:m});return new O.LL("auth","Firebase",E).create(h,{appName:y.name})}function je(y,h,m){if(!(h instanceof m))throw m.name!==h.constructor.name&&De(y,"argument-error"),be(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(y,...h){if("string"!=typeof y){const m=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(m,...E)}return pe.create(y,...h)}function $(y,h,...m){if(!y)throw Be(h,...m)}function ve(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Qe(h),new Error(h)}function Z(y,h){y||ve(h)}const re=new Map;function ee(y){Z(y instanceof Function,"Expected a class definition");let h=re.get(y);return h?(Z(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,re.set(y,h),h)}function Oe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ht(){return"http:"===Ht()||"https:"===Ht()}function Ht(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class tn{constructor(h,m){this.shortDelay=h,this.longDelay=m,Z(m>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Ut(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ht()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Pn(y,h){Z(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return h?`${m}${h.startsWith("/")?h.slice(1):h}`:m}class on{static initialize(h,m,E){this.fetchImpl=h,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Tr=new tn(3e4,6e4);function zt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Vt(y,h,m,E){return ls.apply(this,arguments)}function ls(){return(ls=(0,g.Z)(function*(y,h,m,E,T={}){return ti(y,T,(0,g.Z)(function*(){let N={},K={};E&&("GET"===h?K=E:N={body:JSON.stringify(E)});const fe=(0,O.xO)(Object.assign({key:y.config.apiKey},K)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),on.fetch()(Rs(y,y.config.apiHost,m,fe),Object.assign({method:h,headers:Fe,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function ti(y,h,m){return fr.apply(this,arguments)}function fr(){return(fr=(0,g.Z)(function*(y,h,m){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},Xt),h);try{const T=new ni(y),N=yield Promise.race([m(),T.promise]);T.clearNetworkTimeout();const K=yield N.json();if("needConfirmation"in K)throw bi(y,"account-exists-with-different-credential",K);if(N.ok&&!("errorMessage"in K))return K;{const fe=N.ok?K.errorMessage:K.error.message,[Fe,Ye]=fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw bi(y,"credential-already-in-use",K);if("EMAIL_EXISTS"===Fe)throw bi(y,"email-already-in-use",K);if("USER_DISABLED"===Fe)throw bi(y,"user-disabled",K);const gt=E[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw be(y,gt,Ye);De(y,gt)}}catch(T){if(T instanceof O.ZR)throw T;De(y,"network-request-failed")}})).apply(this,arguments)}function Ar(y,h,m,E){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,g.Z)(function*(y,h,m,E,T={}){const N=yield Vt(y,h,m,E,T);return"mfaPendingCredential"in N&&De(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Rs(y,h,m,E){const T=`${h}${m}?${E}`;return y.config.emulator?Pn(y.config,T):`${y.config.apiScheme}://${T}`}class ni{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Ee(this.auth,"network-request-failed")),Tr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bi(y,h,m){const E={appName:y.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const T=Ee(y,h,E);return T.customData._tokenResponse=m,T}function ri(){return(ri=(0,g.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Mn(y,h){return On.apply(this,arguments)}function On(){return(On=(0,g.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Zs(y,h){return ii.apply(this,arguments)}function ii(){return(ii=(0,g.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Jn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function Lo(){return(Lo=(0,g.Z)(function*(y,h=!1){const m=(0,O.m9)(y),E=yield m.getIdToken(h),T=ut(E);$(T&&T.exp&&T.auth_time&&T.iat,m.auth,"internal-error");const N="object"==typeof T.firebase?T.firebase:void 0,K=null==N?void 0:N.sign_in_provider;return{claims:T,token:E,authTime:Jn(Gt(T.auth_time)),issuedAtTime:Jn(Gt(T.iat)),expirationTime:Jn(Gt(T.exp)),signInProvider:K||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function Gt(y){return 1e3*Number(y)}function ut(y){const[h,m,E]=y.split(".");if(void 0===h||void 0===m||void 0===E)return Qe("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(m);return T?JSON.parse(T):(Qe("Failed to decode base64 JWT payload"),null)}catch(T){return Qe("Caught error parsing JWT payload as JSON",T),null}}function pr(y,h){return si.apply(this,arguments)}function si(){return(si=(0,g.Z)(function*(y,h,m=!1){if(m)return h;try{return yield h}catch(E){throw E instanceof O.ZR&&Bt(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function Bt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Ys{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var m;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const T=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield m.iteration()}),E)}iteration(){var h=this;return(0,g.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&h.schedule(!0))}h.schedule()})()}}class gr{constructor(h,m){this.createdAt=h,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jn(this.lastLoginAt),this.creationTime=Jn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function mr(y){return V.apply(this,arguments)}function V(){return(V=(0,g.Z)(function*(y){var h;const m=y.auth,E=yield y.getIdToken(),T=yield pr(y,Zs(m,{idToken:E}));$(null==T?void 0:T.users.length,m,"internal-error");const N=T.users[0];y._notifyReloadListener(N);const K=(null===(h=N.providerUserInfo)||void 0===h?void 0:h.length)?G(N.providerUserInfo):[],fe=Ie(y.providerData,K),gt=!!y.isAnonymous&&!(y.email&&N.passwordHash||(null==fe?void 0:fe.length)),lt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:fe,metadata:new gr(N.createdAt,N.lastLoginAt),isAnonymous:gt};Object.assign(y,lt)})).apply(this,arguments)}function W(){return(W=(0,g.Z)(function*(y){const h=(0,O.m9)(y);yield mr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ie(y,h){return[...y.filter(E=>!h.some(T=>T.providerId===E.providerId)),...h]}function G(y){return y.map(h=>{var{providerId:m}=h,E=(0,ne._T)(h,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Re(){return(Re=(0,g.Z)(function*(y,h){const m=yield ti(y,{},(0,g.Z)(function*(){const E=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:N}=y.config,K=Rs(y,T,"/v1/token",`key=${N}`),fe=yield y._getAdditionalHeaders();return fe["Content-Type"]="application/x-www-form-urlencoded",on.fetch()(K,{method:"POST",headers:fe,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class et{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){$(h.idToken,"internal-error"),$(void 0!==h.idToken,"internal-error"),$(void 0!==h.refreshToken,"internal-error");const m="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function Et(y){const h=ut(y);return $(h,"internal-error"),$(void 0!==h.exp,"internal-error"),$(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,m)}getToken(h,m=!1){var E=this;return(0,g.Z)(function*(){return $(!E.accessToken||E.refreshToken,h,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,m){var E=this;return(0,g.Z)(function*(){const{accessToken:T,refreshToken:N,expiresIn:K}=yield function J(y,h){return Re.apply(this,arguments)}(h,m);E.updateTokensAndExpiration(T,N,Number(K))})()}updateTokensAndExpiration(h,m,E){this.refreshToken=m||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,m){const{refreshToken:E,accessToken:T,expirationTime:N}=m,K=new et;return E&&($("string"==typeof E,"internal-error",{appName:h}),K.refreshToken=E),T&&($("string"==typeof T,"internal-error",{appName:h}),K.accessToken=T),N&&($("number"==typeof N,"internal-error",{appName:h}),K.expirationTime=N),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new et,this.toJSON())}_performRefresh(){return ve("not implemented")}}function ft(y,h){$("string"==typeof y||void 0===y,"internal-error",{appName:h})}class Tt{constructor(h){var{uid:m,auth:E,stsTokenManager:T}=h,N=(0,ne._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ys(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new gr(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var m=this;return(0,g.Z)(function*(){const E=yield pr(m,m.stsTokenManager.getToken(m.auth,h));return $(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(h){return function Ii(y){return Lo.apply(this,arguments)}(this,h)}reload(){return function q(y){return W.apply(this,arguments)}(this)}_assign(h){this!==h&&($(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(m=>Object.assign({},m)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Tt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,m=!1){var E=this;return(0,g.Z)(function*(){let T=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),T=!0),m&&(yield mr(E)),yield E.auth._persistUserIfCurrent(E),T&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,g.Z)(function*(){const m=yield h.getIdToken();return yield pr(h,function mt(y,h){return ri.apply(this,arguments)}(h.auth,{idToken:m})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,m){var E,T,N,K,fe,Fe,Ye,gt;const lt=null!==(E=m.displayName)&&void 0!==E?E:void 0,Vn=null!==(T=m.email)&&void 0!==T?T:void 0,mi=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,ou=null!==(K=m.photoURL)&&void 0!==K?K:void 0,Pf=null!==(fe=m.tenantId)&&void 0!==fe?fe:void 0,bo=null!==(Fe=m._redirectEventId)&&void 0!==Fe?Fe:void 0,au=null!==(Ye=m.createdAt)&&void 0!==Ye?Ye:void 0,ih=null!==(gt=m.lastLoginAt)&&void 0!==gt?gt:void 0,{uid:sh,emailVerified:Hs,isAnonymous:Of,providerData:oh,stsTokenManager:kf}=m;$(sh&&kf,h,"internal-error");const xg=et.fromJSON(this.name,kf);$("string"==typeof sh,h,"internal-error"),ft(lt,h.name),ft(Vn,h.name),$("boolean"==typeof Hs,h,"internal-error"),$("boolean"==typeof Of,h,"internal-error"),ft(mi,h.name),ft(ou,h.name),ft(Pf,h.name),ft(bo,h.name),ft(au,h.name),ft(ih,h.name);const Xu=new Tt({uid:sh,auth:h,email:Vn,emailVerified:Hs,displayName:lt,isAnonymous:Of,photoURL:ou,phoneNumber:mi,tenantId:Pf,stsTokenManager:xg,createdAt:au,lastLoginAt:ih});return oh&&Array.isArray(oh)&&(Xu.providerData=oh.map(Mi=>Object.assign({},Mi))),bo&&(Xu._redirectEventId=bo),Xu}static _fromIdTokenResponse(h,m,E=!1){return(0,g.Z)(function*(){const T=new et;T.updateFromServerResponse(m);const N=new Tt({uid:m.localId,auth:h,stsTokenManager:T,isAnonymous:E});return yield mr(N),N})()}}const Ct=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(m,E){var T=this;return(0,g.Z)(function*(){T.storage[m]=E})()}_get(m){var E=this;return(0,g.Z)(function*(){const T=E.storage[m];return void 0===T?null:T})()}_remove(m){var E=this;return(0,g.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return y.type="NONE",y})();function Kn(y,h,m){return`firebase:${y}:${h}:${m}`}class Sr{constructor(h,m,E){this.persistence=h,this.auth=m,this.userKey=E;const{config:T,name:N}=this.auth;this.fullUserKey=Kn(this.userKey,T.apiKey,N),this.fullPersistenceKey=Kn("persistence",T.apiKey,N),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const m=yield h.persistence._get(h.fullUserKey);return m?Tt._fromJSON(h.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var m=this;return(0,g.Z)(function*(){if(m.persistence===h)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=h,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,m,E="authUser"){return(0,g.Z)(function*(){if(!m.length)return new Sr(ee(Ct),h,E);const T=(yield Promise.all(m.map(function(){var Ye=(0,g.Z)(function*(gt){if(yield gt._isAvailable())return gt});return function(gt){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let N=T[0]||ee(Ct);const K=Kn(E,h.config.apiKey,h.name);let fe=null;for(const Ye of m)try{const gt=yield Ye._get(K);if(gt){const lt=Tt._fromJSON(h,gt);Ye!==N&&(fe=lt),N=Ye;break}}catch(gt){}const Fe=T.filter(Ye=>Ye._shouldAllowMigration);return N._shouldAllowMigration&&Fe.length?(N=Fe[0],fe&&(yield N._set(K,fe.toJSON())),yield Promise.all(m.map(function(){var Ye=(0,g.Z)(function*(gt){if(gt!==N)try{yield gt._remove(K)}catch(lt){}});return function(gt){return Ye.apply(this,arguments)}}())),new Sr(N,h,E)):new Sr(N,h,E)})()}}function Du(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Zn(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Oa(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(cs(h))return"Blackberry";if(Yn(h))return"Webos";if(Tu(h))return"Safari";if((h.includes("chrome/")||ka(h))&&!h.includes("edge/"))return"Chrome";if(Mr(h))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Oa(y=(0,O.z$)()){return/firefox\//i.test(y)}function Tu(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function ka(y=(0,O.z$)()){return/crios\//i.test(y)}function Zn(y=(0,O.z$)()){return/iemobile/i.test(y)}function Mr(y=(0,O.z$)()){return/android/i.test(y)}function cs(y=(0,O.z$)()){return/blackberry/i.test(y)}function Yn(y=(0,O.z$)()){return/webos/i.test(y)}function qr(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function Ns(y=(0,O.z$)()){return qr(y)||Mr(y)||Yn(y)||cs(y)||/windows phone/i.test(y)||Zn(y)}function Vo(y,h=[]){let m;switch(y){case"Browser":m=Du((0,O.z$)());break;case"Worker":m=`${Du((0,O.z$)())}-${y}`;break;default:m=y}const E=h.length?h.join(","):"FirebaseCore-web";return`${m}/JsCore/${ae.SDK_VERSION}/${E}`}class zr{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,m){const E=N=>new Promise((K,fe)=>{try{K(h(N))}catch(Fe){fe(Fe)}});E.onAbort=m,this.queue.push(E);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(h){var m=this;return(0,g.Z)(function*(){if(m.auth.currentUser===h)return;const E=[];try{for(const T of m.queue)yield T(h),T.onAbort&&E.push(T.onAbort)}catch(T){E.reverse();for(const N of E)try{N()}catch(K){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:T.message})}})()}}class We{constructor(h,m,E){this.app=h,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nn(this),this.idTokenSubscription=new nn(this),this.beforeStateQueue=new zr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(h,m){var E=this;return m&&(this._popupRedirectResolver=ee(m)),this._initializationPromise=this.queue((0,g.Z)(function*(){var T,N;if(!E._deleted&&(E.persistenceManager=yield Sr.create(E,h),!E._deleted)){if(null===(T=E._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(K){}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(N=E.currentUser)||void 0===N?void 0:N.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const m=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||m){if(h.currentUser&&m&&h.currentUser.uid===m.uid)return h._currentUser._assign(m),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(m,!0)}})()}initializeCurrentUser(h){var m=this;return(0,g.Z)(function*(){var E;const T=yield m.assertedPersistence.getCurrentUser();let N=T,K=!1;if(h&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const fe=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Fe=null==N?void 0:N._redirectEventId,Ye=yield m.tryRedirectSignIn(h);(!fe||fe===Fe)&&(null==Ye?void 0:Ye.user)&&(N=Ye.user,K=!0)}if(!N)return m.directlySetCurrentUser(null);if(!N._redirectEventId){if(K)try{yield m.beforeStateQueue.runMiddleware(N)}catch(fe){N=T,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(fe))}return N?m.reloadAndSetCurrentUserOrClear(N):m.directlySetCurrentUser(null)}return $(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===N._redirectEventId?m.directlySetCurrentUser(N):m.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(h){var m=this;return(0,g.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,h,!0)}catch(T){yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var m=this;return(0,g.Z)(function*(){try{yield mr(h)}catch(E){if("auth/network-request-failed"!==E.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Je(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var m=this;return(0,g.Z)(function*(){const E=h?(0,O.m9)(h):null;return E&&$(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(h,m=!1){var E=this;return(0,g.Z)(function*(){if(!E._deleted)return h&&$(E.tenantId===h.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(h)),E.queue((0,g.Z)(function*(){yield E.directlySetCurrentUser(h),E.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var m=this;return this.queue((0,g.Z)(function*(){yield m.assertedPersistence.setPersistence(ee(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,m,E){return this.registerStateListener(this.authStateSubscription,h,m,E)}beforeAuthStateChanged(h,m){return this.beforeStateQueue.pushCallback(h,m)}onIdTokenChanged(h,m,E){return this.registerStateListener(this.idTokenSubscription,h,m,E)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,m){var E=this;return(0,g.Z)(function*(){const T=yield E.getOrInitRedirectPersistenceManager(m);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var m=this;return(0,g.Z)(function*(){if(!m.redirectPersistenceManager){const E=h&&ee(h)||m._popupRedirectResolver;$(E,m,"argument-error"),m.redirectPersistenceManager=yield Sr.create(m,[ee(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(h){var m=this;return(0,g.Z)(function*(){var E,T;return m._isInitialized&&(yield m.queue((0,g.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===h?m._currentUser:(null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?m.redirectUser:null})()}_persistUserIfCurrent(h){var m=this;return(0,g.Z)(function*(){if(h===m.currentUser)return m.queue((0,g.Z)(function*(){return m.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,m,E,T){if(this._deleted)return()=>{};const N="function"==typeof m?m:m.next.bind(m),K=this._isInitialized?Promise.resolve():this._initializationPromise;return $(K,this,"internal-error"),K.then(()=>N(this.currentUser)),"function"==typeof m?h.addObserver(m,E,T):h.addObserver(m)}directlySetCurrentUser(h){var m=this;return(0,g.Z)(function*(){m.currentUser&&m.currentUser!==h&&(m._currentUser._stopProactiveRefresh(),h&&m.isProactiveRefreshEnabled&&h._startProactiveRefresh()),m.currentUser=h,h?yield m.assertedPersistence.setCurrentUser(h):yield m.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Vo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var m;const E={"X-Client-Version":h.clientVersion};h.app.options.appId&&(E["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(m=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return T&&(E["X-Firebase-Client"]=T),E})()}}function dt(y){return(0,O.m9)(y)}class nn{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(m=>this.observer=m)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Li(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Vi(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class Ci{constructor(h,m){this.providerId=h,this.signInMethod=m}toJSON(){return ve("not implemented")}_getIdTokenResponse(h){return ve("not implemented")}_linkToIdToken(h,m){return ve("not implemented")}_getReauthenticationResolver(h){return ve("not implemented")}}function kn(y,h){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,g.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:resetPassword",zt(y,h))})).apply(this,arguments)}function La(y,h){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,g.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Au(y,h){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,g.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:update",zt(y,h))})).apply(this,arguments)}function Js(){return(Js=(0,g.Z)(function*(y,h){return Ar(y,"POST","/v1/accounts:signInWithPassword",zt(y,h))})).apply(this,arguments)}function Os(y,h){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,g.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:sendOobCode",zt(y,h))})).apply(this,arguments)}function an(y,h){return Su.apply(this,arguments)}function Su(){return(Su=(0,g.Z)(function*(y,h){return Os(y,h)})).apply(this,arguments)}function Va(y,h){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,g.Z)(function*(y,h){return Os(y,h)})).apply(this,arguments)}function Bi(y,h){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,g.Z)(function*(y,h){return Os(y,h)})).apply(this,arguments)}function Ed(y,h){return ji.apply(this,arguments)}function ji(){return(ji=(0,g.Z)(function*(y,h){return Os(y,h)})).apply(this,arguments)}function Nl(){return(Nl=(0,g.Z)(function*(y,h){return Ar(y,"POST","/v1/accounts:signInWithEmailLink",zt(y,h))})).apply(this,arguments)}function wd(){return(wd=(0,g.Z)(function*(y,h){return Ar(y,"POST","/v1/accounts:signInWithEmailLink",zt(y,h))})).apply(this,arguments)}class yr extends Ci{constructor(h,m,E,T=null){super("password",E),this._email=h,this._password=m,this._tenantId=T}static _fromEmailAndPassword(h,m){return new yr(h,m,"password")}static _fromEmailAndCode(h,m,E=null){return new yr(h,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(h){var m=this;return(0,g.Z)(function*(){switch(m.signInMethod){case"password":return function or(y,h){return Js.apply(this,arguments)}(h,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function $i(y,h){return Nl.apply(this,arguments)}(h,{email:m._email,oobCode:m._password});default:De(h,"internal-error")}})()}_linkToIdToken(h,m){var E=this;return(0,g.Z)(function*(){switch(E.signInMethod){case"password":return La(h,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function eg(y,h){return wd.apply(this,arguments)}(h,{idToken:m,email:E._email,oobCode:E._password});default:De(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function ks(y,h){return bd.apply(this,arguments)}function bd(){return(bd=(0,g.Z)(function*(y,h){return Ar(y,"POST","/v1/accounts:signInWithIdp",zt(y,h))})).apply(this,arguments)}class ds extends Ci{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const m=new ds(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(m.idToken=h.idToken),h.accessToken&&(m.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(m.nonce=h.nonce),h.pendingToken&&(m.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(m.accessToken=h.oauthToken,m.secret=h.oauthTokenSecret):De("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:T}=m,N=(0,ne._T)(m,["providerId","signInMethod"]);if(!E||!T)return null;const K=new ds(E,T);return K.idToken=N.idToken||void 0,K.accessToken=N.accessToken||void 0,K.secret=N.secret,K.nonce=N.nonce,K.pendingToken=N.pendingToken||null,K}_getIdTokenResponse(h){return ks(h,this.buildRequest())}_linkToIdToken(h,m){const E=this.buildRequest();return E.idToken=m,ks(h,E)}_getReauthenticationResolver(h){const m=this.buildRequest();return m.autoCreate=!1,ks(h,m)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),h.postBody=(0,O.xO)(m)}return h}}function ng(y,h){return Id.apply(this,arguments)}function Id(){return(Id=(0,g.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:sendVerificationCode",zt(y,h))})).apply(this,arguments)}function Fs(){return(Fs=(0,g.Z)(function*(y,h){return Ar(y,"POST","/v1/accounts:signInWithPhoneNumber",zt(y,h))})).apply(this,arguments)}function Cd(){return(Cd=(0,g.Z)(function*(y,h){const m=yield Ar(y,"POST","/v1/accounts:signInWithPhoneNumber",zt(y,h));if(m.temporaryProof)throw bi(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const ig={USER_NOT_FOUND:"user-not-found"};function Dd(){return(Dd=(0,g.Z)(function*(y,h){return Ar(y,"POST","/v1/accounts:signInWithPhoneNumber",zt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),ig)})).apply(this,arguments)}class Uo extends Ci{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,m){return new Uo({verificationId:h,verificationCode:m})}static _fromTokenResponse(h,m){return new Uo({phoneNumber:h,temporaryProof:m})}_getIdTokenResponse(h){return function Pl(y,h){return Fs.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,m){return function rg(y,h){return Cd.apply(this,arguments)}(h,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function sg(y,h){return Dd.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:m,verificationId:E,verificationCode:T}=this.params;return h&&m?{temporaryProof:h,phoneNumber:m}:{sessionInfo:E,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:m,verificationCode:E,phoneNumber:T,temporaryProof:N}=h;return E||m||T||N?new Uo({verificationId:m,verificationCode:E,phoneNumber:T,temporaryProof:N}):null}}class xu{constructor(h){var m,E,T,N,K,fe;const Fe=(0,O.zd)((0,O.pd)(h)),Ye=null!==(m=Fe.apiKey)&&void 0!==m?m:null,gt=null!==(E=Fe.oobCode)&&void 0!==E?E:null,lt=function rf(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Fe.mode)&&void 0!==T?T:null);$(Ye&&gt&&lt,"argument-error"),this.apiKey=Ye,this.operation=lt,this.code=gt,this.continueUrl=null!==(N=Fe.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(K=Fe.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(fe=Fe.tenantId)&&void 0!==fe?fe:null}static parseLink(h){const m=function Ua(y){const h=(0,O.zd)((0,O.pd)(y)).link,m=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,E=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(E?(0,O.zd)((0,O.pd)(E)).link:null)||E||m||h||y}(h);try{return new xu(m)}catch(E){return null}}}let Ad=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,E){return yr._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const T=xu.parseLink(E);return $(T,"argument-error"),yr._fromEmailAndCode(m,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class _r{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Xs extends _r{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Hi extends Xs{static credentialFromJSON(h){const m="string"==typeof h?JSON.parse(h):h;return $("providerId"in m&&"signInMethod"in m,"argument-error"),ds._fromParams(m)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return $(h.idToken||h.accessToken,"argument-error"),ds._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Hi.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Hi.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:T,pendingToken:N,nonce:K,providerId:fe}=h;if(!E&&!T&&!m&&!N||!fe)return null;try{return new Hi(fe)._credential({idToken:m,accessToken:E,nonce:K,pendingToken:N})}catch(Fe){return null}}}let Bo=(()=>{class y extends Xs{constructor(){super("facebook.com")}static credential(m){return ds._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(E){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Sd=(()=>{class y extends Xs{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return ds._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:T}=m;if(!E&&!T)return null;try{return y.credential(E,T)}catch(N){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),sf=(()=>{class y extends Xs{constructor(){super("github.com")}static credential(m){return ds._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(E){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class eo extends Ci{constructor(h,m){super(h,h),this.pendingToken=m}_getIdTokenResponse(h){return ks(h,this.buildRequest())}_linkToIdToken(h,m){const E=this.buildRequest();return E.idToken=m,ks(h,E)}_getReauthenticationResolver(h){const m=this.buildRequest();return m.autoCreate=!1,ks(h,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:T,pendingToken:N}=m;return E&&T&&N&&E===T?new eo(E,N):null}static _create(h,m){return new eo(h,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xr extends _r{constructor(h){$(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return xr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return xr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const m=eo.fromJSON(h);return $(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:m,providerId:E}=h;if(!m||!E)return null;try{return eo._create(E,m)}catch(T){return null}}}let xd=(()=>{class y extends Xs{constructor(){super("twitter.com")}static credential(m,E){return ds._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:T}=m;if(!E||!T)return null;try{return y.credential(E,T)}catch(N){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Rr(y,h){return $o.apply(this,arguments)}function $o(){return($o=(0,g.Z)(function*(y,h){return Ar(y,"POST","/v1/accounts:signUp",zt(y,h))})).apply(this,arguments)}class oi{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,m,E,T=!1){return(0,g.Z)(function*(){const N=yield Tt._fromIdTokenResponse(h,E,T),K=Ol(E);return new oi({user:N,providerId:K,_tokenResponse:E,operationType:m})})()}static _forOperation(h,m,E){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const T=Ol(E);return new oi({user:h,providerId:T,_tokenResponse:E,operationType:m})})()}}function Ol(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function kl(){return(kl=(0,g.Z)(function*(y){var h;const m=dt(y);if(yield m._initializationPromise,null===(h=m.currentUser)||void 0===h?void 0:h.isAnonymous)return new oi({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Rr(m,{returnSecureToken:!0}),T=yield oi._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class Ho extends O.ZR{constructor(h,m,E,T){var N;super(m.code,m.message),this.operationType=E,this.user=T,Object.setPrototypeOf(this,Ho.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,m,E,T){return new Ho(h,m,E,T)}}function Fl(y,h,m,E){return("reauthenticate"===h?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Ho._fromErrorAndOperation(y,N,h,E):N})}function Gi(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function un(){return(un=(0,g.Z)(function*(y,h){const m=(0,O.m9)(y);yield en(!0,m,h);const{providerUserInfo:E}=yield Mn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[h]}),T=Gi(E||[]);return m.providerData=m.providerData.filter(N=>T.has(N.providerId)),T.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Ba(y,h){return to.apply(this,arguments)}function to(){return(to=(0,g.Z)(function*(y,h,m=!1){const E=yield pr(y,h._linkToIdToken(y.auth,yield y.getIdToken()),m);return oi._forOperation(y,"link",E)})).apply(this,arguments)}function en(y,h,m){return ja.apply(this,arguments)}function ja(){return(ja=(0,g.Z)(function*(y,h,m){yield mr(h);const T=!1===y?"provider-already-linked":"no-such-provider";$(Gi(h.providerData).has(m)===y,h.auth,T)})).apply(this,arguments)}function Ru(y,h){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,g.Z)(function*(y,h,m=!1){const{auth:E}=y,T="reauthenticate";try{const N=yield pr(y,Fl(E,T,h,y),m);$(N.idToken,E,"internal-error");const K=ut(N.idToken);$(K,E,"internal-error");const{sub:fe}=K;return $(y.uid===fe,E,"user-mismatch"),oi._forOperation(y,T,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&De(E,"user-mismatch"),N}})).apply(this,arguments)}function ar(y,h){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,g.Z)(function*(y,h,m=!1){const E="signIn",T=yield Fl(y,E,h),N=yield oi._fromIdTokenResponse(y,E,T);return m||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function In(y,h){return qi.apply(this,arguments)}function qi(){return(qi=(0,g.Z)(function*(y,h){return ar(dt(y),h)})).apply(this,arguments)}function ur(y,h){return no.apply(this,arguments)}function no(){return(no=(0,g.Z)(function*(y,h){const m=(0,O.m9)(y);return yield en(!1,m,h.providerId),Ba(m,h)})).apply(this,arguments)}function hs(y,h){return $a.apply(this,arguments)}function $a(){return($a=(0,g.Z)(function*(y,h){return Ru((0,O.m9)(y),h)})).apply(this,arguments)}function Di(y,h){return zi.apply(this,arguments)}function zi(){return(zi=(0,g.Z)(function*(y,h){return Ar(y,"POST","/v1/accounts:signInWithCustomToken",zt(y,h))})).apply(this,arguments)}function pt(){return(pt=(0,g.Z)(function*(y,h){const m=dt(y),E=yield Di(m,{token:h,returnSecureToken:!0}),T=yield oi._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class qo{constructor(h,m){this.factorId=h,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(h,m){return"phoneInfo"in m?Nu._fromServerResponse(h,m):De(h,"internal-error")}}class Nu extends qo{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,m){return new Nu(m)}}function Ha(y,h,m){var E;$((null===(E=m.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),$(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=m.url,h.dynamicLinkDomain=m.dynamicLinkDomain,h.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&($(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=m.iOS.bundleId),m.android&&($(m.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=m.android.installApp,h.androidMinimumVersionCode=m.android.minimumVersion,h.androidPackageName=m.android.packageName)}function Ga(){return(Ga=(0,g.Z)(function*(y,h,m){const E=(0,O.m9)(y),T={requestType:"PASSWORD_RESET",email:h};m&&Ha(E,T,m),yield Va(E,T)})).apply(this,arguments)}function Bl(){return(Bl=(0,g.Z)(function*(y,h,m){yield kn((0,O.m9)(y),{oobCode:h,newPassword:m})})).apply(this,arguments)}function Ft(){return(Ft=(0,g.Z)(function*(y,h){yield Au((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function jl(y,h){return gn.apply(this,arguments)}function gn(){return(gn=(0,g.Z)(function*(y,h){const m=(0,O.m9)(y),E=yield kn(m,{oobCode:h}),T=E.requestType;switch($(T,m,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$(E.mfaInfo,m,"internal-error");default:$(E.email,m,"internal-error")}let N=null;return E.mfaInfo&&(N=qo._fromServerResponse(dt(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:N},operation:T}})).apply(this,arguments)}function ro(){return(ro=(0,g.Z)(function*(y,h){const{data:m}=yield jl((0,O.m9)(y),h);return m.email})).apply(this,arguments)}function qa(){return(qa=(0,g.Z)(function*(y,h,m){const E=dt(y),T=yield Rr(E,{returnSecureToken:!0,email:h,password:m}),N=yield oi._fromIdTokenResponse(E,"signIn",T);return yield E._updateCurrentUser(N.user),N})).apply(this,arguments)}function Pu(){return(Pu=(0,g.Z)(function*(y,h,m){const E=(0,O.m9)(y),T={requestType:"EMAIL_SIGNIN",email:h};$(m.handleCodeInApp,E,"argument-error"),m&&Ha(E,T,m),yield Bi(E,T)})).apply(this,arguments)}function Fn(){return(Fn=(0,g.Z)(function*(y,h,m){const E=(0,O.m9)(y),T=Ad.credentialWithLink(h,m||Oe());return $(T._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),In(E,T)})).apply(this,arguments)}function fs(y,h){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,g.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:createAuthUri",zt(y,h))})).apply(this,arguments)}function Ti(){return(Ti=(0,g.Z)(function*(y,h){const E={identifier:h,continueUri:ht()?Oe():"http://localhost"},{signinMethods:T}=yield fs((0,O.m9)(y),E);return T||[]})).apply(this,arguments)}function ku(){return(ku=(0,g.Z)(function*(y,h){const m=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Ha(m.auth,T,h);const{email:N}=yield an(m.auth,T);N!==y.email&&(yield y.reload())})).apply(this,arguments)}function Fu(){return(Fu=(0,g.Z)(function*(y,h,m){const E=(0,O.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};m&&Ha(E.auth,N,m);const{email:K}=yield Ed(E.auth,N);K!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ka(y,h){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,g.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Za(){return(Za=(0,g.Z)(function*(y,{displayName:h,photoURL:m}){if(void 0===h&&void 0===m)return;const E=(0,O.m9)(y),N={idToken:yield E.getIdToken(),displayName:h,photoUrl:m,returnSecureToken:!0},K=yield pr(E,Ka(E.auth,N));E.displayName=K.displayName||null,E.photoURL=K.photoUrl||null;const fe=E.providerData.find(({providerId:Fe})=>"password"===Fe);fe&&(fe.displayName=E.displayName,fe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(K)})).apply(this,arguments)}function Ko(y,h,m){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,g.Z)(function*(y,h,m){const{auth:E}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(N.email=h),m&&(N.password=m);const K=yield pr(y,La(E,N));yield y._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class Zo{constructor(h,m,E={}){this.isNewUser=h,this.providerId=m,this.profile=E}}class Pd extends Zo{constructor(h,m,E,T){super(h,m,E),this.username=T}}class Yo extends Zo{constructor(h,m){super(h,"facebook.com",m)}}class Wi extends Pd{constructor(h,m){super(h,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class uf extends Zo{constructor(h,m){super(h,"google.com",m)}}class er extends Pd{constructor(h,m,E){super(h,"twitter.com",m,E)}}function Ki(y){const{user:h,_tokenResponse:m}=y;return h.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Nd(y){var h,m;if(!y)return null;const{providerId:E}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&(null==y?void 0:y.idToken)){const K=null===(m=null===(h=ut(y.idToken))||void 0===h?void 0:h.firebase)||void 0===m?void 0:m.sign_in_provider;if(K)return new Zo(N,"anonymous"!==K&&"custom"!==K?K:null)}if(!E)return null;switch(E){case"facebook.com":return new Yo(N,T);case"github.com":return new Wi(N,T);case"google.com":return new uf(N,T);case"twitter.com":return new er(N,T,y.screenName||null);case"custom":case"anonymous":return new Zo(N,null);default:return new Zo(N,E,T)}}(m)}class ps{constructor(h,m){this.type=h,this.credential=m}static _fromIdtoken(h){return new ps("enroll",h)}static _fromMfaPendingCredential(h){return new ps("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var m,E;if(null==h?void 0:h.multiFactorSession){if(null===(m=h.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return ps._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(E=h.multiFactorSession)||void 0===E?void 0:E.idToken)return ps._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Qo{constructor(h,m,E){this.session=h,this.hints=m,this.signInResolver=E}static _fromError(h,m){const E=dt(h),T=m.customData._serverResponse,N=(T.mfaInfo||[]).map(fe=>qo._fromServerResponse(E,fe));$(T.mfaPendingCredential,E,"internal-error");const K=ps._fromMfaPendingCredential(T.mfaPendingCredential);return new Qo(K,N,function(){var fe=(0,g.Z)(function*(Fe){const Ye=yield Fe._process(E,K);delete T.mfaInfo,delete T.mfaPendingCredential;const gt=Object.assign(Object.assign({},T),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(m.operationType){case"signIn":const lt=yield oi._fromIdTokenResponse(E,m.operationType,gt);return yield E._updateCurrentUser(lt.user),lt;case"reauthenticate":return $(m.user,E,"internal-error"),oi._forOperation(m.user,m.operationType,gt);default:De(E,"internal-error")}});return function(Fe){return fe.apply(this,arguments)}}())}resolveSignIn(h){var m=this;return(0,g.Z)(function*(){return m.signInResolver(h)})()}}function cf(y,h){return Vt(y,"POST","/v2/accounts/mfaEnrollment:start",zt(y,h))}class Fd{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>qo._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new Fd(h)}getSession(){var h=this;return(0,g.Z)(function*(){return ps._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,m){var E=this;return(0,g.Z)(function*(){const T=h,N=yield E.getSession(),K=yield pr(E.user,T._process(E.user.auth,N,m));return yield E.user._updateTokensIfNecessary(K),E.user.reload()})()}unenroll(h){var m=this;return(0,g.Z)(function*(){const E="string"==typeof h?h:h.uid,T=yield m.user.getIdToken(),N=yield pr(m.user,function Lu(y,h){return Vt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",zt(y,h))}(m.user.auth,{idToken:T,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:K})=>K!==E),yield m.user._updateTokensIfNecessary(N);try{yield m.user.reload()}catch(K){if("auth/user-token-expired"!==K.code)throw K}})()}}const Vu=new WeakMap,so="__sak";class Ld{constructor(h,m){this.storageRetriever=h,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(so,"1"),this.storage.removeItem(so),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,m){return this.storage.setItem(h,JSON.stringify(m)),Promise.resolve()}_get(h){const m=this.storage.getItem(h);return Promise.resolve(m?JSON.parse(m):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Kt=(()=>{class y extends Ld{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function lg(){const y=(0,O.z$)();return Tu(y)||qr(y)}()&&function sr(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Ns(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const T=this.storage.getItem(E),N=this.localCache[E];T!==N&&m(E,N,T)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((fe,Fe,Ye)=>{this.notifyListeners(fe,Ye)});const T=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const fe=this.storage.getItem(T);if(m.newValue!==fe)null!==m.newValue?this.storage.setItem(T,m.newValue):this.storage.removeItem(T);else if(this.localCache[T]===m.newValue&&!E)return}const N=()=>{const fe=this.storage.getItem(T);!E&&this.localCache[T]===fe||this.notifyListeners(T,fe)},K=this.storage.getItem(T);!function Fa(){return(0,O.w1)()&&10===document.documentMode}()||K===m.newValue||m.newValue===m.oldValue?N():setTimeout(N,10)}notifyListeners(m,E){this.localCache[m]=E;const T=this.listeners[m];if(T)for(const N of Array.from(T))N(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var T=()=>super._set,N=this;return(0,g.Z)(function*(){yield T().call(N,m,E),N.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,T=this;return(0,g.Z)(function*(){const N=yield E().call(T,m);return T.localCache[m]=JSON.stringify(N),N})()}_remove(m){var E=()=>super._remove,T=this;return(0,g.Z)(function*(){yield E().call(T,m),delete T.localCache[m]})()}}return y.type="LOCAL",y})(),at=(()=>{class y extends Ld{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return y.type="SESSION",y})();let Ja=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(N=>N.isListeningto(m));if(E)return E;const T=new y(m);return this.receivers.push(T),T}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,g.Z)(function*(){const T=m,{eventId:N,eventType:K,data:fe}=T.data,Fe=E.handlersMap[K];if(!(null==Fe?void 0:Fe.size))return;T.ports[0].postMessage({status:"ack",eventId:N,eventType:K});const Ye=Array.from(Fe).map(function(){var lt=(0,g.Z)(function*(Vn){return Vn(T.origin,fe)});return function(Vn){return lt.apply(this,arguments)}}()),gt=yield function cn(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return h.apply(this,arguments)}}()))}(Ye);T.ports[0].postMessage({status:"done",eventId:N,eventType:K,response:gt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Zi(y="",h=10){let m="";for(let E=0;E<h;E++)m+=Math.floor(10*Math.random());return y+m}class Xa{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,m,E=50){var T=this;return(0,g.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let K,fe;return new Promise((Fe,Ye)=>{const gt=Zi("",20);N.port1.start();const lt=setTimeout(()=>{Ye(new Error("unsupported_event"))},E);fe={messageChannel:N,onMessage(Vn){const mi=Vn;if(mi.data.eventId===gt)switch(mi.data.status){case"ack":clearTimeout(lt),K=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),Fe(mi.data.response);break;default:clearTimeout(lt),clearTimeout(K),Ye(new Error("invalid_response"))}}},T.handlers.add(fe),N.port1.addEventListener("message",fe.onMessage),T.target.postMessage({eventType:h,eventId:gt,data:m},[N.port2])}).finally(()=>{fe&&T.removeMessageHandler(fe)})})()}}function Lt(){return window}function Rn(){return void 0!==Lt().WorkerGlobalScope&&"function"==typeof Lt().importScripts}function Pt(){return(Pt=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Jo="firebaseLocalStorageDb",Xo="firebaseLocalStorage",Nr="fbase_key";class Cn{constructor(h){this.request=h}toPromise(){return new Promise((h,m)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Pr(y,h){return y.transaction([Xo],h?"readwrite":"readonly").objectStore(Xo)}function vr(){const y=indexedDB.open(Jo,1);return new Promise((h,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(Xo,{keyPath:Nr})}catch(T){m(T)}}),y.addEventListener("success",(0,g.Z)(function*(){const E=y.result;E.objectStoreNames.contains(Xo)?h(E):(E.close(),yield function Wl(){const y=indexedDB.deleteDatabase(Jo);return new Cn(y).toPromise()}(),h(yield vr()))}))})}function Ai(y,h,m){return ui.apply(this,arguments)}function ui(){return(ui=(0,g.Z)(function*(y,h,m){const E=Pr(y,!0).put({[Nr]:h,value:m});return new Cn(E).toPromise()})).apply(this,arguments)}function uo(){return(uo=(0,g.Z)(function*(y,h){const m=Pr(y,!1).get(h),E=yield new Cn(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function li(y,h){const m=Pr(y,!0).delete(h);return new Cn(m).toPromise()}const Yi=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,g.Z)(function*(){return m.db||(m.db=yield vr()),m.db})()}_withRetries(m){var E=this;return(0,g.Z)(function*(){let T=0;for(;;)try{const N=yield E._openDb();return yield m(N)}catch(N){if(T++>3)throw N;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,g.Z)(function*(){return Rn()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,g.Z)(function*(){m.receiver=Ja._getInstance(function eu(){return Rn()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,g.Z)(function*(T,N){return{keyProcessed:(yield m._poll()).includes(N.key)}});return function(T,N){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,g.Z)(function*(T,N){return["keyChanged"]});return function(T,N){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,g.Z)(function*(){var E,T;if(m.activeServiceWorker=yield function Bu(){return Pt.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Xa(m.activeServiceWorker);const N=yield m.sender._send("ping",{},800);!N||(null===(E=N[0])||void 0===E?void 0:E.fulfilled)&&(null===(T=N[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,g.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Vd(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const m=yield vr();return yield Ai(m,so,"1"),yield li(m,so),!0}catch(m){}return!1})()}_withPendingWrite(m){var E=this;return(0,g.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var T=this;return(0,g.Z)(function*(){return T._withPendingWrite((0,g.Z)(function*(){return yield T._withRetries(N=>Ai(N,m,E)),T.localCache[m]=E,T.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,g.Z)(function*(){const T=yield E._withRetries(N=>function yt(y,h){return uo.apply(this,arguments)}(N,m));return E.localCache[m]=T,T})()}_remove(m){var E=this;return(0,g.Z)(function*(){return E._withPendingWrite((0,g.Z)(function*(){return yield E._withRetries(T=>li(T,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,g.Z)(function*(){const E=yield m._withRetries(K=>{const fe=Pr(K,!1).getAll();return new Cn(fe).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const T=[],N=new Set;for(const{fbase_key:K,value:fe}of E)N.add(K),JSON.stringify(m.localCache[K])!==JSON.stringify(fe)&&(m.notifyListeners(K,fe),T.push(K));for(const K of Object.keys(m.localCache))m.localCache[K]&&!N.has(K)&&(m.notifyListeners(K,null),T.push(K));return T})()}notifyListeners(m,E){this.localCache[m]=E;const T=this.listeners[m];if(T)for(const N of Array.from(T))N(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function ea(y,h){return Vt(y,"POST","/v2/accounts/mfaSignIn:start",zt(y,h))}function co(){return(co=(0,g.Z)(function*(y){return(yield Vt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ho(y){return new Promise((h,m)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=h,E.onerror=T=>{const N=Ee("internal-error");N.customData=T,m(N)},E.type="text/javascript",E.charset="UTF-8",function tu(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(E)})}function gs(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Nn=1e12;class Zr{constructor(h){this.auth=h,this.counter=Nn,this._widgets=new Map}render(h,m){const E=this.counter;return this._widgets.set(E,new cg(h,this.auth.name,m||{})),this.counter++,E}reset(h){var m;const E=h||Nn;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(h){var m;return(null===(m=this._widgets.get(h||Nn))||void 0===m?void 0:m.getResponse())||""}execute(h){var m=this;return(0,g.Z)(function*(){var E;return null===(E=m._widgets.get(h||Nn))||void 0===E||E.execute(),""})()}}class cg{constructor(h,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;$(T,"argument-error",{appName:m}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Kl(y){const h=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)h.push(m.charAt(Math.floor(Math.random()*m.length)));return h.join("")}(50);const{callback:h,"expired-callback":m}=this.params;if(h)try{h(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const wn=gs("rcb"),hf=new tn(3e4,6e4);class dg{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Lt().grecaptcha}load(h,m=""){return $(function Ud(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),h,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Lt().grecaptcha):new Promise((E,T)=>{const N=Lt().setTimeout(()=>{T(Ee(h,"network-request-failed"))},hf.get());Lt()[wn]=()=>{Lt().clearTimeout(N),delete Lt()[wn];const fe=Lt().grecaptcha;if(!fe)return void T(Ee(h,"internal-error"));const Fe=fe.render;fe.render=(Ye,gt)=>{const lt=Fe(Ye,gt);return this.counter++,lt},this.hostLanguage=m,E(fe)},ho(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:wn,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(N),T(Ee(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!Lt().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class $u{load(h){return(0,g.Z)(function*(){return new Zr(h)})()}clearedOneInstance(){}}const Zl="recaptcha",Or={theme:"light",type:"image"};class po{constructor(h,m=Object.assign({},Or),E){this.parameters=m,this.type=Zl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=dt(E),this.isInvisible="invisible"===this.parameters.size,$("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;$(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $u:new dg,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const m=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(m)||new Promise(N=>{const K=fe=>{!fe||(h.tokenChangeListeners.delete(K),N(fe))};h.tokenChangeListeners.add(K),h.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){$(!this.parameters.sitekey,this.auth,"argument-error"),$(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof h)h(m);else if("string"==typeof h){const E=Lt()[h];"function"==typeof E&&E(m)}}}assertNotDestroyed(){$(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let m=h.container;if(!h.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}h.widgetId=h.getAssertedRecaptcha().render(m,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){$(ht()&&!Rn(),h.auth,"internal-error"),yield function kr(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const m=yield function ju(y){return co.apply(this,arguments)}(h.auth);$(m,h.auth,"internal-error"),h.parameters.sitekey=m})()}getAssertedRecaptcha(){return $(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Tn{constructor(h,m){this.verificationId=h,this.onConfirmation=m}confirm(h){const m=Uo._fromVerification(this.verificationId,h);return this.onConfirmation(m)}}function ms(){return(ms=(0,g.Z)(function*(y,h,m){const E=dt(y),T=yield nu(E,h,(0,O.m9)(m));return new Tn(T,N=>In(E,N))})).apply(this,arguments)}function Gu(){return(Gu=(0,g.Z)(function*(y,h,m){const E=(0,O.m9)(y);yield en(!1,E,"phone");const T=yield nu(E.auth,h,(0,O.m9)(m));return new Tn(T,N=>ur(E,N))})).apply(this,arguments)}function Er(){return(Er=(0,g.Z)(function*(y,h,m){const E=(0,O.m9)(y),T=yield nu(E.auth,h,(0,O.m9)(m));return new Tn(T,N=>hs(E,N))})).apply(this,arguments)}function nu(y,h,m){return ta.apply(this,arguments)}function ta(){return(ta=(0,g.Z)(function*(y,h,m){var E;const T=yield m.verify();try{let N;if($("string"==typeof T,y,"argument-error"),$(m.type===Zl,y,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const K=N.session;if("phoneNumber"in N)return $("enroll"===K.type,y,"internal-error"),(yield cf(y,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{$("signin"===K.type,y,"internal-error");const fe=(null===(E=N.multiFactorHint)||void 0===E?void 0:E.uid)||N.multiFactorUid;return $(fe,y,"missing-multi-factor-info"),(yield ea(y,{mfaPendingCredential:K.credential,mfaEnrollmentId:fe,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield ng(y,{phoneNumber:N.phoneNumber,recaptchaToken:T});return K}}finally{m._reset()}})).apply(this,arguments)}function go(){return(go=(0,g.Z)(function*(y,h){yield Ba((0,O.m9)(y),h)})).apply(this,arguments)}let ys=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=dt(m)}verifyPhoneNumber(m,E){return nu(this.auth,m,(0,O.m9)(E))}static credential(m,E){return Uo._fromVerification(m,E)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:T}=m;return E&&T?Uo._fromTokenResponse(E,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Ji(y,h){return h?ee(h):($(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class qu extends Ci{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return ks(h,this._buildIdpRequest())}_linkToIdToken(h,m){return ks(h,this._buildIdpRequest(m))}_getReauthenticationResolver(h){return ks(h,this._buildIdpRequest())}_buildIdpRequest(h){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(m.idToken=h),m}}function Yl(y){return ar(y.auth,new qu(y),y.bypassAuthState)}function mo(y){const{auth:h,user:m}=y;return $(m,h,"internal-error"),Ru(m,new qu(y),y.bypassAuthState)}function Fr(y){return na.apply(this,arguments)}function na(){return(na=(0,g.Z)(function*(y){const{auth:h,user:m}=y;return $(m,h,"internal-error"),Ba(m,new qu(y),y.bypassAuthState)})).apply(this,arguments)}class Bs{constructor(h,m,E,T,N=!1){this.auth=h,this.resolver=E,this.user=T,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var h=this;return new Promise(function(){var m=(0,g.Z)(function*(E,T){h.pendingPromise={resolve:E,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(E,T){return m.apply(this,arguments)}}())}onAuthEvent(h){var m=this;return(0,g.Z)(function*(){const{urlResponse:E,sessionId:T,postBody:N,tenantId:K,error:fe,type:Fe}=h;if(fe)return void m.reject(fe);const Ye={auth:m.auth,requestUri:E,sessionId:T,tenantId:K||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Fe)(Ye))}catch(gt){m.reject(gt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Yl;case"linkViaPopup":case"linkViaRedirect":return Fr;case"reauthViaPopup":case"reauthViaRedirect":return mo;default:De(this.auth,"internal-error")}}resolve(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const fg=new tn(2e3,1e4);function Xi(){return(Xi=(0,g.Z)(function*(y,h,m){const E=dt(y);je(y,h,_r);const T=Ji(E,m);return new js(E,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function Jl(){return(Jl=(0,g.Z)(function*(y,h,m){const E=(0,O.m9)(y);je(E.auth,h,_r);const T=Ji(E.auth,m);return new js(E.auth,"reauthViaPopup",h,T,E).executeNotNull()})).apply(this,arguments)}function yn(){return(yn=(0,g.Z)(function*(y,h,m){const E=(0,O.m9)(y);je(E.auth,h,_r);const T=Ji(E.auth,m);return new js(E.auth,"linkViaPopup",h,T,E).executeNotNull()})).apply(this,arguments)}let js=(()=>{class y extends Bs{constructor(m,E,T,N,K){super(m,E,N,K),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,g.Z)(function*(){const E=yield m.execute();return $(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,g.Z)(function*(){Z(1===m.filter.length,"Popup operations only handle one event");const E=Zi();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(T=>{m.reject(T)}),m.resolver._isIframeWebStorageSupported(m.auth,T=>{T||m.reject(Ee(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,T;this.pollId=(null===(T=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,fg.get())};m()}}return y.currentPopupAction=null,y})();const di=new Map;class Cy extends Bs{constructor(h,m,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,m=this;return(0,g.Z)(function*(){let E=di.get(m.auth._key());if(!E){try{const N=(yield function ra(y,h){return $s.apply(this,arguments)}(m.resolver,m.auth))?yield h().call(m):null;E=()=>Promise.resolve(N)}catch(T){E=()=>Promise.reject(T)}di.set(m.auth._key(),E)}return m.bypassAuthState||di.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var m=()=>super.onAuthEvent,E=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return m().call(E,h);if("unknown"!==h.type){if(h.eventId){const T=yield E.auth._redirectUserForId(h.eventId);if(T)return E.user=T,m().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function $s(){return($s=(0,g.Z)(function*(y,h){const m=L(h),E=R(y);if(!(yield E._isAvailable()))return!1;const T="true"===(yield E._get(m));return yield E._remove(m),T})).apply(this,arguments)}function vs(y,h){return zu.apply(this,arguments)}function zu(){return(zu=(0,g.Z)(function*(y,h){return R(y)._set(L(h),"true")})).apply(this,arguments)}function D(y,h){di.set(y._key(),h)}function R(y){return ee(y._redirectPersistence)}function L(y){return Kn("pendingRedirect",y.config.apiKey,y.name)}function Ne(){return(Ne=(0,g.Z)(function*(y,h,m){const E=dt(y);je(y,h,_r);const T=Ji(E,m);return yield vs(T,E),T._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function bt(){return(bt=(0,g.Z)(function*(y,h,m){const E=(0,O.m9)(y);je(E.auth,h,_r);const T=Ji(E.auth,m);yield vs(T,E.auth);const N=yield Si(E);return T._openRedirect(E.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function lr(){return(lr=(0,g.Z)(function*(y,h,m){const E=(0,O.m9)(y);je(E.auth,h,_r);const T=Ji(E.auth,m);yield en(!1,E,h.providerId),yield vs(T,E.auth);const N=yield Si(E);return T._openRedirect(E.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function bn(){return(bn=(0,g.Z)(function*(y,h){return yield dt(y)._initializationPromise,dn(y,h,!1)})).apply(this,arguments)}function dn(y,h){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,g.Z)(function*(y,h,m=!1){const E=dt(y),T=Ji(E,h),K=yield new Cy(E,T,m).execute();return K&&!m&&(delete K.user._redirectEventId,yield E._persistUserIfCurrent(K.user),yield E._setRedirectUser(null,h)),K})).apply(this,arguments)}function Si(y){return hi.apply(this,arguments)}function hi(){return(hi=(0,g.Z)(function*(y){const h=Zi(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class $d{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(m=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Gd(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xl(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=h,m=!0)),m}sendToConsumer(h,m){var E;if(h.error&&!Xl(h)){const T=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Ee(this.auth,T))}else m.onAuthEvent(h)}isEventForConsumer(h,m){const E=null===m.eventId||!!h.eventId&&h.eventId===m.eventId;return m.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hd(h))}saveEventToCache(h){this.cachedEventUids.add(Hd(h)),this.lastProcessedEventTime=Date.now()}}function Hd(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Xl({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function qd(y){return pf.apply(this,arguments)}function pf(){return(pf=(0,g.Z)(function*(y,h={}){return Vt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const ia=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wu=/^https?/;function ec(){return(ec=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield qd(y);for(const m of h)try{if(zd(m))return}catch(E){}De(y,"unauthorized-domain")})).apply(this,arguments)}function zd(y){const h=Oe(),{protocol:m,hostname:E}=new URL(h);if(y.startsWith("chrome-extension://")){const K=new URL(y);return""===K.hostname&&""===E?"chrome-extension:"===m&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===m&&K.hostname===E}if(!Wu.test(m))return!1;if(ia.test(y))return E===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(E)}const gf=new tn(3e4,6e4);function pg(){const y=Lt().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let sa=null;function gg(y){return sa=sa||function Ty(y){return new Promise((h,m)=>{var E,T,N;function K(){pg(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{pg(),m(Ee(y,"network-request-failed"))},timeout:gf.get()})}if(null===(T=null===(E=Lt().gapi)||void 0===E?void 0:E.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(N=Lt().gapi)||void 0===N?void 0:N.load)){const fe=gs("iframefcb");return Lt()[fe]=()=>{gapi.load?K():m(Ee(y,"network-request-failed"))},ho(`https://apis.google.com/js/api.js?onload=${fe}`).catch(Fe=>m(Fe))}K()}}).catch(h=>{throw sa=null,h})}(y),sa}const tc=new tn(5e3,15e3),Ay={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nc(y){const h=y.config;$(h.authDomain,y,"auth-domain-config-required");const m=h.emulator?Pn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:h.apiKey,appName:y.name,v:ae.SDK_VERSION},T=Sy.get(y.config.apiHost);T&&(E.eid=T);const N=y._getFrameworks();return N.length&&(E.fw=N.join(",")),`${m}?${(0,O.xO)(E).slice(1)}`}function rc(){return rc=(0,g.Z)(function*(y){const h=yield gg(y),m=Lt().gapi;return $(m,y,"internal-error"),h.open({where:document.body,url:nc(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ay,dontclear:!0},E=>new Promise(function(){var T=(0,g.Z)(function*(N,K){yield E.restyle({setHideOnLeave:!1});const fe=Ee(y,"network-request-failed"),Fe=Lt().setTimeout(()=>{K(fe)},tc.get());function Ye(){Lt().clearTimeout(Fe),N(E)}E.ping(Ye).then(Ye,()=>{K(fe)})});return function(N,K){return T.apply(this,arguments)}}()))}),rc.apply(this,arguments)}const oa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class _f{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function aa(y,h,m,E,T,N){$(y.config.authDomain,y,"auth-domain-config-required"),$(y.config.apiKey,y,"invalid-api-key");const K={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:E,v:ae.SDK_VERSION,eventId:T};if(h instanceof _r){h.setDefaultLanguage(y.languageCode),K.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(K.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Fe,Ye]of Object.entries(N||{}))K[Fe]=Ye}if(h instanceof Xs){const Fe=h.getScopes().filter(Ye=>""!==Ye);Fe.length>0&&(K.scopes=Fe.join(","))}y.tenantId&&(K.tid=y.tenantId);const fe=K;for(const Fe of Object.keys(fe))void 0===fe[Fe]&&delete fe[Fe];return`${function vf({config:y}){return y.emulator?Pn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(fe).slice(1)}`}const Ef="webStorageSupport";class Zd extends class yg{constructor(h){this.factorId=h}_process(h,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(h,m.credential,E);case"signin":return this._finalizeSignIn(h,m.credential);default:return ve("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Zd(h)}_finalizeEnroll(h,m,E){return function io(y,h){return Vt(y,"POST","/v2/accounts/mfaEnrollment:finalize",zt(y,h))}(h,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,m){return function Qi(y,h){return Vt(y,"POST","/v2/accounts/mfaSignIn:finalize",zt(y,h))}(h,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Yd=(()=>{class y{constructor(){}static assertion(m){return Zd._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var uc="@firebase/auth";class _g{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var m=this;return(0,g.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const m=this.auth.onIdTokenChanged(E=>{var T;h((null===(T=E)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,m),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const m=this.internalListeners.get(h);!m||(this.internalListeners.delete(h),m(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function es(){return window}function ua(){return(ua=(0,g.Z)(function*(y,h,m){var E;const{BuildInfo:T}=es();Z(h.sessionId,"AuthEvent did not contain a session ID");const N=yield lc(h.sessionId),K={};return qr()?K.ibi=T.packageName:Mr()?K.apn=T.packageName:De(y,"operation-not-supported-in-this-environment"),T.displayName&&(K.appDisplayName=T.displayName),K.sessionId=N,aa(y,m,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,K)})).apply(this,arguments)}function la(){return(la=(0,g.Z)(function*(y){const{BuildInfo:h}=es(),m={};qr()?m.iosBundleId=h.packageName:Mr()?m.androidPackageName=h.packageName:De(y,"operation-not-supported-in-this-environment"),yield qd(y,m)})).apply(this,arguments)}function Zu(){return(Zu=(0,g.Z)(function*(y,h,m){const{cordova:E}=es();let T=()=>{};try{yield new Promise((N,K)=>{let fe=null;function Fe(){var lt;N();const Vn=null===(lt=E.plugins.browsertab)||void 0===lt?void 0:lt.close;"function"==typeof Vn&&Vn(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function Ye(){fe||(fe=window.setTimeout(()=>{K(Ee(y,"redirect-cancelled-by-user"))},2e3))}function gt(){"visible"===(null==document?void 0:document.visibilityState)&&Ye()}h.addPassiveListener(Fe),document.addEventListener("resume",Ye,!1),Mr()&&document.addEventListener("visibilitychange",gt,!1),T=()=>{h.removePassiveListener(Fe),document.removeEventListener("resume",Ye,!1),document.removeEventListener("visibilitychange",gt,!1),fe&&window.clearTimeout(fe)}})}finally{T()}})).apply(this,arguments)}function lc(y){return cc.apply(this,arguments)}function cc(){return(cc=(0,g.Z)(function*(y){const h=dc(y),m=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(m)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function dc(y){if(Z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),m=new Uint8Array(h);for(let E=0;E<y.length;E++)m[E]=y.charCodeAt(E);return m}!function vg(y){(0,ae._registerComponent)(new ue.wA("auth",(h,{options:m})=>{const E=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:N,authDomain:K}=E.options;return((fe,Fe)=>{$(N&&!N.includes(":"),"invalid-api-key",{appName:fe.name}),$(!(null==K?void 0:K.includes(":")),"argument-error",{appName:fe.name});const Ye={apiKey:N,authDomain:K,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vo(y)},gt=new We(fe,Fe,Ye);return function oe(y,h){const m=(null==h?void 0:h.persistence)||[],E=(Array.isArray(m)?m:[m]).map(ee);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(E,null==h?void 0:h.popupRedirectResolver)}(gt,m),gt})(E,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,m,E)=>{h.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new ue.wA("auth-internal",h=>{const m=dt(h.getProvider("auth").getImmediate());return new _g(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(uc,"0.20.2",function xy(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)(uc,"0.20.2","esm2017")}("Browser");class wg extends $d{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function Ig(y){return _o.apply(this,arguments)}function _o(){return(_o=(0,g.Z)(function*(y){const h=yield Eo()._get(Qu(y));return h&&(yield Eo()._remove(Qu(y))),h})).apply(this,arguments)}function fc(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*h.length);y.push(h.charAt(E))}return y.join("")}function Eo(){return ee(Kt)}function Qu(y){return Kn("authEvent",y.config.apiKey,y.name)}function _n(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...m]=y.split("?");return(0,O.zd)(m.join("?"))}function iu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function pc(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function gc(y=(0,O.z$)()){return!("file:"!==pc()&&"ionic:"!==pc()&&"capacitor:"!==pc()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function da(){try{const y=self.localStorage,h=Zi();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Df(y=(0,O.z$)()){return function Vr(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Jd(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return cr()&&(0,O.hl)()}return!1}function cr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function su(){return(function H0(){return"http:"===pc()||"https:"===pc()}()||(0,O.ru)()||gc())&&!function ts(){return(0,O.b$)()||(0,O.UG)()}()&&da()&&!cr()}function mc(){return gc()&&"undefined"!=typeof document}function Xd(){return(Xd=(0,g.Z)(function*(){return!!mc()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Jr={LOCAL:"local",NONE:"none",SESSION:"session"},ha=$,Af="persistence";function yc(y){return Mf.apply(this,arguments)}function Mf(){return(Mf=(0,g.Z)(function*(y){yield y._initializationPromise;const h=Dg(),m=Kn(Af,y.config.apiKey,y.name);h&&h.setItem(m,y._getPersistence())})).apply(this,arguments)}function Dg(){var y;try{return(null===(y=function Tf(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const eh=$;class fi{constructor(){this.browserResolver=ee(class My{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=at,this._completeRedirectFn=dn,this._overrideRedirectResult=D}_openPopup(h,m,E,T){var N=this;return(0,g.Z)(function*(){var K;Z(null===(K=N.eventManagers[h._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const fe=aa(h,m,E,Oe(),T);return function Qr(y,h,m,E=500,T=600){const N=Math.max((window.screen.availHeight-T)/2,0).toString(),K=Math.max((window.screen.availWidth-E)/2,0).toString();let fe="";const Fe=Object.assign(Object.assign({},oa),{width:E.toString(),height:T.toString(),top:N,left:K}),Ye=(0,O.z$)().toLowerCase();m&&(fe=ka(Ye)?"_blank":m),Oa(Ye)&&(h=h||"http://localhost",Fe.scrollbars="yes");const gt=Object.entries(Fe).reduce((Vn,[mi,ou])=>`${Vn}${mi}=${ou},`,"");if(function Qs(y=(0,O.z$)()){var h;return qr(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Ye)&&"_self"!==fe)return function mg(y,h){const m=document.createElement("a");m.href=y,m.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(h||"",fe),new _f(null);const lt=window.open(h||"",fe,gt);$(lt,y,"popup-blocked");try{lt.focus()}catch(Vn){}return new _f(lt)}(h,fe,Zi())})()}_openRedirect(h,m,E,T){var N=this;return(0,g.Z)(function*(){return yield N._originValidation(h),function Us(y){Lt().location.href=y}(aa(h,m,E,Oe(),T)),new Promise(()=>{})})()}_initialize(h){const m=h._key();if(this.eventManagers[m]){const{manager:T,promise:N}=this.eventManagers[m];return T?Promise.resolve(T):(Z(N,"If manager is not set, promise should be"),N)}const E=this.initAndGetManager(h);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(h){var m=this;return(0,g.Z)(function*(){const E=yield function Kd(y){return rc.apply(this,arguments)}(h),T=new $d(h);return E.register("authEvent",N=>($(null==N?void 0:N.authEvent,h,"invalid-auth-event"),{status:T.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[h._key()]={manager:T},m.iframes[h._key()]=E,T})()}_isIframeWebStorageSupported(h,m){this.iframes[h._key()].send(Ef,{type:Ef},T=>{var N;const K=null===(N=null==T?void 0:T[0])||void 0===N?void 0:N[Ef];void 0!==K&&m(!!K),De(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const m=h._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Dy(y){return ec.apply(this,arguments)}(h)),this.originValidationPromises[m]}get _shouldInitProactively(){return Ns()||Tu()||qr()}}),this.cordovaResolver=ee(class Ny{constructor(){this._redirectPersistence=at,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=dn,this._overrideRedirectResult=D}_initialize(h){var m=this;return(0,g.Z)(function*(){const E=h._key();let T=m.eventManagers.get(E);return T||(T=new wg(h),m.eventManagers.set(E,T),m.attachCallbackListeners(h,T)),T})()}_openPopup(h){De(h,"operation-not-supported-in-this-environment")}_openRedirect(h,m,E,T){var N=this;return(0,g.Z)(function*(){!function Yu(y){var h,m,E,T,N,K,fe,Fe,Ye,gt;const lt=es();$("function"==typeof(null===(h=null==lt?void 0:lt.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$(void 0!==(null===(m=null==lt?void 0:lt.BuildInfo)||void 0===m?void 0:m.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$("function"==typeof(null===(N=null===(T=null===(E=null==lt?void 0:lt.cordova)||void 0===E?void 0:E.plugins)||void 0===T?void 0:T.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(Fe=null===(fe=null===(K=null==lt?void 0:lt.cordova)||void 0===K?void 0:K.plugins)||void 0===fe?void 0:fe.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(gt=null===(Ye=null==lt?void 0:lt.cordova)||void 0===Ye?void 0:Ye.InAppBrowser)||void 0===gt?void 0:gt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const K=yield N._initialize(h);yield K.initialized(),K.resetRedirect(),function C(){di.clear()}(),yield N._originValidation(h);const fe=function ca(y,h,m=null){return{type:h,eventId:m,urlResponse:null,sessionId:fc(),postBody:null,tenantId:y.tenantId,error:Ee(y,"no-auth-event")}}(h,E,T);yield function bg(y,h){return Eo()._set(Qu(y),h)}(h,fe);const Fe=yield function ws(y,h,m){return ua.apply(this,arguments)}(h,fe,m),Ye=yield function If(y){const{cordova:h}=es();return new Promise(m=>{h.plugins.browsertab.isAvailable(E=>{let T=null;E?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function vd(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(T)})})}(Fe);return function Cf(y,h,m){return Zu.apply(this,arguments)}(h,K,Ye)})()}_isIframeWebStorageSupported(h,m){throw new Error("Method not implemented.")}_originValidation(h){const m=h._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Eg(y){return la.apply(this,arguments)}(h)),this.originValidationPromises[m]}attachCallbackListeners(h,m){const{universalLinks:E,handleOpenURL:T,BuildInfo:N}=es(),K=setTimeout((0,g.Z)(function*(){yield Ig(h),m.onEvent(iu())}),500),fe=function(){var gt=(0,g.Z)(function*(lt){clearTimeout(K);const Vn=yield Ig(h);let mi=null;Vn&&(null==lt?void 0:lt.url)&&(mi=function vo(y,h){var m,E;const T=function An(y){const h=_n(y),m=h.link?decodeURIComponent(h.link):void 0,E=_n(m).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return _n(T).link||T||E||m||y}(h);if(T.includes("/__/auth/callback")){const N=_n(T),K=N.firebaseError?function Qd(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(N.firebaseError)):null,fe=null===(E=null===(m=null==K?void 0:K.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Fe=fe?Ee(fe):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(Vn,lt.url)),m.onEvent(mi||iu())});return function(Vn){return gt.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,fe);const Fe=T,Ye=`${N.packageName.toLowerCase()}://`;es().handleOpenURL=function(){var gt=(0,g.Z)(function*(lt){if(lt.toLowerCase().startsWith(Ye)&&fe({url:lt}),"function"==typeof Fe)try{Fe(lt)}catch(Vn){console.error(Vn)}});return function(lt){return gt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=at,this._completeRedirectFn=dn,this._overrideRedirectResult=D}_initialize(h){var m=this;return(0,g.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,m,E,T){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,m,E,T)})()}_openRedirect(h,m,E,T){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,m,E,T)})()}_isIframeWebStorageSupported(h,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,m)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return mc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return eh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const m=yield function Fy(){return Xd.apply(this,arguments)}();h.underlyingResolver=m?h.cordovaResolver:h.browserResolver})()}}function _c(y){return y.unwrap()}function vc(y){return Ju(y)}function Ju(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return ys.credentialFromResult(y);const m=h.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=Sd;break;case"facebook.com":E=Bo;break;case"github.com":E=sf;break;case"twitter.com":E=xd;break;default:const{oauthIdToken:T,oauthAccessToken:N,oauthTokenSecret:K,pendingToken:fe,nonce:Fe}=h;return N||K||T||fe?fe?m.startsWith("saml.")?eo._create(m,fe):ds._fromParams({providerId:m,signInMethod:m,pendingToken:fe,idToken:T,accessToken:N}):new Hi(m).credential({idToken:T,accessToken:N,rawNonce:Fe}):null}return y instanceof O.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function pi(y,h){return h.catch(m=>{throw m instanceof O.ZR&&function Ec(y,h){var m;const E=null===(m=h.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new Tg(y,function tr(y,h){var m;const E=(0,O.m9)(y),T=h;return $(h.customData.operationType,E,"argument-error"),$(null===(m=T.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),Qo._fromError(E,T)}(y,h));else if(E){const T=Ju(h),N=h;T&&(N.credential=T,N.tenantId=E.tenantId||void 0,N.email=E.email||void 0,N.phoneNumber=E.phoneNumber||void 0)}}(y,m),m}).then(m=>{const T=m.user;return{operationType:m.operationType,credential:vc(m),additionalUserInfo:Ki(m),user:wo.getOrCreate(T)}})}function Ln(y,h){return th.apply(this,arguments)}function th(){return(th=(0,g.Z)(function*(y,h){const m=yield h;return{verificationId:m.verificationId,confirm:E=>pi(y,m.confirm(E))}})).apply(this,arguments)}class Tg{constructor(h,m){this.resolver=m,this.auth=function Rf(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return pi(_c(this.auth),this.resolver.resolveSignIn(h))}}class wo{constructor(h){this._delegate=h,this.multiFactor=function Uu(y){const h=(0,O.m9)(y);return Vu.has(h)||Vu.set(h,Fd._fromUser(h)),Vu.get(h)}(h)}static getOrCreate(h){return wo.USER_MAP.has(h)||wo.USER_MAP.set(h,new wo(h)),wo.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var m=this;return(0,g.Z)(function*(){return pi(m.auth,ur(m._delegate,h))})()}linkWithPhoneNumber(h,m){var E=this;return(0,g.Z)(function*(){return Ln(E.auth,function hg(y,h,m){return Gu.apply(this,arguments)}(E._delegate,h,m))})()}linkWithPopup(h){var m=this;return(0,g.Z)(function*(){return pi(m.auth,function ff(y,h,m){return yn.apply(this,arguments)}(m._delegate,h,fi))})()}linkWithRedirect(h){var m=this;return(0,g.Z)(function*(){return yield yc(dt(m.auth)),function jt(y,h,m){return function It(y,h,m){return lr.apply(this,arguments)}(y,h,m)}(m._delegate,h,fi)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var m=this;return(0,g.Z)(function*(){return pi(m.auth,hs(m._delegate,h))})()}reauthenticateWithPhoneNumber(h,m){return Ln(this.auth,function Yr(y,h,m){return Er.apply(this,arguments)}(this._delegate,h,m))}reauthenticateWithPopup(h){return pi(this.auth,function Ql(y,h,m){return Jl.apply(this,arguments)}(this._delegate,h,fi))}reauthenticateWithRedirect(h){var m=this;return(0,g.Z)(function*(){return yield yc(dt(m.auth)),function Ve(y,h,m){return function wt(y,h,m){return bt.apply(this,arguments)}(y,h,m)}(m._delegate,h,fi)})()}sendEmailVerification(h){return function Hl(y,h){return ku.apply(this,arguments)}(this._delegate,h)}unlink(h){var m=this;return(0,g.Z)(function*(){return yield function af(y,h){return un.apply(this,arguments)}(m._delegate,h),m})()}updateEmail(h){return function ag(y,h){return Ko((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function zl(y,h){return Ko((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function ci(y,h){return go.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function ql(y,h){return Za.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,m){return function Gl(y,h,m){return Fu.apply(this,arguments)}(this._delegate,h,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}wo.USER_MAP=new WeakMap;const wc=$;let Ag=(()=>{class y{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=m.options;wc(T,"invalid-api-key",{appName:m.name}),wc(T,"invalid-api-key",{appName:m.name});const N="undefined"!=typeof window?fi:void 0;this._delegate=E.initialize({options:{persistence:Sg(T,m.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Pe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?wo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function Wr(y,h,m){const E=dt(y);$(E._canInitEmulator,E,"emulator-config-failed"),$(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const T=!!(null==m?void 0:m.disableWarnings),N=Li(h),{host:K,port:fe}=function Gn(y){const h=Li(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(E);if(T){const N=T[1];return{host:N,port:Vi(E.substr(N.length+1))}}{const[N,K]=E.split(":");return{host:N,port:Vi(K)}}}(h);E.config.emulator={url:`${N}//${K}${null===fe?"":`:${fe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:K,port:fe,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function pn(){function y(){const h=document.createElement("p"),m=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,E)}applyActionCode(m){return function Ae(y,h){return Ft.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return jl(this._delegate,m)}confirmPasswordReset(m,E){return function Ul(y,h,m){return Bl.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var T=this;return(0,g.Z)(function*(){return pi(T._delegate,function ai(y,h,m){return qa.apply(this,arguments)}(T._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Vs(y,h){return Ti.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function za(y,h){const m=xu.parseLink(h);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,g.Z)(function*(){wc(su(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function qn(y,h){return bn.apply(this,arguments)}(m._delegate,fi);return E?pi(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Py(y,h){dt(y)._logFramework(h)}(this._delegate,m)}onAuthStateChanged(m,E,T){const{next:N,error:K,complete:fe}=Nf(m,E,T);return this._delegate.onAuthStateChanged(N,K,fe)}onIdTokenChanged(m,E,T){const{next:N,error:K,complete:fe}=Nf(m,E,T);return this._delegate.onIdTokenChanged(N,K,fe)}sendSignInLinkToEmail(m,E){return function og(y,h,m){return Pu.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function Vl(y,h,m){return Ga.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,g.Z)(function*(){let T;switch(function Sf(y,h){ha(Object.values(Jr).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?ha(h!==Jr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?ha(h===Jr.NONE,y,"unsupported-persistence-type"):cr()?ha(h===Jr.NONE||h===Jr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):ha(h===Jr.NONE||da(),y,"unsupported-persistence-type")}(E._delegate,m),m){case Jr.SESSION:T=at;break;case Jr.LOCAL:T=(yield ee(Yi)._isAvailable())?Yi:Kt;break;case Jr.NONE:T=Ct;break;default:return De("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return pi(this._delegate,function Rd(y){return kl.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return pi(this._delegate,In(this._delegate,m))}signInWithCustomToken(m){return pi(this._delegate,function Go(y,h){return pt.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return pi(this._delegate,function $l(y,h,m){return In((0,O.m9)(y),Ad.credential(h,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return pi(this._delegate,function Ou(y,h,m){return Fn.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return Ln(this._delegate,function Hu(y,h,m){return ms.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,g.Z)(function*(){return wc(su(),E._delegate,"operation-not-supported-in-this-environment"),pi(E._delegate,function Bd(y,h,m){return Xi.apply(this,arguments)}(E._delegate,m,fi))})()}signInWithRedirect(m){var E=this;return(0,g.Z)(function*(){return wc(su(),E._delegate,"operation-not-supported-in-this-environment"),yield yc(E._delegate),function Y(y,h,m){return function ie(y,h,m){return Ne.apply(this,arguments)}(y,h,m)}(E._delegate,m,fi)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function zo(y,h){return ro.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Jr,y})();function Nf(y,h,m){let E=y;"function"!=typeof y&&({next:E,error:h,complete:m}=y);const T=E;return{next:K=>T(K&&wo.getOrCreate(K)),error:h,complete:m}}function Sg(y,h){const m=function xf(y,h){const m=Dg();if(!m)return[];const E=Kn(Af,y,h);switch(m.getItem(E)){case Jr.NONE:return[Ct];case Jr.LOCAL:return[Yi,at];case Jr.SESSION:return[at];default:return[]}}(y,h);if("undefined"!=typeof self&&!m.includes(Yi)&&m.push(Yi),"undefined"!=typeof window)for(const E of[Kt,at])m.includes(E)||m.push(E);return m.includes(Ct)||m.push(Ct),m}class nh{constructor(){this.providerId="phone",this._delegate=new ys(_c(X.Z.auth()))}static credential(h,m){return ys.credential(h,m)}verifyPhoneNumber(h,m){return this._delegate.verifyPhoneNumber(h,m)}unwrap(){return this._delegate}}nh.PHONE_SIGN_IN_METHOD=ys.PHONE_SIGN_IN_METHOD,nh.PROVIDER_ID=ys.PROVIDER_ID;const rh=$;class Mg{constructor(h,m,E=X.Z.app()){var T;rh(null===(T=E.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new po(h,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function bs(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",h=>{const m=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new Ag(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ad,FacebookAuthProvider:Bo,GithubAuthProvider:sf,GoogleAuthProvider:Sd,OAuthProvider:Hi,SAMLAuthProvider:xr,PhoneAuthProvider:nh,PhoneMultiFactorGenerator:Yd,RecaptchaVerifier:Mg,TwitterAuthProvider:xd,Auth:Ag,AuthCredential:Ci,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.15")}(X.Z)},8306:(tt,we,P)=>{P.d(we,{y:()=>H});var g=P(2961),X=P(727),O=P(8822),ae=P(4671);var ue=P(2416),se=P(576),he=P(2806);let H=(()=>{class Me{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const pe=new Me;return pe.source=this,pe.operator=Ue,pe}subscribe(Ue,pe,Ce){const ze=function qe(Me){return Me&&Me instanceof g.Lv||function te(Me){return Me&&(0,se.m)(Me.next)&&(0,se.m)(Me.error)&&(0,se.m)(Me.complete)}(Me)&&(0,X.Nn)(Me)}(Ue)?Ue:new g.Hp(Ue,pe,Ce);return(0,he.x)(()=>{const{operator:Qe,source:De}=this;ze.add(Qe?Qe.call(ze,De):De?this._subscribe(ze):this._trySubscribe(ze))}),ze}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(pe){Ue.error(pe)}}forEach(Ue,pe){return new(pe=j(pe))((Ce,ze)=>{const Qe=new g.Hp({next:De=>{try{Ue(De)}catch(Ee){ze(Ee),Qe.unsubscribe()}},error:ze,complete:Ce});this.subscribe(Qe)})}_subscribe(Ue){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(Ue)}[O.L](){return this}pipe(...Ue){return function ge(Me){return 0===Me.length?ae.y:1===Me.length?Me[0]:function(Ue){return Me.reduce((pe,Ce)=>Ce(pe),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=j(Ue))((pe,Ce)=>{let ze;this.subscribe(Qe=>ze=Qe,Qe=>Ce(Qe),()=>pe(ze))})}}return Me.create=Pe=>new Me(Pe),Me})();function j(Me){var Pe;return null!==(Pe=null!=Me?Me:ue.v.Promise)&&void 0!==Pe?Pe:Promise}},7579:(tt,we,P)=>{P.d(we,{x:()=>ue});var g=P(8306),X=P(727);const ae=(0,P(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=P(8737),ge=P(2806);let ue=(()=>{class he extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const te=new se(this,this);return te.operator=j,te}_throwIfClosed(){if(this.closed)throw new ae}next(j){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(j)}})}error(j){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:te}=this;for(;te.length;)te.shift().error(j)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:te,isStopped:qe,observers:Me}=this;return te||qe?X.Lc:(this.currentObservers=null,Me.push(j),new X.w0(()=>{this.currentObservers=null,(0,ne.P)(Me,j)}))}_checkFinalizedStatuses(j){const{hasError:te,thrownError:qe,isStopped:Me}=this;te?j.error(qe):Me&&j.complete()}asObservable(){const j=new g.y;return j.source=this,j}}return he.create=(H,j)=>new se(H,j),he})();class se extends ue{constructor(H,j){super(),this.destination=H,this.source=j}next(H){var j,te;null===(te=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===te||te.call(j,H)}error(H){var j,te;null===(te=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===te||te.call(j,H)}complete(){var H,j;null===(j=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===j||j.call(H)}_subscribe(H){var j,te;return null!==(te=null===(j=this.source)||void 0===j?void 0:j.subscribe(H))&&void 0!==te?te:X.Lc}}},2961:(tt,we,P)=>{P.d(we,{Hp:()=>Ue,Lv:()=>te});var g=P(576),X=P(727),O=P(2416),ae=P(7849);function ne(){}const ge=he("C",void 0,void 0);function he(De,Ee,be){return{kind:De,value:Ee,error:be}}var H=P(3410),j=P(2806);class te extends X.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,X.Nn)(Ee)&&Ee.add(this)):this.destination=Qe}static create(Ee,be,je){return new Ue(Ee,be,je)}next(Ee){this.isStopped?ze(function se(De){return he("N",De,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?ze(function ue(De){return he("E",void 0,De)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?ze(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function Me(De,Ee){return qe.call(De,Ee)}class Pe{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:be}=this;if(be.next)try{be.next(Ee)}catch(je){pe(je)}}error(Ee){const{partialObserver:be}=this;if(be.error)try{be.error(Ee)}catch(je){pe(je)}else pe(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(be){pe(be)}}}class Ue extends te{constructor(Ee,be,je){let Be;if(super(),(0,g.m)(Ee)||!Ee)Be={next:null!=Ee?Ee:void 0,error:null!=be?be:void 0,complete:null!=je?je:void 0};else{let $;this&&O.v.useDeprecatedNextContext?($=Object.create(Ee),$.unsubscribe=()=>this.unsubscribe(),Be={next:Ee.next&&Me(Ee.next,$),error:Ee.error&&Me(Ee.error,$),complete:Ee.complete&&Me(Ee.complete,$)}):Be=Ee}this.destination=new Pe(Be)}}function pe(De){O.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(De):(0,ae.h)(De)}function ze(De,Ee){const{onStoppedNotification:be}=O.v;be&&H.z.setTimeout(()=>be(De,Ee))}const Qe={closed:!0,next:ne,error:function Ce(De){throw De},complete:ne}},727:(tt,we,P)=>{P.d(we,{Lc:()=>ge,w0:()=>ne,Nn:()=>ue});var g=P(576);const O=(0,P(3888).d)(he=>function(j){he(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((te,qe)=>`${qe+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ae=P(8737);class ne{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Me of j)Me.remove(this);else j.remove(this);const{initialTeardown:te}=this;if((0,g.m)(te))try{te()}catch(Me){H=Me instanceof O?Me.errors:[Me]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const Me of qe)try{se(Me)}catch(Pe){H=null!=H?H:[],Pe instanceof O?H=[...H,...Pe.errors]:H.push(Pe)}}if(H)throw new O(H)}}add(H){var j;if(H&&H!==this)if(this.closed)se(H);else{if(H instanceof ne){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(H)}}_hasParent(H){const{_parentage:j}=this;return j===H||Array.isArray(j)&&j.includes(H)}_addParent(H){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(H),j):j?[j,H]:H}_removeParent(H){const{_parentage:j}=this;j===H?this._parentage=null:Array.isArray(j)&&(0,ae.P)(j,H)}remove(H){const{_finalizers:j}=this;j&&(0,ae.P)(j,H),H instanceof ne&&H._removeParent(this)}}ne.EMPTY=(()=>{const he=new ne;return he.closed=!0,he})();const ge=ne.EMPTY;function ue(he){return he instanceof ne||he&&"closed"in he&&(0,g.m)(he.remove)&&(0,g.m)(he.add)&&(0,g.m)(he.unsubscribe)}function se(he){(0,g.m)(he)?he():he.unsubscribe()}},2416:(tt,we,P)=>{P.d(we,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(tt,we,P)=>{P.d(we,{E:()=>X});const X=new(P(8306).y)(ne=>ne.complete())},8996:(tt,we,P)=>{P.d(we,{D:()=>Ee});var g=P(8421),X=P(5363),O=P(9468),ge=P(8306),se=P(2202),he=P(576),H=P(9672);function te(be,je){if(!be)throw new Error("Iterable cannot be null");return new ge.y(Be=>{(0,H.f)(Be,je,()=>{const $=be[Symbol.asyncIterator]();(0,H.f)(Be,je,()=>{$.next().then(ve=>{ve.done?Be.complete():Be.next(ve.value)})},0,!0)})})}var qe=P(3670),Me=P(8239),Pe=P(1144),Ue=P(6495),pe=P(2206),Ce=P(4532),ze=P(3260);function Ee(be,je){return je?function De(be,je){if(null!=be){if((0,qe.c)(be))return function ae(be,je){return(0,g.Xf)(be).pipe((0,O.R)(je),(0,X.Q)(je))}(be,je);if((0,Pe.z)(be))return function ue(be,je){return new ge.y(Be=>{let $=0;return je.schedule(function(){$===be.length?Be.complete():(Be.next(be[$++]),Be.closed||this.schedule())})})}(be,je);if((0,Me.t)(be))return function ne(be,je){return(0,g.Xf)(be).pipe((0,O.R)(je),(0,X.Q)(je))}(be,je);if((0,pe.D)(be))return te(be,je);if((0,Ue.T)(be))return function j(be,je){return new ge.y(Be=>{let $;return(0,H.f)(Be,je,()=>{$=be[se.h](),(0,H.f)(Be,je,()=>{let ve,Z;try{({value:ve,done:Z}=$.next())}catch(re){return void Be.error(re)}Z?Be.complete():Be.next(ve)},0,!0)}),()=>(0,he.m)(null==$?void 0:$.return)&&$.return()})}(be,je);if((0,ze.L)(be))return function Qe(be,je){return te((0,ze.Q)(be),je)}(be,je)}throw(0,Ce.z)(be)}(be,je):(0,g.Xf)(be)}},8421:(tt,we,P)=>{P.d(we,{Xf:()=>qe});var g=P(655),X=P(1144),O=P(8239),ae=P(8306),ne=P(3670),ge=P(2206),ue=P(4532),se=P(6495),he=P(3260),H=P(576),j=P(7849),te=P(8822);function qe(De){if(De instanceof ae.y)return De;if(null!=De){if((0,ne.c)(De))return function Me(De){return new ae.y(Ee=>{const be=De[te.L]();if((0,H.m)(be.subscribe))return be.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,X.z)(De))return function Pe(De){return new ae.y(Ee=>{for(let be=0;be<De.length&&!Ee.closed;be++)Ee.next(De[be]);Ee.complete()})}(De);if((0,O.t)(De))return function Ue(De){return new ae.y(Ee=>{De.then(be=>{Ee.closed||(Ee.next(be),Ee.complete())},be=>Ee.error(be)).then(null,j.h)})}(De);if((0,ge.D)(De))return Ce(De);if((0,se.T)(De))return function pe(De){return new ae.y(Ee=>{for(const be of De)if(Ee.next(be),Ee.closed)return;Ee.complete()})}(De);if((0,he.L)(De))return function ze(De){return Ce((0,he.Q)(De))}(De)}throw(0,ue.z)(De)}function Ce(De){return new ae.y(Ee=>{(function Qe(De,Ee){var be,je,Be,$;return(0,g.mG)(this,void 0,void 0,function*(){try{for(be=(0,g.KL)(De);!(je=yield be.next()).done;)if(Ee.next(je.value),Ee.closed)return}catch(ve){Be={error:ve}}finally{try{je&&!je.done&&($=be.return)&&(yield $.call(be))}finally{if(Be)throw Be.error}}Ee.complete()})})(De,Ee).catch(be=>Ee.error(be))})}},6451:(tt,we,P)=>{P.d(we,{T:()=>ge});var g=P(8189),X=P(8421),O=P(515),ae=P(7669),ne=P(8996);function ge(...ue){const se=(0,ae.yG)(ue),he=(0,ae._6)(ue,1/0),H=ue;return H.length?1===H.length?(0,X.Xf)(H[0]):(0,g.J)(he)((0,ne.D)(H,se)):O.E}},5403:(tt,we,P)=>{P.d(we,{x:()=>X});var g=P(2961);function X(ae,ne,ge,ue,se){return new O(ae,ne,ge,ue,se)}class O extends g.Lv{constructor(ne,ge,ue,se,he,H){super(ne),this.onFinalize=he,this.shouldUnsubscribe=H,this._next=ge?function(j){try{ge(j)}catch(te){ne.error(te)}}:super._next,this._error=se?function(j){try{se(j)}catch(te){ne.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(j){ne.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},4004:(tt,we,P)=>{P.d(we,{U:()=>O});var g=P(4482),X=P(5403);function O(ae,ne){return(0,g.e)((ge,ue)=>{let se=0;ge.subscribe((0,X.x)(ue,he=>{ue.next(ae.call(ne,he,se++))}))})}},8189:(tt,we,P)=>{P.d(we,{J:()=>O});var g=P(5577),X=P(4671);function O(ae=1/0){return(0,g.z)(X.y,ae)}},5577:(tt,we,P)=>{P.d(we,{z:()=>se});var g=P(4004),X=P(8421),O=P(4482),ae=P(9672),ne=P(5403),ue=P(576);function se(he,H,j=1/0){return(0,ue.m)(H)?se((te,qe)=>(0,g.U)((Me,Pe)=>H(te,Me,qe,Pe))((0,X.Xf)(he(te,qe))),j):("number"==typeof H&&(j=H),(0,O.e)((te,qe)=>function ge(he,H,j,te,qe,Me,Pe,Ue){const pe=[];let Ce=0,ze=0,Qe=!1;const De=()=>{Qe&&!pe.length&&!Ce&&H.complete()},Ee=je=>Ce<te?be(je):pe.push(je),be=je=>{Me&&H.next(je),Ce++;let Be=!1;(0,X.Xf)(j(je,ze++)).subscribe((0,ne.x)(H,$=>{null==qe||qe($),Me?Ee($):H.next($)},()=>{Be=!0},void 0,()=>{if(Be)try{for(Ce--;pe.length&&Ce<te;){const $=pe.shift();Pe?(0,ae.f)(H,Pe,()=>be($)):be($)}De()}catch($){H.error($)}}))};return he.subscribe((0,ne.x)(H,Ee,()=>{Qe=!0,De()})),()=>{null==Ue||Ue()}}(te,qe,he,j)))}},5363:(tt,we,P)=>{P.d(we,{Q:()=>ae});var g=P(9672),X=P(4482),O=P(5403);function ae(ne,ge=0){return(0,X.e)((ue,se)=>{ue.subscribe((0,O.x)(se,he=>(0,g.f)(se,ne,()=>se.next(he),ge),()=>(0,g.f)(se,ne,()=>se.complete(),ge),he=>(0,g.f)(se,ne,()=>se.error(he),ge)))})}},3099:(tt,we,P)=>{P.d(we,{B:()=>ge});var g=P(8996),X=P(5698),O=P(7579),ae=P(2961),ne=P(4482);function ge(se={}){const{connector:he=(()=>new O.x),resetOnError:H=!0,resetOnComplete:j=!0,resetOnRefCountZero:te=!0}=se;return qe=>{let Me=null,Pe=null,Ue=null,pe=0,Ce=!1,ze=!1;const Qe=()=>{null==Pe||Pe.unsubscribe(),Pe=null},De=()=>{Qe(),Me=Ue=null,Ce=ze=!1},Ee=()=>{const be=Me;De(),null==be||be.unsubscribe()};return(0,ne.e)((be,je)=>{pe++,!ze&&!Ce&&Qe();const Be=Ue=null!=Ue?Ue:he();je.add(()=>{pe--,0===pe&&!ze&&!Ce&&(Pe=ue(Ee,te))}),Be.subscribe(je),Me||(Me=new ae.Hp({next:$=>Be.next($),error:$=>{ze=!0,Qe(),Pe=ue(De,H,$),Be.error($)},complete:()=>{Ce=!0,Qe(),Pe=ue(De,j),Be.complete()}}),(0,g.D)(be).subscribe(Me))})(qe)}}function ue(se,he,...H){return!0===he?(se(),null):!1===he?null:he(...H).pipe((0,X.q)(1)).subscribe(()=>se())}},9468:(tt,we,P)=>{P.d(we,{R:()=>X});var g=P(4482);function X(O,ae=0){return(0,g.e)((ne,ge)=>{ge.add(O.schedule(()=>ne.subscribe(ge),ae))})}},5698:(tt,we,P)=>{P.d(we,{q:()=>ae});var g=P(515),X=P(4482),O=P(5403);function ae(ne){return ne<=0?()=>g.E:(0,X.e)((ge,ue)=>{let se=0;ge.subscribe((0,O.x)(ue,he=>{++se<=ne&&(ue.next(he),ne<=se&&ue.complete())}))})}},8505:(tt,we,P)=>{P.d(we,{b:()=>ne});var g=P(576),X=P(4482),O=P(5403),ae=P(4671);function ne(ge,ue,se){const he=(0,g.m)(ge)||ue||se?{next:ge,error:ue,complete:se}:ge;return he?(0,X.e)((H,j)=>{var te;null===(te=he.subscribe)||void 0===te||te.call(he);let qe=!0;H.subscribe((0,O.x)(j,Me=>{var Pe;null===(Pe=he.next)||void 0===Pe||Pe.call(he,Me),j.next(Me)},()=>{var Me;qe=!1,null===(Me=he.complete)||void 0===Me||Me.call(he),j.complete()},Me=>{var Pe;qe=!1,null===(Pe=he.error)||void 0===Pe||Pe.call(he,Me),j.error(Me)},()=>{var Me,Pe;qe&&(null===(Me=he.unsubscribe)||void 0===Me||Me.call(he)),null===(Pe=he.finalize)||void 0===Pe||Pe.call(he)}))}):ae.y}},4408:(tt,we,P)=>{P.d(we,{o:()=>ne});var g=P(727);class X extends g.w0{constructor(ue,se){super()}schedule(ue,se=0){return this}}const O={setInterval(ge,ue,...se){const{delegate:he}=O;return(null==he?void 0:he.setInterval)?he.setInterval(ge,ue,...se):setInterval(ge,ue,...se)},clearInterval(ge){const{delegate:ue}=O;return((null==ue?void 0:ue.clearInterval)||clearInterval)(ge)},delegate:void 0};var ae=P(8737);class ne extends X{constructor(ue,se){super(ue,se),this.scheduler=ue,this.work=se,this.pending=!1}schedule(ue,se=0){if(this.closed)return this;this.state=ue;const he=this.id,H=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(H,he,se)),this.pending=!0,this.delay=se,this.id=this.id||this.requestAsyncId(H,this.id,se),this}requestAsyncId(ue,se,he=0){return O.setInterval(ue.flush.bind(ue,this),he)}recycleAsyncId(ue,se,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return se;O.clearInterval(se)}execute(ue,se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ue,se);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,se){let H,he=!1;try{this.work(ue)}catch(j){he=!0,H=j||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:ue,scheduler:se}=this,{actions:he}=se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(he,this),null!=ue&&(this.id=this.recycleAsyncId(se,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(tt,we,P)=>{P.d(we,{v:()=>O});var g=P(6063);class X{constructor(ne,ge=X.now){this.schedulerActionCtor=ne,this.now=ge}schedule(ne,ge=0,ue){return new this.schedulerActionCtor(this,ne).schedule(ue,ge)}}X.now=g.l.now;class O extends X{constructor(ne,ge=X.now){super(ne,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ne){const{actions:ge}=this;if(this._active)return void ge.push(ne);let ue;this._active=!0;do{if(ue=ne.execute(ne.state,ne.delay))break}while(ne=ge.shift());if(this._active=!1,ue){for(;ne=ge.shift();)ne.unsubscribe();throw ue}}}},4986:(tt,we,P)=>{P.d(we,{z:()=>O});var g=P(4408);const O=new(P(7565).v)(g.o)},6063:(tt,we,P)=>{P.d(we,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(tt,we,P)=>{P.d(we,{z:()=>g});const g={setTimeout(X,O,...ae){const{delegate:ne}=g;return(null==ne?void 0:ne.setTimeout)?ne.setTimeout(X,O,...ae):setTimeout(X,O,...ae)},clearTimeout(X){const{delegate:O}=g;return((null==O?void 0:O.clearTimeout)||clearTimeout)(X)},delegate:void 0}},2202:(tt,we,P)=>{P.d(we,{h:()=>X});const X=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(tt,we,P)=>{P.d(we,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(tt,we,P)=>{P.d(we,{_6:()=>ge,jO:()=>ae,yG:()=>ne});var g=P(576);function O(ue){return ue[ue.length-1]}function ae(ue){return(0,g.m)(O(ue))?ue.pop():void 0}function ne(ue){return function X(ue){return ue&&(0,g.m)(ue.schedule)}(O(ue))?ue.pop():void 0}function ge(ue,se){return"number"==typeof O(ue)?ue.pop():se}},8737:(tt,we,P)=>{function g(X,O){if(X){const ae=X.indexOf(O);0<=ae&&X.splice(ae,1)}}P.d(we,{P:()=>g})},3888:(tt,we,P)=>{function g(X){const ae=X(ne=>{Error.call(ne),ne.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}P.d(we,{d:()=>g})},2806:(tt,we,P)=>{P.d(we,{x:()=>O,O:()=>ae});var g=P(2416);let X=null;function O(ne){if(g.v.useDeprecatedSynchronousErrorHandling){const ge=!X;if(ge&&(X={errorThrown:!1,error:null}),ne(),ge){const{errorThrown:ue,error:se}=X;if(X=null,ue)throw se}}else ne()}function ae(ne){g.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=ne)}},9672:(tt,we,P)=>{function g(X,O,ae,ne=0,ge=!1){const ue=O.schedule(function(){ae(),ge?X.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(X.add(ue),!ge)return ue}P.d(we,{f:()=>g})},4671:(tt,we,P)=>{function g(X){return X}P.d(we,{y:()=>g})},1144:(tt,we,P)=>{P.d(we,{z:()=>g});const g=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(tt,we,P)=>{P.d(we,{D:()=>X});var g=P(576);function X(O){return Symbol.asyncIterator&&(0,g.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(tt,we,P)=>{function g(X){return"function"==typeof X}P.d(we,{m:()=>g})},3670:(tt,we,P)=>{P.d(we,{c:()=>O});var g=P(8822),X=P(576);function O(ae){return(0,X.m)(ae[g.L])}},6495:(tt,we,P)=>{P.d(we,{T:()=>O});var g=P(2202),X=P(576);function O(ae){return(0,X.m)(null==ae?void 0:ae[g.h])}},8239:(tt,we,P)=>{P.d(we,{t:()=>X});var g=P(576);function X(O){return(0,g.m)(null==O?void 0:O.then)}},3260:(tt,we,P)=>{P.d(we,{Q:()=>O,L:()=>ae});var g=P(655),X=P(576);function O(ne){return(0,g.FC)(this,arguments,function*(){const ue=ne.getReader();try{for(;;){const{value:se,done:he}=yield(0,g.qq)(ue.read());if(he)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(se)}}finally{ue.releaseLock()}})}function ae(ne){return(0,X.m)(null==ne?void 0:ne.getReader)}},4482:(tt,we,P)=>{P.d(we,{A:()=>X,e:()=>O});var g=P(576);function X(ae){return(0,g.m)(null==ae?void 0:ae.lift)}function O(ae){return ne=>{if(X(ne))return ne.lift(function(ge){try{return ae(ge,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(tt,we,P)=>{P.d(we,{h:()=>O});var g=P(2416),X=P(3410);function O(ae){X.z.setTimeout(()=>{const{onUnhandledError:ne}=g.v;if(!ne)throw ae;ne(ae)})}},4532:(tt,we,P)=>{function g(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(we,{z:()=>g})},655:(tt,we,P)=>{function ae(Z,re){var ee={};for(var me in Z)Object.prototype.hasOwnProperty.call(Z,me)&&re.indexOf(me)<0&&(ee[me]=Z[me]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var oe=0;for(me=Object.getOwnPropertySymbols(Z);oe<me.length;oe++)re.indexOf(me[oe])<0&&Object.prototype.propertyIsEnumerable.call(Z,me[oe])&&(ee[me[oe]]=Z[me[oe]])}return ee}function se(Z,re,ee,me){return new(ee||(ee=Promise))(function(Oe,ht){function Ht(tn){try{Je(me.next(tn))}catch(Pn){ht(Pn)}}function Ut(tn){try{Je(me.throw(tn))}catch(Pn){ht(Pn)}}function Je(tn){tn.done?Oe(tn.value):function oe(Oe){return Oe instanceof ee?Oe:new ee(function(ht){ht(Oe)})}(tn.value).then(Ht,Ut)}Je((me=me.apply(Z,re||[])).next())})}function pe(Z){return this instanceof pe?(this.v=Z,this):new pe(Z)}function Ce(Z,re,ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,me=ee.apply(Z,re||[]),Oe=[];return oe={},ht("next"),ht("throw"),ht("return"),oe[Symbol.asyncIterator]=function(){return this},oe;function ht(on){me[on]&&(oe[on]=function(Xt){return new Promise(function(Tr,zt){Oe.push([on,Xt,Tr,zt])>1||Ht(on,Xt)})})}function Ht(on,Xt){try{!function Ut(on){on.value instanceof pe?Promise.resolve(on.value.v).then(Je,tn):Pn(Oe[0][2],on)}(me[on](Xt))}catch(Tr){Pn(Oe[0][3],Tr)}}function Je(on){Ht("next",on)}function tn(on){Ht("throw",on)}function Pn(on,Xt){on(Xt),Oe.shift(),Oe.length&&Ht(Oe[0][0],Oe[0][1])}}function Qe(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,re=Z[Symbol.asyncIterator];return re?re.call(Z):(Z=function te(Z){var re="function"==typeof Symbol&&Symbol.iterator,ee=re&&Z[re],me=0;if(ee)return ee.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&me>=Z.length&&(Z=void 0),{value:Z&&Z[me++],done:!Z}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),ee={},me("next"),me("throw"),me("return"),ee[Symbol.asyncIterator]=function(){return this},ee);function me(Oe){ee[Oe]=Z[Oe]&&function(ht){return new Promise(function(Ht,Ut){!function oe(Oe,ht,Ht,Ut){Promise.resolve(Ut).then(function(Je){Oe({value:Je,done:Ht})},ht)}(Ht,Ut,(ht=Z[Oe](ht)).done,ht.value)})}}}P.d(we,{_T:()=>ae,mG:()=>se,qq:()=>pe,FC:()=>Ce,KL:()=>Qe})},5e3:(tt,we,P)=>{P.d(we,{deG:()=>hf,tb:()=>Hr,AFp:()=>kb,ip1:()=>bl,CZH:()=>Yv,hGG:()=>FT,z2F:()=>e0,sBO:()=>bT,Sil:()=>hT,_Vd:()=>Hm,EJc:()=>cT,SBq:()=>jh,qLn:()=>vc,vpe:()=>Ao,tBr:()=>dn,XFs:()=>mt,OlP:()=>wn,zs3:()=>Ni,ZZ4:()=>uy,aQg:()=>h0,soG:()=>Xm,YKP:()=>rr,h0i:()=>Ip,PXZ:()=>vT,R0b:()=>ss,FiY:()=>Lr,Lbi:()=>kp,g9A:()=>Op,Qsj:()=>Wt,FYo:()=>vp,JOm:()=>T,tp0:()=>hi,Rgc:()=>od,dDg:()=>yT,q4F:()=>Sn,GfV:()=>Jw,s_b:()=>vl,ifc:()=>Gt,eFA:()=>Ws,G48:()=>r0,Gpc:()=>j,X6Q:()=>wT,_c5:()=>kT,VLi:()=>$S,c2e:()=>Lb,zSh:()=>rs,wAp:()=>_t,vHH:()=>Pe,cg1:()=>gp,kL8:()=>Cm,dqk:()=>Bt,sIi:()=>Jf,CqO:()=>A_,QGY:()=>T_,F4k:()=>ap,RDi:()=>Fl,AaK:()=>se,qOj:()=>Xg,TTD:()=>Hi,_Bn:()=>Hw,xp6:()=>nE,uIk:()=>p_,ekj:()=>V_,Suo:()=>gb,Xpm:()=>ft,lG2:()=>Tu,Yz7:()=>Xt,cJS:()=>zt,oAB:()=>Sr,Yjl:()=>ka,Y36:()=>zs,_UZ:()=>Ia,qZA:()=>op,TgZ:()=>mu,n5z:()=>ju,LFG:()=>Ve,$8M:()=>tu,$Z:()=>zc,NdJ:()=>S_,CRH:()=>mb,oxw:()=>M_,Q6J:()=>um,iGM:()=>fb,LSH:()=>ru,YNc:()=>im,_uU:()=>hp,Oqu:()=>Yc});var g=P(7579),X=P(727),O=P(8306),ae=P(6451),ne=P(3099);function ge(s){for(let o in s)if(s[o]===ge)return o;throw Error("Could not find renamed property on target object.")}function ue(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function se(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(se).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function he(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const H=ge({__forward_ref__:ge});function j(s){return s.__forward_ref__=j,s.toString=function(){return se(this())},s}function te(s){return qe(s)?s():s}function qe(s){return"function"==typeof s&&s.hasOwnProperty(H)&&s.__forward_ref__===j}class Pe extends Error{constructor(o,a){super(function Ue(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function pe(s){return"string"==typeof s?s:null==s?"":String(s)}function Ce(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():pe(s)}function Ee(s,o){const a=o?` in ${o}`:"";throw new Pe(-201,`No provider for ${Ce(s)} found${a}`)}function Ut(s,o){null==s&&function Je(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function Xt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function zt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Vt(s){return ls(s,Fi)||ls(s,ni)}function ls(s,o){return s.hasOwnProperty(o)?s[o]:null}function Ar(s){return s&&(s.hasOwnProperty(Rs)||s.hasOwnProperty(bi))?s[Rs]:null}const Fi=ge({\u0275prov:ge}),Rs=ge({\u0275inj:ge}),ni=ge({ngInjectableDef:ge}),bi=ge({ngInjectorDef:ge});var mt=(()=>((mt=mt||{})[mt.Default=0]="Default",mt[mt.Host=1]="Host",mt[mt.Self=2]="Self",mt[mt.SkipSelf=4]="SkipSelf",mt[mt.Optional=8]="Optional",mt))();let ri;function On(s){const o=ri;return ri=s,o}function Zs(s,o,a){const l=Vt(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&mt.Optional?null:void 0!==o?o:void Ee(se(s),"Injector")}function Jn(s){return{toString:s}.toString()}var Hn=(()=>((Hn=Hn||{})[Hn.OnPush=0]="OnPush",Hn[Hn.Default=1]="Default",Hn))(),Gt=(()=>{return(s=Gt||(Gt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Gt;var s})();const ut="undefined"!=typeof globalThis&&globalThis,Et="undefined"!=typeof window&&window,pr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Bt=ut||"undefined"!=typeof global&&global||Et||pr,mr={},V=[],q=ge({\u0275cmp:ge}),W=ge({\u0275dir:ge}),Ie=ge({\u0275pipe:ge}),G=ge({\u0275mod:ge}),J=ge({\u0275fac:ge}),Re=ge({__NG_ELEMENT_ID__:ge});let et=0;function ft(s){return Jn(()=>{const a={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Hn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||V,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Gt.Emulated,id:"c",styles:s.styles||V,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,p=s.features,v=s.pipes;return l.id+=et++,l.inputs=Oa(s.inputs,a),l.outputs=Oa(s.outputs),p&&p.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(fn):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(Ct):null,l})}function fn(s){return Zn(s)||function Mr(s){return s[W]||null}(s)}function Ct(s){return function cs(s){return s[Ie]||null}(s)}const Kn={};function Sr(s){return Jn(()=>{const o={type:s.type,bootstrap:s.bootstrap||V,declarations:s.declarations||V,imports:s.imports||V,exports:s.exports||V,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Kn[s.id]=s.type),o})}function Oa(s,o){if(null==s)return mr;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=l,o&&(o[d]=p)}return a}const Tu=ft;function ka(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Zn(s){return s[q]||null}function Yn(s,o){const a=s[G]||null;if(!a&&!0===o)throw new Error(`Type ${se(s)} does not have '\u0275mod' property.`);return a}function Kr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Bi(s){return Array.isArray(s)&&!0===s[1]}function Mu(s){return 0!=(8&s.flags)}function Ed(s){return 2==(2&s.flags)}function ji(s){return 1==(1&s.flags)}function $i(s){return null!==s.template}function Nl(s){return 0!=(512&s[2])}function _r(s,o){return s.hasOwnProperty(J)?s[J]:null}class Xs{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Hi(){return Bo}function Bo(s){return s.type.prototype.ngOnChanges&&(s.setInput=sf),Sd}function Sd(){const s=eo(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===mr)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function sf(s,o,a,l){const d=eo(s)||function jo(s,o){return s[Md]=o}(s,{previous:mr,current:null}),p=d.current||(d.current={}),v=d.previous,w=this.declaredInputs[a],I=v[w];p[w]=new Xs(I&&I.currentValue,o,v===mr),s[l]=o}Hi.ngInherit=!0;const Md="__ngSimpleChanges__";function eo(s){return s[Md]||null}let Ho;function Fl(s){Ho=s}function un(s){return!!s.listen}const Ba={createRenderer:(s,o)=>function Gi(){return void 0!==Ho?Ho:"undefined"!=typeof document?document:void 0}()};function en(s){for(;Array.isArray(s);)s=s[0];return s}function Ls(s,o){return en(o[s])}function ar(s,o){return en(o[s.index])}function In(s,o){return s.data[o]}function ur(s,o){const a=o[s];return Kr(a)?a:a[0]}function no(s){return 4==(4&s[2])}function hs(s){return 128==(128&s[2])}function Di(s,o){return null==o?null:s[o]}function zi(s){s[18]=0}function Go(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const pt={lFrame:Nd(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ga(){return pt.bindingsEnabled}function Ae(){return pt.lFrame.lView}function Ft(){return pt.lFrame.tView}function gn(){let s=zo();for(;null!==s&&64===s.type;)s=s.parent;return s}function zo(){return pt.lFrame.currentTNode}function ai(s,o){const a=pt.lFrame;a.currentTNode=s,a.isParent=o}function qa(){return pt.lFrame.isParent}function za(){return pt.isInCheckNoChangesMode}function Ou(s){pt.isInCheckNoChangesMode=s}function Vs(){return pt.lFrame.bindingIndex++}function Gl(s,o){const a=pt.lFrame;a.bindingIndex=a.bindingRootIndex=s,Ka(o)}function Ka(s){pt.lFrame.currentDirectiveIndex=s}function ql(){return pt.lFrame.currentQueryIndex}function Za(s){pt.lFrame.currentQueryIndex=s}function ag(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function zl(s,o,a){if(a&mt.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||a&mt.Host||(d=ag(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,s=p}const l=pt.lFrame=Ya();return l.currentTNode=o,l.lView=s,!0}function Ko(s){const o=Ya(),a=s[1];pt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Ya(){const s=pt.lFrame,o=null===s?null:s.child;return null===o?Nd(s):o}function Nd(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Zo(){const s=pt.lFrame;return pt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Pd=Zo;function Yo(){const s=Zo();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function er(){return pt.lFrame.selectedIndex}function Ki(s){pt.lFrame.selectedIndex=s}function xn(){const s=pt.lFrame;return In(s.tView,s.selectedIndex)}function kd(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const p=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:x}=p;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),w&&((s.contentHooks||(s.contentHooks=[])).push(a,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,w)),I&&(s.viewHooks||(s.viewHooks=[])).push(-a,I),A&&((s.viewHooks||(s.viewHooks=[])).push(a,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,A)),null!=x&&(s.destroyHooks||(s.destroyHooks=[])).push(a,x)}}function Qa(s,o,a){tr(s,o,3,a)}function ps(s,o,a,l){(3&s[2])===a&&tr(s,o,a,l)}function Qo(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function tr(s,o,a,l){const p=null!=l?l:-1,v=o.length-1;let w=0;for(let I=void 0!==l?65535&s[18]:0;I<v;I++)if("number"==typeof o[I+1]){if(w=o[I],null!=l&&w>=l)break}else o[I]<0&&(s[18]+=65536),(w<p||-1==p)&&(cf(s,a,o,I),s[18]=(4294901760&s[18])+I+2),I++}function cf(s,o,a,l){const d=a[l]<0,p=a[l+1],w=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class Lu{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function mn(s,o,a){const l=un(s);let d=0;for(;d<a.length;){const p=a[d];if("number"==typeof p){if(0!==p)break;d++;const v=a[d++],w=a[d++],I=a[d++];l?s.setAttribute(o,w,I,v):o.setAttributeNS(v,w,I)}else{const v=p,w=a[++d];oo(v)?l&&s.setProperty(o,v,w):l?s.setAttribute(o,v,w):o.setAttribute(v,w),d++}}return d}function Kt(s){return 3===s||4===s||6===s}function oo(s){return 64===s.charCodeAt(0)}function at(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||cn(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function cn(s,o,a,l,d){let p=0,v=s.length;if(-1===o)v=-1;else for(;p<s.length;){const w=s[p++];if("number"==typeof w){if(w===o){v=-1;break}if(w>o){v=p-1;break}}}for(;p<s.length;){const w=s[p];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(s[p+1]=d));if(l===s[p+1])return void(s[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==v&&(s.splice(v,0,o),p=v+1),s.splice(p++,0,a),null!==l&&s.splice(p++,0,l),null!==d&&s.splice(p++,0,d)}function Ja(s){return-1!==s}function Zi(s){return 32767&s}function Lt(s,o){let a=function Xa(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let Us=!0;function Rn(s){const o=Us;return Us=s,o}let eu=0;function ao(s,o){const a=Nr(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,Xo(l.data,s),Xo(o,null),Xo(l.blueprint,null));const d=Cn(s,o),p=s.injectorIndex;if(Ja(d)){const v=Zi(d),w=Lt(d,o),I=w[1].data;for(let A=0;A<8;A++)o[p+A]=w[v+A]|I[v+A]}return o[p+8]=d,p}function Xo(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Nr(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Cn(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const p=d[1],v=p.type;if(l=2===v?p.declTNode:1===v?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Pr(s,o,a){!function Jo(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Re)&&(l=a[Re]),null==l&&(l=a[Re]=eu++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function vr(s,o,a){if(a&mt.Optional)return s;Ee(o,"NodeInjector")}function Ai(s,o,a,l){if(a&mt.Optional&&void 0===l&&(l=null),0==(a&(mt.Self|mt.Host))){const d=s[9],p=On(void 0);try{return d?d.get(o,l,a&mt.Optional):Zs(o,l,a&mt.Optional)}finally{On(p)}}return vr(l,o,a)}function ui(s,o,a,l=mt.Default,d){if(null!==s){const p=function Mt(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Re)?s[Re]:void 0;return"number"==typeof o?o>=0?255&o:uo:o}(a);if("function"==typeof p){if(!zl(o,s,l))return l&mt.Host?vr(d,a,l):Ai(o,a,l,d);try{const v=p(l);if(null!=v||l&mt.Optional)return v;Ee(a)}finally{Pd()}}else if("number"==typeof p){let v=null,w=Nr(s,o),I=-1,A=l&mt.Host?o[16][6]:null;for((-1===w||l&mt.SkipSelf)&&(I=-1===w?Cn(s,o):o[w+8],-1!==I&&ea(l,!1)?(v=o[1],w=Zi(I),o=Lt(I,o)):w=-1);-1!==w;){const x=o[1];if(Yi(p,w,x.data)){const k=li(w,o,a,v,l,A);if(k!==yt)return k}I=o[w+8],-1!==I&&ea(l,o[1].data[w+8]===A)&&Yi(p,w,o)?(v=x,w=Zi(I),o=Lt(I,o)):w=-1}}}return Ai(o,a,l,d)}const yt={};function uo(){return new Qi(gn(),Ae())}function li(s,o,a,l,d,p){const v=o[1],w=v.data[s+8],x=Xe(w,v,a,null==l?Ed(w)&&Us:l!=v&&0!=(3&w.type),d&mt.Host&&p===w);return null!==x?lo(o,v,x,w):yt}function Xe(s,o,a,l,d){const p=s.providerIndexes,v=o.data,w=1048575&p,I=s.directiveStart,x=p>>20,U=d?w+x:s.directiveEnd;for(let Q=l?w:w+x;Q<U;Q++){const _e=v[Q];if(Q<I&&a===_e||Q>=I&&_e.type===a)return Q}if(d){const Q=v[I];if(Q&&$i(Q)&&Q.type===a)return I}return null}function lo(s,o,a,l){let d=s[a];const p=o.data;if(function Fd(s){return s instanceof Lu}(d)){const v=d;v.resolving&&function ze(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Pe(-200,`Circular dependency in DI detected for ${s}${a}`)}(Ce(p[a]));const w=Rn(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?On(v.injectImpl):null;zl(s,l,mt.Default);try{d=s[a]=v.factory(void 0,p,s,l),o.firstCreatePass&&a>=l.directiveStart&&function ug(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(l){const v=Bo(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,p))}(a,p[a],o)}finally{null!==I&&On(I),Rn(w),v.resolving=!1,Pd()}}return d}function Yi(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function ea(s,o){return!(s&mt.Self||s&mt.Host&&o)}class Qi{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return ui(this._tNode,this._lView,o,l,a)}}function ju(s){return Jn(()=>{const o=s.prototype.constructor,a=o[J]||co(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const p=d[J]||co(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function co(s){return qe(s)?()=>{const o=co(te(s));return o&&o()}:_r(s)}function tu(s){return function Wl(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const p=a[d];if(Kt(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(gn(),s)}const gs="__parameters__";function Zr(s,o,a){return Jn(()=>{const l=function Nn(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...p){if(this instanceof d)return l.apply(this,p),this;const v=new d(...p);return w.annotation=v,w;function w(I,A,x){const k=I.hasOwnProperty(gs)?I[gs]:Object.defineProperty(I,gs,{value:[]})[gs];for(;k.length<=x;)k.push(null);return(k[x]=k[x]||[]).push(v),I}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class wn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Xt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const hf=new wn("AnalyzeForEntryComponents");function Yr(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),Yr(l,o)):o!==s&&o.push(l)}return o}function Er(s,o){s.forEach(a=>Array.isArray(a)?Er(a,o):o(a))}function nu(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function ta(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Fr(s,o,a){let l=Bs(s,o);return l>=0?s[1|l]=a:(l=~l,function Ji(s,o,a,l){let d=s.length;if(d==o)s.push(a,l);else if(1===d)s.push(l,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function na(s,o){const a=Bs(s,o);if(a>=0)return s[1|a]}function Bs(s,o){return function Bd(s,o,a){let l=0,d=s.length>>a;for(;d!==l;){const p=l+(d-l>>1),v=s[p<<a];if(o===v)return p<<a;v>o?d=p:l=p+1}return~(d<<a)}(s,o,1)}const ra={},$s="__NG_DI_FLAG__",vs="ngTempTokenPath",C=/\n/gm,R="__source",L=ge({provide:String,useValue:ge});let Y;function ie(s){const o=Y;return Y=s,o}function Ne(s,o=mt.Default){if(void 0===Y)throw new Pe(203,"");return null===Y?Zs(s,void 0,o):Y.get(s,o&mt.Optional?null:void 0,o)}function Ve(s,o=mt.Default){return(function Mn(){return ri}()||Ne)(te(s),o)}const bt=Ve;function jt(s){const o=[];for(let a=0;a<s.length;a++){const l=te(s[a]);if(Array.isArray(l)){if(0===l.length)throw new Pe(900,"");let d,p=mt.Default;for(let v=0;v<l.length;v++){const w=l[v],I=lr(w);"number"==typeof I?-1===I?d=w.token:p|=I:d=w}o.push(Ve(d,p))}else o.push(Ve(l))}return o}function It(s,o){return s[$s]=o,s.prototype[$s]=o,s}function lr(s){return s[$s]}const dn=It(Zr("Inject",s=>({token:s})),-1),Lr=It(Zr("Optional"),8),hi=It(Zr("SkipSelf"),4);class yf{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Es(s){return s instanceof yf?s.changingThisBreaksApplicationSecurity:s}const xy=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,wf=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var _n=(()=>((_n=_n||{})[_n.NONE=0]="NONE",_n[_n.HTML=1]="HTML",_n[_n.STYLE=2]="STYLE",_n[_n.SCRIPT=3]="SCRIPT",_n[_n.URL=4]="URL",_n[_n.RESOURCE_URL=5]="RESOURCE_URL",_n))();function ru(s){const o=function ts(){const s=Ae();return s&&s[12]}();return o?o.sanitize(_n.URL,s)||"":function aa(s,o){const a=function vf(s){return s instanceof yf&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?Es(s):function es(s){return(s=String(s)).match(xy)||s.match(wf)?s:"unsafe:"+s}(pe(s))}const da="__ngContext__";function cr(s,o){s[da]=o}function mc(s){const o=function su(s){return s[da]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function fi(s){return s.ngOriginalError}function Rf(s,...o){s.error(...o)}class vc{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function _c(s){return s&&s.ngErrorLogger||Rf}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&fi(o);for(;a&&fi(a);)a=fi(a);return a||null}}const Sg=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Bt))();function bs(s){return s instanceof Function?s():s}var T=(()=>((T=T||{})[T.Important=1]="Important",T[T.DashCase=2]="DashCase",T))();function K(s,o){return undefined(s,o)}function Ye(s){const o=s[3];return Bi(o)?o[3]:o}function Vn(s){return ou(s[13])}function mi(s){return ou(s[4])}function ou(s){for(;null!==s&&!Bi(s);)s=s[4];return s}function bo(s,o,a,l,d){if(null!=l){let p,v=!1;Bi(l)?p=l:Kr(l)&&(v=!0,l=l[0]);const w=en(l);0===s&&null!==a?null==d?z0(o,a,w):el(o,a,w,d||null,!0):1===s&&null!==a?el(o,a,w,d||null,!0):2===s?function xt(s,o,a){const l=Lf(s,o);l&&function mC(s,o,a,l){un(s)?s.removeChild(o,a,l):o.removeChild(a)}(s,l,o,a)}(o,w,v):3===s&&o.destroyNode(w),null!=p&&function Ur(s,o,a,l,d){const p=a[7];p!==en(a)&&bo(o,s,l,p,d);for(let w=10;w<a.length;w++){const I=a[w];Ge(I[1],I,s,o,l,p)}}(o,s,p,a,d)}}function Hs(s,o,a){if(un(s))return s.createElement(o,a);{const l=null!==a?function kl(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?s.createElement(o):s.createElementNS(l,o)}}function Ly(s,o){const a=s[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Go(d,-1)),a.splice(l,1)}function Rg(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&Ly(d,l),o>0&&(s[a-1][4]=l[4]);const p=ta(s,10+o);!function Of(s,o){Ge(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=p[19];null!==v&&v.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function bc(s,o){if(!(256&o[2])){const a=o[11];un(a)&&a.destroyNode&&Ge(s,o,a,3,null,null),function xg(s){let o=s[13];if(!o)return Vy(s[1],s);for(;o;){let a=null;if(Kr(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)Kr(o)&&Vy(o[1],o),o=o[3];null===o&&(o=s),Kr(o)&&Vy(o[1],o),a=o&&o[4]}o=a}}(o)}}function Vy(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function Uy(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Lu)){const p=a[l+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const w=d[p[v]],I=p[v+1];try{I.call(w)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function gC(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const v=a[p+1],w="function"==typeof v?v(o):en(o[v]),I=l[d=a[p+2]],A=a[p+3];"boolean"==typeof A?w.removeEventListener(a[p],I,A):A>=0?l[d=A]():l[d=-A].unsubscribe(),p+=2}else{const v=l[d=a[p+1]];a[p].call(v)}if(null!==l){for(let p=d+1;p<l.length;p++)l[p]();o[7]=null}}(s,o),1===o[1].type&&un(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&Bi(o[3])){a!==o[3]&&Ly(a,o);const l=o[19];null!==l&&l.detachView(s)}}}function G0(s,o,a){return function q0(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===Gt.None||d===Gt.Emulated)return null}return ar(l,a)}(s,o.parent,a)}function el(s,o,a,l,d){un(s)?s.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function z0(s,o,a){un(s)?s.appendChild(o,a):o.appendChild(a)}function Ff(s,o,a,l,d){null!==l?el(s,o,a,l,d):z0(s,o,a)}function Lf(s,o){return un(s)?s.parentNode(o):o.parentNode}let Ng=function uu(s,o,a){return 40&s.type?ar(s,a):null};function zn(s,o,a,l){const d=G0(s,l,o),p=o[11],w=function Ic(s,o,a){return Ng(s,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let I=0;I<a.length;I++)Ff(p,d,a[I],w,!1);else Ff(p,d,a,w,!1)}function tl(s,o){if(null!==o){const a=o.type;if(3&a)return ar(o,s);if(4&a)return rt(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return tl(s,l);{const d=s[o.index];return Bi(d)?rt(-1,d):en(d)}}if(32&a)return K(o,s)()||en(s[o.index]);{const l=Pg(s,o);return null!==l?Array.isArray(l)?l[0]:tl(Ye(s[16]),l):tl(s,o.next)}}return null}function Pg(s,o){return null!==o?s[16][6].projection[o.projection]:null}function rt(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return tl(l,d)}return o[7]}function jy(s,o,a,l,d,p,v){for(;null!=a;){const w=l[a.index],I=a.type;if(v&&0===o&&(w&&cr(en(w),l),a.flags|=4),64!=(64&a.flags))if(8&I)jy(s,o,a.child,l,d,p,!1),bo(o,s,d,w,p);else if(32&I){const A=K(a,l);let x;for(;x=A();)bo(o,s,d,x,p);bo(o,s,d,w,p)}else 16&I?xe(s,o,l,a,d,p):bo(o,s,d,w,p);a=v?a.projectionNext:a.next}}function Ge(s,o,a,l,d,p){jy(a,l,s.firstChild,o,d,p,!1)}function xe(s,o,a,l,d,p){const v=a[16],I=v[6].projection[l.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)bo(o,s,d,I[A],p);else jy(s,o,I,v[3],d,p,!0)}function K0(s,o,a){un(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function $y(s,o,a){un(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function Z0(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===l||s.charCodeAt(d+p)<=32)return d}a=d+1}}const Y0="ng-template";function Q0(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==Z0(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function J0(s){return 4===s.type&&s.value!==Y0}function ES(s,o,a){return o===(4!==s.type||a?s.value:Y0)}function Is(s,o,a){let l=4;const d=s.attrs||[],p=function eE(s){for(let o=0;o<s.length;o++)if(Kt(s[o]))return o;return s.length}(d);let v=!1;for(let w=0;w<o.length;w++){const I=o[w];if("number"!=typeof I){if(!v)if(4&l){if(l=2|1&l,""!==I&&!ES(s,I,a)||""===I&&1===o.length){if(Io(l))return!1;v=!0}}else{const A=8&l?I:o[++w];if(8&l&&null!==s.attrs){if(!Q0(s.attrs,A,a)){if(Io(l))return!1;v=!0}continue}const k=X0(8&l?"class":I,d,J0(s),a);if(-1===k){if(Io(l))return!1;v=!0;continue}if(""!==A){let U;U=k>p?"":d[k+1].toLowerCase();const Q=8&l?U:null;if(Q&&-1!==Z0(Q,A,0)||2&l&&A!==U){if(Io(l))return!1;v=!0}}}}else{if(!v&&!Io(l)&&!Io(I))return!1;if(v&&Io(I))continue;v=!1,l=I|1&l}}return Io(l)||v}function Io(s){return 0==(1&s)}function X0(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let p=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function nr(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function kt(s,o,a=!1){for(let l=0;l<o.length;l++)if(Is(s,o[l],a))return!0;return!1}function Hy(s,o){return s?":not("+o.trim()+")":o}function Cc(s){let o=s[0],a=1,l=2,d="",p=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&l){const w=s[++a];d+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!Io(v)&&(o+=Hy(p,d),d=""),l=v,p=p||!Io(l);a++}return""!==d&&(o+=Hy(p,d)),o}const Ke={};function nE(s){dr(Ft(),Ae(),er()+s,za())}function dr(s,o,a,l){if(!l)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Qa(o,p,a)}else{const p=s.preOrderHooks;null!==p&&ps(o,p,0,a)}Ki(a)}function Og(s,o){return s<<17|o<<2}function hn(s){return s>>17&32767}function Un(s){return 2|s}function xi(s){return(131068&s)>>2}function Uf(s,o){return-131069&s|o<<2}function Tc(s){return 1|s}function Mc(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],p=a[l+1];if(-1!==p){const v=s.data[p];Za(d),v.contentQueries(2,o[p],p)}}}function Co(s,o,a,l,d,p,v,w,I,A){const x=o.blueprint.slice();return x[0]=d,x[2]=140|l,zi(x),x[3]=x[15]=s,x[8]=a,x[10]=v||s&&s[10],x[11]=w||s&&s[11],x[12]=I||s&&s[12]||null,x[9]=A||s&&s[9]||null,x[6]=p,x[16]=2==o.type?s[16]:x,x}function fh(s,o,a,l,d){let p=s.data[o];if(null===p)p=function xc(s,o,a,l,d){const p=zo(),v=qa(),I=s.data[o]=function IC(s,o,a,l,d,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=I),null!==p&&(v?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(s,o,a,l,d),function Hl(){return pt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=d;const v=function ro(){const s=pt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return ai(p,!0),p}function cu(s,o,a,l){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function sl(s,o,a){Ko(o);try{const l=s.viewQuery;null!==l&&Wg(1,l,a);const d=s.template;null!==d&&Br(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Mc(s,o),s.staticViewQueries&&Wg(2,s.viewQuery,a);const p=s.components;null!==p&&function dE(s,o){for(let a=0;a<o.length;a++)qf(s,o[a])}(o,p)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,Yo()}}function Rc(s,o,a,l){const d=o[2];if(256==(256&d))return;Ko(o);const p=za();try{zi(o),function Wa(s){return pt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&Br(s,o,a,2,l);const v=3==(3&d);if(!p)if(v){const A=s.preOrderCheckHooks;null!==A&&Qa(o,A,null)}else{const A=s.preOrderHooks;null!==A&&ps(o,A,0,null),Qo(o,0)}if(function yh(s){for(let o=Vn(s);null!==o;o=mi(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],p=d[3];0==(1024&d[2])&&Go(p,1),d[2]|=1024}}}(o),function IE(s){for(let o=Vn(s);null!==o;o=mi(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];hs(l)&&Rc(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&Mc(s,o),!p)if(v){const A=s.contentCheckHooks;null!==A&&Qa(o,A)}else{const A=s.contentHooks;null!==A&&ps(o,A,1),Qo(o,1)}!function cE(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Ki(~d);else{const p=d,v=a[++l],w=a[++l];Gl(v,p),w(2,o[p])}}}finally{Ki(-1)}}(s,o);const w=s.components;null!==w&&function wC(s,o){for(let a=0;a<o.length;a++)CE(s,o[a])}(o,w);const I=s.viewQuery;if(null!==I&&Wg(2,I,l),!p)if(v){const A=s.viewCheckHooks;null!==A&&Qa(o,A)}else{const A=s.viewHooks;null!==A&&ps(o,A,2),Qo(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Go(o[3],-1))}finally{Yo()}}function hE(s,o,a,l){const d=o[10],p=!za(),v=no(o);try{p&&!v&&d.begin&&d.begin(),v&&sl(s,o,l),Rc(s,o,a,l)}finally{p&&!v&&d.end&&d.end()}}function Br(s,o,a,l,d){const p=er(),v=2&l;try{Ki(-1),v&&o.length>20&&dr(s,o,20,za()),a(l,d)}finally{Ki(p)}}function Wy(s,o,a){!Ga()||(function Qy(s,o,a,l){const d=a.directiveStart,p=a.directiveEnd;s.firstCreatePass||ao(a,o),cr(l,o);const v=a.initialInputs;for(let w=d;w<p;w++){const I=s.data[w],A=$i(I);A&&DC(o,a,I);const x=lo(o,s,w,a);cr(x,o),null!==v&&mh(0,w-d,x,I,0,v),A&&(ur(a.index,o)[8]=x)}}(s,o,a,ar(a,o)),128==(128&a.flags)&&function Jy(s,o,a){const l=a.directiveStart,d=a.directiveEnd,v=a.index,w=function Fu(){return pt.lFrame.currentDirectiveIndex}();try{Ki(v);for(let I=l;I<d;I++){const A=s.data[I],x=o[I];Ka(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Xy(A,x)}}finally{Ki(-1),Ka(w)}}(s,o,a))}function Ky(s,o,a=ar){const l=o.localNames;if(null!==l){let d=o.index+1;for(let p=0;p<l.length;p+=2){const v=l[p+1],w=-1===v?a(o,s):s[v];s[d++]=w}}}function Zy(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Ug(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Ug(s,o,a,l,d,p,v,w,I,A){const x=20+l,k=x+d,U=function bC(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:Ke);return a}(x,k),Q="function"==typeof A?A():A;return U[1]={type:s,blueprint:U,template:a,queries:null,viewQuery:w,declTNode:o,data:U.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:Q,incompleteFirstPass:!1}}function Nc(s,o,a,l){const d=n_(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&r_(s).push(l,d.length-1))}function Yy(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function jg(s,o,a,l){let d=!1;if(Ga()){const p=function vE(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let p=0;p<l.length;p++){const v=l[p];kt(a,v.selectors,!1)&&(d||(d=[]),Pr(ao(a,o),s,v.type),$i(v)?(EE(s,a),d.unshift(v)):d.push(v))}return d}(s,o,a),v=null===l?null:{"":-1};if(null!==p){d=!0,e_(a,s.data.length,p.length);for(let x=0;x<p.length;x++){const k=p[x];k.providersResolver&&k.providersResolver(k)}let w=!1,I=!1,A=cu(s,o,p.length,null);for(let x=0;x<p.length;x++){const k=p[x];a.mergedAttrs=at(a.mergedAttrs,k.hostAttrs),Gf(s,a,o,A,k),bE(A,k,v),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const U=k.type.prototype;!w&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),w=!0),!I&&(U.ngOnChanges||U.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),I=!0),A++}!function gE(s,o){const l=o.directiveEnd,d=s.data,p=o.attrs,v=[];let w=null,I=null;for(let A=o.directiveStart;A<l;A++){const x=d[A],k=x.inputs,U=null===p||J0(o)?null:Pc(k,p);v.push(U),w=Yy(k,A,w),I=Yy(x.outputs,A,I)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=w,o.outputs=I}(s,a)}v&&function wE(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new Pe(-301,!1);l.push(o[d],p)}}}(a,l,v)}return a.mergedAttrs=at(a.mergedAttrs,a.attrs),d}function gh(s,o,a,l,d,p){const v=p.hostBindings;if(v){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const I=~o.index;(function _E(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(w)!=I&&w.push(I),w.push(l,d,v)}}function Xy(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function EE(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function bE(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;$i(o)&&(a[""]=s)}}function e_(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function Gf(s,o,a,l,d){s.data[l]=d;const p=d.factory||(d.factory=_r(d.type)),v=new Lu(p,$i(d),null);s.blueprint[l]=v,a[l]=v,gh(s,o,0,l,cu(s,a,d.hostVars,Ke),d)}function DC(s,o,a){const l=ar(o,s),d=Zy(a),p=s[10],v=Gg(s,Co(s,d,null,a.onPush?64:16,l,o,p,p.createRenderer(l,a),null,null));s[o.index]=v}function ya(s,o,a,l,d,p){const v=ar(s,o);!function $g(s,o,a,l,d,p,v){if(null==p)un(s)?s.removeAttribute(o,d,a):o.removeAttribute(d);else{const w=null==v?pe(p):v(p,l||"",d);un(s)?s.setAttribute(o,d,w,a):a?o.setAttributeNS(a,d,w):o.setAttribute(d,w)}}(o[11],v,p,s.value,a,l,d)}function mh(s,o,a,l,d,p){const v=p[o];if(null!==v){const w=l.setInput;for(let I=0;I<v.length;){const A=v[I++],x=v[I++],k=v[I++];null!==w?l.setInput(a,k,A,x):a[x]=k}}}function Pc(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function ol(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function CE(s,o){const a=ur(o,s);if(hs(a)){const l=a[1];80&a[2]?Rc(l,a,l.template,a[8]):a[5]>0&&Hg(a)}}function Hg(s){for(let l=Vn(s);null!==l;l=mi(l))for(let d=10;d<l.length;d++){const p=l[d];if(1024&p[2]){const v=p[1];Rc(v,p,v.template,p[8])}else p[5]>0&&Hg(p)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=ur(a[l],s);hs(d)&&d[5]>0&&Hg(d)}}function qf(s,o){const a=ur(o,s),l=a[1];(function AC(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),sl(l,a,a[8])}function Gg(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Qn(s){for(;s;){s[2]|=64;const o=Ye(s);if(Nl(s)&&!o)return s;s=o}return null}function t_(s,o,a){const l=o[10];l.begin&&l.begin();try{Rc(s,o,s.template,a)}catch(d){throw vh(o,d),d}finally{l.end&&l.end()}}function zg(s){!function _h(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=mc(a),d=l[1];hE(d,l,d.template,a)}}(s[8])}function Wg(s,o,a){Za(0),o(s,a)}const Oc=(()=>Promise.resolve(null))();function n_(s){return s[7]||(s[7]=[])}function r_(s){return s.cleanup||(s.cleanup=[])}function vh(s,o){const a=s[9],l=a?a.get(vc,null):null;l&&l.handleError(o)}function Zg(s,o,a,l,d){for(let p=0;p<a.length;){const v=a[p++],w=a[p++],I=o[v],A=s.data[v];null!==A.setInput?A.setInput(I,d,l,w):I[w]=d}}function fu(s,o,a){const l=Ls(o,s);!function ih(s,o,a){un(s)?s.setValue(o,a):o.textContent=a}(s[11],l,a)}function Wn(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const w=o[v];"number"==typeof w?p=w:1==p?d=he(d,w):2==p&&(l=he(l,w+": "+o[++v]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}const _a=new wn("INJECTOR",-1);class AE{get(o,a=ra){if(a===ra){const l=new Error(`NullInjectorError: No provider for ${se(o)}!`);throw l.name="NullInjectorError",l}return a}}const rs=new wn("Set Injector scope."),zf={},s_={};let kc;function SE(){return void 0===kc&&(kc=new AE),kc}function ME(s,o=null,a=null,l){const d=rn(s,o,a,l);return d._resolveInjectorDefTypes(),d}function rn(s,o=null,a=null,l){return new xC(s,a,o||SE(),l)}class xC{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&Er(a,w=>this.processProvider(w,o,a)),Er([o],w=>this.processInjectorType(w,[],p)),this.records.set(_a,Fc(void 0,this));const v=this.records.get(rs);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:se(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=ra,l=mt.Default){this.assertNotDestroyed();const d=ie(this),p=On(void 0);try{if(!(l&mt.SkipSelf)){let w=this.records.get(o);if(void 0===w){const I=function OC(s){return"function"==typeof s||"object"==typeof s&&s instanceof wn}(o)&&Vt(o);w=I&&this.injectableDefInScope(I)?Fc(Eh(o),zf):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(l&mt.Self?SE():this.parent).get(o,a=l&mt.Optional&&a===ra?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[vs]=v[vs]||[]).unshift(se(o)),d)throw v;return function qn(s,o,a,l){const d=s[vs];throw o[R]&&d.unshift(o[R]),s.message=function bn(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=se(o);if(Array.isArray(o))d=o.map(se).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let w=o[v];p.push(v+":"+("string"==typeof w?JSON.stringify(w):se(w)))}d=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(C,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[vs]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{On(p),ie(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(se(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pe(205,!1)}processInjectorType(o,a,l){if(!(o=te(o)))return!1;let d=Ar(o);const p=null==d&&o.ngModule||void 0,v=void 0===p?o:p,w=-1!==l.indexOf(v);if(void 0!==p&&(d=Ar(p)),null==d)return!1;if(null!=d.imports&&!w){let x;l.push(v);try{Er(d.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===x&&(x=[]),x.push(k))})}finally{}if(void 0!==x)for(let k=0;k<x.length;k++){const{ngModule:U,providers:Q}=x[k];Er(Q,_e=>this.processProvider(_e,U,Q||V))}}this.injectorDefTypes.add(v);const I=_r(v)||(()=>new v);this.records.set(v,Fc(I,zf));const A=d.providers;if(null!=A&&!w){const x=o;Er(A,k=>this.processProvider(k,x,A))}return void 0!==p&&void 0!==o.providers}processProvider(o,a,l){let d=Lc(o=te(o))?o:te(o&&o.provide);const p=function Kf(s,o,a){return o_(s)?Fc(void 0,s.useValue):Fc(Zf(s),zf)}(o);if(Lc(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=Fc(void 0,zf,!0),v.factory=()=>jt(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,p)}hydrate(o,a){return a.value===zf&&(a.value=s_,a.value=a.factory()),"object"==typeof a.value&&a.value&&function PC(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=te(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Eh(s){const o=Vt(s),a=null!==o?o.factory:_r(s);if(null!==a)return a;if(s instanceof wn)throw new Pe(204,!1);if(s instanceof Function)return function Wf(s){const o=s.length;if(o>0)throw function ci(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new Pe(204,!1);const a=function ti(s){const o=s&&(s[Fi]||s[ni]);if(o){const a=function fr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Pe(204,!1)}function Zf(s,o,a){let l;if(Lc(s)){const d=te(s);return _r(d)||Eh(d)}if(o_(s))l=()=>te(s.useValue);else if(function RC(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...jt(s.deps||[]));else if(function xE(s){return!(!s||!s.useExisting)}(s))l=()=>Ve(te(s.useExisting));else{const d=te(s&&(s.useClass||s.provide));if(!function NC(s){return!!s.deps}(s))return _r(d)||Eh(d);l=()=>new d(...jt(s.deps))}return l}function Fc(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function o_(s){return null!==s&&"object"==typeof s&&L in s}function Lc(s){return"function"==typeof s}let Ni=(()=>{class s{static create(a,l){var d;if(Array.isArray(a))return ME({name:""},l,a,"");{const p=null!==(d=a.name)&&void 0!==d?d:"";return ME({name:p},a.parent,a.providers,p)}}}return s.THROW_IF_NOT_FOUND=ra,s.NULL=new AE,s.\u0275prov=Xt({token:s,providedIn:"any",factory:()=>Ve(_a)}),s.__NG_ELEMENT_ID__=-1,s})();function BC(s,o){kd(mc(s)[1],gn())}function Xg(s){let o=function FE(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let d;if($i(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Pe(903,"");d=o.\u0275dir}if(d){if(a){l.push(d);const v=s;v.inputs=h_(s.inputs),v.declaredInputs=h_(s.declaredInputs),v.outputs=h_(s.outputs);const w=d.hostBindings;w&&VE(s,w);const I=d.viewQuery,A=d.contentQueries;if(I&&LE(s,I),A&&Ea(s,A),ue(s.inputs,d.inputs),ue(s.declaredInputs,d.declaredInputs),ue(s.outputs,d.outputs),$i(d)&&d.data.animation){const x=s.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let v=0;v<p.length;v++){const w=p[v];w&&w.ngInherit&&w(s),w===Xg&&(a=!1)}}o=Object.getPrototypeOf(o)}!function Pi(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=at(d.hostAttrs,a=at(a,d.hostAttrs))}}(l)}function h_(s){return s===mr?{}:s===V?[]:s}function LE(s,o){const a=s.viewQuery;s.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function Ea(s,o){const a=s.contentQueries;s.contentQueries=a?(l,d,p)=>{o(l,d,p),a(l,d,p)}:o}function VE(s,o){const a=s.hostBindings;s.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let tm=null;function bh(){if(!tm){const s=Bt.Symbol;if(s&&s.iterator)tm=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(tm=l)}}}return tm}function Jf(s){return!!f_(s)&&(Array.isArray(s)||!(s instanceof Map)&&bh()in s)}function f_(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function yi(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function p_(s,o,a,l){const d=Ae();return yi(d,Vs(),o)&&(Ft(),ya(xn(),d,s,o,a,l)),p_}function im(s,o,a,l,d,p,v,w){const I=Ae(),A=Ft(),x=s+20,k=A.firstCreatePass?function y_(s,o,a,l,d,p,v,w,I){const A=o.consts,x=fh(o,s,4,v||null,Di(A,w));jg(o,a,x,Di(A,I)),kd(o,x);const k=x.tViews=Ug(2,x,l,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,x),k.queries=o.queries.embeddedTView(x)),x}(x,A,I,o,a,l,d,p,v):A.data[x];ai(k,!1);const U=I[11].createComment("");zn(A,I,U,k),cr(U,I),Gg(I,I[x]=ol(U,I,U,k)),ji(k)&&Wy(A,I,k),null!=v&&Ky(I,k,w)}function zs(s,o=mt.Default){const a=Ae();return null===a?Ve(s,o):ui(gn(),a,te(s),o)}function zc(){throw new Error("invalid")}function um(s,o,a){const l=Ae();return yi(l,Vs(),o)&&function ns(s,o,a,l,d,p,v,w){const I=ar(o,a);let x,A=o.inputs;!w&&null!=A&&(x=A[l])?(Zg(s,a,x,l,d),Ed(o)&&function ph(s,o){const a=ur(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function hu(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,un(p)?p.setProperty(I,l,d):oo(l)||(I.setProperty?I.setProperty(l,d):I[l]=d))}(Ft(),xn(),l,s,o,l[11],a,!1),um}function gu(s,o,a,l,d){const v=d?"class":"style";Zg(s,a,o.inputs[v],v,l)}function mu(s,o,a,l){const d=Ae(),p=Ft(),v=20+s,w=d[11],I=d[v]=Hs(w,o,function Od(){return pt.lFrame.currentNamespace}()),A=p.firstCreatePass?function tD(s,o,a,l,d,p,v){const w=o.consts,A=fh(o,s,2,d,Di(w,p));return jg(o,a,A,Di(w,v)),null!==A.attrs&&Wn(A,A.attrs,!1),null!==A.mergedAttrs&&Wn(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(v,p,d,0,o,a,l):p.data[v];ai(A,!0);const x=A.mergedAttrs;null!==x&&mn(w,I,x);const k=A.classes;null!==k&&$y(w,I,k);const U=A.styles;return null!==U&&K0(w,I,U),64!=(64&A.flags)&&zn(p,d,I,A),0===function Nu(){return pt.lFrame.elementDepthCount}()&&cr(I,d),function Ha(){pt.lFrame.elementDepthCount++}(),ji(A)&&(Wy(p,d,A),function fE(s,o,a){if(Mu(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const v=s.data[p];v.contentQueries&&v.contentQueries(1,a[p],p)}}}(p,A,d)),null!==l&&Ky(d,A),mu}function op(){let s=gn();qa()?function $l(){pt.lFrame.isParent=!1}():(s=s.parent,ai(s,!1));const o=s;!function Vl(){pt.lFrame.elementDepthCount--}();const a=Ft();return a.firstCreatePass&&(kd(a,s),Mu(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Ld(s){return 0!=(16&s.flags)}(o)&&gu(a,o,Ae(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function lg(s){return 0!=(32&s.flags)}(o)&&gu(a,o,Ae(),o.stylesWithoutHost,!1),op}function Ia(s,o,a,l){return mu(s,o,a,l),op(),Ia}function T_(s){return!!s&&"function"==typeof s.then}function ap(s){return!!s&&"function"==typeof s.subscribe}const A_=ap;function S_(s,o,a,l){const d=Ae(),p=Ft(),v=gn();return function fl(s,o,a,l,d,p,v,w){const I=ji(l),x=s.firstCreatePass&&r_(s),k=o[8],U=n_(o);let Q=!0;if(3&l.type||w){const $e=ar(l,o),st=w?w($e):$e,Se=U.length,vt=w?$t=>w(en($t[l.index])):l.index;if(un(a)){let $t=null;if(!w&&I&&($t=function QE(s,o,a,l){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const v=d[p];if(v===a&&d[p+1]===l){const w=o[7],I=d[p+2];return w.length>I?w[I]:null}"string"==typeof v&&(p+=2)}return null}(s,o,d,l.index)),null!==$t)($t.__ngLastListenerFn__||$t).__ngNextListenerFn__=p,$t.__ngLastListenerFn__=p,Q=!1;else{p=cm(l,o,k,p,!1);const ln=a.listen(st,d,p);U.push(p,ln),x&&x.push(d,vt,Se,Se+1)}}else p=cm(l,o,k,p,!0),st.addEventListener(d,p,v),U.push(p),x&&x.push(d,vt,Se,v)}else p=cm(l,o,k,p,!1);const _e=l.outputs;let Le;if(Q&&null!==_e&&(Le=_e[d])){const $e=Le.length;if($e)for(let st=0;st<$e;st+=2){const Ks=o[Le[st]][Le[st+1]].subscribe(p),zh=U.length;U.push(p,Ks),x&&x.push(d,l.index,zh,-(zh+1))}}}(p,d,d[11],v,s,o,!!a,l),S_}function Rh(s,o,a,l){try{return!1!==a(l)}catch(d){return vh(s,d),!1}}function cm(s,o,a,l,d){return function p(v){if(v===Function)return l;const w=2&s.flags?ur(s.index,o):o;0==(32&o[2])&&Qn(w);let I=Rh(o,0,l,v),A=p.__ngNextListenerFn__;for(;A;)I=Rh(o,0,A,v)&&I,A=A.__ngNextListenerFn__;return d&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function M_(s=1){return function Wi(s){return(pt.lFrame.contextLView=function uf(s,o){for(;s>0;)o=o[15],s--;return o}(s,pt.lFrame.contextLView))[8]}(s)}function rw(s,o,a,l,d){const p=s[a+1],v=null===o;let w=l?hn(p):xi(p),I=!1;for(;0!==w&&(!1===I||v);){const x=s[w+1];iw(s[w],o)&&(I=!0,s[w+1]=l?Tc(x):Un(x)),w=l?hn(x):xi(x)}I&&(s[a+1]=l?Un(p):Tc(p))}function iw(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Bs(s,o)>=0}function V_(s,o){return function To(s,o,a,l){const d=Ae(),p=Ft(),v=function Ti(s){const o=pt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}(2);p.firstUpdatePass&&function B_(s,o,a,l){const d=s.data;if(null===d[a+1]){const p=d[er()],v=function U_(s,o){return o>=s.expandoStartIndex}(s,a);(function q_(s,o){return 0!=(s.flags&(o?16:32))})(p,l)&&null===o&&!v&&(o=!1),o=function j_(s,o,a,l){const d=function Wo(s){const o=pt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=Zc(a=dp(null,s,o,a,l),o.attrs,l),p=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(a=dp(d,s,o,a,l),null===p){let I=function gm(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==xi(l))return s[hn(l)]}(s,o,l);void 0!==I&&Array.isArray(I)&&(I=dp(null,s,o,I[1],l),I=Zc(I,o.attrs,l),function cp(s,o,a,l){s[hn(a?o.classBindings:o.styleBindings)]=l}(s,o,l,I))}else p=function mm(s,o,a){let l;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)l=Zc(l,s[p].hostAttrs,a);return Zc(l,o.attrs,a)}(s,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,l),function iD(s,o,a,l,d,p){let v=p?o.classBindings:o.styleBindings,w=hn(v),I=xi(v);s[l]=a;let x,A=!1;if(Array.isArray(a)){const k=a;x=k[1],(null===x||Bs(k,x)>0)&&(A=!0)}else x=a;if(d)if(0!==I){const U=hn(s[w+1]);s[l+1]=Og(U,w),0!==U&&(s[U+1]=Uf(s[U+1],l)),s[w+1]=function nl(s,o){return 131071&s|o<<17}(s[w+1],l)}else s[l+1]=Og(w,0),0!==w&&(s[w+1]=Uf(s[w+1],l)),w=l;else s[l+1]=Og(I,0),0===w?w=l:s[I+1]=Uf(s[I+1],l),I=l;A&&(s[l+1]=Un(s[l+1])),rw(s,x,l,!0),rw(s,x,l,!1),function nw(s,o,a,l,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Bs(p,o)>=0&&(a[l+1]=Tc(a[l+1]))}(o,x,s,l,p),v=Og(w,I),p?o.classBindings=v:o.styleBindings=v}(d,p,o,a,v,l)}}(p,s,v,l),o!==Ke&&yi(d,v,o)&&function G_(s,o,a,l,d,p,v,w){if(!(3&o.type))return;const I=s.data,A=I[w+1];ym(function Gy(s){return 1==(1&s)}(A)?uw(I,o,a,d,xi(A),v):void 0)||(ym(p)||function rE(s){return 2==(2&s)}(A)&&(p=uw(I,null,a,d,w,v)),function W0(s,o,a,l,d){const p=un(s);if(o)d?p?s.addClass(a,l):a.classList.add(l):p?s.removeClass(a,l):a.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:T.DashCase;if(null==d)p?s.removeStyle(a,l,v):a.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),v|=T.Important),p?s.setStyle(a,l,d,v):a.style.setProperty(l,d,w?"important":"")}}}(l,v,Ls(er(),a),d,p))}(p,p.data[er()],d,d[11],s,d[v+1]=function cD(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=se(Es(s)))),s}(o,a),l,v)}(s,o,null,!0),V_}function dp(s,o,a,l,d){let p=null;const v=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<v&&(p=o[w],l=Zc(l,p.hostAttrs,d),p!==s);)w++;return null!==s&&(a.directiveStylingLast=w),l}function Zc(s,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const v=o[p];"number"==typeof v?d=v:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Fr(s,v,!!a||o[++p]))}return void 0===s?null:s}function uw(s,o,a,l,d,p){const v=null===o;let w;for(;d>0;){const I=s[d],A=Array.isArray(I),x=A?I[1]:I,k=null===x;let U=a[d+1];U===Ke&&(U=k?V:void 0);let Q=k?na(U,l):x===l?U:void 0;if(A&&!ym(Q)&&(Q=na(I,l)),ym(Q)&&(w=Q,v))return w;const _e=s[d+1];d=v?hn(_e):xi(_e)}if(null!==o){let I=p?o.residualClasses:o.residualStyles;null!=I&&(w=na(I,l))}return w}function ym(s){return void 0!==s}function hp(s,o=""){const a=Ae(),l=Ft(),d=s+20,p=l.firstCreatePass?fh(l,d,1,o,null):l.data[d],v=a[d]=function au(s,o){return un(s)?s.createText(o):s.createTextNode(o)}(a[11],o);zn(l,a,v,p),ai(p,!1)}function Yc(s){return fp("",s,""),Yc}function fp(s,o,a){const l=Ae(),d=function Ih(s,o,a,l){return yi(s,Vs(),a)?o+pe(a)+l:Ke}(l,s,o,a);return d!==Ke&&fu(l,er(),d),fp}const Jc=void 0;var pD=["en",[["a","p"],["AM","PM"],Jc],[["AM","PM"],Jc,Jc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Jc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Jc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Jc,"{1} 'at' {0}",Jc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function iv(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let gl={};function gp(s){const o=function Fh(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=Xc(o);if(a)return a;const l=o.split("-")[0];if(a=Xc(l),a)return a;if("en"===l)return pD;throw new Error(`Missing locale data for the locale "${s}".`)}function Cm(s){return gp(s)[_t.PluralCase]}function Xc(s){return s in gl||(gl[s]=Bt.ng&&Bt.ng.common&&Bt.ng.common.locales&&Bt.ng.common.locales[s]),gl[s]}var _t=(()=>((_t=_t||{})[_t.LocaleId=0]="LocaleId",_t[_t.DayPeriodsFormat=1]="DayPeriodsFormat",_t[_t.DayPeriodsStandalone=2]="DayPeriodsStandalone",_t[_t.DaysFormat=3]="DaysFormat",_t[_t.DaysStandalone=4]="DaysStandalone",_t[_t.MonthsFormat=5]="MonthsFormat",_t[_t.MonthsStandalone=6]="MonthsStandalone",_t[_t.Eras=7]="Eras",_t[_t.FirstDayOfWeek=8]="FirstDayOfWeek",_t[_t.WeekendRange=9]="WeekendRange",_t[_t.DateFormat=10]="DateFormat",_t[_t.TimeFormat=11]="TimeFormat",_t[_t.DateTimeFormat=12]="DateTimeFormat",_t[_t.NumberSymbols=13]="NumberSymbols",_t[_t.NumberFormats=14]="NumberFormats",_t[_t.CurrencyCode=15]="CurrencyCode",_t[_t.CurrencySymbol=16]="CurrencySymbol",_t[_t.CurrencyName=17]="CurrencyName",_t[_t.Currencies=18]="Currencies",_t[_t.Directionality=19]="Directionality",_t[_t.PluralCase=20]="PluralCase",_t[_t.ExtraData=21]="ExtraData",_t))();const yu="en-US";let Tm=yu;function $m(s,o,a,l,d){if(s=te(s),Array.isArray(s))for(let p=0;p<s.length;p++)$m(s[p],o,a,l,d);else{const p=Ft(),v=Ae();let w=Lc(s)?s:te(s.provide),I=Zf(s);const A=gn(),x=1048575&A.providerIndexes,k=A.directiveStart,U=A.providerIndexes>>20;if(Lc(s)||!s.multi){const Q=new Lu(I,d,zs),_e=_p(w,o,d?x:x+U,k);-1===_e?(Pr(ao(A,v),p,w),yp(p,s,o.length),o.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(Q),v.push(Q)):(a[_e]=Q,v[_e]=Q)}else{const Q=_p(w,o,x+U,k),_e=_p(w,o,x,x+U),Le=Q>=0&&a[Q],$e=_e>=0&&a[_e];if(d&&!$e||!d&&!Le){Pr(ao(A,v),p,w);const st=function kD(s,o,a,l,d){const p=new Lu(s,a,zs);return p.multi=[],p.index=o,p.componentProviders=0,Tv(p,d,l&&!a),p}(d?Av:Bh,a.length,d,l,I);!d&&$e&&(a[_e].providerFactory=st),yp(p,s,o.length,0),o.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(st),v.push(st)}else yp(p,s,Q>-1?Q:_e,Tv(a[d?_e:Q],I,!d&&l));!d&&l&&$e&&a[_e].componentProviders++}}}function yp(s,o,a,l){const d=Lc(o),p=function RE(s){return!!s.useClass}(o);if(d||p){const I=(p?te(o.useClass):o).prototype.ngOnDestroy;if(I){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const x=A.indexOf(a);-1===x?A.push(a,[l,I]):A[x+1].push(l,I)}else A.push(a,I)}}}function Tv(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function _p(s,o,a,l){for(let d=a;d<l;d++)if(o[d]===s)return d;return-1}function Bh(s,o,a,l){return Sv(this.multi,[])}function Av(s,o,a,l){const d=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=lo(a,a[1],this.providerFactory.index,l);p=w.slice(0,v),Sv(d,p);for(let I=v;I<w.length;I++)p.push(w[I])}else p=[],Sv(d,p);return p}function Sv(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function Hw(s,o=[]){return a=>{a.providersResolver=(l,d)=>function Dv(s,o,a){const l=Ft();if(l.firstCreatePass){const d=$i(s);$m(a,l.data,l.blueprint,d,!0),$m(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class qw{}class FD{resolveComponentFactory(o){throw function zw(s){const o=Error(`No component factory found for ${se(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Hm=(()=>{class s{}return s.NULL=new FD,s})();function Kw(){return yl(gn(),Ae())}function yl(s,o){return new jh(ar(s,o))}let jh=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=Kw,s})();function Zw(s){return s instanceof jh?s.nativeElement:s}class vp{}let Wt=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Qw(){const s=Ae(),a=ur(gn().index,s);return function Yw(s){return s[11]}(Kr(a)?a:s)}(),s})(),Ep=(()=>{class s{}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:()=>null}),s})();class Jw{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Sn=new Jw("13.2.7"),jr={};function Ts(s,o,a,l,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&l.push(en(p)),Bi(p))for(let w=10;w<p.length;w++){const I=p[w],A=I[1].firstChild;null!==A&&Ts(I[1],I,A,l)}const v=a.type;if(8&v)Ts(s,o,a.child,l);else if(32&v){const w=K(a,o);let I;for(;I=w();)l.push(I)}else if(16&v){const w=Pg(o,a);if(Array.isArray(w))l.push(...w);else{const I=Ye(o[16]);Ts(I[1],I,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class $h{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Ts(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Bi(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Rg(o,l),ta(a,l))}this._attachedToViewContainer=!1}bc(this._lView[1],this._lView)}onDestroy(o){Nc(this._lView[1],this._lView,null,o)}markForCheck(){Qn(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){t_(this._lView[1],this._lView,this.context)}checkNoChanges(){!function SC(s,o,a){Ou(!0);try{t_(s,o,a)}finally{Ou(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Pe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function kf(s,o){Ge(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Pe(902,"");this._appRef=o}}class VD extends $h{constructor(o){super(o),this._view=o}detectChanges(){zg(this._view)}checkNoChanges(){!function DE(s){Ou(!0);try{zg(s)}finally{Ou(!1)}}(this._view)}get context(){return null}}class wp extends Hm{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Zn(o);return new bp(a,this.ngModule)}}function Mv(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class bp extends qw{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function tE(s){return s.map(Cc).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Mv(this.componentDef.inputs)}get outputs(){return Mv(this.componentDef.outputs)}create(o,a,l,d){const p=(d=d||this.ngModule)?function UD(s,o){return{get:(a,l,d)=>{const p=s.get(a,jr,d);return p!==jr||l===jr?p:o.get(a,l,d)}}}(o,d.injector):o,v=p.get(vp,Ba),w=p.get(Ep,null),I=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",x=l?function du(s,o,a){if(un(s))return s.selectRootElement(o,a===Gt.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(I,l,this.componentDef.encapsulation):Hs(v.createRenderer(null,this.componentDef),A,function Xw(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),k=this.componentDef.onPush?576:528,U=function Uc(s,o){return{components:[],scheduler:s||Sg,clean:Oc,playerHandler:o||null,flags:0}}(),Q=Ug(0,null,null,1,0,null,null,null,null,null),_e=Co(null,Q,U,k,null,null,v,I,w,p);let Le,$e;Ko(_e);try{const st=function kE(s,o,a,l,d,p){const v=a[1];a[20]=s;const I=fh(v,20,2,"#host",null),A=I.mergedAttrs=o.hostAttrs;null!==A&&(Wn(I,A,!0),null!==s&&(mn(d,s,A),null!==I.classes&&$y(d,s,I.classes),null!==I.styles&&K0(d,s,I.styles)));const x=l.createRenderer(s,o),k=Co(a,Zy(o),null,o.onPush?64:16,a[20],I,l,x,p||null,null);return v.firstCreatePass&&(Pr(ao(I,a),v,o.type),EE(v,I),e_(I,a.length,1)),Gg(a,k),a[20]=k}(x,this.componentDef,_e,v,I);if(x)if(l)mn(I,x,["ng-version",Sn.full]);else{const{attrs:Se,classes:vt}=function Vf(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let p=s[l];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++l]):8===d&&a.push(p);else{if(!Io(d))break;d=p}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Se&&mn(I,x,Se),vt&&vt.length>0&&$y(I,x,vt.join(" "))}if($e=In(Q,20),void 0!==a){const Se=$e.projection=[];for(let vt=0;vt<this.ngContentSelectors.length;vt++){const $t=a[vt];Se.push(null!=$t?Array.from($t):null)}}Le=function Vc(s,o,a,l,d){const p=a[1],v=function Gs(s,o,a){const l=gn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Gf(s,l,o,cu(s,o,1,null),a));const d=lo(o,s,l.directiveStart,l);cr(d,o);const p=ar(l,o);return p&&cr(p,o),d}(p,a,o);if(l.components.push(v),s[8]=v,d&&d.forEach(I=>I(v,o)),o.contentQueries){const I=gn();o.contentQueries(1,v,I.directiveStart)}const w=gn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Ki(w.index),gh(a[1],w,0,w.directiveStart,w.directiveEnd,o),Xy(o,v)),v}(st,this.componentDef,_e,U,[BC]),sl(Q,_e,null)}finally{Yo()}return new $n(this.componentType,Le,yl($e,_e),_e,$e)}}class $n extends class Gw{}{constructor(o,a,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new VD(d),this.componentType=o}get injector(){return new Qi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Ip{}class rr{}const rd=new Map;class rb extends Ip{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new wp(this);const l=Yn(o);this._bootstrapComponents=bs(l.bootstrap),this._r3Injector=rn(o,a,[{provide:Ip,useValue:this},{provide:Hm,useValue:this.componentFactoryResolver}],se(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=Ni.THROW_IF_NOT_FOUND,l=mt.Default){return o===Ni||o===Ip||o===_a?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class ib extends rr{constructor(o){super(),this.moduleType=o,null!==Yn(o)&&function tb(s){const o=new Set;!function a(l){const d=Yn(l,!0),p=d.id;null!==p&&(function eb(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${se(o)} vs ${se(o.name)}`)}(p,rd.get(p),l),rd.set(p,l));const v=bs(d.imports);for(const w of v)o.has(w)||(o.add(w),a(w))}(s)}(o)}create(o){return new rb(this.moduleType,o)}}function wu(s){return o=>{setTimeout(s,void 0,o)}}const Ao=class ub extends g.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,p,v;let w=o,I=a||(()=>null),A=l;if(o&&"object"==typeof o){const k=o;w=null===(d=k.next)||void 0===d?void 0:d.bind(k),I=null===(p=k.error)||void 0===p?void 0:p.bind(k),A=null===(v=k.complete)||void 0===v?void 0:v.bind(k)}this.__isAsync&&(I=wu(I),w&&(w=wu(w)),A&&(A=wu(A)));const x=super.subscribe({next:w,error:I,complete:A});return o instanceof X.w0&&o.add(x),x}};function lb(){return this._results[bh()]()}class Ap{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=bh(),l=Ap.prototype;l[a]||(l[a]=lb)}get changes(){return this._changes||(this._changes=new Ao)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=Yr(o);(this._changesDetected=!function Gu(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],p=o[l];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let od=(()=>{class s{}return s.__NG_ELEMENT_ID__=zm,s})();const KD=od,qm=class extends KD{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=Co(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),sl(a,l,o),new $h(l)}};function zm(){return Sp(gn(),Ae())}function Sp(s,o){return 4&s.type?new qm(o,s,yl(s,o)):null}let vl=(()=>{class s{}return s.__NG_ELEMENT_ID__=ZD,s})();function ZD(){return bu(gn(),Ae())}const Wm=vl,El=class extends Wm{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return yl(this._hostTNode,this._hostLView)}get injector(){return new Qi(this._hostTNode,this._hostLView)}get parentInjector(){const o=Cn(this._hostTNode,this._hostLView);if(Ja(o)){const a=Lt(o,this._hostLView),l=Zi(o);return new Qi(a[1].data[l+8],a)}return new Qi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Aa(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,p){const v=o&&!function ms(s){return"function"==typeof s}(o);let w;if(v)w=a;else{const k=a||{};w=k.index,l=k.injector,d=k.projectableNodes,p=k.ngModuleRef}const I=v?o:new bp(Zn(o)),A=l||this.parentInjector;if(!p&&null==I.ngModule){const U=(v?A:this.parentInjector).get(Ip,null);U&&(p=U)}const x=I.create(A,d,void 0,p);return this.insert(x.hostView,w),x}insert(o,a){const l=o._lView,d=l[1];if(function $a(s){return Bi(s[3])}(l)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const k=l[3],U=new El(k,k[6],k[3]);U.detach(U.indexOf(o))}}const p=this._adjustIndex(a),v=this._lContainer;!function Xu(s,o,a,l){const d=10+l,p=a.length;l>0&&(a[d-1][4]=o),l<p-10?(o[4]=a[d],nu(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function Mi(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=128}(d,l,v,p);const w=rt(p,v),I=l[11],A=Lf(I,v[7]);return null!==A&&function oh(s,o,a,l,d,p){l[0]=d,l[6]=o,Ge(s,l,a,1,d,p)}(d,v[6],I,l,A,w),o.attachToViewContainerRef(),nu(ad(v),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Aa(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Rg(this._lContainer,a);l&&(ta(ad(this._lContainer),a),bc(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Rg(this._lContainer,a);return l&&null!=ta(ad(this._lContainer),a)?new $h(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function Aa(s){return s[8]}function ad(s){return s[8]||(s[8]=[])}function bu(s,o){let a;const l=o[s.index];if(Bi(l))a=l;else{let d;if(8&s.type)d=en(l);else{const p=o[11];d=p.createComment("");const v=ar(s,o);el(p,Lf(p,v),d,function Xr(s,o){return un(s)?s.nextSibling(o):o.nextSibling}(p,v),!1)}o[s.index]=a=ol(l,o,d,s),Gg(o,a)}return new El(a,s,o)}class ud{constructor(o){this.queryList=o,this.matches=null}clone(){return new ud(this.queryList)}setDirty(){this.queryList.setDirty()}}class Sa{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<l;p++){const v=a.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new Sa(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==vb(o,a).matches&&this.queries[a].setDirty()}}class db{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class Pv{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(o,d);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new Pv(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Ov{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Ov(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(o,a,JD(a,p)),this.matchTNodeWithReadOption(o,a,Xe(a,o,p,!1,!1))}else l===od?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Xe(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===jh||d===vl||d===od&&4&a.type)this.addMatch(a.index,-2);else{const p=Xe(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function JD(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function XD(s,o,a,l){return-1===a?function hb(s,o){return 11&s.type?yl(s,o):4&s.type?Sp(s,o):null}(o,s):-2===a?function eT(s,o,a){return a===jh?yl(o,s):a===od?Sp(o,s):a===vl?bu(o,s):void 0}(s,o,l):lo(s,s[1],a,o)}function kv(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const p=s.data,v=a.matches,w=[];for(let I=0;I<v.length;I+=2){const A=v[I];w.push(A<0?null:XD(o,p[A],v[I+1],a.metadata.read))}d.matches=w}return d.matches}function Fv(s,o,a,l){const d=s.queries.getByIndex(a),p=d.matches;if(null!==p){const v=kv(s,o,d,a);for(let w=0;w<p.length;w+=2){const I=p[w];if(I>0)l.push(v[w/2]);else{const A=p[w+1],x=o[-I];for(let k=10;k<x.length;k++){const U=x[k];U[17]===U[3]&&Fv(U[1],U,A,l)}if(null!==x[9]){const k=x[9];for(let U=0;U<k.length;U++){const Q=k[U];Fv(Q[1],Q,A,l)}}}}}return l}function fb(s){const o=Ae(),a=Ft(),l=ql();Za(l+1);const d=vb(a,l);if(s.dirty&&no(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?Fv(a,o,l,[]):kv(a,o,d,l);s.reset(p,Zw),s.notifyOnChanges()}return!0}return!1}function gb(s,o,a,l){const d=Ft();if(d.firstCreatePass){const p=gn();(function Vv(s,o,a){null===s.queries&&(s.queries=new Pv),s.queries.track(new Ov(o,a))})(d,new db(o,a,l),p.index),function _b(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function Lv(s,o,a){const l=new Ap(4==(4&a));Nc(s,o,l,l.destroy),null===o[19]&&(o[19]=new Sa),o[19].queries.push(new ud(l))}(d,Ae(),a)}function mb(){return function yb(s,o){return s[19].queries[o].queryList}(Ae(),ql())}function vb(s,o){return s.queries.getByIndex(o)}function Ma(...s){}const bl=new wn("Application Initializer");let Yv=(()=>{class s{constructor(a){this.appInits=a,this.resolve=Ma,this.reject=Ma,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(T_(p))a.push(p);else if(A_(p)){const v=new Promise((w,I)=>{p.subscribe({complete:w,error:I})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Ve(bl,8))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const kb=new wn("AppId",{providedIn:"root",factory:function Fb(){return`${Qv()}${Qv()}${Qv()}`}});function Qv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Op=new wn("Platform Initializer"),kp=new wn("Platform ID"),Hr=new wn("appBootstrapListener");let Lb=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac}),s})();const Xm=new wn("LocaleId",{providedIn:"root",factory:()=>bt(Xm,mt.Optional|mt.SkipSelf)||function lT(){return"undefined"!=typeof $localize&&$localize.locale||yu}()}),cT=new wn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ub{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let hT=(()=>{class s{compileModuleSync(a){return new ib(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=bs(Yn(a).declarations).reduce((v,w)=>{const I=Zn(w);return I&&v.push(new bp(I)),v},[]);return new Ub(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const jb=(()=>Promise.resolve(0))();function Fp(s){"undefined"==typeof Zone?jb.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ss{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ao(!1),this.onMicrotaskEmpty=new Ao(!1),this.onStable=new Ao(!1),this.onError=new Ao(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function $b(){let s=Bt.requestAnimationFrame,o=Bt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Xv(s){const o=()=>{!function pT(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Bt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Gb(s),s.isCheckStableRunning=!0,Hb(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Gb(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,p,v,w)=>{try{return gT(s),a.invokeTask(d,p,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),qb(s)}},onInvoke:(a,l,d,p,v,w,I)=>{try{return gT(s),a.invoke(d,p,v,w,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),qb(s)}},onHasTask:(a,l,d,p)=>{a.hasTask(d,p),l===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,Gb(s),Hb(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,d,p)=>(a.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ss.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ss.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,o,fT,Ma,Ma);try{return p.runTask(v,a,l)}finally{p.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const fT={};function Hb(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Gb(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function gT(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function qb(s){s._nesting--,Hb(s)}class mT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ao,this.onMicrotaskEmpty=new Ao,this.onStable=new Ao,this.onError=new Ao}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let yT=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ss.assertNotInAngularZone(),Fp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Fp(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Ve(ss))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac}),s})(),_T=(()=>{class s{constructor(){this._applications=new Map,zb.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return zb.findTestabilityInTree(this,a,l)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac}),s})();class jS{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function $S(s){zb=s}let xa,zb=new jS;const Kb=new wn("AllowMultipleToken");class vT{constructor(o,a){this.name=o,this.token=a}}function Ws(s,o,a=[]){const l=`Platform: ${o}`,d=new wn(l);return(p=[])=>{let v=Yb();if(!v||v.injector.get(Kb,!1))if(s)s(a.concat(p).concat({provide:d,useValue:!0}));else{const w=a.concat(p).concat({provide:d,useValue:!0},{provide:rs,useValue:"platform"});!function Gr(s){if(xa&&!xa.destroyed&&!xa.injector.get(Kb,!1))throw new Pe(400,"");xa=s.get(Qb);const o=s.get(Op,null);o&&o.forEach(a=>a())}(Ni.create({providers:w,name:l}))}return function ey(s){const o=Yb();if(!o)throw new Pe(401,"");return o}()}}function Yb(){return xa&&!xa.destroyed?xa:null}let Qb=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function ET(s,o){let a;return a="noop"===s?new mT:("zone.js"===s?void 0:s)||new ss({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:ss,useValue:w}];return w.run(()=>{const A=Ni.create({providers:I,parent:this.injector,name:a.moduleType.name}),x=a.create(A),k=x.injector.get(vc,null);if(!k)throw new Pe(402,"");return w.runOutsideAngular(()=>{const U=w.onError.subscribe({next:Q=>{k.handleError(Q)}});x.onDestroy(()=>{t0(this._modules,x),U.unsubscribe()})}),function Jb(s,o,a){try{const l=a();return T_(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(k,w,()=>{const U=x.injector.get(Yv);return U.runInitializers(),U.donePromise.then(()=>(function yD(s){Ut(s,"Expected localeId to be defined"),"string"==typeof s&&(Tm=s.toLowerCase().replace(/_/g,"-"))}(x.injector.get(Xm,yu)||yu),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const d=Xb({},l);return function HS(s,o,a){const l=new ib(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const l=a.injector.get(e0);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Pe(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pe(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Ve(Ni))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac}),s})();function Xb(s,o){return Array.isArray(o)?o.reduce(Xb,s):Object.assign(Object.assign({},s),o)}let e0=(()=>{class s{constructor(a,l,d,p,v){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new O.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),I=new O.y(A=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{ss.assertNotInAngularZone(),Fp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{ss.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{x.unsubscribe(),k.unsubscribe()}});this.isStable=(0,ae.T)(w,I.pipe((0,ne.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Pe(405,"");let d;d=a instanceof qw?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const p=function Wb(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Ip),w=d.create(Ni.NULL,[],l||d.selector,p),I=w.location.nativeElement,A=w.injector.get(yT,null),x=A&&w.injector.get(_T);return A&&x&&x.registerApplication(I,A),w.onDestroy(()=>{this.detachView(w.hostView),t0(this.components,w),x&&x.unregisterApplication(I)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Pe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;t0(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Hr,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(Ve(ss),Ve(Ni),Ve(vc),Ve(Hm),Ve(Yv))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function t0(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let Lp=!0,n0=!1;function wT(){return n0=!0,Lp}function r0(){if(n0)throw new Error("Cannot enable prod mode after platform setup.");Lp=!1}let bT=(()=>{class s{}return s.__NG_ELEMENT_ID__=IT,s})();function IT(s){return function CT(s,o,a){if(Ed(s)&&!a){const l=ur(s.index,o);return new $h(l,l)}return 47&s.type?new $h(o[16],o):null}(gn(),Ae(),16==(16&s))}class u0{constructor(){}supports(o){return Jf(o)}create(o){return new xT(o)}}const l0=(s,o)=>o;class xT{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||l0}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,p=null;for(;a||l;){const v=!l||a&&a.currentIndex<oy(l,d,p)?a:l,w=oy(v,d,p),I=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{p||(p=[]);const A=w-d,x=I-d;if(A!=x){for(let U=0;U<A;U++){const Q=U<p.length?p[U]:p[U]=0,_e=Q+U;x<=_e&&_e<A&&(p[U]=Q+1)}p[v.previousIndex]=x-A}}w!==I&&o(v,w,I)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Jf(o))throw new Pe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)p=o[w],v=this._trackByFn(w,p),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,p,v,w)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,v,w),l=!0),a=a._next}else d=0,function GC(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[bh()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,w=>{v=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,w,v,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new RT(a,l),p,d),o}_verifyReinsertion(o,a,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Up),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Up),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class RT{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class NT{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Up{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new NT,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function oy(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class ay{constructor(){}supports(o){return o instanceof Map||f_(o)}create(){return new c0}}class c0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||f_(o)))throw new Pe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const l=new oI(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class oI{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function aI(){return new uy([new u0])}let uy=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||aI()),deps:[[s,new hi,new Lr]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Pe(901,"")}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:aI}),s})();function uI(){return new h0([new ay])}let h0=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||uI()),deps:[[s,new hi,new Lr]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new Pe(901,"")}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:uI}),s})();const kT=Ws(null,"core",[{provide:kp,useValue:"unknown"},{provide:Qb,deps:[Ni]},{provide:_T,deps:[]},{provide:Lb,deps:[]}]);let FT=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Ve(e0))},s.\u0275mod=Sr({type:s}),s.\u0275inj=zt({}),s})()},3942:(tt,we,P)=>{P.d(we,{Z:()=>Pe});var g=P(2090),X=P(4859),O=P(9681),ae=P(1877);class ne{constructor(pe,Ce){this._delegate=pe,this.firebase=Ce,(0,O._addComponent)(pe,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(pe,Ce=O._DEFAULT_ENTRY_NAME){var ze;this._delegate.checkDestroyed();const Qe=this._delegate.container.getProvider(pe);return!Qe.isInitialized()&&"EXPLICIT"===(null===(ze=Qe.getComponent())||void 0===ze?void 0:ze.instantiationMode)&&Qe.initialize(),Qe.getImmediate({identifier:Ce})}_removeServiceInstance(pe,Ce=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(Ce)}_addComponent(pe){(0,O._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,O._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function he(){const Ue=function se(Ue){const pe={},Ce={__esModule:!0,initializeApp:function De(Be,$={}){const ve=O.initializeApp(Be,$);if((0,g.r3)(pe,ve.name))return pe[ve.name];const Z=new Ue(ve,Ce);return pe[ve.name]=Z,Z},app:Qe,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function be(Be){const $=Be.name,ve=$.replace("-compat","");if(O._registerComponent(Be)&&"PUBLIC"===Be.type){const Z=(re=Qe())=>{if("function"!=typeof re[ve])throw ue.create("invalid-app-argument",{appName:$});return re[ve]()};void 0!==Be.serviceProps&&(0,g.ZB)(Z,Be.serviceProps),Ce[ve]=Z,Ue.prototype[ve]=function(...re){return this._getService.bind(this,$).apply(this,Be.multipleInstances?re:[])}}return"PUBLIC"===Be.type?Ce[ve]:null},removeApp:function ze(Be){delete pe[Be]},useAsService:function je(Be,$){return"serverAuth"===$?null:$},modularAPIs:O}};function Qe(Be){if(!(0,g.r3)(pe,Be=Be||O._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:Be});return pe[Be]}return Ce.default=Ce,Object.defineProperty(Ce,"apps",{get:function Ee(){return Object.keys(pe).map(Be=>pe[Be])}}),Qe.App=Ue,Ce}(ne);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function pe(Ce){(0,g.ZB)(Ue,Ce)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Ue}(),j=new ae.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pe=H;!function Me(Ue){(0,O.registerVersion)("@firebase/app-compat","0.1.26",Ue)}()},9681:(tt,we,P)=>{P.r(we),P.d(we,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Fi,_DEFAULT_ENTRY_NAME:()=>Ut,_addComponent:()=>on,_addOrOverwriteComponent:()=>Xt,_apps:()=>tn,_clearComponents:()=>ls,_components:()=>Pn,_getProvider:()=>zt,_registerComponent:()=>Tr,_removeServiceInstance:()=>Vt,deleteApp:()=>mt,getApp:()=>ni,getApps:()=>bi,initializeApp:()=>Rs,onLog:()=>On,registerVersion:()=>Mn,setLogLevel:()=>Zs});var g=P(5861),X=P(4859),O=P(1877),ae=P(2090),ne=P(8766);class ge{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map(Re=>{if(function ue(G){const J=G.getComponent();return"VERSION"===(null==J?void 0:J.type)}(Re)){const et=Re.getImmediate();return`${et.library}/${et.version}`}return null}).filter(Re=>Re).join(" ")}}const se="@firebase/app",H=new O.Yd("@firebase/app"),Ut="[DEFAULT]",Je={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tn=new Map,Pn=new Map;function on(G,J){try{G.container.addComponent(J)}catch(Re){H.debug(`Component ${J.name} failed to register with FirebaseApp ${G.name}`,Re)}}function Xt(G,J){G.container.addOrOverwriteComponent(J)}function Tr(G){const J=G.name;if(Pn.has(J))return H.debug(`There were multiple attempts to register component ${J}.`),!1;Pn.set(J,G);for(const Re of tn.values())on(Re,G);return!0}function zt(G,J){const Re=G.container.getProvider("heartbeat").getImmediate({optional:!0});return Re&&Re.triggerHeartbeat(),G.container.getProvider(J)}function Vt(G,J,Re=Ut){zt(G,J).clearInstance(Re)}function ls(){Pn.clear()}const fr=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ar{constructor(J,Re,et){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},Re),this._name=Re.name,this._automaticDataCollectionEnabled=Re.automaticDataCollectionEnabled,this._container=et,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}const Fi="9.8.2";function Rs(G,J={}){"object"!=typeof J&&(J={name:J});const Re=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},J),et=Re.name;if("string"!=typeof et||!et)throw fr.create("bad-app-name",{appName:String(et)});const ft=tn.get(et);if(ft){if((0,ae.vZ)(G,ft.options)&&(0,ae.vZ)(Re,ft.config))return ft;throw fr.create("duplicate-app",{appName:et})}const Tt=new X.H0(et);for(const Ct of Pn.values())Tt.addComponent(Ct);const fn=new Ar(G,Re,Tt);return tn.set(et,fn),fn}function ni(G=Ut){const J=tn.get(G);if(!J)throw fr.create("no-app",{appName:G});return J}function bi(){return Array.from(tn.values())}function mt(G){return ri.apply(this,arguments)}function ri(){return(ri=(0,g.Z)(function*(G){const J=G.name;tn.has(J)&&(tn.delete(J),yield Promise.all(G.container.getProviders().map(Re=>Re.delete())),G.isDeleted=!0)})).apply(this,arguments)}function Mn(G,J,Re){var et;let ft=null!==(et=Je[G])&&void 0!==et?et:G;Re&&(ft+=`-${Re}`);const Tt=ft.match(/\s|\//),fn=J.match(/\s|\//);if(Tt||fn){const Ct=[`Unable to register library "${ft}" with version "${J}":`];return Tt&&Ct.push(`library name "${ft}" contains illegal characters (whitespace or "/")`),Tt&&fn&&Ct.push("and"),fn&&Ct.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void H.warn(Ct.join(" "))}Tr(new X.wA(`${ft}-version`,()=>({library:ft,version:J}),"VERSION"))}function On(G,J){if(null!==G&&"function"!=typeof G)throw fr.create("invalid-log-argument");(0,O.Am)(G,J)}function Zs(G){(0,O.Ub)(G)}const Hn="firebase-heartbeat-store";let Ii=null;function Lo(){return Ii||(Ii=(0,ne.X3)("firebase-heartbeat-database",1,{upgrade:(G,J)=>{0===J&&G.createObjectStore(Hn)}}).catch(G=>{throw fr.create("storage-open",{originalErrorMessage:G.message})})),Ii}function ut(){return(ut=(0,g.Z)(function*(G){try{return(yield Lo()).transaction(Hn).objectStore(Hn).get(si(G))}catch(J){throw fr.create("storage-get",{originalErrorMessage:J.message})}})).apply(this,arguments)}function Et(G,J){return pr.apply(this,arguments)}function pr(){return(pr=(0,g.Z)(function*(G,J){try{const et=(yield Lo()).transaction(Hn,"readwrite");return yield et.objectStore(Hn).put(J,si(G)),et.done}catch(Re){throw fr.create("storage-set",{originalErrorMessage:Re.message})}})).apply(this,arguments)}function si(G){return`${G.name}!${G.options.appId}`}class gr{constructor(J){this.container=J,this._heartbeatsCache=null;const Re=this.container.getProvider("app").getImmediate();this._storage=new q(Re),this._heartbeatsCachePromise=this._storage.read().then(et=>(this._heartbeatsCache=et,et))}triggerHeartbeat(){var J=this;return(0,g.Z)(function*(){const et=J.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ft=mr();if(null===J._heartbeatsCache&&(J._heartbeatsCache=yield J._heartbeatsCachePromise),J._heartbeatsCache.lastSentHeartbeatDate!==ft&&!J._heartbeatsCache.heartbeats.some(Tt=>Tt.date===ft))return J._heartbeatsCache.heartbeats.push({date:ft,agent:et}),J._heartbeatsCache.heartbeats=J._heartbeatsCache.heartbeats.filter(Tt=>{const fn=new Date(Tt.date).valueOf();return Date.now()-fn<=2592e6}),J._storage.overwrite(J._heartbeatsCache)})()}getHeartbeatsHeader(){var J=this;return(0,g.Z)(function*(){if(null===J._heartbeatsCache&&(yield J._heartbeatsCachePromise),null===J._heartbeatsCache||0===J._heartbeatsCache.heartbeats.length)return"";const Re=mr(),{heartbeatsToSend:et,unsentEntries:ft}=function V(G,J=1024){const Re=[];let et=G.slice();for(const ft of G){const Tt=Re.find(fn=>fn.agent===ft.agent);if(Tt){if(Tt.dates.push(ft.date),W(Re)>J){Tt.dates.pop();break}}else if(Re.push({agent:ft.agent,dates:[ft.date]}),W(Re)>J){Re.pop();break}et=et.slice(1)}return{heartbeatsToSend:Re,unsentEntries:et}}(J._heartbeatsCache.heartbeats),Tt=(0,ae.L)(JSON.stringify({version:2,heartbeats:et}));return J._heartbeatsCache.lastSentHeartbeatDate=Re,ft.length>0?(J._heartbeatsCache.heartbeats=ft,yield J._storage.overwrite(J._heartbeatsCache)):(J._heartbeatsCache.heartbeats=[],J._storage.overwrite(J._heartbeatsCache)),Tt})()}}function mr(){return(new Date).toISOString().substring(0,10)}class q{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var J=this;return(0,g.Z)(function*(){return(yield J._canUseIndexedDBPromise)&&(yield function Gt(G){return ut.apply(this,arguments)}(J.app))||{heartbeats:[]}})()}overwrite(J){var Re=this;return(0,g.Z)(function*(){var et;if(yield Re._canUseIndexedDBPromise){const Tt=yield Re.read();return Et(Re.app,{lastSentHeartbeatDate:null!==(et=J.lastSentHeartbeatDate)&&void 0!==et?et:Tt.lastSentHeartbeatDate,heartbeats:J.heartbeats})}})()}add(J){var Re=this;return(0,g.Z)(function*(){var et;if(yield Re._canUseIndexedDBPromise){const Tt=yield Re.read();return Et(Re.app,{lastSentHeartbeatDate:null!==(et=J.lastSentHeartbeatDate)&&void 0!==et?et:Tt.lastSentHeartbeatDate,heartbeats:[...Tt.heartbeats,...J.heartbeats]})}})()}}function W(G){return(0,ae.L)(JSON.stringify({version:2,heartbeats:G})).length}!function Ie(G){Tr(new X.wA("platform-logger",J=>new ge(J),"PRIVATE")),Tr(new X.wA("heartbeat",J=>new gr(J),"PRIVATE")),Mn(se,"0.7.25",G),Mn(se,"0.7.25","esm2017"),Mn("fire-js","")}("")},4859:(tt,we,P)=>{P.d(we,{wA:()=>O,H0:()=>se});var g=P(5861),X=P(2090);class O{constructor(H,j,te){this.name=H,this.instanceFactory=j,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const ae="[DEFAULT]";class ne{constructor(H,j){this.name=H,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const j=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(j)){const te=new X.BH;if(this.instancesDeferred.set(j,te),this.isInitialized(j)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:j});qe&&te.resolve(qe)}catch(qe){}}return this.instancesDeferred.get(j).promise}getImmediate(H){var j;const te=this.normalizeInstanceIdentifier(null==H?void 0:H.identifier),qe=null!==(j=null==H?void 0:H.optional)&&void 0!==j&&j;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Me){if(qe)return null;throw Me}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function ue(he){return"EAGER"===he.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(j){}for(const[j,te]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(j);try{const Me=this.getOrInitializeService({instanceIdentifier:qe});te.resolve(Me)}catch(Me){}}}}clearInstance(H=ae){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,g.Z)(function*(){const j=Array.from(H.instances.values());yield Promise.all([...j.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...j.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=ae){return this.instances.has(H)}getOptions(H=ae){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:j={}}=H,te=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:te,options:j});for(const[Me,Pe]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Me)&&Pe.resolve(qe);return qe}onInit(H,j){var te;const qe=this.normalizeInstanceIdentifier(j),Me=null!==(te=this.onInitCallbacks.get(qe))&&void 0!==te?te:new Set;Me.add(H),this.onInitCallbacks.set(qe,Me);const Pe=this.instances.get(qe);return Pe&&H(Pe,qe),()=>{Me.delete(H)}}invokeOnInitCallbacks(H,j){const te=this.onInitCallbacks.get(j);if(te)for(const qe of te)try{qe(H,j)}catch(Me){}}getOrInitializeService({instanceIdentifier:H,options:j={}}){let te=this.instances.get(H);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(he=H,he===ae?void 0:he),options:j}),this.instances.set(H,te),this.instancesOptions.set(H,j),this.invokeOnInitCallbacks(te,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,te)}catch(qe){}var he;return te||null}normalizeInstanceIdentifier(H=ae){return this.component?this.component.multipleInstances?H:ae:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class se{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const j=this.getProvider(H.name);if(j.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);j.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const j=new ne(H,this);return this.providers.set(H,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(tt,we,P)=>{P.d(we,{in:()=>X,Yd:()=>ue,Ub:()=>se,Am:()=>he});const g=[];var X=(()=>{return(H=X||(X={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",X;var H})();const O={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ae=X.INFO,ne={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},ge=(H,j,...te)=>{if(j<H.logLevel)return;const qe=(new Date).toISOString(),Me=ne[j];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Me](`[${qe}]  ${H.name}:`,...te)};class ue{constructor(j){this.name=j,this._logLevel=ae,this._logHandler=ge,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in X))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?O[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...j),this._logHandler(this,X.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...j),this._logHandler(this,X.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,X.INFO,...j),this._logHandler(this,X.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,X.WARN,...j),this._logHandler(this,X.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...j),this._logHandler(this,X.ERROR,...j)}}function se(H){g.forEach(j=>{j.setLogLevel(H)})}function he(H,j){for(const te of g){let qe=null;j&&j.level&&(qe=O[j.level]),te.userLogHandler=null===H?null:(Me,Pe,...Ue)=>{const pe=Ue.map(Ce=>{if(null==Ce)return null;if("string"==typeof Ce)return Ce;if("number"==typeof Ce||"boolean"==typeof Ce)return Ce.toString();if(Ce instanceof Error)return Ce.message;try{return JSON.stringify(Ce)}catch(ze){return null}}).filter(Ce=>Ce).join(" ");Pe>=(null!=qe?qe:Me.logLevel)&&H({level:X[Pe].toLowerCase(),message:pe,args:Ue,type:Me.name})}}}},8766:(tt,we,P)=>{P.d(we,{Lj:()=>De,X3:()=>Qe});var g=P(5861);let O,ae;const ue=new WeakMap,se=new WeakMap,he=new WeakMap,H=new WeakMap,j=new WeakMap;let Me={get($,ve,Z){if($ instanceof IDBTransaction){if("done"===ve)return se.get($);if("objectStoreNames"===ve)return $.objectStoreNames||he.get($);if("store"===ve)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return Ce($[ve])},set:($,ve,Z)=>($[ve]=Z,!0),has:($,ve)=>$ instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in $};function pe($){return"function"==typeof $?function Ue($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($)?function(...ve){return $.apply(ze(this),ve),Ce(ue.get(this))}:function(...ve){return Ce($.apply(ze(this),ve))}:function(ve,...Z){const re=$.call(ze(this),ve,...Z);return he.set(re,ve.sort?ve.sort():[ve]),Ce(re)}}($):($ instanceof IDBTransaction&&function qe($){if(se.has($))return;const ve=new Promise((Z,re)=>{const ee=()=>{$.removeEventListener("complete",me),$.removeEventListener("error",oe),$.removeEventListener("abort",oe)},me=()=>{Z(),ee()},oe=()=>{re($.error||new DOMException("AbortError","AbortError")),ee()};$.addEventListener("complete",me),$.addEventListener("error",oe),$.addEventListener("abort",oe)});se.set($,ve)}($),(($,ve)=>ve.some(Z=>$ instanceof Z))($,function ne(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy($,Me):$)}function Ce($){if($ instanceof IDBRequest)return function te($){const ve=new Promise((Z,re)=>{const ee=()=>{$.removeEventListener("success",me),$.removeEventListener("error",oe)},me=()=>{Z(Ce($.result)),ee()},oe=()=>{re($.error),ee()};$.addEventListener("success",me),$.addEventListener("error",oe)});return ve.then(Z=>{Z instanceof IDBCursor&&ue.set(Z,$)}).catch(()=>{}),j.set(ve,$),ve}($);if(H.has($))return H.get($);const ve=pe($);return ve!==$&&(H.set($,ve),j.set(ve,$)),ve}const ze=$=>j.get($);function Qe($,ve,{blocked:Z,upgrade:re,blocking:ee,terminated:me}={}){const oe=indexedDB.open($,ve),Oe=Ce(oe);return re&&oe.addEventListener("upgradeneeded",ht=>{re(Ce(oe.result),ht.oldVersion,ht.newVersion,Ce(oe.transaction))}),Z&&oe.addEventListener("blocked",()=>Z()),Oe.then(ht=>{me&&ht.addEventListener("close",()=>me()),ee&&ht.addEventListener("versionchange",()=>ee())}).catch(()=>{}),Oe}function De($,{blocked:ve}={}){const Z=indexedDB.deleteDatabase($);return ve&&Z.addEventListener("blocked",()=>ve()),Ce(Z).then(()=>{})}const Ee=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],je=new Map;function Be($,ve){if(!($ instanceof IDBDatabase)||ve in $||"string"!=typeof ve)return;if(je.get(ve))return je.get(ve);const Z=ve.replace(/FromIndex$/,""),re=ve!==Z,ee=be.includes(Z);if(!(Z in(re?IDBIndex:IDBObjectStore).prototype)||!ee&&!Ee.includes(Z))return;const me=function(){var oe=(0,g.Z)(function*(Oe,...ht){const Ht=this.transaction(Oe,ee?"readwrite":"readonly");let Ut=Ht.store;return re&&(Ut=Ut.index(ht.shift())),(yield Promise.all([Ut[Z](...ht),ee&&Ht.done]))[0]});return function(ht){return oe.apply(this,arguments)}}();return je.set(ve,me),me}!function Pe($){Me=$(Me)}($=>hP(dP({},$),{get:(ve,Z,re)=>Be(ve,Z)||$.get(ve,Z,re),has:(ve,Z)=>!!Be(ve,Z)||$.has(ve,Z)}))},5861:(tt,we,P)=>{function g(O,ae,ne,ge,ue,se,he){try{var H=O[se](he),j=H.value}catch(te){return void ne(te)}H.done?ae(j):Promise.resolve(j).then(ge,ue)}function X(O){return function(){var ae=this,ne=arguments;return new Promise(function(ge,ue){var se=O.apply(ae,ne);function he(j){g(se,ge,ue,he,H,"next",j)}function H(j){g(se,ge,ue,he,H,"throw",j)}he(void 0)})}}P.d(we,{Z:()=>X})}},tt=>{tt(tt.s=412)}]);